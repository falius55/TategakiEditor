<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">js/object.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~AbstractHierarchy.html">AbstractHierarchy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~Char.html">Char</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~CommandLine.html">CommandLine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~ConvertContainer.html">ConvertContainer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~ConvertView.html">ConvertView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~Cursor.html">Cursor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~Directory.html">Directory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~EOL.html">EOL</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~File.html">File</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~FileList.html">FileList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~InputBuffer.html">InputBuffer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~InputChar.html">InputChar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~Menu.html">Menu</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~Paragraph.html">Paragraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~Row.html">Row</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/object.js~SentenceContainer.html">SentenceContainer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Util">Util</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">js/object.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;;
/*
 *	&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x6307;&#x5411;
 *	Paragraph,Row,Char&#x306F;&#x3001;&#x89AA;&#x3084;&#x5B50;&#x306E;&#x53C2;&#x7167;&#x3092;&#x4FDD;&#x6301;&#x3059;&#x308B;&#x306E;&#x306F;&#x3082;&#x3061;&#x308D;&#x3093;&#x306E;&#x3053;&#x3068;&#x3001;&#x6728;&#x69CB;&#x9020;&#x3092;&#x7121;&#x8996;&#x3057;&#x3066;&#x7570;&#x306A;&#x308B;&#x89AA;&#x3067;&#x3042;&#x3063;&#x3066;&#x3082;&#x6B21;&#x3068;&#x524D;&#x306B;&#x3042;&#x308B;&#x540C;&#x7A2E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x53C2;&#x7167;&#x3092;&#x6301;&#x3064;
 *	Dom&#x8981;&#x7D20;&#x306E;&#x53C2;&#x7167;&#x3092;&#x6301;&#x3064;&#x30B3;&#x30F3;&#x30DD;&#x30B8;&#x30B7;&#x30E7;&#x30F3;
 *	&#x8981;&#x7D20;&#x306E;&#x518D;&#x5229;&#x7528;&#x306E;&#x305F;&#x3081;&#x3001;&#x8981;&#x7D20;&#x4F5C;&#x6210;&#x306E;&#x307F;&#x30AF;&#x30ED;&#x30FC;&#x30B8;&#x30E3;&#x3067;&#x884C;&#x3046;
 *	jQyery&#x306E;&#x4F7F;&#x7528;&#x7B87;&#x6240;:width(),height(),addwheelEventlistener(),removeWheelEventListener(),bootstrap&#x95A2;&#x4FC2;
 */
console.log(&apos;object.js&apos;);
/**
 * @namespace
 */
export const Util = {
	/**
	 * baseArray&#x3092;cnt&#x500B;&#x305A;&#x3064;&#x306E;&#x914D;&#x5217;&#x306B;&#x5206;&#x5272;&#x3059;&#x308B;
	 */
	splitArray:function(baseArray,cnt) {
		&apos;use strict&apos;;
		const b = baseArray.length;
		const newArray = [];

		for (let i = 0,j,p; i &lt; Math.ceil(b/cnt); i++) {
			j = i*cnt;
			p = baseArray.slice(j,j+cnt);
			newArray.push(p);
		}
		return newArray;
	},
	copyArray:function (array) {
		&apos;use strict&apos;;
		const retArray = [];
		for (let value of array) {
			retArray.push(value);
		}
		return retArray;
	},
	// &#xFF12;&#x70B9;&#x9593;&#x306E;&#x8DDD;&#x96E2;&#x3092;&#x8A08;&#x7B97;&#x3059;&#x308B;
	computeDistanceP2P:function(x1,y1,x2,y2) {
		// &#xFF12;&#x4E57;&#x3092;&#x4F7F;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;&#x623B;&#x308A;&#x5024;&#x306F;&#x5FC5;&#x305A;&#x6B63;&#x306E;&#x6570;&#x306B;&#x306A;&#x308B;
		// &#x221A;{(b.x - a.x)^2+ (b.y - a.y)^2}
		return Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));
	},
	post: function (url,data,callback) {
		const xhr = new XMLHttpRequest();
		xhr.responseType = &apos;json&apos;;
		xhr.open(&apos;POST&apos;,url);
		xhr.setRequestHeader(&apos;Content-Type&apos;,&apos;application/x-www-form-urlencoded;charset=UTF-8&apos;);

		let sendData = &apos;&apos;;
		for (let name in data) {
			if (sendData != &apos;&apos;) {
				sendData += &apos;&amp;&apos;;
			}
			sendData += name + &apos;=&apos; + encodeURI(data[name]).replace(/&amp;/g,&apos;%26&apos;);
		}

		xhr.addEventListener(&apos;load&apos;,function (e) {
			if (xhr.response) {
				callback(xhr.response);
			} else {
				console.log(&apos;unsuccess&apos;);
			}
		});
		xhr.addEventListener(&apos;abort&apos;,function (e) {
			console.log(&apos;abort&apos;);
		});
		xhr.send(sendData);
	}
};
// closer
/**
 * @memberof Util
 */
Util.createCharElement = (function () {
	const eCharTemplate = document.createElement(&apos;span&apos;);
	eCharTemplate.classList.add(&apos;char&apos;);
	eCharTemplate.classList.add(&apos;display&apos;);

	return function (data) {
		const eChar = eCharTemplate.cloneNode(true);
		const char = data[&apos;char&apos;];
		const classArr = data[&apos;decolation&apos;];
		const fontSize = data[&apos;fontSize&apos;];
		eChar.textContent = char;
		eChar.dataset.fontSize = fontSize || &apos;auto&apos;;
		for (let decolation of classArr) {
			eChar.classList.add(decolation);
		}

		// &#x6587;&#x5B57;&#x306E;&#x7A2E;&#x985E;&#x306B;&#x5FDC;&#x3058;&#x3066;&#x4ED8;&#x4E0E;&#x3059;&#x308B;&#x30AF;&#x30E9;&#x30B9;
		if (/[&#x3002;&#x3001;,.,]/.test(char))
			eChar.classList.add(&apos;vertical-dot&apos;);
		else if (/[&#x300C;&#x300E;]/.test(char))
			eChar.classList.add(&apos;vertical-before-kagi-bracket&apos;);
		else if (/[&#x300D;&#x300F;]/.test(char))
			eChar.classList.add(&apos;vertical-after-kagi-bracket&apos;);
		else if (/[&#xFF08;\[&lt;\{&#x3010;\(&#xFF3B;&#x3008;]/.test(char))
			eChar.classList.add(&apos;vertical-before-bracket&apos;);
		else if (/[\)\]&gt;\}&#x3011;&#xFF09;&#xFF3D;&#x3009;]/.test(char))
			eChar.classList.add(&apos;vertical-after-bracket&apos;);
		else if (/[-&#x30FC;&#x2015;&#x301C;]/.test(char))
			eChar.classList.add(&apos;character-line&apos;);
		else if (/[a-z]/.test(char))
			eChar.classList.add(&apos;alphabet&apos;);
		else if (/[&#xFF11;-&#xFF19;]/.test(char))
			eChar.classList.add(&apos;number&apos;);
		else if (/[&#x3063;&#x3083;&#x3085;&#x3087;&#x3041;&#x3043;&#x3045;&#x3047;&#x3049;&#x30A1;&#x30A3;&#x30A5;&#x30A7;&#x30A9;&#x30C3;&#x30E3;&#x30E5;&#x30E7;]/.test(char))
			eChar.classList.add(&apos;yoin&apos;);

		return eChar;
	}
})();
Util.createRowElement = (function () {
	/*
	 *	[												 // &#x5404;&#x6587;&#x5B57;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
	 *		{											 // &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 *			&quot;char&quot;:&quot;&#x3042;&quot;,
	 *			&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	 *		},
	 *		{
	 *			&quot;char&quot;:&quot;&#x3044;&quot;,
	 *			&quot;decolation&quot;:null
	 *		}
	 *	]
	 */
	const eRowTemplate = document.createElement(&apos;div&apos;);
	eRowTemplate.classList.add(&apos;row&apos;);
	eRowTemplate.classList.add(&apos;display&apos;);
	const eEOL = document.createElement(&apos;span&apos;);
	eEOL.classList.add(&apos;char&apos;);
	eEOL.classList.add(&apos;EOL&apos;);
	eEOL.classList.add(&apos;display&apos;);
	eRowTemplate.appendChild(eEOL);

	return function (data) {
		const eRow = eRowTemplate.cloneNode(true);
		return eRow;
	}
})();
Util.createParagraphElement = (function () {
	/*
	 * 			[
	 * 				[&quot;decolation-textalign-center&quot;],		 // &#x6BB5;&#x843D;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x304C;&#x6587;&#x5B57;&#x5217;&#x306E;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
	 * 				[												 // &#x5404;&#x6587;&#x5B57;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
	 * 					{											 // &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * 						&quot;char&quot;:&quot;&#x3042;&quot;,
	 * 						&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	 * 					},
	 * 					{
	 * 						&quot;char&quot;:&quot;&#x3044;&quot;,
	 * 						&quot;decolation&quot;:[]
	 * 					}
	 * 					]
	 * 			]
	 */
	const eParagraphTemplate = document.createElement(&apos;div&apos;);
	eParagraphTemplate.classList.add(&apos;paragraph&apos;);

	return function (data) {
		const eParagraph = eParagraphTemplate.cloneNode(true);
		// &#x6BB5;&#x843D;&#x305D;&#x306E;&#x3082;&#x306E;&#x306B;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;
		for (let className of data[0]) {
			eParagraph.classList.add(className);
		}
		return eParagraph;
	}
})();
Util.createCharPosElement = (function () {
	const eCharPosTemplate = document.createElement(&apos;span&apos;);
	eCharPosTemplate.classList.add(&apos;char-pos&apos;);

	return function (strLen) {
		const flagment = document.createDocumentFragment();
		for (var i = 0; i &lt;= strLen; i++) { // EOL&#x306E;&#x5206;&#x3082;&#x4F5C;&#x6210;&#x3059;&#x308B;
			const eCharPos = eCharPosTemplate.cloneNode(true);
			flagment.appendChild(eCharPos);
		}
		return flagment;
	}
})();
Util.createConvertViewElement = (function () {
	const eViewTemplate = document.createElement(&apos;div&apos;);
	eViewTemplate.classList.add(&apos;convert-view&apos;);

	return function () {
		&apos;use strict&apos;;
		const eView = eViewTemplate.cloneNode(true);
		return eView;
	}
})();
// file_list&#x306E;&#x4E2D;&#x306B;&#x5165;&#x308C;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x884C;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
Util.createFileElement = (function () {
	/*
	 * &#x4F5C;&#x6210;&#x4F8B;
	 * &lt;li&gt;
	 * &lt;a class=&quot;file&quot;
	 * data-type=&quot;file&quot;
	 * href=&quot;#&quot;
	 * data-file-id=&quot;1&quot;
	 * data-file-name=&quot;filename&quot;
	 * &gt;
	 * filename
	 * &lt;/a&gt;
	 * &lt;/li&gt;
	 */
	const eFileTemplate = document.createElement(&apos;li&apos;);
	eFileTemplate.classList.add(&apos;fileLi&apos;);
	const eFileLinkTemplate = document.createElement(&apos;a&apos;);
	eFileLinkTemplate.classList.add(&apos;file&apos;);
	eFileLinkTemplate.dataset.type = &apos;file&apos;;
	eFileLinkTemplate.href = &apos;#&apos;;

	return function (id,filename) {
		const eFile = eFileTemplate.cloneNode(true);
		const eFileLink = eFileLinkTemplate.cloneNode(true);
		eFileLink.dataset.fileId = id;
		eFileLink.dataset.fileName = filename;
		eFileLink.textContent = filename;
		eFile.appendChild(eFileLink);
		return eFile;
	}
})();
// file_list&#x306E;&#x4E2D;&#x306B;&#x5165;&#x308C;&#x308B;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x884C;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
Util.createDirectoryElement = (function () {
	/*
	 * &#x4F5C;&#x6210;&#x4F8B;
	 * &lt;li&gt;
	 * 	&lt;a class=&quot;directory&quot;
	 * 	data-type=&quot;directory&quot;
	 * 	data-toggle=&quot;collapse&quot;
	 * 	data-directory-id=&quot;1&quot;
	 * 	data-directory-name=&quot;filename.directoryname&quot;
	 * 	href=&quot;#directory1&quot;
	 * 	&gt;
	 *		&lt;span
	 *		class=&quot;glyphicon glyphicon-folder-close&quot;
	 *		aria-hidden=&quot;true&quot;&gt;
	 *		&lt;/span&gt;
	 *		filename.directoryname
	 *		&lt;/a&gt;
	 *
	 *		&lt;div class=&quot;collapse&quot; id=&quot;directory1&quot;&gt;
	 *			&lt;div class=&quot;well&quot;&gt;
	 *				&lt;ul&gt;
	 *					&lt;li&gt;filename&lt;/li&gt;
	 *					&lt;li&gt;filename&lt;/li&gt;
	 *					&lt;li&gt;filename&lt;/li&gt;
	 *				&lt;/ul&gt;
	 *			&lt;/div&gt;
	 *		&lt;/div&gt;
	 *	&lt;/li&gt;
	 */
	const eDirectoryTemplete = document.createElement(&apos;li&apos;);
	eDirectoryTemplete.classList.add(&apos;dirLi&apos;);
	const eDirLinkTemplete = document.createElement(&apos;a&apos;);
	eDirLinkTemplete.classList.add(&apos;directory&apos;);
	eDirLinkTemplete.dataset.type = &apos;directory&apos;;
	eDirLinkTemplete.dataset.toggle = &apos;collapse&apos;;
	eDirLinkTemplete.innerHTML = &apos;&lt;span class=&quot;glyphicon glyphicon-folder-close&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&apos;; // &#x30D5;&#x30A9;&#x30EB;&#x30C0;&#x30A2;&#x30A4;&#x30B3;&#x30F3;

	const eCollapseTemplate = document.createElement(&apos;div&apos;);
	const eInnerUlTemplate = document.createElement(&apos;ul&apos;);
	const eWellTemplate = document.createElement(&apos;div&apos;);
	eCollapseTemplate.classList.add(&apos;collapse&apos;);
	eWellTemplate.classList.add(&apos;well&apos;);

	return function (id,innerData) {
		const eDirectory = eDirectoryTemplete.cloneNode(true);
		const eDirLink = eDirLinkTemplete.cloneNode(true);
		const directoryname = innerData.directoryname;
		eDirLink.dataset.directoryId = id;
		eDirLink.dataset.directoryName = directoryname;
		eDirLink.href = &apos;#directory&apos; + id;
		eDirLink.insertAdjacentHTML(&apos;beforeend&apos;,directoryname);

		eDirectory.appendChild(eDirLink);

		const eCollapse = eCollapseTemplate.cloneNode(true);
		const eInnerUl = eInnerUlTemplate.cloneNode(true);
		const eWell = eWellTemplate.cloneNode(true);
		eCollapse.id = &apos;directory&apos; + id;

		// eInnerUl&#x5185;&#x306B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x3092;&#x52A0;&#x3048;&#x308B;

		eCollapse.appendChild(eWell);
		eWell.appendChild(eInnerUl);

		eDirectory.appendChild(eCollapse); // &#x30B3;&#x30E9;&#x30D7;&#x30B9;&#x3082;&#x52A0;&#x3048;&#x308B;
		return eDirectory;
	}
})();

// Class
/**
 * &#x30E1;&#x30CB;&#x30E5;&#x30FC;&#x30D0;&#x30FC;&#x3092;&#x62C5;&#x5F53;&#x3059;&#x308B;&#x30AF;&#x30E9;&#x30B9;
 */
export class Menu {
	/**
	 * @param {SentenceContainer} sentenceContainer &#x5BFE;&#x5FDC;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;
	 */
	constructor(sentenceContainer) {
		this._sentenceContainer = sentenceContainer;
		this._fontSizeInputElem = document.getElementById(&apos;fontsize_input&apos;);
		this._confStrLenElem = document.getElementById(&apos;conf_str_len&apos;);
		this._confRowLenElem = document.getElementById(&apos;conf_row_len&apos;);
		this.addEventListeners();
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x3053;&#x306E;Menu&#x304C;&#x5BFE;&#x5FDC;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {SentenceContainer} SentenceContainer&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	sentenceContainer() {
		return this._sentenceContainer;
	}
	/**
	 * &#x8A2D;&#x5B9A;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x306E;&#x6587;&#x5B57;&#x6570;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x8FD4;&#x3059;
	 * @return {Element} &#x6587;&#x5B57;&#x6570;&#x8A2D;&#x5B9A;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;DOM&#x8981;&#x7D20;
	 */
	confStrLenElem() {
		return this._confStrLenElem;
	}
	/**
	 * &#x8A2D;&#x5B9A;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x306E;&#x884C;&#x6570;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x8FD4;&#x3059;
	 * @return {Element} &#x884C;&#x6570;&#x8A2D;&#x5B9A;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;DOM&#x8981;&#x7D20;
	 */
	confRowLenElem() {
		return this._confRowLenElem;
	}

	// --Status

	/**
	 * &#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306B;&#x5024;&#x3092;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;&#x5024;&#x3092;&#x8FD4;&#x3059;
	 * @param {number string} [opt_newSize] input&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x5024;(&#x6570;&#x5024;&#x304B;&#x3001;&#x6587;&#x5B57;&#x5217;&#x306E;&apos;auto&apos;)
	 * @return {Menu number string} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;&#x5024;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;&#x3002;&apos;auto&apos;&#x306E;&#x5834;&#x5408;&#x306F;&#x6587;&#x5B57;&#x5217;&#x3067;&#x8FD4;&#x3059;)
	 */
	fontSizeInput(opt_newSize) {
		if (opt_newSize === undefined) {
			return this._fontSizeInputElem.value === &apos;auto&apos; ? &apos;auto&apos; : parseInt(this._fontSizeInputElem.value);
		} else {
			this._fontSizeInputElem.value = opt_newSize;
			return this;
		}
	}
	/**
	 * &#x73FE;&#x5728;&#x30A2;&#x30AF;&#x30C6;&#x30A3;&#x30D6;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x6587;&#x5B57;&#x88C5;&#x98FE;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x914D;&#x5217;&#x306B;&#x3059;&#x308B;
	 * @return {string[]} &#x73FE;&#x5728;&#x30A2;&#x30AF;&#x30C6;&#x30A3;&#x30D6;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x6587;&#x5B57;&#x88C5;&#x98FE;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x914D;&#x5217;
	 */
	charDecolations() {
		const ret = [];
		if (this.boldButton()) {
			ret.push(&apos;decolation-font-bold&apos;);
		}
		if (this.italicButton()) {
			ret.push(&apos;decolation-font-italic&apos;);
		}
		if (this.colorButton() !== &apos;black&apos;) {
			ret.push(&apos;decolation-color-&apos;+ this.colorButton());
		}
		return ret;
	}
	/**
	 * &#x73FE;&#x5728;&#x306E;&#x8A2D;&#x5B9A;&#x60C5;&#x5831;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	 * @return {object} &#x73FE;&#x5728;&#x306E;&#x8A2D;&#x5B9A;&#x60C5;&#x5831;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	configueData() {
		const ret = {};
		ret[&quot;strLen&quot;] = this.confStrLenElem().value;
		ret[&quot;rowLen&quot;] = this.confRowLenElem().value;
		return ret;
	}

	// --Style

	/**
	 * &#x6587;&#x5B57;&#x8272;&#x30DC;&#x30BF;&#x30F3;&#x306B;&#x8272;&#x3092;&#x4ED8;&#x3051;&#x308B;
	 *     &#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x73FE;&#x5728;&#x306E;&#x8272;&#x3092;&#x53D6;&#x5F97;
	 * @param {string} [opt_color] &#x6587;&#x5B57;&#x8272;&#x30DC;&#x30BF;&#x30F3;&#x306B;&#x3064;&#x3051;&#x308B;&#x8272;&#x306E;&#x540D;&#x524D;
	 * @return {Menu string} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;) &#x73FE;&#x5728;&#x306E;&#x6587;&#x5B57;&#x8272;&#x30DC;&#x30BF;&#x30F3;&#x306B;&#x4ED8;&#x3044;&#x3066;&#x3044;&#x308B;&#x8272;&#x306E;&#x540D;&#x524D;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	colorButton(opt_color) {
		const eColorButton = document.getElementById(&apos;color_btn&apos;);
		if(opt_color) {
			const oldColor = eColorButton.className.match(/select-\S+/);
			const newColor = opt_color;
			if (oldColor) eColorButton.classList.remove(oldColor[0]);
			if (newColor === &apos;black&apos;) return this;
			eColorButton.classList.add(&apos;select-&apos;+ newColor);
			return this;
		}
		if (opt_color === undefined) {
			const color = eColorButton.className.match(/select-(\S+)/);
			return color ? color[1] : &apos;black&apos;;
		}
	}
	/**
	 * &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306E;&#x6587;&#x5B57;&#x8272;&#x3092;&#x5909;&#x3048;&#x308B;
	 * @param {string} color &#x65B0;&#x3057;&#x3044;&#x6587;&#x5B57;&#x8272;
	 * @return {Menu} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addColor(color) {
		const chars = this.sentenceContainer().selectChars(true);
		for (let char of chars) {
			char.color(color);
		}
		return this;
	}
	/**
	 * &#x592A;&#x5B57;&#x30DC;&#x30BF;&#x30F3;&#x306E;&#x30AA;&#x30F3;&#x30AA;&#x30D5;&#x3092;&#x5207;&#x308A;&#x66FF;&#x3048;&#x308B; &#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x3001;&#x73FE;&#x5728;&#x306E;&#x592A;&#x5B57;&#x30DC;&#x30BF;&#x30F3;&#x306E;&#x30AA;&#x30F3;&#x30AA;&#x30D5;&#x3092;bool&#x5024;&#x3067;&#x8FD4;&#x3059;
	 * @param {boolean} [opt_bl] true&#x3067;&#x592A;&#x5B57;&#x30DC;&#x30BF;&#x30F3;&#x3092;&#x30AA;&#x30F3;&#x306B;&#x3059;&#x308B;&#x3002;false&#x3067;&#x30AA;&#x30D5;&#x306B;&#x3059;&#x308B;
	 * @return {Menu boolean} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;) &#x73FE;&#x5728;&#x306E;&#x592A;&#x5B57;&#x30DC;&#x30BF;&#x30F3;&#x306E;&#x72B6;&#x614B;(&#x5F15;&#x6570;&#x7701;&#x7565;&#x306E;&#x5834;&#x5408;)
	 */
	boldButton(opt_bl) {
		const eButton = document.getElementById(&apos;btn-bold&apos;);
		if (opt_bl === undefined) {
			return eButton.classList.contains(&apos;active&apos;);
		}
		if (opt_bl) {
			eButton.classList.add(&apos;active&apos;);
		} else {
			eButton.classList.remove(&apos;active&apos;);
		}
		return this;
	}
	/**
	 * &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x592A;&#x5B57;&#x306B;&#x3059;&#x308B;&#x3002;&#x307E;&#x305F;&#x306F;&#x592A;&#x5B57;&#x3092;&#x5916;&#x3059;
	 * @param {boolean} bl true&#x3067;&#x592A;&#x5B57;&#x306B;&#x3059;&#x308B;&#x3002;false&#x3067;&#x5916;&#x3059;
	 * @return {Menu} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	bold(bl) {
		const chars = this.sentenceContainer().selectChars(true);
		for (let char of chars) {
			char.bold(bl);
		}
		return this;
	}
	/**
	 * &#x659C;&#x4F53;&#x30DC;&#x30BF;&#x30F3;&#x306E;&#x30AA;&#x30F3;&#x30AA;&#x30D5;&#x3092;&#x5207;&#x308A;&#x66FF;&#x3048;&#x308B; &#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x3001;&#x73FE;&#x5728;&#x306E;&#x659C;&#x4F53;&#x30DC;&#x30BF;&#x30F3;&#x306E;&#x30AA;&#x30F3;&#x30AA;&#x30D5;&#x3092;bool&#x5024;&#x3067;&#x8FD4;&#x3059;
	 * @param {boolean} [opt_bl] true&#x3067;&#x592A;&#x5B57;&#x30DC;&#x30BF;&#x30F3;&#x3092;&#x30AA;&#x30F3;&#x306B;&#x3059;&#x308B;&#x3002;false&#x3067;&#x30AA;&#x30D5;&#x306B;&#x3059;&#x308B;
	 * @return {Menu boolean} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;) &#x73FE;&#x5728;&#x306E;&#x659C;&#x4F53;&#x30DC;&#x30BF;&#x30F3;&#x306E;&#x72B6;&#x614B;(&#x5F15;&#x6570;&#x7701;&#x7565;&#x306E;&#x5834;&#x5408;)
	 */
	italicButton(opt_bl) {
		const eButton = document.getElementById(&apos;btn-italic&apos;);
		if (opt_bl === undefined) {
			return eButton.classList.contains(&apos;active&apos;);
		}
		if (opt_bl) {
			eButton.classList.add(&apos;active&apos;);
		} else {
			eButton.classList.remove(&apos;active&apos;);
		}
		return this;
	}
	/**
	 * &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x659C;&#x4F53;&#x306B;&#x3059;&#x308B;&#x3002;&#x307E;&#x305F;&#x306F;&#x592A;&#x5B57;&#x3092;&#x5916;&#x3059;
	 * @param {boolean} bl true&#x3067;&#x659C;&#x4F53;&#x306B;&#x3059;&#x308B;&#x3002;false&#x3067;&#x5916;&#x3059;
	 * @return {Menu} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	italic(bl) {
		const chars = this.sentenceContainer().selectChars(true);
		for (let char of chars) {
			char.italic(bl);
		}
		return this;
	}
	/**
	 * &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x3092;&#x5909;&#x66F4;&#x3059;&#x308B;
	 * @param {number} size &#x65B0;&#x3057;&#x3044;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;
	 * @return {Menu} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	fontSize(size) {
		const chars = this.sentenceContainer().selectChars(true);
		for (let char of chars) {
			char.fontSize(size);
		}
		this.sentenceContainer().cordinate().checkKinsoku().changeDisplay().breakPage().printInfo();
		return this;
	}
	// &apos;center&apos;,&apos;left&apos;,&apos;right&apos;
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x3042;&#x308B;&#x6BB5;&#x843D;&#x306E;text-align&#x3092;&#x5909;&#x66F4;&#x3059;&#x308B;
	 * @param {string} align &apos;center&apos;,&apos;left&apos;,&apos;right&apos;&#x306E;&#x3044;&#x305A;&#x308C;&#x304B;
	 * @return {Menu} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	align(align) {
		const cursorParagraph = this.sentenceContainer().cursor().getParagraph();
		cursorParagraph.align(align);
		return this;
	}

	/**
	 * &#x30E1;&#x30CB;&#x30E5;&#x30FC;&#x306E;&#x5404;&#x30B3;&#x30F3;&#x30DD;&#x30FC;&#x30CD;&#x30F3;&#x30C8;&#x306B;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30EA;&#x30B9;&#x30CA;&#x30FC;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;
	 *     new&#x30DC;&#x30BF;&#x30F3;&#x3001;save&#x30DC;&#x30BF;&#x30F3;&#x3001;delete&#x30DC;&#x30BF;&#x30F3;&#x3001;&#x958B;&#x304F;&#x30DC;&#x30BF;&#x30F3;&#x3001;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x306E;&#x958B;&#x9589;&#x3001;
	 *     &#x6587;&#x5B57;&#x8272;&#x30DC;&#x30BF;&#x30F3;&#x3001;&#x6587;&#x5B57;&#x8272;&#x30C9;&#x30ED;&#x30C3;&#x30D7;&#x30C0;&#x30A6;&#x30F3;&#x3001;&#x592A;&#x5B57;&#x30DC;&#x30BF;&#x30F3;&#x3001;&#x659C;&#x4F53;&#x30DC;&#x30BF;&#x30F3;&#x3001;
	 * 	 text-align&#x30DC;&#x30BF;&#x30F3;&#x3001;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x306E;&#x30C9;&#x30ED;&#x30C3;&#x30D7;&#x30C0;&#x30A6;&#x30F3;&#x3001;&#x8A2D;&#x5B9A;&#x30E2;&#x30FC;&#x30C0;&#x30EB;
	 * @return {Menu} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addEventListeners() {
		// &#x30E1;&#x30CB;&#x30E5;&#x30FC;&#x30DC;&#x30BF;&#x30F3;
		document.getElementById(&apos;menu_new&apos;).addEventListener(&apos;click&apos;,function (e) {  this.sentenceContainer().newFile(); }.bind(this),false);
		document.getElementById(&apos;menu_save&apos;).addEventListener(&apos;click&apos;,function (e) { this.sentenceContainer().saveFile(); }.bind(this),false);
		document.getElementById(&apos;menu_delete&apos;).addEventListener(&apos;click&apos;,function (e) { this.sentenceContainer().fileList().currentFile().delete(); }.bind(this),false);
		document.getElementById(&apos;modal_fileopen_link&apos;).addEventListener(&apos;click&apos;,function (e) {
			const filterInputElem = this.sentenceContainer().fileList().filterInputElem();
			// &#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x304C;&#x958B;&#x304F;&#x306E;&#x306F;&#x30D6;&#x30FC;&#x30C8;&#x30B9;&#x30C8;&#x30E9;&#x30C3;&#x30D7;&#x3067;&#x884C;&#x308F;&#x308C;&#x308B;&#x306E;&#x3067;&#x3001;&#x305D;&#x306E;&#x524D;&#x51E6;&#x7406;&#x3060;&#x3051;&#x3092;&#x884C;&#x3046;
			filterInputElem.value = &apos;&apos;;
			filterInputElem.focus();
			this.sentenceContainer().fileList().resetList();
		}.bind(this),false);

		// &#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x958B;&#x9589;
		$(&apos;div.modal&apos;).on(&apos;shown.bs.modal&apos;,function (e) {
			this.sentenceContainer().removeKeydownEventListener();
			if (this.sentenceContainer().inputBuffer().isDisplay()) {
				this.sentenceContainer().inputBuffer().empty().hide();
			}
		}.bind(this));
		$(&apos;div.modal&apos;).on(&apos;hidden.bs.modal&apos;,function (e) {
			if (this.sentenceContainer().command().isActive()) { return; }
			this.sentenceContainer().addKeydownEventListener();
		}.bind(this));

		// &#x30D1;&#x30EC;&#x30C3;&#x30C8;&#x30DC;&#x30BF;&#x30F3;
		// &#x6587;&#x5B57;&#x8272;&#x30DC;&#x30BF;&#x30F3;
		document.getElementById(&apos;color_btn&apos;).addEventListener(&apos;click&apos;,function (e) {
			this.addColor(this.colorButton());
		}.bind(this),false);
		// &#x6587;&#x5B57;&#x8272;&#x30C9;&#x30ED;&#x30C3;&#x30D7;&#x30C0;&#x30A6;&#x30F3;
		this.addColorSelectClickEvent();

		// bold italic
		document.getElementById(&apos;btn-bold&apos;).addEventListener(&apos;click&apos;,function (e) {
			const eBtn = document.getElementById(&apos;btn-bold&apos;);
			eBtn.classList.toggle(&apos;active&apos;);
			this.bold(this.boldButton());
		}.bind(this),false);
		document.getElementById(&apos;btn-italic&apos;).addEventListener(&apos;click&apos;,function (e) {
			const eBtn = document.getElementById(&apos;btn-italic&apos;);
			eBtn.classList.toggle(&apos;active&apos;);
			this.italic(this.italicButton());
		}.bind(this),false);

		// align
		this.addAlignClickEvent();

		// font size
		this.addFontSizeEvnet();

		// configue modal
		this.addConfigueEvent();

		return this;
	}

	/**
	 * &#x6587;&#x5B57;&#x8272;(&#x30C9;&#x30ED;&#x30C3;&#x30D7;&#x30C0;&#x30A6;&#x30F3;&#x306E;&#x65B9;)&#x3092;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3059;&#x308B;&#x3068;&#x30DC;&#x30BF;&#x30F3;&#x306E;&#x8272;&#x3068;&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306E;&#x6587;&#x5B57;&#x8272;&#x304C;&#x5909;&#x308F;&#x308B;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;
	 *     querySelectorAll()&#x3067;&#x30C9;&#x30ED;&#x30C3;&#x30D7;&#x30C0;&#x30A6;&#x30F3;&#x306E;&#x5404;&#x8981;&#x7D20;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x3066;&#x30EB;&#x30FC;&#x30D7;&#x3067;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3057;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x3001;html&#x3068;css&#x306E;&#x307F;&#x5909;&#x66F4;&#x3059;&#x308B;&#x3053;&#x3068;&#x3067;&#x6271;&#x3046;&#x8272;&#x3092;&#x5897;&#x3084;&#x3059;&#x3053;&#x3068;&#x304C;&#x53EF;&#x80FD;
	 * @return {Menu} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addColorSelectClickEvent() {
		const eSelectColors = document.querySelectorAll(&apos;#color_dropdown a&apos;);
		for (let i = 0,eSelColor; eSelColor = eSelectColors[i]; i++) {
			const color = eSelColor.dataset.color;
			eSelColor.addEventListener(&apos;click&apos;,function (e) {
				this.colorButton(color);
				this.addColor(color);
			}.bind(this),false);
		}
		return this;
	}
	/**
	 * text-align&#x30DC;&#x30BF;&#x30F3;&#x3092;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3059;&#x308B;&#x3068;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x3042;&#x308B;&#x6BB5;&#x843D;&#x306E;text-align&#x304C;&#x5909;&#x66F4;&#x3055;&#x308C;&#x308B;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;
	 * @return {Menu} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addAlignClickEvent() {
		const eAligns = document.querySelectorAll(&apos;#align_btns button&apos;);
		for (let i = 0,eAlign; eAlign = eAligns[i]; i++) {
			eAlign.addEventListener(&apos;click&apos;,function (e) {
				const align = eAlign.id.match(/text_btn_(\S+)/);
				this.align(align[1]);
			}.bind(this),false);
		}
		return this;
	}

	// font size

	/**
	 * &#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x306E;&#x30C9;&#x30ED;&#x30C3;&#x30D7;&#x30C0;&#x30A6;&#x30F3;&#x3092;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3059;&#x308B;&#x3068;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x306E;input&#x306E;&#x6570;&#x5024;&#x304C;&#x5909;&#x66F4;&#x3055;&#x308C;&#x3001;&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306E;&#x6587;&#x5B57;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x304C;&#x5909;&#x66F4;&#x3055;&#x308C;&#x308B;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;
	 *     querySelectorAll()&#x3067;&#x30C9;&#x30ED;&#x30C3;&#x30D7;&#x30C0;&#x30A6;&#x30F3;&#x306E;&#x5404;&#x8981;&#x7D20;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x3066;&#x30EB;&#x30FC;&#x30D7;&#x3067;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3057;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x3001;html&#x3068;css&#x306E;&#x307F;&#x5909;&#x66F4;&#x3059;&#x308B;&#x3053;&#x3068;&#x3067;&#x6271;&#x3046;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x3092;&#x5897;&#x3084;&#x3059;&#x3053;&#x3068;&#x304C;&#x53EF;&#x80FD;
	 * @return {Menu} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addFontSizeEvnet() {
		const eFontSizeDropdowns = document.querySelectorAll(&apos;#fontsize_dropdown a&apos;);
		for (let i = 0,eFontSize; eFontSize = eFontSizeDropdowns[i]; i++) {
			eFontSize.addEventListener(&apos;click&apos;,function (e) {
				const size = parseInt(e.target.dataset.size) || &apos;auto&apos;;
				this.fontSizeInput(size);
				this.fontSize(size);
			}.bind(this),false);
		}
		return this;
	}

	/**
	 * &#x8A2D;&#x5B9A;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x306E;input&#x3068;save&#x30DC;&#x30BF;&#x30F3;&#x3001;reset&#x30DC;&#x30BF;&#x30F3;&#x306B;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;
	 * @return {Menu} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addConfigueEvent() {
		document.getElementById(&apos;btn_conf_save&apos;).addEventListener(&apos;click&apos;,function (e) {
			const strLen = parseInt(this.confStrLenElem().value || 18);
			const rowLen = parseInt(this.confRowLenElem().value || 40);
			this.sentenceContainer().strLenOnRow(strLen).rowLenOnPage(rowLen);
			$(&apos;#configue_modal&apos;).modal(&apos;hide&apos;);
		}.bind(this),false);
		document.getElementById(&apos;btn_conf_reset&apos;).addEventListener(&apos;click&apos;,function (e) { // html&#x4E0A;&#x3067;type=&quot;reset&quot;&#x306B;&#x3059;&#x308B;&#x3068;&#x3001;&#x5143;&#x306B;&#x623B;&#x3059;&#x3068;&#x3044;&#x3046;&#x3088;&#x308A;input&#x3092;&#x7A7A;&#x306B;&#x3057;&#x3066;&#x3057;&#x307E;&#x3046;
			this.confStrLenElem().value = this.sentenceContainer().strLenOnRow();
			this.confRowLenElem().value = this.sentenceContainer().rowLenOnPage();
		}.bind(this),false);
		// input&#x304B;&#x3089;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x304B;&#x3089;&#x5916;&#x308C;&#x305F;&#x969B;&#x306B;&#x3001;&#x4E0D;&#x6B63;&#x306A;&#x6587;&#x5B57;&#x304C;&#x5165;&#x529B;&#x3055;&#x308C;&#x3066;&#x3044;&#x305F;&#x3089;&#x5143;&#x306B;&#x623B;&#x3059;
		this.confStrLenElem().addEventListener(&apos;focusout&apos;,function (e) {
			if (!/^[0-9]+$/.test(this.confStrLenElem().value)) {
				this.confStrLenElem().value = this.sentenceContainer().strLenOnRow();
			}
		}.bind(this),false);
		this.confRowLenElem().addEventListener(&apos;focusout&apos;,function (e) {
			if (!/^[0-9]+$/.test(this.confRowLenElem().value)) {
				this.confRowLenElem().value = this.sentenceContainer().rowLenOnPage();
			}
		}.bind(this),false);
		return this;
	}
}
/**
 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class CommandLine {
	/**
	 * @param {SentenceContainer} sentenceContainer &#x5BFE;&#x5FDC;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;
	 */
	constructor(sentenceContainer) {
		this._elem = document.getElementById(&apos;command&apos;);
		this._sentenceContainer = sentenceContainer;
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x81EA;&#x8EAB;&#x306E;HTML&#x8981;&#x7D20;&#x3092;&#x8FD4;&#x3059;
	 * @return {Element} &#x81EA;&#x8EAB;&#x306E;HTML&#x8981;&#x7D20;
	 */
	elem() {
		return this._elem;
	}
	/**
	 * &#x5BFE;&#x5FDC;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x53C2;&#x7167;&#x3092;&#x8FD4;&#x3059;
	 * @return {SentenceContainer} &#x5BFE;&#x5FDC;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;
	 */
	sentenceContainer() {
		return this._sentenceContainer;
	}
	/**
	 * &#x64CD;&#x4F5C;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x53C2;&#x7167;&#x3092;&#x8FD4;&#x3059;
	 * @return {FileList} &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	fileList() {
		return this.sentenceContainer().fileList();
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x304C;&#x30A2;&#x30AF;&#x30C6;&#x30A3;&#x30D6;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} true=&#x30A2;&#x30AF;&#x30C6;&#x30A3;&#x30D6;&#x3001;false=&#x30A2;&#x30AF;&#x30C6;&#x30A3;&#x30D6;&#x3067;&#x306F;&#x306A;&#x3044;
	 */
	isActive() {
		return this.elem().classList.contains(&apos;active&apos;);
	}

	// --Style

	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x3092;&#x30A2;&#x30AF;&#x30C6;&#x30A3;&#x30D6;&#x306B;&#x3059;&#x308B;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	active() {
		this.elem().classList.add(&apos;active&apos;);
		return this;
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x3092;&#x975E;&#x30A2;&#x30AF;&#x30C6;&#x30A3;&#x30D6;&#x306B;&#x3059;&#x308B;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	unActive() {
		this.elem().classList.remove(&apos;active&apos;);
		return this;
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x306B;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x3092;&#x4E0E;&#x3048;&#x308B;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	focus() {
		this.elem().focus();
		return this;
	}
	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x3092;&#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x7528;&#x306B;&#x958B;&#x304F;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	displayFileModal() {
		this.fileList().$modal().addClass(&apos;command-modal&apos;).modal();
		$(&apos;.modal-backdrop.fade.in&apos;).addClass(&apos;none_modal-backdrop&apos;); // &#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x30A6;&#x30A3;&#x30F3;&#x30C9;&#x30A6;&#x8868;&#x793A;&#x6642;&#x306E;&#x534A;&#x900F;&#x660E;&#x80CC;&#x666F;&#x3092;&#x898B;&#x3048;&#x306A;&#x304F;&#x3059;&#x308B;
		return this;
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x7528;&#x306B;&#x958B;&#x3044;&#x305F;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x3092;&#x9589;&#x3058;&#x308B;&#x3002;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x691C;&#x7D22;&#x304C;&#x3055;&#x308C;&#x3066;&#x3044;&#x3066;&#x3082;&#x30EA;&#x30BB;&#x30C3;&#x30C8;&#x3059;&#x308B;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	hideFileModal() {
		if (this.fileList().isOpen()) {
			// &#x3042;&#x3089;&#x304B;&#x3058;&#x3081;bootstrap&#x3088;&#x308A;&#x5148;&#x56DE;&#x308A;&#x3057;&#x3066;style&#x9069;&#x7528;&#x3067;&#x975E;&#x8868;&#x793A;&#x306B;&#x3057;&#x3066;&#x304A;&#x304B;&#x306A;&#x3051;&#x308C;&#x3070;&#x3001;&#x6D88;&#x3048;&#x308B;&#x524D;&#x306B;&#x4E00;&#x77AC;&#x4E2D;&#x592E;&#x8868;&#x793A;&#x306B;&#x306A;&#x3063;&#x3066;&#x3057;&#x307E;&#x3046;
			this.fileList().$modal()
				.attr(&apos;style&apos;,&apos;display: none;&apos;)
				.removeClass(&apos;command-modal&apos;)
				.modal(&apos;hide&apos;);
		}
		this.fileList().resetList();

		return this;
	}


	// --DOM

	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x306B;&#x5024;&#x3092;&#x8A2D;&#x5B9A;&#x3059;&#x308B;
	 * @param {string} text &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x5024;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	val(text) {
		if (text === undefined) {
			return this.elem().value;
		} else {
			this.elem().value = text;
			return this;
		}
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E2;&#x30FC;&#x30C9;&#x3092;&#x59CB;&#x3081;&#x308B;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	start() {
		this.active();
		this.sentenceContainer().removeKeydownEventListener();
		this.focus().val(&apos;:&apos;);
		this.addKeyupEventListener().addFocusoutEventListener();
		return this;
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E2;&#x30FC;&#x30C9;&#x3092;&#x7D42;&#x4E86;&#x3059;&#x308B;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	stop() {
		this.unActive();
		this.removeKeyupEventListener().removeFocusoutEventListener();
		this.sentenceContainer().addKeydownEventListener();
		this.hideFileModal();
		return this;
	}

	// --&#x30A4;&#x30D9;&#x30F3;&#x30C8;

	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x306E;input&#x306B;keyup&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;&#x3002;&#x91CD;&#x306D;&#x304C;&#x3051;&#x306F;&#x7121;&#x52B9;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addKeyupEventListener() {
		if (this._keyupArg) return this;
		this._keyupArg = this.onKeyup.bind(this); // remove&#x3059;&#x308B;&#x3068;&#x304D;&#x3068;&#x5F15;&#x6570;&#x3092;&#x540C;&#x4E00;&#x306B;&#x3059;&#x308B;&#x305F;&#x3081;&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x306B;&#x4FDD;&#x6301;&#x3059;&#x308B;(&#x305D;&#x308C;&#x305E;&#x308C;&#x3067;bind&#x3059;&#x308B;&#x3068;&#x7570;&#x306A;&#x308B;&#x53C2;&#x7167;&#x306B;&#x306A;&#x308B;&#xFF1F;)
		document.addEventListener(&apos;keyup&apos;,this._keyupArg);
		return this;
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x306E;input&#x3078;&#x306E;keyup&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x9664;&#x53BB;&#x3059;&#x308B;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeKeyupEventListener() {
		if (!this._keyupArg) return this;
		document.removeEventListener(&apos;keyup&apos;,this._keyupArg);
		this._keyupArg = null;
		return this;
	}
	/**
	 * @private
	 * keyup&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x524D;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3044;&#x3001;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;
	 */
	onKeyup(e) {
		&apos;use strict&apos;;
		let keycode;
		if (document.all) {
			// IE
			keycode = e.keyCode
		} else {
			// IE&#x4EE5;&#x5916;
			keycode = e.which;
		}
		if (keycode === 123) { return; } // F12&#x306E;&#x307F;&#x30D6;&#x30E9;&#x30A6;&#x30B6;&#x30B7;&#x30E7;&#x30FC;&#x30C8;&#x30AB;&#x30C3;&#x30C8;&#x30AD;&#x30FC;
		this.runKeyup(e,keycode);
		// &#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x306E;&#x52D5;&#x4F5C;&#x3092;&#x7121;&#x52B9;&#x5316;&#x3059;&#x308B;
		e.preventDefault();
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x306E;keyup&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;
	 * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @param {number} keycode &#x62BC;&#x4E0B;&#x3055;&#x308C;&#x305F;&#x30AD;&#x30FC;&#x306E;&#x30AD;&#x30FC;&#x30B3;&#x30FC;&#x30C9;
	 */
	runKeyup(e,keycode) {
		if (keycode == 13) {
			// enter
			this.runCommand();
			this.stop();
			e.stopPropagation(); // &#x89AA;&#x8981;&#x7D20;&#x3078;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x4F1D;&#x64AD;(&#x30D0;&#x30D6;&#x30EA;&#x30F3;&#x30B0;)&#x3092;&#x6B62;&#x3081;&#x308B;&#x3002;&#x305D;&#x3046;&#x3057;&#x306A;&#x3051;&#x308C;&#x3070;&#x5148;&#x306B;addeventlistener&#x3092;&#x3057;&#x3066;&#x3057;&#x307E;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;document&#x306B;&#x307E;&#x3067;&#x30A8;&#x30F3;&#x30BF;&#x30FC;&#x30AD;&#x30FC;&#x304C;&#x6E21;&#x3063;&#x3066;&#x3057;&#x307E;&#x3044;&#x6539;&#x884C;&#x3055;&#x308C;&#x3066;&#x3057;&#x307E;&#x3046;&#x3002;
		} else if (keycode == 27 || this.val() == &apos;&apos;) {
			// Esc
			// &#x3042;&#x308B;&#x3044;&#x306F;&#x5168;&#x6587;&#x5B57;&#x524A;&#x9664;
			this.stop();
			e.stopPropagation();
		} else {
			// :e&#x306A;&#x3069;&#x306E;&#x5F8C;&#x306B;&#x9014;&#x4E2D;&#x307E;&#x3067;&#x5F15;&#x6570;&#x3092;&#x6253;&#x3066;&#x3070;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x691C;&#x7D22;&#x30C0;&#x30A4;&#x30A2;&#x30ED;&#x30B0;&#x304C;&#x51FA;&#x308B;&#x3088;&#x3046;&#x306B;&#x3059;&#x308B;
			const command = this.val().split(&apos; &apos;).length &gt; 1 ? this.val().split(&apos; &apos;) : this.val().split(&apos;&#x3000;&apos;); // &#x5168;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3082;&#x533A;&#x5207;&#x308A;&#x3068;&#x3057;&#x3066;&#x6709;&#x52B9;&#x3002;&#x305F;&#x3060;&#x3057;&#x3001;&#x534A;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3068;&#x306E;&#x6DF7;&#x5728;&#x306F;&#x73FE;&#x72B6;&#x4E0D;&#x53EF;
			switch (command[0]) {
				case &apos;:e&apos;:
				case &apos;:o&apos;:
				case &apos;:open&apos;:
				case &apos;:mv&apos;:
				case &apos;:delete&apos;:
				case &apos;:del&apos;:
				case &apos;:d&apos;:
				case &apos;:&#x3048;&apos;:
				case &apos;:&#x304A;&apos;:
				case &apos;:&#x304A;&#x307A;&#xFF4E;&apos;:
				case &apos;:&#xFF4D;&#xFF56;&apos;:
				case &apos;:&#x3067;&#x3047;&#x3066;&apos;:
				case &apos;:&#x3067;&#xFF4C;&apos;:
				case &apos;:&#xFF44;&apos;:
						 if (keycode !== 8 &amp;&amp; command[1] &amp;&amp; !($(&apos;body&apos;).hasClass(&apos;modal-open&apos;))) {
							 // &#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x30A6;&#x30A3;&#x30F3;&#x30C9;&#x30A6;&#x3092;&#x8868;&#x793A;&#x3059;&#x308B;
							 this.displayFileModal();
							 this.fileList().filter(command[1]);
						 } else if (keycode === 8 &amp;&amp; !(command[1])) {
							 // BS&#x3092;&#x62BC;&#x3057;&#x305F;&#x7D50;&#x679C;&#x3001;&#x5F15;&#x6570;&#x304C;&#x306A;&#x304F;&#x306A;&#x3063;&#x305F;
							 this.hideFileModal();
						 } else if (command[1] &amp;&amp; command[2]) {
							 // &#x5F15;&#x6570;&#x3075;&#x305F;&#x3064;&#x76EE;
							 this.fileList().filter(command[2]);
						 } else if (command[1]) {
							 // &#x5F15;&#x6570;&#x3072;&#x3068;&#x3064;
							 this.fileList().filter(command[1]);
						 }
						 break;
				default:
						 break;
			}
		}
		e.preventDefault();
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x304B;&#x3089;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x304C;&#x5916;&#x308C;&#x305F;&#x969B;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addFocusoutEventListener() {
		if (this._focusoutArg) return this;
		this._focusoutArg = this.onFocusout.bind(this); // remove&#x3059;&#x308B;&#x3068;&#x304D;&#x3068;&#x5F15;&#x6570;&#x3092;&#x540C;&#x4E00;&#x306B;&#x3059;&#x308B;&#x305F;&#x3081;&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x306B;&#x4FDD;&#x6301;&#x3059;&#x308B;(&#x305D;&#x308C;&#x305E;&#x308C;&#x3067;bind&#x3059;&#x308B;&#x3068;&#x7570;&#x306A;&#x308B;&#x53C2;&#x7167;&#x306B;&#x306A;&#x308B;&#xFF1F;)
		document.addEventListener(&apos;focusout&apos;,this._focusoutArg);
		return this;
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x304B;&#x3089;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x304C;&#x5916;&#x308C;&#x305F;&#x969B;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x9664;&#x53BB;&#x3059;&#x308B;
	 * @return {CommandLine} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeFocusoutEventListener() {
		if (!this._focusoutArg) return this;
		document.removeEventListener(&apos;focusout&apos;,this._focusoutArg);
		this._focusoutArg = null;
		return this;
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x304B;&#x3089;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x304C;&#x5916;&#x308C;&#x305F;&#x969B;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;
	 * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	onFocusout(e) {
		this.stop();
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;
	 */
	runCommand() {
		// &#x534A;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3067;&#x533A;&#x5207;&#x3089;&#x308C;&#x3066;&#x3044;&#x306A;&#x3044;&#x3088;&#x3046;&#x306A;&#x3089;&#x3001;&#x5168;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x306E;&#x533A;&#x5207;&#x308A;&#x3067;&#x3082;&#x53EF;
		const command = this.val().split(&apos; &apos;).length &gt; 1 ? this.val().split(&apos; &apos;) : this.val().split(&apos;&#x3000;&apos;);
		switch (command[0]) {
			case &apos;:w&apos;:
			case &apos;:save&apos;:
			case &apos;:s&apos;:
			case &apos;: &#xFF57;&apos;:
			case &apos;:&#x3055;&#x30F4;&#x3047;&apos;:
			case &apos;:&#xFF53;&apos;:
					 if (command[1]) {
						 this.sentenceContainer().saveAsFile(command[1]);
					 } else {
						 this.sentenceContainer().saveFile();
					 }
					 break;
			case &apos;:e&apos;:
			case &apos;:o&apos;:
			case &apos;:open&apos;:
			case &apos;:&#x3048;&apos;:
			case &apos;:&#x304A;&apos;:
			case &apos;:&#x304A;&#x307A;&#xFF4E;&apos;:
					 if (command[1]) {
						 const files = this.fileList().findFile(commnad[1]);
						 files.length &gt; 0 &amp;&amp; files[0].open();
					 } else {
						 this.sentenceContainer().newFile();
					 }
					 break;
			case &apos;:jumpr&apos;:
			case &apos;:jumprow&apos;:
			case &apos;:jr&apos;:
			case &apos;:&#x3058;&#x3085;&#xFF4D;&#xFF50;&#xFF52;&apos;:
			case &apos;:&#x3058;&#x3085;&#xFF4D;&#xFF50;&#x308D;&#xFF57;&apos;:
			case &apos;:&#xFF4A;&#xFF52;&apos;:
					 if (command[1]) this.sentenceContainer().cursor().jumpRow(parseInt(command[1]));
					 break;
			case &apos;:jumpp&apos;:
			case &apos;:jumppage&apos;:
			case &apos;:jp&apos;:
			case &apos;:&#x3058;&#x3085;&#xFF4D;&#x3063;&#xFF50;&apos;:
			case &apos;:&#x3058;&#x3085;&#xFF4D;&#x3063;&#x3071;&#x3052;&apos;:
			case &apos;:&#xFF4A;&#xFF50;&apos;:
					 if (command[1]) this.sentenceContainer().cursor().jumpPage(parseInt(command[1]));
					 break;
			case &apos;:new&apos;:
			case &apos;:n&apos;:
			case &apos;:&#x306D;&#xFF57;&apos;:
			case &apos;:&#xFF4E;&apos;:
					 this.sentenceContainer().newFile(command[1]);
					 break;
			case &apos;:delete&apos;:
			case &apos;:del&apos;:
			case &apos;:d&apos;:
			case &apos;:rm&apos;:
			case &apos;:&#x3067;&#x3047;&#x3066;&apos;:
			case &apos;:&#x3067;&#xFF4C;&apos;:
			case &apos;:&#xFF44;&apos;:
			case &apos;:&#xFF52;&#xFF4D;&apos;:
					 if (command[1]) {
						 this.fileList().deleteFile(command[1]);
					 } else {
						 const currentFile = this.fileList().currentFile();
						 currentFile &amp;&amp; currentFile.delete();
					 }
					 break;
			case &apos;:next&apos;:
			case &apos;:&#x306D;&#xFF58;&#xFF54;&apos;:
					 // &#x6B21;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x958B;&#x304F;
					 this.fileList().openNextFile();
					 break;
			case &apos;:prev&apos;:
			case &apos;:&#xFF50;&#x308C;&#xFF56;&apos;:
					 // &#x524D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x958B;&#x304F;
					 this.fileList().openPrevFile();
					 break;
			case &apos;:title&apos;:
			case &apos;:name&apos;:
			case &apos;:t&apos;:
			case &apos;:&#x3061;&#xFF54;&#x3047;&apos;:
			case &apos;:&#x306A;&#x3081;&apos;:
			case &apos;:&#xFF54;&apos;:
					 if (command[1]) {
						 this.sentenceContainer().filename(command[1]);
					 }
					 break;
			case &apos;:mv&apos;:
			case &apos;:&#xFF4D;&#xFF56;&apos;:
					 this.fileList().moveFile(command[1],command[2]);
					 break;
			case &apos;:mkdir&apos;:
			case &apos;:&#xFF4D;&#xFF4B;&#x3062;&#xFF52;&apos;:
					 this.fileList().mkdir(command[1]);
					 break;
			case &apos;:deldir&apos;:
			case &apos;:&#x3067;&#xFF4C;&#x3062;&#xFF52;&apos;:
					 this.fileList().deleteDirectory(command[1],false);
					 break;
			case &apos;:noh&apos;:
			case &apos;:&#x306E;&#xFF48;&apos;:
					 this.sentenceContainer().stopSearchMode();
					 break;
			case &apos;::&apos;:
					 this.sentenceContainer().cursor().insert(&apos;:&apos;);
					 break;
			case &apos;:;&apos;:
					 this.sentenceContainer().cursor().insert(&apos;;&apos;);
					 break;
			case &apos;:/&apos;:
					  this.sentenceContainer().cursor().insert(&apos;/&apos;);
					  break;
			case &apos;:i&apos;:
					 command[1] &amp;&amp; this.sentenceContainer().cursor().insert(command[1]);
					 break;
			case &apos;:bold&apos;:
					 this.sentenceContainer().menu().boldButton(!this.sentenceContainer().menu().boldButton());
					 break;
			case &apos;:italic&apos;:
					 this.sentenceContainer().menu().italicButton(!this.sentenceContainer().menu().italicButton());
					 break;
			default:
					 break;
		}
	}
}
// &#x6BB5;&#x843D;&#x6700;&#x5F8C;&#x306E;EOL&#x4EE5;&#x5916;&#x306E;EOL&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306F;&#x6B62;&#x307E;&#x3089;&#x306A;&#x3044;(EOL&#x306F;&#x57FA;&#x672C;&#x3001;&#x6587;&#x5B57;&#x633F;&#x5165;&#x306E;&#x305F;&#x3081;&#x306B;&#x5B58;&#x5728;)
/**
 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class Cursor {
	/**
	 * @param {SentenceContainer} sentenceContainer &#x5BFE;&#x5FDC;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	constructor(sentenceContainer) {
		this._sentenceContainer = sentenceContainer;
		this._cursorLineElem = document.getElementById(&apos;cursor_line&apos;);
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x521D;&#x671F;&#x5316;&#x3057;&#x3066;&#x4E00;&#x6587;&#x5B57;&#x76EE;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x4E0E;&#x3048;&#x308B;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	init() {
		const firstChar = this.sentenceContainer().firstChild().firstChild().firstChild();
		this._char = firstChar;
		this.createCursorLine();
		this._char.addCursor().setPosMemory();
		return this;
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x5BFE;&#x5FDC;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {SentenceContainer} &#x5BFE;&#x5FDC;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	sentenceContainer() {
		return this._sentenceContainer;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x3042;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Char} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	getChar() {
		return this._char;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Row} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	getRow() {
		return this.getChar().row();
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x3042;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Paragraph} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x3042;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	getParagraph() {
		return this.getRow().paragraph();
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x8A18;&#x61B6;&#x3059;&#x308B;&#x305F;&#x3081;&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x8FD4;&#x3059;
	 * @return {Element} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x8A18;&#x61B6;&#x3059;&#x308B;&#x305F;&#x3081;&#x306E;&#x8981;&#x7D20;
	 */
	cursorLineElem() {
		return this._cursorLineElem;
	}

	// --&#x53C2;&#x7167;&#x64CD;&#x4F5C;

	/**
	 * @private
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x3078;&#x306E;&#x53C2;&#x7167;&#x3092;&#x5909;&#x66F4;&#x3059;&#x308B;
	 * @param {Char} newChar &#x65B0;&#x3057;&#x3044;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	setChar(newChar) {
		this._char = newChar;
		return this;
	}
	/**
	 * char&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x4E0E;&#x3048;&#x308B;
	 * @param {Char} char &#x65B0;&#x3057;&#x3044;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;
	 * @param {boolean} [bShift] &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x305F;&#x72B6;&#x614B;&#x3067;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x4E0E;&#x3048;&#x3089;&#x308C;&#x305F;&#x304B;&#x3069;&#x3046;&#x304B;&#x3002;true&#x306A;&#x3089;&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x62E1;&#x5F35;&#x3059;&#x308B;&#x3002;false&#x306A;&#x3089;&#x89E3;&#x9664;&#x3059;&#x308B;&#x3002;&#x7701;&#x7565;(undefined)&#x3059;&#x308B;&#x3068;&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306B;&#x306F;&#x5F71;&#x97FF;&#x3057;&#x306A;&#x3044;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addCursor(char,bShift) {
		if (this.getChar()) {
			this.memorySelection();
			this.getChar().removeClass(&apos;cursor&apos;);
		}
		char.addClass(&apos;cursor&apos;);
		this.setChar(char);

		// &#x524D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x88C5;&#x98FE;&#x304C;&#x3042;&#x308C;&#x3070;&#x3001;&#x305D;&#x306E;&#x30DC;&#x30BF;&#x30F3;&#x3092;&#x30AA;&#x30F3;&#x306B;&#x3059;&#x308B;
		const prevChar = char.prevCharOnParagraph();
		const menu = this.sentenceContainer().menu();
		menu.colorButton(prevChar ? prevChar.color() : &apos;black&apos;);
		menu.boldButton(prevChar ? prevChar.isBold() : false);
		menu.italicButton(prevChar ? prevChar.isItalic() : false);
		menu.fontSizeInput(prevChar ? prevChar.fontSize() : &apos;auto&apos;);

		// &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x306A;&#x304C;&#x3089;&#x306A;&#x3089;&#x3001;&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x5E83;&#x3052;&#x308B;
		this.extendSelection(bShift);
		this.sentenceContainer().printInfo();
		return this;
	}

	// --Status

	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x8A18;&#x61B6;&#x3059;&#x308B;DOM&#x8981;&#x7D20;&#x304B;&#x3089;&#x3001;&#x8A18;&#x61B6;&#x3055;&#x308C;&#x305F;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x8A18;&#x61B6;&#x3055;&#x308C;&#x305F;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3002;&#x8A18;&#x61B6;&#x3055;&#x308C;&#x305F;&#x4F4D;&#x7F6E;&#x304C;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;-1
	 */
	getPosMemory() {
		const eCharPoses = this.cursorLineElem().children;
		for (let i = 0,eCharPos; eCharPos = eCharPoses[i]; i++) {
			if (eCharPos.classList.contains(&apos;cursor-pos-memory&apos;))
				return i;
		}
		return -1;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x8A18;&#x61B6;&#x3059;&#x308B;DOM&#x8981;&#x7D20;&#x306B;&#x4F4D;&#x7F6E;&#x3092;&#x8A18;&#x61B6;&#x3059;&#x308B;
	 * @param {number} index &#x8A18;&#x61B6;&#x3059;&#x308B;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	setPosMemory(index) {
		const oldPos = this.getPosMemory();
		if (index === oldPos) {
			return this;
		}
		const eCharPoses = this.cursorLineElem().children;
		if (eCharPoses[oldPos]) eCharPoses[oldPos].classList.remove(&apos;cursor-pos-memory&apos;);
		const maxIndex = eCharPoses.length - 1;
		if (index &gt; maxIndex) index = maxIndex; // char-pos&#x306E;&#x6700;&#x5927;&#x6570;&#x3092;&#x8D85;&#x3048;&#x308B;&#x6570;&#x5024;&#x306F;&#x899A;&#x3048;&#x3089;&#x308C;&#x306A;&#x3044;
		eCharPoses[index].classList.add(&apos;cursor-pos-memory&apos;);
		return this;
	}
	/**
	 * &#x73FE;&#x5728;&#x884C;&#x306E;&#x3046;&#x3061;&#x4F55;&#x6587;&#x5B57;&#x76EE;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308B;&#x304B;&#x3092;&#x8FD4;&#x3059;&#x3002;&#x884C;&#x982D;&#x3067;&#xFF11;&#xFF0C;EOL&#x3067;&#x306F;&#x884C;&#x306E;&#x7DCF;&#x6587;&#x5B57;&#x6570;&#xFF0B;&#xFF11;
	 * @return {number} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x4F4D;&#x7F6E;&#x3002;&#x5165;&#x529B;&#x306E;&#x59CB;&#x307E;&#x308B;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3068;&#x540C;&#x3058;
	 */
	currentCharPos() {
		return this.getChar().index() + 1;
	}
	/**
	 * &#x73FE;&#x5728;&#x884C;&#x306E;&#x7DCF;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x73FE;&#x5728;&#x884C;&#x306E;&#x7DCF;&#x6587;&#x5B57;&#x6570;
	 */
	strLenOfRow() {
		return this.getRow().charLen();
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x304C;&#x305D;&#x306E;&#x30DA;&#x30FC;&#x30B8;&#x3067;&#x4F55;&#x884C;&#x76EE;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x304C;&#x30DA;&#x30FC;&#x30B8;&#x5185;&#x3067;&#x4F55;&#x884C;&#x76EE;&#x304B;&#x3002;&#x6539;&#x30DA;&#x30FC;&#x30B8;&#x304C;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;-1
	 */
	currentRowPos() {
		for (let row = this.getRow(),cnt = 1; row; row = row.prev(),cnt++) {
			if (row.isPageBreak()) return cnt;
		}
		return -1;
	}
	/**
	 * &#x73FE;&#x5728;&#x30DA;&#x30FC;&#x30B8;&#x306E;&#x7DCF;&#x884C;&#x6570;&#x3092;&#x8FD4;&#x3059;&#x3002;&#x6700;&#x7D42;&#x30DA;&#x30FC;&#x30B8;&#x306E;&#x307F;&#x8A2D;&#x5B9A;&#x884C;&#x6570;&#x3068;&#x7570;&#x306A;&#x308B;
	 * @return {number} &#x73FE;&#x5728;&#x30DA;&#x30FC;&#x30B8;&#x306E;&#x7DCF;&#x884C;&#x6570;&#x3002;&#x30DA;&#x30FC;&#x30B8;&#x306E;&#x7D42;&#x308F;&#x308A;&#x304C;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;-1
	 */
	rowLenOnPage() {
		for (let row = this.getRow(),cnt = this.currentRowPos(); row; row = row.next(),cnt++) {
			if (row.isPageLast()) return cnt;
		}
		return -1;
	}
	// &#x73FE;&#x5728;&#x30DA;&#x30FC;&#x30B8;
	/**
	 * &#x73FE;&#x5728;&#x30DA;&#x30FC;&#x30B8;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x73FE;&#x5728;&#x30DA;&#x30FC;&#x30B8;
	 */
	currentPage() {
		let cnt = 0;
		for (let row = this.getRow(); row; row = row.prev()) {
			if (row.isPageBreak()) cnt++;
		}
		return cnt;
	}

	// --DOM&#x64CD;&#x4F5C;

	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x8A18;&#x61B6;&#x3059;&#x308B;DOM&#x8981;&#x7D20;&#x3092;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x6A19;&#x6E96;&#x6587;&#x5B57;&#x6570;&#x306B;&#x5408;&#x308F;&#x305B;&#x3066;&#x69CB;&#x7BC9;&#x3059;&#x308B;&#x3002;&#x4E3B;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x5DE6;&#x53F3;&#x79FB;&#x52D5;&#x306E;&#x969B;&#x306B;&#x3001;&#x305D;&#x306E;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x4F55;&#x6587;&#x5B57;&#x76EE;&#x306E;&#x4F4D;&#x7F6E;&#x304B;&#x3089;&#x79FB;&#x52D5;&#x3057;&#x3066;&#x304D;&#x305F;&#x306E;&#x304B;&#x3092;&#x8A18;&#x61B6;&#x3059;&#x308B;&#x305F;&#x3081;&#x306B;&#x7528;&#x3044;&#x308B;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	createCursorLine() {
		const eCursorLine = document.getElementById(&apos;cursor_line&apos;);
		const eOldCharPoses = eCursorLine.children;
		for (let eOldCharPos; eOldCharPos = eOldCharPoses[0];) {
			eCursorLine.removeChild(eOldCharPos);
		}
		eCursorLine.appendChild(Util.createCharPosElement(this.sentenceContainer().strLenOnRow()));
		return this;
	}

	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306B;&#x6587;&#x5B57;&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {string} str &#x633F;&#x5165;&#x3059;&#x308B;&#x6587;&#x5B57;&#x5217;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	insert(str) {
		const cursorChar = this.getChar();
		for (let char of str) {
			const newChar = new Char(cursorChar.createData(char));
			cursorChar.before(newChar);
		}

		cursorChar.paragraph().cordinate().checkKinsoku();
		this.getChar().setPosMemory(); // cordinate()&#x306B;&#x3088;&#x3063;&#x3066;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x304C;&#x5909;&#x308F;&#x3063;&#x3066;&#x3044;&#x308B;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x3042;&#x308B;&#x305F;&#x3081;&#x3001;cursorChar&#x306F;&#x4F7F;&#x3048;&#x305A;&#x53D6;&#x5F97;&#x3057;&#x306A;&#x304A;&#x3057;
		this.sentenceContainer().changeDisplay().breakPage().printInfo();
		return this;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3067;&#x30D0;&#x30C3;&#x30AF;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3092;&#x62BC;&#x4E0B;&#x3057;&#x305F;&#x6642;&#x306E;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3046;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	backSpace() {
		const cursorChar = this.getChar();
		if (!cursorChar.prev()) return this; // &#x6587;&#x7AE0;&#x5148;&#x982D;&#x304B;&#x3089;&#x306E;&#x30D0;&#x30C3;&#x30AF;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x306F;&#x4F55;&#x3082;&#x3057;&#x306A;&#x3044;

		// &#x6BB5;&#x843D;&#x5148;&#x982D;&#x304B;&#x3089;&#x306E;&#x30D0;&#x30C3;&#x30AF;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3067;&#x306F;&#x3001;&#x524D;&#x306E;&#x884C;&#x306B;&#x6BB5;&#x843D;&#x3092;&#x3064;&#x306A;&#x3052;&#x308B;
		if (cursorChar.isFirst() &amp;&amp; cursorChar.row().isFirst()) {
			const cursorParagraph = cursorChar.row().paragraph();
			const newParagraph = cursorParagraph.prev(); // &#x878D;&#x5408;&#x5148;&#x306E;&#x6BB5;&#x843D;
			for (let moveRow of cursorParagraph.rows()) {
				moveRow.moveLastBefore();
			}
			newParagraph.cordinate().checkKinsoku();
			// HACK: &#x6700;&#x7D42;&#x884C;&#x304C;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x72B6;&#x614B;&#x3067;backSpace()&#x3059;&#x308B;&#x3068;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x304C;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x306B;&#x8868;&#x793A;&#x958B;&#x59CB;&#x884C;&#x304C;&#x5909;&#x308F;&#x3089;&#x305A;&#x3001;&#x884C;&#x6570;&#x304C;&#x8DB3;&#x308A;&#x3066;&#x3044;&#x308B;&#x306B;&#x3082;&#x95A2;&#x308F;&#x3089;&#x305A;&#x8868;&#x793A;&#x884C;&#x6570;&#x304C;&#x5C11;&#x306A;&#x304F;&#x306A;&#x3063;&#x3066;&#x3057;&#x307E;&#x3046;
			this.sentenceContainer().changeDisplay().breakPage().printInfo();
			return this;
		}

		//  &#x6BB5;&#x843D;&#x5148;&#x982D;&#x4EE5;&#x5916;&#x304B;&#x3089;&#x306E;&#x30D0;&#x30C3;&#x30AF;&#x30B9;&#x30DA;&#x30FC;&#x30B9;
		//  &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x524D;&#x306E;&#x4F4D;&#x7F6E;&#x306B;&#x3042;&#x308B;&#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;(&#x884C;&#x982D;&#x306A;&#x3089;&#x884C;&#x3092;&#x307E;&#x305F;&#x3044;&#x3067;&#x524D;&#x306E;&#x6587;&#x5B57;)
		if (!(cursorChar.isFirst() &amp;&amp; cursorChar.row().isFirst())) {
			cursorChar.prevChar().delete();
			this.sentenceContainer().changeDisplay().breakPage().printInfo();
			return this;
		}
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3067;&#x6539;&#x884C;&#x3057;&#x305F;&#x6642;&#x306E;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3046;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	lineBreak() {
		// &#x6BB5;&#x843D;&#x306E;&#x5206;&#x5272;
		const cursorParagraph = this.getParagraph().divide(this.getChar());
		// &#x65B0;&#x3057;&#x304F;&#x3067;&#x304D;&#x305F;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x521D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;
		const newParagraph = cursorParagraph.next(); // divide()&#x3067;&#x65B0;&#x3057;&#x304F;&#x633F;&#x5165;&#x3055;&#x308C;&#x305F;&#x6BB5;&#x843D;
		newParagraph.firstChild().firstChild().addCursor().setPosMemory();
		// HACK:changeDisplay()&#x3092;&#x4E8C;&#x56DE;&#x7D9A;&#x3051;&#x3066;&#x3044;&#x308B;:&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x304C;display&#x3055;&#x308C;&#x3066;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;&#x306E;&#x3067;&#x3001;&#x6700;&#x7D42;&#x8868;&#x793A;&#x884C;&#x304B;&#x3089;&#x6539;&#x884C;&#x3057;&#x305F;&#x5834;&#x5408;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x304C;&#x8868;&#x793A;&#x304B;&#x3089;&#x5916;&#x308C;&#x308B;(&#x6700;&#x7D42;&#x8868;&#x793A;&#x884C;&#x3068;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x304C;&#x7B49;&#x3057;&#x3044;&#x305F;&#x3081;&#x3001;&#x8868;&#x793A;&#x958B;&#x59CB;&#x884C;&#x3092;&#x5909;&#x3048;&#x305A;&#x306B;&#x8868;&#x793A;)
		// &#x304B;&#x3068;&#x3044;&#x3063;&#x3066;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x3092;&#x975E;&#x8868;&#x793A;&#x306B;&#x3057;&#x3066;&#x304B;&#x3089;&#x633F;&#x5165;&#x3059;&#x308B;&#x3068;&#x3001;&#x8868;&#x793A;&#x884C;&#x304C;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x3092;&#x57CB;&#x3081;&#x3066;&#x3044;&#x306A;&#x3044;&#x72B6;&#x614B;&#x306E;&#x6642;&#x306B;&#x6539;&#x884C;&#x3059;&#x308B;&#x3068;&#x8868;&#x793A;&#x958B;&#x59CB;&#x884C;&#x304C;&#x6BCE;&#x56DE;&#x3072;&#x3068;&#x3064;&#x5F8C;&#x308D;&#x306B;&#x305A;&#x308C;&#x308B;(&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x304C;&#x6700;&#x7D42;&#x8868;&#x793A;&#x884C;&#x3088;&#x308A;&#x5F8C;&#x308D;&#x306B;&#x3042;&#x308B;&#x305F;&#x3081;)&#x3068;&#x3044;&#x3046;&#x73FE;&#x8C61;&#x304C;&#x8D77;&#x3053;&#x308B;&#x306E;&#x3067;&#x3001;&#x884C;&#x6570;&#x304C;&#x5341;&#x5206;&#x306B;&#x3042;&#x3063;&#x3066;&#x3082;&#x8868;&#x793A;&#x884C;&#x304C;&#x4E0D;&#x8DB3;&#x3057;&#x3066;&#x3057;&#x307E;&#x3046;
		this.sentenceContainer().changeDisplay().changeDisplay().breakPage().printInfo();
		return this;
	}

	// --&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x64CD;&#x4F5C;

	// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x79FB;&#x52D5;
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x4E0B;&#x65B9;&#x5411;&#x306B;&#x4E00;&#x3064;&#x52D5;&#x304B;&#x3059;&#x3002;&#x3072;&#x3068;&#x3064;&#x4E0B;&#x304C;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306A;&#x3089;&#x3001;&#x3055;&#x3089;&#x306B;&#x305D;&#x306E;&#x6B21;&#x306B;&#x52D5;&#x304B;&#x3059;
	 * @param {boolean} bShift &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	moveNext(bShift) {
		const nextChar = this.getChar().next();
		if (!nextChar) return this;
		nextChar.slideNextCursor().addCursor(bShift).setPosMemory();
		this.sentenceContainer().changeDisplay();
		return this;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x4E0A;&#x65B9;&#x5411;&#x306B;&#x4E00;&#x3064;&#x52D5;&#x304B;&#x3059;&#x3002;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;&#x884C;&#x982D;&#x306A;&#x3089;&#x3001;&#x524D;&#x306E;&#x884C;&#x306E;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x306B;&#x52D5;&#x304B;&#x3059;
	 * @param {boolean} bShift &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	movePrev(bShift) {
		const prevChar = this.getChar().prev();
		if (!prevChar) return this;
		prevChar.slidePrevCursor().addCursor(bShift).setPosMemory();
		this.sentenceContainer().changeDisplay();
		return this;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x53F3;&#x65B9;&#x5411;&#x306B;&#x4E00;&#x3064;&#x52D5;&#x304B;&#x3059;&#x3002;&#x4E00;&#x3064;&#x53F3;&#x304C;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306A;&#x3089;&#x3001;&#x79FB;&#x52D5;&#x5148;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x3055;&#x3089;&#x306B;&#x52D5;&#x304B;&#x3059;
	 * @param {boolean} bShift &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	moveRight(bShift) {
		const prevRow = this.getChar().row().prev();
		this.moveRow(prevRow,bShift);
		this.sentenceContainer().changeDisplay();
		return this;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x5DE6;&#x65B9;&#x5411;&#x306B;&#x4E00;&#x3064;&#x52D5;&#x304B;&#x3059;&#x3002;&#x4E00;&#x3064;&#x5DE6;&#x304C;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306A;&#x3089;&#x3001;&#x79FB;&#x52D5;&#x5148;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x3055;&#x3089;&#x306B;&#x52D5;&#x304B;&#x3059;
	 * @param {boolean} bShift &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	moveLeft(bShift) {
		const nextRow = this.getChar().row().next();
		this.moveRow(nextRow,bShift);
		this.sentenceContainer().changeDisplay();
		return this;
	}
	// &#x5F15;&#x6570;&#x3067;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x884C;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;
	/**
	 * row&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x79FB;&#x52D5;&#x5148;&#x306E;&#x6587;&#x5B57;&#x306F;&#x8A18;&#x61B6;&#x3055;&#x308C;&#x305F;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x6587;&#x5B57;&#x3067;&#x3001;&#x305D;&#x308C;&#x304C;EOL&#x306A;&#x3089;&#x305D;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;
	 * @param {Row} row &#x79FB;&#x52D5;&#x5148;&#x306E;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @param {boolean} bShift &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3002;true&#x306A;&#x3089;&#x3001;&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x62E1;&#x5F35;&#x3059;&#x308B;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	moveRow(row,bShift) {
		const index = this.getPosMemory();
		if (!row) return this;
		const char = row.children(index); // &#x540C;&#x3058;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x6587;&#x5B57;&#x304C;prevRow&#x306B;&#x5B58;&#x5728;&#x3057;&#x306A;&#x3051;&#x308C;&#x3070;&#x3001;children()&#x5185;&#x3067;lastChild()&#x304C;&#x9078;&#x629E;&#x3055;&#x308C;&#x308B;
		char.slidePrevCursor().addCursor(bShift);
		return this;
	}
	/**
	 * num&#x884C;&#x76EE;&#x306E;&#x6700;&#x521D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x79FB;&#x52D5;&#x5148;&#x306E;&#x884C;&#x304C;&#x4E2D;&#x592E;&#x3068;&#x306A;&#x308B;&#x3088;&#x3046;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;
	 * @param {number} num &#x79FB;&#x52D5;&#x5148;&#x304C;&#x4F55;&#x884C;&#x76EE;&#x304B;&#x3002;&#xFF11;&#x304B;&#x3089;&#x59CB;&#x307E;&#x308B;&#x3002;&#x30DA;&#x30FC;&#x30B8;&#x5185;&#x3067;&#x306F;&#x306A;&#x304F;&#x3001;&#x6587;&#x7AE0;&#x5168;&#x4F53;&#x3067;&#x6570;&#x3048;&#x308B;&#x3002;&#xFF10;&#x4F4D;&#x4E0B;&#x304C;&#x6E21;&#x3055;&#x308C;&#x308B;&#x3068;&#x6700;&#x521D;&#x306E;&#x884C;&#x306B;&#x79FB;&#x52D5;&#x3055;&#x308C;&#x308B;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	jumpRow(num) {
		if (typeof num !== &apos;number&apos;) return this;
		const row = this.sentenceContainer().row(num);
		if (row) {
			row.firstChild().addCursor().setPosMemory();
			this.sentenceContainer().changeDisplay(&apos;center&apos;);
		}
		return this;
	}
	/**
	 * num&#x30DA;&#x30FC;&#x30B8;&#x76EE;&#x306E;&#x4E00;&#x884C;&#x76EE;&#x6700;&#x521D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x305D;&#x306E;&#x884C;&#x304B;&#x3089;&#x59CB;&#x307E;&#x308B;&#x3088;&#x3046;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;
	 * @param {number} num &#x4F55;&#x30DA;&#x30FC;&#x30B8;&#x76EE;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x304B;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	jumpPage(num) {
		if (typeof num !== &apos;number&apos;) return this;
		const row = this.sentenceContainer().pageRow(num);
		if (row) {
			row.firstChild().addCursor().setPosMemory();
			this.sentenceContainer().changeDisplay(&apos;right&apos;);
		}
		return this;
	}
	/**
	 * &#x6B21;&#x306E;&#x691C;&#x7D22;&#x8A9E;&#x53E5;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;&#x4F55;&#x3082;&#x3057;&#x306A;&#x3044;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	nextSearch() {
		const next = this.nextSearchChar();
		if (!next) { return this; }
		next.addCursor().setPosMemory();
		this.sentenceContainer().changeDisplay();
		return this;
	}
	/**
	 * @private
	 * &#x6B21;&#x306E;&#x691C;&#x7D22;&#x8A9E;&#x53E5;&#x3092;&#x8FD4;&#x3059;
	 * @return {Char} &#x6B21;&#x306E;&#x691C;&#x7D22;&#x8A9E;&#x53E5;&#x306E;&#xFF11;&#x6587;&#x5B57;&#x76EE;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	nextSearchChar() {
		for (let char = this.getChar().nextChar() || this.sentenceContainer().firstChar(); !char.is(this.getChar()); char = char.nextChar() || this.sentenceContainer().firstChar()) {
			if (char.hasClass(&apos;search-label&apos;)) return char;
		}
		return null;
	}
	/**
	 * &#x524D;&#x306E;&#x691C;&#x7D22;&#x8A9E;&#x53E5;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;&#x4F55;&#x3082;&#x3057;&#x306A;&#x3044;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	prevSearch() {
		const prev = this.prevSearchChar();
		if (!prev) { return this; }
		prev.addCursor().setPosMemory();
		this.sentenceContainer().changeDisplay();
		return this;
	}
	/**
	 * @private
	 * &#x524D;&#x306E;&#x691C;&#x7D22;&#x8A9E;&#x53E5;&#x3092;&#x8FD4;&#x3059;
	 * @return {Char} &#x524D;&#x306E;&#x691C;&#x7D22;&#x8A9E;&#x53E5;&#x306E;&#xFF11;&#x6587;&#x5B57;&#x76EE;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	prevSearchChar() {
		for (let char = this.getChar().prevChar() || this.sentenceContainer().lastChar(); !char.is(this.getChar()); char = char.prevChar() || this.sentenceContainer().lastChar()) {
			if (char.hasClass(&apos;search-label&apos;)) return char;
		}
		return null;
	}
	// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x79FB;&#x52D5;&#x524D;&#x306B;&#x3001;selection&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x899A;&#x3048;&#x3055;&#x305B;&#x308B;
	/**
	 * @private
	 * selection&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x899A;&#x3048;&#x3055;&#x305B;&#x308B;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	memorySelection() {
		const selection = getSelection();
		if (selection.rangeCount === 0) {
			selection.selectAllChildren(this.getChar().elem());
		}
		return this;
	}
	// &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x52D5;&#x304B;&#x3059;(&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x79FB;&#x52D5;&#x6642;)
	/**
	 * bShift&#x304C;true&#x306A;&#x3089;&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x62E1;&#x5F35;&#x3059;&#x308B;
	 * @param {boolean} [opt_bShift] true=&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x62E1;&#x5F35;&#x3059;&#x308B;&#x3001;false=&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;&#x3002;&#x7701;&#x7565;&#x3055;&#x308C;&#x308B;&#x3068;&#x4F55;&#x3082;&#x3057;&#x306A;&#x3044;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	extendSelection(opt_bShift) {
		const selection = getSelection();
		if (opt_bShift) {
			// &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x30AA;&#x30D5;&#x30BB;&#x30C3;&#x30C8;&#xFF10;&#x307E;&#x3067;selection&#x3092;&#x62E1;&#x5F35;
			selection.extend(this.getChar().elem(),0);
		} else if (opt_bShift === false) {
			// &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x7121;&#x3057;&#x3067;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x52D5;&#x3044;&#x305F;&#x306A;&#x3089;selection&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;(&#x7701;&#x7565;&#x3067;&#x306A;&#x304F;&#x3001;&#x660E;&#x78BA;&#x306B;false&#x304C;&#x6E21;&#x3055;&#x308C;&#x305F;&#x5834;&#x5408;)
			selection.removeAllRanges();
		}
		return this;
	}
}

// &#x6587;&#x66F8;&#x3092;&#x69CB;&#x6210;&#x3059;&#x308B;&#x5404;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x57FA;&#x5E95;&#x30AF;&#x30E9;&#x30B9;
/**
 * &#x5404;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x57FA;&#x5E95;&#x30AF;&#x30E9;&#x30B9;
 */
export class AbstractHierarchy {
	/**
	 * @param {Element} elem &#x81EA;&#x8EAB;&#x306E;DOM&#x8981;&#x7D20;
	 */
	constructor(elem) {
		this._elem = elem;
		this._parent = null;
		this._next = null;
		this._prev = null;
		this._children = [];
		this._width = null;
		this._height = null;
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x81EA;&#x8EAB;&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x8FD4;&#x3059;
	 * @return {Element} &#x81EA;&#x8EAB;&#x306E;DOM&#x8981;&#x7D20;
	 */
	elem() {
		return this._elem;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x3092;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3002;&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {AbstractHierarchy} [opt_newParent] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x89AA;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	parent(opt_newParent) {
		if (opt_newParent === undefined) { // null&#x304C;&#x6E21;&#x3055;&#x308C;&#x308B;&#x3053;&#x3068;&#x3082;&#x3042;&#x308B;&#x306E;&#x3067;undefined&#x3068;&#x53B3;&#x5BC6;&#x306B;&#x6BD4;&#x8F03;
			return this._parent;
		} else {
			this._parent = opt_newParent;;
			return this;
		}
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306B;&#x3042;&#x308B;&#x540C;&#x5217;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3002;&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306B;&#x3042;&#x308B;&#x540C;&#x5217;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {AbstractHierarchy} [opt_newNext] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306B;&#x3042;&#x308B;&#x540C;&#x5217;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	next(opt_newNext) {
		if (opt_newNext === undefined) {
			return this._next;
		} else {
			this._next = opt_newNext;
			return this;
		}
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306B;&#x3042;&#x308B;&#x540C;&#x5217;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3002;&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306B;&#x3042;&#x308B;&#x540C;&#x5217;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {AbstractHierarchy} [opt_newPrev] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306B;&#x3042;&#x308B;&#x540C;&#x5217;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	prev(opt_newPrev) {
		if (opt_newPrev === undefined) {
			return this._prev;
		} else {
			this._prev = opt_newPrev;
			return this;
		}
	}
	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x5B50;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;&#x3002;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x3092;&#x914D;&#x5217;&#x3067;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} [opt_index] &#x53D6;&#x5F97;&#x3059;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3002;&#x7BC4;&#x56F2;&#x5916;&#x306A;&#x3089;undefined&#x304C;&#x8FD4;&#x3055;&#x308C;&#x308B;
	 * @return {AbstractHierarchy} index&#x3067;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x5B50;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x914D;&#x5217;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	children(opt_index) {
		if (opt_index === undefined) {
			return Util.copyArray(this._children);
		} else {
			return this._children[opt_index];
		}
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x521D;&#x306E;&#x5B50;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x521D;&#x306E;&#x5B50;&#x3002;&#x5B50;&#x304C;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	firstChild() {
		if (this.hasChild()) {
			return this._children[0];
		} else {
			return null;
		}
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x5F8C;&#x306E;&#x5B50;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x5F8C;&#x306E;&#x5B50;&#x3002;&#x5B50;&#x304C;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	lastChild() {
		if (this.hasChild()) {
			return this._children[this.childLength()-1];
		} else {
			return null;
		}
	}

	// --&#x5224;&#x5B9A;

	/**
	 * obj&#x304C;&#x81EA;&#x8EAB;&#x3068;&#x540C;&#x4E00;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304B;&#x3069;&#x3046;&#x304B;
	 * @param {AbstractHierarchy} obj &#x6BD4;&#x8F03;&#x3059;&#x308B;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @return {boolean} obj&#x304C;&#x81EA;&#x8EAB;&#x3068;&#x540C;&#x4E00;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	is(obj) {
		return obj === this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x30AF;&#x30E9;&#x30B9;&#x306B;className&#x3092;&#x6301;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @param {string} className &#x5224;&#x5B9A;&#x3059;&#x308B;&#x30AF;&#x30E9;&#x30B9;&#x540D;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;className&#x3092;&#x4ED8;&#x4E0E;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasClass(className) {
		return this._elem.classList.contains(className);
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x5B50;&#x3092;&#x6301;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x5B50;&#x3092;&#x6301;&#x3063;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasChild() {
		return this._children.length &gt; 0;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x89AA;&#x306B;&#x3068;&#x3063;&#x3066;&#x552F;&#x4E00;&#x306E;&#x5B50;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x89AA;&#x306B;&#x3068;&#x3063;&#x3066;&#x552F;&#x4E00;&#x306E;&#x5B50;&#x3067;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isOnlyChild() {
		return this.parent().childLength() === 1
			&amp;&amp; this.parent().children(0) === this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x7A7A;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x5B50;&#x3092;&#x6301;&#x3063;&#x3066;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isEmpty() {
		return this._children.length === 0;
	}
	/**
	 * &#x540C;&#x4E00;&#x306E;&#x89AA;&#x3092;&#x6301;&#x3064;&#x6B21;&#x306E;&#x5144;&#x5F1F;&#x304C;&#x5B58;&#x5728;&#x3059;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x89AA;&#x304C;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x3068;&#x540C;&#x4E00;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasNextSibling() {
		if (this.next()) {
			return this.next().parent() === this.parent();
		} else {
			return false;
		}
	}
	/**
	 * &#x540C;&#x4E00;&#x306E;&#x89AA;&#x3092;&#x6301;&#x3064;&#x524D;&#x306E;&#x5144;&#x5F1F;&#x304C;&#x5B58;&#x5728;&#x3059;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x89AA;&#x304C;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x3068;&#x540C;&#x4E00;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasPrevSibling() {
		if (this.prev()) {
			return this.prev().parent() === this.parent();
		} else {
			return false;
		}
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x89AA;&#x306E;&#x7B2C;&#x4E00;&#x306E;&#x5B50;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x89AA;&#x304C;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x3068;&#x540C;&#x4E00;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isFirst() {
		return !this.hasPrevSibling();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x89AA;&#x306E;&#x6700;&#x5F8C;&#x306E;&#x5B50;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;&#x3002;Char&#x306E;&#x5834;&#x5408;&#x306F;&#x3001;EOL&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x3068;EOL&#x306E;&#xFF12;&#x3064;&#x3067;true&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x89AA;&#x304C;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x3068;&#x540C;&#x4E00;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isLast() {
		return !this.hasNextSibling();
	}

	// --&#x53C2;&#x7167;&#x64CD;&#x4F5C;

	/**
	 * child&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x52A0;&#x3048;&#x308B;
	 * @param {AbstractHierarchy} child &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x52A0;&#x3048;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	pushChild(child) {
		this._children.push(child);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;pos&#x756A;&#x76EE;&#x306B;child&#x3092;&#x52A0;&#x3048;&#x308B;
	 * @param {number} pos child&#x3092;&#x52A0;&#x3048;&#x308B;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;(&#xFF10;&#x59CB;&#x307E;&#x308A;)
	 * @param {AbstractHierarchy} child &#x5B50;&#x306B;&#x52A0;&#x3048;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	insertChild(pos,child) {
		// &#x914D;&#x5217;&#x306E;&#x7BC4;&#x56F2;&#x5916;&#x306E;&#x6570;&#x5024;&#x3092;&#x6E21;&#x3055;&#x308C;&#x305F;&#x3089;push&#x306B;&#x5207;&#x308A;&#x66FF;&#x3048;&#x308B;
		if (pos &lt; 0 || pos &gt;= this._children.length) {
			return this.pushChild(child);
		}
		this._children.splice(pos,0,child);
		return this;
	}
	/**
	 * child&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x304B;&#x3089;&#x524A;&#x9664;&#x3059;&#x308B;
	 * @param {AbstractHierarchy} child &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x304B;&#x3089;&#x524A;&#x9664;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	deleteChild(child) {
		const pos = child.index();
		this._children.splice(pos,1);
		child.parent(null);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;oldChild&#x3092;&#x5B50;&#x304B;&#x3089;&#x524A;&#x9664;&#x3057;&#x3001;&#x65B0;&#x305F;&#x306B;newChild&#x3092;&#x540C;&#x3058;&#x4F4D;&#x7F6E;&#x306B;&#x52A0;&#x3048;&#x308B;
	 * @param {AbstractHierarchy} oldChild &#x5165;&#x66FF;&#x3048;&#x3089;&#x308C;&#x308B;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @param {AbstractHierarchy} newChild &#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x3067;&#x306A;&#x304B;&#x3063;&#x305F;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	replaceChild(oldChild,newChild) {
		const pos = oldChild.index();
		this._children.splice(pos,1,newChild);
		return this;
	}
	/**
	 * &#x3053;&#x306E;&#x53C2;&#x7167;&#x3092;&#x81EA;&#x8EAB;&#x304B;&#x3089;&#x5207;&#x308A;&#x96E2;&#x3057;&#x3066;&#x7A7A;&#x306B;&#x3059;&#x308B;&#x3002;DOM&#x8981;&#x7D20;&#x306B;&#x306F;&#x5F71;&#x97FF;&#x3057;&#x306A;&#x3044;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	emptyChild() {
		this._children = [];
		return this;
	}

	// --Status

	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x8868;&#x3059;&#x6587;&#x5B57;&#x5217;&#x3092;&#x8FD4;&#x3059;
	 * @return {string} &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x6587;&#x5B57;&#x5217;
	 */
	text() {
		return this.elem().textContent;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x8868;&#x3059;&#x6587;&#x5B57;&#x5217;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x6587;&#x5B57;&#x5217;&#x306E;&#x6587;&#x5B57;&#x6570;
	 */
	length() {
		return this.text().length;
	}
	/**
	 * &#x540C;&#x4E00;&#x306E;&#x89AA;&#x3092;&#x6301;&#x3064;&#x5144;&#x5F1F;&#x306E;&#x4E2D;&#x3067;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x540C;&#x4E00;&#x306E;&#x89AA;&#x3092;&#x6301;&#x3064;&#x5144;&#x5F1F;&#x306E;&#x4E2D;&#x3067;&#x306E;&#xFF10;&#x59CB;&#x307E;&#x308A;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 */
	index() {
		const siblings = this.parent().children();
		return siblings.indexOf(this);
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6570;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6570;
	 */
	childLength() {
		return this._children.length; // Row&#x3067;&#x306F;children()&#x306E;&#x610F;&#x5473;&#x304C;&#x9055;&#x3046;&#x306E;&#x3067;&#x3001;&#x6DF7;&#x540C;&#x3057;&#x306A;&#x3044;&#x3088;&#x3046;children()&#x3092;&#x3055;&#x3051;&#x3066;&#x76F4;&#x63A5;&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x306B;&#x30A2;&#x30AF;&#x30BB;&#x30B9;&#x3059;&#x308B;
	}

	// --Style

	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6301;&#x3064;&#x30AF;&#x30E9;&#x30B9;&#x3059;&#x3079;&#x3066;&#x3092;&#x3072;&#x3068;&#x3064;&#x306E;&#x6587;&#x5B57;&#x5217;&#x3067;&#x8FD4;&#x3059;
	 * @return {string} &#x81EA;&#x8EAB;&#x306E;&#x6301;&#x3064;&#x3059;&#x3079;&#x3066;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x540D;
	 */
	className() {
		return this._elem.className || &apos;&apos;; // &#x30AF;&#x30E9;&#x30B9;&#x304C;&#x3072;&#x3068;&#x3064;&#x3082;&#x306A;&#x3051;&#x308C;&#x3070;&#x7A7A;&#x6587;&#x5B57;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x306B;className&#x3092;&#x52A0;&#x3048;&#x308B;
	 * @param {string} className &#x81EA;&#x8EAB;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x306B;&#x52A0;&#x3048;&#x308B;&#x30AF;&#x30E9;&#x30B9;&#x540D;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addClass(className) {
		this._elem.classList.add(className);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x304B;&#x3089;className&#x3092;&#x9664;&#x53BB;&#x3059;&#x308B;
	 * @param {string} className &#x81EA;&#x8EAB;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x304B;&#x3089;&#x9664;&#x53BB;&#x3059;&#x308B;&#x30AF;&#x30E9;&#x30B9;&#x540D;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeClass(className) {
		this._elem.classList.remove(className);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6301;&#x3064;&#x3059;&#x3079;&#x3066;&#x306E;&#x5B50;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x304B;&#x3089;className&#x3092;&#x9664;&#x53BB;&#x3059;&#x308B;
	 * @param {string} className &#x9664;&#x53BB;&#x3059;&#x308B;&#x30AF;&#x30E9;&#x30B9;&#x540D;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeClassFromAllChild(className) {
		for (let child of this._children) {
			child.removeClass(className);
		}
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x9AD8;&#x3055;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {boolean} [opt_useCache=true] true=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x3001;false=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3057;&#x306A;&#x3044;&#x3002;&#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x3067;true&#x306B;&#x306A;&#x308B;&#x306E;&#x3067;&#x3001;&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x4F7F;&#x308F;&#x305A;&#x8A08;&#x7B97;&#x3057;&#x76F4;&#x3059;&#x5834;&#x5408;&#x306B;&#x306F;&#x660E;&#x793A;&#x7684;&#x306B;false&#x3092;&#x6E21;&#x3059;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x9AD8;&#x3055;
	 */
	height(opt_useCache) {
		// element&#x304C;&#x4E0D;&#x53EF;&#x8996;&#x72B6;&#x614B;&#x306B;&#x3042;&#x308C;&#x3070;&#x9577;&#x3055;&#x304C;&#xFF10;&#x306B;&#x306A;&#x3063;&#x305F;&#x308A;&#x3001;&#x30D6;&#x30E9;&#x30A6;&#x30B6;&#x3054;&#x3068;&#x306B;&#x53D6;&#x5F97;&#x624B;&#x6BB5;&#x306B;&#x9055;&#x3044;&#x304C;&#x3042;&#x3063;&#x305F;&#x308A;&#x76F4;&#x63A5;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;style&#x3068;css&#x3067;&#x306E;&#x6307;&#x5B9A;&#x306E;&#x9055;&#x3044;&#x3001;css&#x3067;&#x306E;&#x6307;&#x5B9A;&#x304C;&apos;auto&apos;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x3068;&#x6587;&#x5B57;&#x5217;&#x304C;&#x8FD4;&#x3063;&#x3066;&#x304D;&#x305F;&#x308A;&#x3068;
		// javascript&#x3067;&#x306E;css&#x5024;&#x306E;&#x53D6;&#x5F97;&#x306F;&#x8907;&#x96D1;&#x3067;&#x56F0;&#x96E3;&#x3067;&#x3042;&#x308B;&#x3053;&#x3068;&#x304B;&#x3089;&#x3001;jQuery&#x306E;&#x4F7F;&#x7528;&#x304C;&#x9069;&#x3057;&#x3066;&#x3044;&#x308B;&#x3068;&#x5224;&#x65AD;&#x3057;&#x305F;(&#x4E0D;&#x53EF;&#x8996;&#x306E;&#x8981;&#x7D20;&#x306F;&#x4E00;&#x6642;&#x7684;&#x306B;&#x53EF;&#x8996;&#x72B6;&#x614B;&#x306B;&#x3057;&#x3066;&#x304B;&#x3089;&#x53D6;&#x5F97;&#x3059;&#x308B;&#x306E;&#x3067;&#x3001;&#x30EC;&#x30F3;&#x30C0;&#x30EA;&#x30F3;&#x30B0;&#x304C;&#x767A;&#x751F;&#x3059;&#x308B;&#x53EF;&#x80FD;&#x6027;&#x306F;&#x9AD8;&#x3044;)
		// &#x8AAD;&#x307F;&#x8FBC;&#x307F;&#x6642;&#x306B;&#x306F;&#x6642;&#x9593;&#x304C;&#x304B;&#x304B;&#x308B;&#x304C;&#x3001;&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3059;&#x308B;&#x3053;&#x3068;&#x3067;&#x884C;&#x79FB;&#x52D5;&#x306A;&#x3069;&#x3067;&#x306F;&#x6700;&#x4F4E;&#x9650;&#x306E;&#x8A08;&#x7B97;&#x306B;&#x306A;&#x308B;&#x3068;&#x671F;&#x5F85;
		if (opt_useCache == undefined) opt_useCache = true;
		if (opt_useCache &amp;&amp; this._height) {
			return this._height;
		}
		return this._height = parseInt($(this.elem()).css(&apos;height&apos;));
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5E45;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {boolean} [opt_useCache=true] true=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x3001;false=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3057;&#x306A;&#x3044;&#x3002;&#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x3067;true&#x306B;&#x306A;&#x308B;&#x306E;&#x3067;&#x3001;&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x4F7F;&#x308F;&#x305A;&#x8A08;&#x7B97;&#x3057;&#x76F4;&#x3059;&#x5834;&#x5408;&#x306B;&#x306F;&#x660E;&#x793A;&#x7684;&#x306B;false&#x3092;&#x6E21;&#x3059;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x5E45;
	 */
	width(opt_useCache) {
		if (opt_useCache == undefined) opt_useCache = true;
		if (opt_useCache &amp;&amp; this._width) {
			return this._width;
		}
		return this._width = parseInt($(this.elem()).css(&apos;width&apos;));
	}
	/**
	 * &#x8981;&#x7D20;&#x5DE6;&#x4E0A;&#x306E;X&#x5EA7;&#x6A19;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x8981;&#x7D20;&#x5DE6;&#x4E0A;&#x306E;X&#x5EA7;&#x6A19;
	 */
	x() {
		return this.elem().getBoundingClientRect().left + window.pageXOffset;
	}
	/**
	 * &#x8981;&#x7D20;&#x5DE6;&#x4E0A;&#x306E;Y&#x5EA7;&#x6A19;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x8981;&#x7D20;&#x5DE6;&#x4E0A;&#x306E;Y&#x5EA7;&#x6A19;
	 */
	y() {
		return this.elem().getBoundingClientRect().top + window.pageYOffset;
	}
	/**
	 * &#x3042;&#x308B;&#x70B9;&#x304B;&#x3089;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x4E2D;&#x5FC3;&#x70B9;&#x307E;&#x3067;&#x306E;&#x8DDD;&#x96E2;&#x3092;&#x8A08;&#x7B97;&#x3059;&#x308B;
	 * @param {number} x &#x57FA;&#x6E96;&#x70B9;&#x306E;X&#x5EA7;&#x6A19;
	 * @param {number} y &#x57FA;&#x6E96;&#x70B9;&#x306E;Y&#x5EA7;&#x6A19;
	 * @return {number} &#x8A08;&#x7B97;&#x3055;&#x308C;&#x305F;&#x8DDD;&#x96E2;&#x306E;&#x30D4;&#x30AF;&#x30BB;&#x30EB;&#x6570;
	 */
	computeDistanceFromPoint(x,y) {
		const ownPos = this.computeCenterPoint();
		return Util.computeDistanceP2P(x,y,ownPos.x,ownPos.y);
	}
	/**
	 * &#x4E2D;&#x5FC3;&#x70B9;&#x306E;&#x5EA7;&#x6A19;&#x3092;&#x8FD4;&#x3059;
	 * @return {object} &#x30D7;&#x30ED;&#x30D0;&#x30C6;&#x30A3;x&#x306B;X&#x5EA7;&#x6A19;&#x3001;&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;y&#x306B;Y&#x5EA7;&#x6A19;&#x306E;&#x5165;&#x3063;&#x305F;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	computeCenterPoint() {
		return {
			x: this.x() + this.width()/2,
			y: this.y() + this.height()/2
		}
	}

	// --DOM&#x64CD;&#x4F5C;&#x95A2;&#x4FC2;

	/**
	 * &#x5185;&#x90E8;&#x306E;&#x30A8;&#x30EC;&#x30E1;&#x30F3;&#x30C8;&#x3092;&#x7A7A;&#x306B;&#x3059;&#x308B;&#x3002;children&#x3068;&#x3057;&#x3066;&#x6301;&#x3063;&#x3066;&#x3044;&#x306A;&#x3044;&#x8981;&#x7D20;(EOL&#x306A;&#x3069;)&#x306F;&#x524A;&#x9664;&#x3055;&#x308C;&#x306A;&#x3044;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	emptyElem() {
		for (let child of this._children) {
			this.elem().removeChild(child.elem());
		}
		return this;
	}
	/**
	 * &#x5185;&#x90E8;&#x306E;&#x30A8;&#x30EC;&#x30E1;&#x30F3;&#x30C8;&#x306B;&#x52A0;&#x3048;&#x3001;&#x5185;&#x90E8;&#x306E;&#x53C2;&#x7167;&#x3082;&#x7A7A;&#x306B;&#x3059;&#x308B;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	empty() {
		this.emptyElem();
		this.emptyChild();
		return this;
	}

	// --&#x30A4;&#x30D9;&#x30F3;&#x30C8;

	/**
	 * &#x81EA;&#x8EAB;&#x306B;keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30EA;&#x30B9;&#x30CA;&#x30FC;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;&#x3002;&#x91CD;&#x306D;&#x304C;&#x3051;&#x306F;&#x7121;&#x52B9;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addKeydownEventListener() {
		if (this._keydownArg) return this;
		this._keydownArg = this.onKeydown.bind(this); // remove&#x3059;&#x308B;&#x3068;&#x304D;&#x3068;&#x5F15;&#x6570;&#x3092;&#x540C;&#x4E00;&#x306B;&#x3059;&#x308B;&#x305F;&#x3081;&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x306B;&#x4FDD;&#x6301;&#x3059;&#x308B;(&#x305D;&#x308C;&#x305E;&#x308C;&#x3067;bind&#x3059;&#x308B;&#x3068;&#x7570;&#x306A;&#x308B;&#x53C2;&#x7167;&#x306B;&#x306A;&#x308B;&#xFF1F;)
		document.addEventListener(&apos;keydown&apos;,this._keydownArg);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30EA;&#x30B9;&#x30CA;&#x30FC;&#x3092;&#x9664;&#x53BB;&#x3059;&#x308B;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeKeydownEventListener() {
		if (!this._keydownArg) return this;
		document.removeEventListener(&apos;keydown&apos;,this._keydownArg);
		this._keydownArg = null;
		return this;
	}
	/**
	 * @private
	 * keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x524D;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3044;&#x3001;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;
	 * @param {object} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	onKeydown(e) {
		&apos;use strict&apos;;
		let keycode;
		if (document.all) {
			// IE
			keycode = e.keyCode
		} else {
			// IE&#x4EE5;&#x5916;
			keycode = e.which;
		}
		if (keycode === 123) { return; } // F12&#x306E;&#x307F;&#x30D6;&#x30E9;&#x30A6;&#x30B6;&#x30B7;&#x30E7;&#x30FC;&#x30C8;&#x30AB;&#x30C3;&#x30C8;&#x30AD;&#x30FC;
		this.runKeydown(e,keycode);
		// &#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x306E;&#x52D5;&#x4F5C;&#x3092;&#x7121;&#x52B9;&#x5316;&#x3059;&#x308B;
		e.preventDefault();
	}
	/**
	 * @private
	 * keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;&#x3002;onkeydown()&#x5185;&#x3067;&#x4F7F;&#x7528;&#x3059;&#x308B;&#x305F;&#x3081;&#x306B;&#x5B9A;&#x7FA9;&#x3057;&#x3066;&#x304A;&#x304F;&#x304C;&#x3001;&#x5185;&#x5BB9;&#x306F;&#x30B5;&#x30D6;&#x30AF;&#x30E9;&#x30B9;&#x3067;&#x4E0A;&#x66F8;&#x304D;&#x3059;&#x308B;
	 * @param {object} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @param {number} keycode &#x62BC;&#x4E0B;&#x3055;&#x308C;&#x305F;&#x30AD;&#x30FC;&#x306E;&#x30AD;&#x30FC;&#x30B3;&#x30FC;&#x30C9;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	runKeydown(e,keycode) {
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306B;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;&#x3002;&#x91CD;&#x306D;&#x304C;&#x3051;&#x306F;&#x7121;&#x52B9;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addClickEventListener() {
		if (this._clickArg) return this;
		this._clickArg = this.onClick.bind(this); // remove&#x3059;&#x308B;&#x3068;&#x304D;&#x3068;&#x5F15;&#x6570;&#x3092;&#x540C;&#x4E00;&#x306B;&#x3059;&#x308B;&#x305F;&#x3081;&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x306B;&#x4FDD;&#x6301;&#x3059;&#x308B;(&#x305D;&#x308C;&#x305E;&#x308C;&#x3067;bind&#x3059;&#x308B;&#x3068;&#x7570;&#x306A;&#x308B;&#x53C2;&#x7167;&#x306B;&#x306A;&#x308B;&#xFF1F;)
		this.elem().addEventListener(&apos;click&apos;,this._clickArg);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x9664;&#x53BB;&#x3059;&#x308B;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeClickEventListener() {
		if (!this._clickArg) return this;
		this.elem().removeEventListener(&apos;click&apos;,this._clickArg);
		this._clickArg = null;
		return this;
	}
	/**
	 * @private
	 * &#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;
	 * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	onClick(e) {
		this.runClick(e);
	}
	/**
	 * @private
	 * click&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;&#x3002;onClick()&#x5185;&#x3067;&#x4F7F;&#x7528;&#x3059;&#x308B;&#x305F;&#x3081;&#x306B;&#x5B9A;&#x7FA9;&#x3057;&#x3066;&#x304A;&#x304F;&#x304C;&#x3001;&#x5185;&#x5BB9;&#x306F;&#x30B5;&#x30D6;&#x30AF;&#x30E9;&#x30B9;&#x3067;&#x4E0A;&#x66F8;&#x304D;&#x3059;&#x308B;
	 * @param {object} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	runClick(e) {
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306B;&#x30DB;&#x30A4;&#x30FC;&#x30EB;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;&#x3002;&#x91CD;&#x306D;&#x304C;&#x3051;&#x306F;&#x7121;&#x52B9;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addWheelEventListener() {
		if (this._wheelArg) return this;
		this._wheelArg = this.onWheel.bind(this); // remove&#x3059;&#x308B;&#x3068;&#x304D;&#x3068;&#x5F15;&#x6570;&#x3092;&#x540C;&#x4E00;&#x306B;&#x3059;&#x308B;&#x305F;&#x3081;&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x306B;&#x4FDD;&#x6301;&#x3059;&#x308B;(&#x305D;&#x308C;&#x305E;&#x308C;&#x3067;bind&#x3059;&#x308B;&#x3068;&#x7570;&#x306A;&#x308B;&#x53C2;&#x7167;&#x306B;&#x306A;&#x308B;&#xFF1F;)
		const selector = &apos;#&apos; + this.elem().id;
		$(&apos;body&apos;).on(&apos;mousewheel&apos;,selector,this._wheelArg)
			return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x30DB;&#x30A4;&#x30FC;&#x30EB;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x9664;&#x53BB;&#x3059;&#x308B;
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeWheelEventListener() {
		if (!this._wheelArg) return this;
		const selector = &apos;#&apos; + this.elem().id;
		$(&apos;body&apos;).off(&apos;mousewheel&apos;,selector,this._wheelArg);
		this._wheelArg = null;
		return this;
	}
	/**
	 * @private
	 * keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x524D;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3044;&#x3001;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;
	 * @param {object} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @param {number} delta &#x30DB;&#x30A4;&#x30FC;&#x30EB;&#x306E;&#x79FB;&#x52D5;&#x91CF;
	 * @param {number} deltaX
	 * @param {number} deltaY
	 */
	onWheel(e,delta,deltaX,deltaY) {
		this.runWheel(e,delta &gt; 0);
	}
	// onWheel()&#x5185;&#x3067;&#x4F7F;&#x7528;&#x3059;&#x308B;&#x305F;&#x3081;&#x306B;&#x5B9A;&#x7FA9;&#x3057;&#x3066;&#x304A;&#x304F;&#x304C;&#x3001;&#x5185;&#x5BB9;&#x306F;&#x30B5;&#x30D6;&#x30AF;&#x30E9;&#x30B9;&#x3067;&#x4E0A;&#x66F8;&#x304D;&#x3059;&#x308B;
	/**
	 * @private
	 * &#x30DB;&#x30A4;&#x30FC;&#x30EB;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;&#x3002;onWheel()&#x5185;&#x3067;&#x4F7F;&#x7528;&#x3059;&#x308B;&#x305F;&#x3081;&#x306B;&#x5B9A;&#x7FA9;&#x3057;&#x3066;&#x304A;&#x304F;&#x304C;&#x3001;&#x5185;&#x5BB9;&#x306F;&#x30B5;&#x30D6;&#x30AF;&#x30E9;&#x30B9;&#x3067;&#x4E0A;&#x66F8;&#x304D;&#x3059;&#x308B;
	 * @param {object} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @param {boolean} isUp &#x30DB;&#x30A4;&#x30FC;&#x30EB;&#x304C;&#x4E0A;&#x65B9;&#x5411;&#x306B;&#x52D5;&#x3044;&#x305F;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 * @return {AbstractHierarchy} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	runWheel(e,isUp) {
		return this;
	}
}

/**
 * &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class Char extends AbstractHierarchy {
	/**
	 * @param {object} data &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&lt;br&gt;
	 * &#x4F8B;
	 * &lt;pre&gt;
	 * &lt;code&gt;
	 *		{
	 *			&quot;char&quot;:&quot;&#x3042;&quot;,
	 *			&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	 *			&quot;fontSize&quot;: &quot;auto&quot;
	 *		}
	 *	&lt;/code&gt;
	 *	&lt;/pre&gt;
	 */
	constructor(data) {
		super(data.char ? Util.createCharElement(data) : data); // data&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306B;char&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;EOL&#x304B;&#x3089;&#x306E;&#x547C;&#x3073;&#x51FA;&#x3057;&#x3067;&#x3001;data&#x306B;&#x306F;&#x30A8;&#x30EC;&#x30E1;&#x30F3;&#x30C8;&#x304C;&#x5165;&#x3063;&#x3066;&#x3044;&#x308B;
		data.fontSize &amp;&amp; (this._fontSize = data.fontSize);
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x3067;&#x3042;&#x308B;Row&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;newRow&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {Row} [opt_newRow] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Char Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	row(opt_newRow) {
		return this.parent(opt_newRow);
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	paragraph() {
		return this.row().paragraph();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	sentenceContainer() {
		return this.paragraph().container();
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x6301;&#x3064;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	cursor() {
		return this.row().paragraph().container().cursor();
	}
	// Cursor&#x7528;
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x3068;&#x3057;&#x3066;&#x81EA;&#x8EAB;&#x304C;&#x4E0D;&#x9069;&#x306A;&#x3089;&#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;Char&#x3092;&#x8FD4;&#x3059;&#x3002;&#x81EA;&#x8EAB;&#x304C;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306A;&#x3089;&#x305D;&#x306E;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x3068;&#x306A;&#x308B;
	 * @return {Char} &#x81EA;&#x8EAB;&#x3082;&#x542B;&#x3081;&#x305F;&#x81EA;&#x8EAB;&#x4EE5;&#x964D;&#x3067;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x3068;&#x3057;&#x3066;&#x9069;&#x3057;&#x305F;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	slideNextCursor() {
		// &#x6BB5;&#x843D;&#x6700;&#x5F8C;&#x306E;EOL&#x4EE5;&#x5916;&#x306E;EOL&#x306B;&#x306F;&#x6B62;&#x307E;&#x3089;&#x306A;&#x3044;
		// &#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306A;&#x3089;&#x305D;&#x306E;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x306B;&#x5909;&#x66F4;&#x3059;&#x308B;
		if (this.isEOL() &amp;&amp; this.row().hasNextSibling()) {
			return this.next();
		} else {
			return this;
		}
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x3068;&#x3057;&#x3066;&#x81EA;&#x8EAB;&#x304C;&#x4E0D;&#x9069;&#x306A;&#x3089;&#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306E;Char&#x3092;&#x8FD4;&#x3059;&#x3002;&#x81EA;&#x8EAB;&#x304C;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306A;&#x3089;&#x305D;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x3068;&#x306A;&#x308B;
	 * @return {Char} &#x81EA;&#x8EAB;&#x3082;&#x542B;&#x3081;&#x305F;&#x81EA;&#x8EAB;&#x4EE5;&#x524D;&#x3067;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x3068;&#x3057;&#x3066;&#x9069;&#x3057;&#x305F;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	slidePrevCursor() {
		// &#x6BB5;&#x843D;&#x6700;&#x5F8C;&#x306E;EOL&#x4EE5;&#x5916;&#x306E;EOL&#x306B;&#x306F;&#x6B62;&#x307E;&#x3089;&#x306A;&#x3044;
		// &#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306A;&#x3089;&#x305D;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x5909;&#x66F4;&#x3059;&#x308B;
		if (this.isEOL() &amp;&amp; this.row().hasNextSibling()) {
			return this.prev();
		} else {
			return this;
		}
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;Char&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;&#x3002;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x304B;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x5F8C;&#x304B;&#x306B;&#x95A2;&#x308F;&#x3089;&#x305A;&#x3001;EOL&#x306F;&#x5B8C;&#x5168;&#x6392;&#x9664;&#x3057;&#x3066;&#x6587;&#x5B57;&#x306E;&#x307F;&#x3092;&#x8FD4;&#x3059;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;Char&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	nextChar() {
		if (this.next() &amp;&amp; this.next().isEOL()) {
			return this.next().nextChar();
		} else {
			return this.next();
		}
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;Char&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;&#x3002;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x304B;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x5F8C;&#x304B;&#x306B;&#x95A2;&#x308F;&#x3089;&#x305A;&#x3001;EOL&#x306F;&#x5B8C;&#x5168;&#x6392;&#x9664;&#x3057;&#x3066;&#x6587;&#x5B57;&#x306E;&#x307F;&#x3092;&#x8FD4;&#x3059;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306E;Char&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	prevChar() {
		if (this.prev() &amp;&amp; this.prev().isEOL()) {
			return this.prev().prevChar();
		} else {
			return this.prev();
		}
	}
	/**
	 * &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x3092;&#x8FD4;&#x3059;&#x3002;EOL&#x306F;&#x542B;&#x307E;&#x306A;&#x3044;
	 * @return {Char} &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	nextCharOnParagraph() {
		if (this.hasNextCharOnParagraph()) {
			return this.nextChar();
		}
		return null;
	}
	/**
	 * &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x3092;&#x8FD4;&#x3059;&#x3002;EOL&#x306F;&#x542B;&#x307E;&#x306A;&#x3044;
	 * @return {Char} &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	prevCharOnParagraph() {
		if (this.hasPrevCharOnParagraph()) {
			return this.prevChar();
		}
		return null;
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x81EA;&#x8EAB;&#x304C;EOL&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x30AA;&#x30FC;&#x30D0;&#x30FC;&#x30E9;&#x30A4;&#x30C9;&#x3055;&#x308C;&#x306A;&#x3044;&#x9650;&#x308A;&#x5E38;&#x306B;false
	 */
	isEOL() {
		return false;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x305F;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasCursor() {
		return this.hasClass(&apos;cursor&apos;);
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isDisplay() {
		return this.hasClass(&apos;display&apos;);
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x540C;&#x4E00;&#x884C;&#x5185;&#x3067;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;&#x3002;EOL&#x306F;&#x542B;&#x307E;&#x306A;&#x3044;(&#x6B21;&#x306E;&#x6587;&#x5B57;&#x304C;EOL&#x306A;&#x3089;false,&#x81EA;&#x8EAB;&#x304C;EOL&#x306E;&#x5834;&#x5408;&#x3082;false)
	 * @return {boolean} &#x540C;&#x4E00;&#x884C;&#x5185;&#x3067;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;true&#x3001;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x306A;&#x3089;false&#x3002;
	 */
	hasNextSibling() {
		return !(this._isEOL || this.next().isEOL());
	}
	/**
	 * &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x6B21;&#x306E;Char&#x304C;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x6B21;&#x306E;Char&#x304C;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasNextCharOnParagraph() {
		return this.nextChar() &amp;&amp; this.nextChar().paragraph() === this.paragraph();
	}
	/**
	 * &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x524D;&#x306E;Char&#x304C;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x524D;&#x306E;Char&#x304C;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasPrevCharOnParagraph() {
		return this.prevChar() &amp;&amp; this.prevChar().paragraph() === this.paragraph();
	}
	/**
	 * &#x3053;&#x306E;&#x8981;&#x7D20;&#x304C;range&#x306E;&#x4E2D;&#x306B;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @param {Range} range &#x5224;&#x5B9A;&#x306E;&#x57FA;&#x6E96;&#x3068;&#x306A;&#x308B;&#x7BC4;&#x56F2;&#x3092;&#x8868;&#x3059;Range
	 * @return {boolean} &#x3053;&#x306E;&#x8981;&#x7D20;&#x304C;range&#x306E;&#x4E2D;&#x306B;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isInRange(range) {
		const charRange = document.createRange();
		// &#x73FE;&#x5728;&#x306E;&#x8981;&#x7D20;&#x3092;&#x56F2;&#x3080;&#x7BC4;&#x56F2;&#x3092;charRange&#x3068;&#x3057;&#x3066;&#x8A2D;&#x5B9A;&#x3002;selectNodeContents&#x3092;selectNode&#x306B;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x3092;&#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x30CE;&#x30FC;&#x30C9;&#x3067;&#x306F;&#x306A;&#x304F;span&#x8981;&#x7D20;&#x306B;&#x3059;&#x308B;&#x3068;&#x3001;&#x9078;&#x629E;&#x4E2D;&#x6700;&#x521D;&#x3068;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x304C;&#x53CD;&#x5FDC;&#x3057;&#x306A;&#x3044;&#x3053;&#x3068;&#x304C;&#x3042;&#x308B;
		charRange.selectNodeContents(this.elem().childNodes.item(0));
		// &#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x304C;&#x540C;&#x3058;&#x304B;select&#x306E;&#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x3088;&#x308A;&#x6587;&#x5B57;&#x306E;&#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x304C;&#x5F8C;&#x308D;&#x306B;&#x3042;&#x308A;&#x3001;
		// &#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x304C;&#x540C;&#x3058;&#x304B;select&#x306E;&#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x3088;&#x308A;&#x6587;&#x5B57;&#x306E;&#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x304C;&#x524D;&#x306B;&#x3042;&#x308B;
		if (charRange.compareBoundaryPoints(Range.START_TO_START,range) &gt;= 0
				&amp;&amp; charRange.compareBoundaryPoints(Range.END_TO_END,range) &lt;= 0) {
			charRange.detach();
			return true;
		}
		charRange.detach();
		return false;
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x304C;&#x592A;&#x5B57;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x592A;&#x5B57;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isBold() {
		return this.hasClass(&apos;decolation-font-bold&apos;);
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x304C;&#x659C;&#x4F53;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x659C;&#x4F53;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isItalic() {
		return this.hasClass(&apos;decolation-font-italic&apos;);
	}

	// --Status

	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	 * @return {object} &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	data() {
		const data = {};
		data[&apos;char&apos;] = this.text();
		data[&apos;decolation&apos;] = this.classArray();
		data[&apos;fontSize&apos;] = this.fontSize() + &apos;&apos;;
		return data;
	}
	/**
	 * @private
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306B;&#x304B;&#x304B;&#x3063;&#x3066;&#x3044;&#x308B;&#x88C5;&#x98FE;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x914D;&#x5217;&#x306B;&#x3057;&#x3066;&#x8FD4;&#x3059;
	 * @return {string[]} &#x3053;&#x306E;&#x6587;&#x5B57;&#x306B;&#x304B;&#x304B;&#x3063;&#x3066;&#x3044;&#x308B;&#x88C5;&#x98FE;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3002;&#x6587;&#x5B57;&#x88C5;&#x98FE;&#x304C;&#x304B;&#x304B;&#x3063;&#x3066;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;&#x7A7A;&#x306E;&#x914D;&#x5217;
	 */
	classArray() {
		return this.className().match(/decolation-\S+/g) || [];
	}

	// --Style

	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x5F53;&#x3066;&#x308B;
	 * @param {boolean} [opt_bShift] &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addCursor(opt_bShift) {
		this.cursor().addCursor(this,opt_bShift);
		return this;
	}

	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x3092;&#x5909;&#x66F4;&#x3059;&#x308B;&#x3002;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} [opt_fontSize] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;
	 * @return {Char number string} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3002;&#x73FE;&#x5728;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x304C;&#x6570;&#x5024;&#x3067;&#x8A2D;&#x5B9A;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;&#x6587;&#x5B57;&#x5217;&#x306E;&apos;auto&apos;
	 */
	fontSize(opt_fontSize) {
		if (opt_fontSize) {
			this._fontSize = opt_fontSize;
			this._elem.dataset.fontSize = opt_fontSize;
			// &#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x304C;&#x5909;&#x66F4;&#x3055;&#x308C;&#x308B;&#x3068;&#x884C;&#x306E;&#x5E45;&#x304C;&#x5909;&#x308F;&#x308B;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x3042;&#x308B;&#x305F;&#x3081;&#x3001;&#x8A08;&#x7B97;&#x3057;&#x76F4;&#x3057;&#x3066;&#x304A;&#x304F;
			this.row().width(false);
			return this;
		} else {
			if (this._fontSize) {
				if (this._fontSize === &apos;auto&apos;) {
					return this._fontSize;
				} else {
					return parseInt(this._fontSize);
				}
			} else {
				return &apos;auto&apos;;
			}
		}
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306B;&#x6587;&#x5B57;&#x8272;&#x3092;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3002;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;&#x6587;&#x5B57;&#x8272;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {string boolean} [opt_color] &#x6587;&#x5B57;&#x5217;&#x306A;&#x3089;&#x305D;&#x306E;&#x8272;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;false&#x3092;&#x6E21;&#x305B;&#x3070;&#x6587;&#x5B57;&#x8272;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
	 * @return {Char string} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;&#x6587;&#x5B57;&#x8272;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;&#x3002;&#x6587;&#x5B57;&#x8272;&#x304C;&#x8A2D;&#x5B9A;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;&apos;black&apos;)
	 */
	color(opt_color) {
		if (opt_color) {
			this.addColor(opt_color);
			return this;
		}
		if (opt_color === false) {
			this.removeColor();
			return this;
		}
		if (opt_color === undefined) {
			const color = this.className().match(/decolation-color-(\S+)/);
			return color ? color[1] : &apos;black&apos;;
		}
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x592A;&#x5B57;&#x3092;&#x8A2D;&#x5B9A;&#x3001;&#x89E3;&#x9664;&#x3059;&#x308B;
	 * @param {boolean} bl true&#x306A;&#x3089;&#x592A;&#x5B57;&#x306B;&#x3059;&#x308B;&#x3001;false&#x306A;&#x3089;&#x592A;&#x5B57;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	bold(bl) {
		if (bl) {
			this.addClass(&apos;decolation-font-bold&apos;);
		} else {
			this.removeClass(&apos;decolation-font-bold&apos;);
		}
		return this;
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x659C;&#x4F53;&#x3092;&#x8A2D;&#x5B9A;&#x3001;&#x89E3;&#x9664;&#x3059;&#x308B;
	 * @param {boolean} bl true&#x306A;&#x3089;&#x659C;&#x4F53;&#x306B;&#x3059;&#x308B;&#x3001;false&#x306A;&#x3089;&#x659C;&#x4F53;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	italic(bl) {
		if (bl) {
			this.addClass(&apos;decolation-font-italic&apos;);
		} else {
			this.removeClass(&apos;decolation-font-italic&apos;);
		}
		return this;
	}
	/**
	 * @private
	 * &#x6587;&#x5B57;&#x8272;&#x3092;&#x8A2D;&#x5B9A;&#x3059;&#x308B;
	 * @param {string} color &#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x6587;&#x5B57;&#x8272;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addColor(color) {
		// &#x540C;&#x4E00;&#x7A2E;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x3059;&#x3067;&#x306B;&#x6301;&#x3063;&#x3066;&#x3044;&#x305F;&#x3089;&#x5916;&#x3059;
		this.removeColor();
		if (color === &apos;decolation-color-black&apos;) return; // &#x30D6;&#x30E9;&#x30C3;&#x30AF;&#x306A;&#x3089;&#x5916;&#x3057;&#x3066;&#x7D42;&#x308F;&#x308A;
		this.addClass(&apos;decolation-color-&apos;+ color);
		return this;
	}
	/**
	 * @private
	 * &#x6587;&#x5B57;&#x8272;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeColor() {
		const regexp = new RegExp(&apos;decolation-color-\\S+&apos;);
		const rmClass = this.className().match(regexp);
		if (rmClass) { this.removeClass(rmClass[0]); }
		return this;
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x304B;&#x3089;&#x59CB;&#x307E;&#x308B;&#x6587;&#x5B57;&#x5217;&#x304C;str&#x3068;&#x5408;&#x81F4;&#x3059;&#x308B;&#x306A;&#x3089;&#x3001;&#x305D;&#x306E;&#x6587;&#x5B57;&#x5217;&#x306E;Char&#x306B;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;
	 * @param {string} str &#x5224;&#x5B9A;&#x3059;&#x308B;&#x6587;&#x5B57;&#x5217;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	markSearchPhrase(str) {
		// &#xFF11;&#x6587;&#x5B57;&#x305A;&#x3064;&#x6BD4;&#x8F03;&#x3057;&#x3001;&#x6E21;&#x3055;&#x308C;&#x305F;&#x6587;&#x5B57;&#x5217;&#x306E;&#x9577;&#x3055;&#x5206;&#x306E;&#x30EB;&#x30FC;&#x30D7;&#x3092;&#x7D42;&#x3048;&#x308B;&#x307E;&#x3067;&#x306B;&#x7570;&#x306A;&#x308B;&#x6587;&#x5B57;&#x304C;&#x73FE;&#x308C;&#x308B;&#x304B;&#x6BB5;&#x843D;&#x306B;&#x6B8B;&#x308A;&#x306E;&#x6587;&#x5B57;&#x304C;&#x306A;&#x304F;&#x306A;&#x308C;&#x3070;return
		// &#x6700;&#x521D;&#x306E;&#x30EB;&#x30FC;&#x30D7;&#x3092;&#x7121;&#x4E8B;&#x306B;&#x7D42;&#x3048;&#x308C;&#x3070;&#x3053;&#x306E;&#x6587;&#x5B57;&#x304B;&#x3089;&#x59CB;&#x307E;&#x308B;&#x6587;&#x5B57;&#x5217;&#x306F;str&#x306B;&#x5408;&#x81F4;&#x3057;&#x3066;&#x3044;&#x308B;&#x3068;&#x3044;&#x3046;&#x3053;&#x3068;&#x306A;&#x306E;&#x3067;&#x3001;&#x305D;&#x308C;&#x305E;&#x308C;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;

		// &#x5408;&#x81F4;&#x3057;&#x3066;&#x3044;&#x308B;&#x304B;&#x306E;&#x5224;&#x5B9A;
		// &#x5408;&#x81F4;&#x3057;&#x306A;&#x3044;&#x6587;&#x5B57;&#x304C;&#x73FE;&#x308C;&#x305F;&#x304B;&#x3001;&#x6587;&#x5B57;&#x5217;&#x3092;&#x6BD4;&#x8F03;&#x3057;&#x7D42;&#x3048;&#x308B;&#x524D;&#x306B;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x9054;&#x3057;&#x305F;&#x3089;return
		for (let i = 0,len = str.length,char = this; i &lt; len; i++,char = char.nextCharOnParagraph()) {
			if (!char || str.charAt(i) !== char.text()) return this;
		}

		// &#x30AF;&#x30E9;&#x30B9;&#x306E;&#x4ED8;&#x4E0E;
		this.addClass(&apos;search-label&apos;);
		for (let i = 0,len = str.length,char = this; i &lt; len; char = char.nextChar(),i++) {
			char.addClass(&apos;search-word&apos;);
		}
		return this;
	}

	// --DOM&#x64CD;&#x4F5C;&#x95A2;&#x4FC2;

	/**
	 * char&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x524D;&#x306B;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {Char} char &#x633F;&#x5165;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	before(char) {
		// DOM
		// this.elem().before(char.elem()); // before(),after()&#x306F;&#x307E;&#x3060;&#x30B5;&#x30DD;&#x30FC;&#x30C8;&#x3055;&#x308C;&#x305A;
		this.row().elem().insertBefore(char.elem(),this.elem());

		// &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
		// oldPrev - char - this

		// char
		const oldPrev = this.prev();
		oldPrev &amp;&amp; this.prev().next(char);
		char.prev(oldPrev);
		char.next(this);
		this.prev(char);
		// parent
		char.row(this.row());
		const pos = this.index();
		this.row().insertChar(pos,char);
		return this;
	}
	/**
	 * char&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x5F8C;&#x306B;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {Char} char &#x633F;&#x5165;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	after(char) {
		if (this.isEOL()) { return this; } // todo: &#x4F8B;&#x5916;&#x3092;&#x4F7F;&#x7528;&#x3057;&#x305F;&#x307B;&#x3046;&#x304C;&#x3044;&#x3044;&#x304B;&#x3082; EOL&#x304B;&#x3089;&#x306E;after&#x306F;&#x3067;&#x304D;&#x306A;&#x3044;
		// DOM
		if (this.hasNextSibling()) {
			this.row().elem().insertBefore(char.elem(),this.next().elem());
		} else {
			this.row().elem().appendChild(char.elem());
		}

		// &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
		// this - char - oldNextChar

		// char
		const oldNextChar = this.next();
		this.next(char);
		char.prev(this);
		char.next(oldNextChar);
		oldNextChar &amp;&amp; oldNextChar.prev(char);
		// parent
		char.row(this.row());
		const pos = this.index() + 1;
		this.row().insertChar(pos,char);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;&#x3002;&#x6587;&#x66F8;&#x6574;&#x5F62;&#x306F;&#x884C;&#x308F;&#x308C;&#x306A;&#x3044;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	remove() {
		// &#x8981;&#x7D20;&#x3068;&#x53C2;&#x7167;&#x306E;&#x524A;&#x9664;
		if (this.isEOL()) return this; // EOL&#x306F;&#x524A;&#x9664;&#x4E0D;&#x53EF;
		const row = this.row();
		row.elem().removeChild(this.elem());
		// oldPrev - this - oldNext &#x2192;&#x3000;oldPrev - oldNext
		const oldPrev = this.prev();
		const oldNext = this.next();
		if (oldPrev) oldPrev.next(oldNext);
		if (oldNext) oldNext.prev(oldPrev);
		// &#x53E4;&#x3044;&#x89AA;&#x306E;&#x914D;&#x5217;&#x304B;&#x3089;&#x524A;&#x9664;
		row.deleteChar(this);
		return this;
	}
	// &#x6587;&#x66F8;&#x6574;&#x5F62;&#x3082;&#x542B;&#x3080;&#x524A;&#x9664;
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3057;&#x3001;&#x6587;&#x66F8;&#x6574;&#x5F62;&#x3092;&#x884C;&#x3046;(&#x7A7A;&#x884C;&#x304C;&#x3067;&#x304D;&#x305F;&#x3089;&#x305D;&#x306E;&#x884C;&#x3082;&#x524A;&#x9664;&#x3057;&#x3001;&#x6587;&#x5B57;&#x6570;&#x8ABF;&#x6574;&#x3084;&#x7981;&#x5247;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3046;)
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	delete() {
		const row = this.row();
		const paragraph = row.paragraph();
		this.remove();

		// &#x6BB5;&#x843D;&#x5148;&#x982D;&#x4EE5;&#x5916;&#x306E;&#x884C;&#x3067;&#x3001;&#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;&#x3057;&#x305F;&#x7D50;&#x679C;&#x884C;&#x304C;&#x7A7A;&#x306B;&#x306A;&#x3063;&#x305F;&#x5834;&#x5408;&#x3001;&#x305D;&#x306E;&#x884C;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;
		if (!row.isFirst() &amp;&amp; row.isEmpty()) {
			row.lastChild().hasCursor() &amp;&amp; row.prev().EOL().addCursor().setPosMemory(); // &#x524A;&#x9664;&#x884C;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308C;&#x3070;&#x3001;&#x305D;&#x306E;&#x524D;&#x306E;&#x884C;&#x306E;EOL&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;
			row.remove();
		}

		paragraph.cordinate().checkKinsoku();
		return this;
	}
	/**
	 * &#x81EA;&#x5206;&#x81EA;&#x8EAB;&#x3092;newChar&#x3068;&#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;
	 * @param {Char} newChar &#x81EA;&#x8EAB;&#x3068;&#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	replace(newChar) {
		newChar.prev(this.prev());
		newChar.next(this.next());
		if (this.prev()) { this.prev().next(newChar); }
		if (this.next()) { this.next().prev(newChar); }
		this.prev(null);
		this.next(null);
		this.row().replaceChild(this,newChar);
		this.row(null);
		return this;
	}
	/**
	 * &#x524D;&#x306E;&#x884C;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x305D;&#x306E;&#x7D50;&#x679C;&#x7A7A;&#x884C;&#x304C;&#x3067;&#x304D;&#x305F;&#x3089;&#x524A;&#x9664;&#x3057;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x305D;&#x306E;&#x884C;&#x306B;&#x3042;&#x308C;&#x3070;&#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;EOL&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;
	 *     &#x6BB5;&#x843D;&#x306F;&#x307E;&#x305F;&#x304C;&#x305A;&#x3001;&#x79FB;&#x52D5;&#x524D;&#x306E;&#x81EA;&#x8EAB;&#x304C;&#x6BB5;&#x843D;&#x6700;&#x521D;&#x306E;&#x6587;&#x5B57;&#x3067;&#x3042;&#x308C;&#x3070;&#x4F55;&#x3082;&#x3057;&#x306A;&#x3044;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	moveLastBefore() {
		if (this.isEOL() || !this.isFirst()) { return this; } // &#x5404;&#x884C;&#x6700;&#x521D;&#x306E;&#x6587;&#x5B57;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;
		if (this.row().isFirst()) return this; // &#x6BB5;&#x843D;&#x306F;&#x307E;&#x305F;&#x304C;&#x306A;&#x3044;

		const oldRow = this.row();
		this.remove(); // delete()&#x5185;&#x3067;cordinate()&#x3092;&#x4F7F;&#x3044;&#x3001;cordinate()&#x5185;&#x3067;moveLastBefore()&#x3092;&#x4F7F;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;&#x3053;&#x3053;&#x3067;delete()&#x3092;&#x4F7F;&#x3046;&#x3068;&#x7121;&#x9650;&#x518D;&#x5E30;&#x306E;&#x6050;&#x308C;&#x3042;&#x308A;
		oldRow.prev().append(this);

		// &#x79FB;&#x52D5;&#x3057;&#x305F;&#x7D50;&#x679C;&#x3001;&#x7A7A;&#x884C;&#x304C;&#x3067;&#x304D;&#x305F;&#x3089;&#x524A;&#x9664;&#x3059;&#x308B;
		if (oldRow.isEmpty()){
			oldRow.hasCursor() &amp;&amp; this.next().addCursor(); // &#x524A;&#x9664;&#x884C;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x79FB;&#x52D5;&#x3059;&#x308B;
			oldRow.remove();
		}
		this.setPosMemory();
		return this;
	}
	/**
	 * &#x6B21;&#x306E;&#x884C;&#x306E;&#x6700;&#x521D;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x6B21;&#x306E;&#x884C;&#x304C;&#x540C;&#x3058;&#x6BB5;&#x843D;&#x306B;&#x306A;&#x3051;&#x308C;&#x3070;&#x65B0;&#x3057;&#x304F;&#x884C;&#x3092;&#x4F5C;&#x308A;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;EOL&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	moveFirstAfter() {
		if (this.isEOL() || !this.isLast()) return this; // &#x5404;&#x884C;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x5B57;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;

		const oldRow = this.row();
		// &#x6B21;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x65B0;&#x3057;&#x304F;&#x4F5C;&#x308B;(&#x6BB5;&#x843D;&#x306F;&#x307E;&#x305F;&#x304C;&#x306A;&#x3044;)
		if (oldRow.isLast()) {
			const newRow = Row.createEmptyRow();
			oldRow.after(newRow);
			oldRow.EOL().hasCursor() &amp;&amp; newRow.EOL().addCursor(); // &#x6BB5;&#x843D;&#x6700;&#x5F8C;&#x306E;EOL&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308C;&#x3070;&#x52D5;&#x304B;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x79FB;&#x52D5;&#x3059;&#x308B;
		}

		this.remove();
		oldRow.next().prepend(this.display(true)); // display&#x3057;&#x3066;&#x304A;&#x304B;&#x306A;&#x3051;&#x308C;&#x3070;&#x3001;changeDisplay()&#x3067;&#x306E;&#x8A08;&#x7B97;&#x306B;&#x72C2;&#x3044;&#x304C;&#x751F;&#x3058;&#x308B;

		this.setPosMemory(); // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x4ED8;&#x4E0E;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x6587;&#x5B57;&#x306F;&#x5909;&#x308F;&#x3089;&#x306A;&#x3044;&#x304C;&#x3001;&#x305D;&#x306E;&#x6587;&#x5B57;&#x306E;&#x4F4D;&#x7F6E;&#x304C;&#x5909;&#x308F;&#x308B;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x3042;&#x308B;&#x305F;&#x3081;posMemory&#x3092;&#x4ED8;&#x3051;&#x66FF;&#x3048;&#x308B;
		return this;
	}

	// --Display&#x95A2;&#x4FC2;
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x8868;&#x793A;&#x975E;&#x8868;&#x793A;&#x3092;&#x5207;&#x308A;&#x66FF;&#x3048;&#x308B;
	 * @param {boolean} bDisplay true&#x306A;&#x3089;&#x8868;&#x793A;&#x3001;false&#x306A;&#x3089;&#x975E;&#x8868;&#x793A;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	display(bDisplay) {
		if (bDisplay) {
			this._elem.classList.add(&apos;display&apos;);
		} else {
			this._elem.classList.remove(&apos;display&apos;);
		}
		return this;
	}

	// Utility

	/**
	 * &#x73FE;&#x5728;&#x306E;&#x30E1;&#x30CB;&#x30E5;&#x30FC;&#x30D0;&#x30FC;&#x306E;&#x72B6;&#x614B;&#x306B;&#x5373;&#x3057;&#x3066;c&#x3092;&#x5185;&#x5BB9;&#x306B;&#x6301;&#x3064;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;&#x3002;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3092;&#x6301;&#x3064;&#x65E2;&#x5B58;&#x306E;Char&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306B;&#x306F;&#x5F71;&#x97FF;&#x3057;&#x306A;&#x3044;
	 * @param {string} c &#x4F5C;&#x6210;&#x3059;&#x308B;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x8868;&#x3059;&#x6587;&#x5B57;(&#xFF11;&#x6587;&#x5B57;)
	 * @return {object} &#x6587;&#x5B57;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	createData(c) {
		// Menu&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x3084;&#x3059;&#x304F;&#x3059;&#x308B;&#x305F;&#x3081;&#x3001;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3068;&#x3057;&#x3066;&#x5B9A;&#x7FA9;
		const ret = {};
		ret[&quot;char&quot;] = c;
		const menu = this.paragraph().container().menu();
		ret[&quot;decolation&quot;] = menu.charDecolations();
		ret[&quot;fontSize&quot;] = menu.fontSizeInput();
		return ret;
	}
	/**
	 * &#x6587;&#x5B57;&#x88C5;&#x98FE;&#x306E;&#x306A;&#x3044;&#x6587;&#x5B57;&#x306E;&#x6587;&#x5B57;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x8FD4;&#x3059;
	 * @param {string} c &#x4F5C;&#x6210;&#x3059;&#x308B;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x8868;&#x3059;&#x6587;&#x5B57;(&#xFF11;&#x6587;&#x5B57;)
	 * @return {object} &#x6587;&#x5B57;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	static createPlainCharData(c) {
		const ret = {};
		ret[&apos;char&apos;] = c;
		ret[&apos;decolation&apos;] = [];
		ret[&apos;fontSize&apos;] = &apos;auto&apos;;
		return ret;
	}

	// -- other

	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3068;&#x3057;&#x3066;&#x8A18;&#x61B6;&#x3059;&#x308B;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	setPosMemory() {
		const index = this.index();
		this.cursor().setPosMemory(index);
		return this;
	}

	/**
	 * &#x81EA;&#x5206;&#x3092;&#x542B;&#x3081;&#x3066;&#x3001;&#x81EA;&#x5206;&#x4EE5;&#x964D;&#x3067;&#x540C;&#x3058;&#x6BB5;&#x843D;&#x5185;&#x306E;Char&#x5168;&#x3066;&#x306B;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3046;(EOL&#x306F;&#x542B;&#x307E;&#x306A;&#x3044;)
	 * @param {function} func &#x51E6;&#x7406;&#x5185;&#x5BB9;&#x304C;&#x5B9A;&#x7FA9;&#x3055;&#x308C;&#x305F;&#x95A2;&#x6570;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	afterEach(func) {
		const index = this.index();
		let cnt = 0;
		for (let char of this.row().chars()) {
			if (cnt &gt;= index) func(char);
			cnt++;
		}
		return this;
	}
}

/**
 * &#x884C;&#x306E;&#x672B;&#x7AEF;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class EOL extends Char {
	// Row&#x3068;&#x3068;&#x3082;&#x306B;&#x8981;&#x7D20;&#x3092;&#x4F5C;&#x3063;&#x3066;&#x3057;&#x307E;&#x3046;&#x305F;&#x3081;&#x3001;&#x8981;&#x7D20;&#x3092;&#x5F15;&#x6570;&#x306B;&#x53D6;&#x308B;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;&#x3002;Char&#x3068;EOL&#x306F;is-a&#x95A2;&#x4FC2;&#x304C;&#x6210;&#x308A;&#x7ACB;&#x3064;&#x3068;&#x8003;&#x3048;&#x3001;&#x7D99;&#x627F;&#x3092;&#x9078;&#x629E;
	/**
	 * @param {Element} elem &#x81EA;&#x8EAB;&#x306E;DOM&#x8981;&#x7D20;
	 */
	constructor(elem) {
		super(elem); // &#x6700;&#x521D;&#x306B;&#x30B9;&#x30FC;&#x30D1;&#x30FC;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x30B3;&#x30F3;&#x30B9;&#x30C8;&#x30E9;&#x30AF;&#x30BF;&#x3092;&#x547C;&#x3070;&#x306A;&#x3051;&#x308C;&#x3070;&#x30A8;&#x30E9;&#x30FC;
	}

	/**
	 * &#x81EA;&#x8EAB;&#x304C;EOL&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5E38;&#x306B;true
	 */
	isEOL() {
		return true;
	}

	// -- Status

	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x81EA;&#x8EAB;&#x306F;&#x89AA;&#x306E;&#x914D;&#x5217;&#x306B;&#x5165;&#x3063;&#x3066;&#x3044;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x89AA;&#x306E;&#x914D;&#x5217;&#x306E;&#x9577;&#x3055;&#x3068;&#x540C;&#x3058;&#x6570;&#x5024;&#x3092;&#x8FD4;&#x3059;
	 */
	index() {
		return this.row().childLength();
	}

	// --DOM&#x64CD;&#x4F5C;

	/**
	 * row&#x3092;&#x89AA;&#x3068;&#x3057;&#x3066;&#x7D10;&#x4ED8;&#x3051;&#x308B;
	 * @param {Row} row &#x89AA;&#x3068;&#x306A;&#x308B;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {EOL} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	appended(row) {
		// EOL&#x306F;&#x5404;&#x884C;&#x4E00;&#x6587;&#x5B57;&#x76EE;&#x3067;&#x3042;&#x308B;&#x306E;&#x3068;Dom&#x8981;&#x7D20;&#x304C;&#x5148;&#x306B;&#x4F5C;&#x3089;&#x308C;&#x308B;&#x305F;&#x3081;Row&#x306E;append()&#x304C;&#x5229;&#x7528;&#x3067;&#x304D;&#x306A;&#x3044;
		// EOL&#x304C;appended&#x3055;&#x308C;&#x308B;&#x306E;&#x306F;&#x307E;&#x3060;row&#x304C;&#x6587;&#x66F8;&#x5185;&#x306B;&#x7D44;&#x307F;&#x8FBC;&#x307E;&#x308C;&#x308B;&#x524D;&#x306A;&#x306E;&#x3067;&#x3001;next&#x3068;prev&#x306E;&#x64CD;&#x4F5C;&#x306F;&#x4E0D;&#x8981;
		row.elem().appendChild(this.elem());
		this.row(row);
		return this;
	}
}

/**
 * &#x884C;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class Row extends AbstractHierarchy {
	/**
	 * @param {object} data &#x884C;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&lt;br&gt;
	 * &#x4F8B;
	 * &lt;pre&gt;
	 * &lt;code&gt;
	 *	// &#x5404;&#x6587;&#x5B57;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
	 *	[
	 *		{	 // &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 *			&quot;char&quot;:&quot;&#x3042;&quot;,
	 *			&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	 *			&quot;fontSize&quot;:&quot;auto&quot;
	 *		},
	 *		{
	 *			&quot;char&quot;:&quot;&#x3044;&quot;,
	 *			&quot;decolation&quot;:null
	 *			&quot;fontSize&quot;:&quot;18&quot;
	 *		}
	 *	]
	 *	&lt;/code&gt;
	 *	&lt;/pre&gt;
	 */
	constructor(data) {
		// &#x914D;&#x5217;&#x304C;&#x6E21;&#x3055;&#x308C;&#x305F;&#x3089;&#x65B0;&#x3057;&#x304F;&#x8981;&#x7D20;&#x3092;&#x4F5C;&#x308A;&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;&#x8981;&#x7D20;&#x304C;&#x6E21;&#x3055;&#x308C;&#x305F;&#x3068;&#x3057;&#x3066;&#x305D;&#x308C;&#x3092;&#x5143;&#x306B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x4F5C;&#x308B;
		if (Array.isArray(data)) {
			super(Util.createRowElement(data));
		} else {
			// InputBuffer&#x306E;&#x5834;&#x5408;
			super(data);
			data = [];
		}
		this._EOL = new EOL(this._elem.lastElementChild);
		this._EOL.appended(this);
		if (!Array.isArray(data)) return;
		for (let charData of data) {
			const char = new Char(charData);
			this.append(char);
		}

		this.addClickEventListener();
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x81EA;&#x8EAB;&#x306E;EOL&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {EOL} &#x81EA;&#x8EAB;&#x306E;EOL&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	EOL() {
		return this._EOL;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	container() {
		return this.paragraph().container();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x306E;&#x6BB5;&#x843D;&#x3092;&#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;&#x89AA;&#x6BB5;&#x843D;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {Paragraph} [opt_newParagraph] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x89AA;&#x6BB5;&#x843D;
	 * @return {Row Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	paragraph(opt_newParagraph) {
		return this.parent(opt_newParagraph);
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x6301;&#x3064;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {Char} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x6301;&#x3064;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	cursorChar() {
		return this.paragraph().container().cursor().getChar();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x6700;&#x521D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x7B2C;&#x4E00;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x305D;&#x308C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x81EA;&#x8EAB;&#x306E;EOL&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	firstChild() {
		// &#x7A7A;&#x884C;&#x3067;&#x306F;EOL&#x304C;&#x9078;&#x629E;&#x3055;&#x308C;&#x308B;&#x305F;&#x3081;&#x3001;firstChar()&#x3067;&#x306F;&#x306A;&#x304F;firstChild()
		// Row&#x3067;&#x306F;EOL&#x304C;&#x7D61;&#x3080;&#x305F;&#x3081;&#x30AA;&#x30FC;&#x30D0;&#x30FC;&#x30E9;&#x30A4;&#x30C9;&#x3059;&#x308B;
		if (this.hasChar()) {
			return this.chars()[0];
		} else {
			return this.EOL();
		}
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x6700;&#x5F8C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3067;&#x3042;&#x308B;EOL&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;EOL&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	lastChild() {
		return this.EOL();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x7A7A;&#x884C;&#x3067;&#x3042;&#x308C;&#x3070;null
	 */
	lastChar() {
		return super.lastChild();
	}
	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x5B50;&#x3067;&#x3042;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;&#x3002;EOL&#x306F;&#x542B;&#x307E;&#x308C;&#x306A;&#x3044;
	 * @param {number} [opt_index] &#x53D6;&#x5F97;&#x3059;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @return {Char Char[]} &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;&#x3002;&#x7BC4;&#x56F2;&#x5916;&#x306E;&#x6570;&#x5024;&#x306A;&#x3089;undefined)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;&#x3002;&#x5B50;&#x304C;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;&#x7A7A;&#x306E;&#x914D;&#x5217;)
	 */
	chars(opt_index) { // EOL&#x306F;&#x542B;&#x307E;&#x308C;&#x306A;&#x3044;
		return super.children(opt_index);
	}
	/**
	 * EOL&#x3092;&#x542B;&#x3080;&#x3001;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x5B50;&#x3067;&#x3042;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} [opt_index] &#x53D6;&#x5F97;&#x3059;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @return {Char} &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;&#x3002;&#x7BC4;&#x56F2;&#x5916;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306A;&#x3089;EOL)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;EOL&#x3092;&#x542B;&#x3080;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;&#x3002;&#x5B50;&#x304C;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;&#x8981;&#x7D20;&#x304C;EOL&#x306E;&#x307F;&#x3067;&#x3042;&#x308B;&#x914D;&#x5217;)
	 */
	children(opt_index) { // EOL&#x3092;&#x542B;&#x3080;
		if (opt_index === undefined) {
			const ret = super.children(); // push()&#x306E;&#x623B;&#x308A;&#x5024;&#x306F;lenght&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x306E;&#x5024;&#x306A;&#x306E;&#x3067;&#x3001;&#x4E00;&#x65E6;&#x5909;&#x6570;&#x306B;&#x5165;&#x308C;&#x308B;&#x5FC5;&#x8981;&#x3042;&#x308A;
			ret.push(this.EOL());
			return ret;
		} else {
			return super.children(opt_index) || this.EOL();
		}
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x5185;&#x90E8;&#x306B;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5185;&#x90E8;&#x306B;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308C;&#x3070;true&#x3001;EOL&#x306E;&#x307F;&#x306E;&#x7A7A;&#x884C;&#x306A;&#x3089;false
	 */
	hasChar() {
		return super.hasChild();
	}
	/**
	 * &#x884C;&#x5185;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x884C;&#x5185;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasCursor() {
		for (let char of this.children()) {
			if (char.hasCursor()) return true;
		}
		return false;
	}
	/**
	 * &#x3053;&#x306E;&#x8981;&#x7D20;&#x304C;&#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x305F;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isDisplay() {
		return this.hasClass(&apos;display&apos;);
	}
	/**
	 * obj&#x304C;&#x884C;&#x5185;&#x306B;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @param {Char} obj &#x5224;&#x5B9A;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Char} obj&#x304C;&#x884C;&#x5185;&#x306B;&#x3042;&#x308B;Char&#x304A;&#x3088;&#x3073;EOL&#x306E;&#x3044;&#x305A;&#x308C;&#x304B;&#x306B;&#x4E00;&#x81F4;&#x3059;&#x308B;&#x3068;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	contains(obj) {
		if (!obj instanceof Char) return false;
		for (let char of this.children()) {
			if (char.is(obj)) return true;
		}
		return false;
	}
	/**
	 * &#x30DA;&#x30FC;&#x30B8;&#x5185;&#x3067;&#x6700;&#x521D;&#x306E;&#x884C;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x30DA;&#x30FC;&#x30B8;&#x5185;&#x3067;&#x6700;&#x521D;&#x306E;&#x884C;&#x3067;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isPageBreak() {
		return this.hasClass(&apos;page-break&apos;);
	}
	/**
	 * &#x30DA;&#x30FC;&#x30B8;&#x5185;&#x3067;&#x6700;&#x7D42;&#x884C;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x30DA;&#x30FC;&#x30B8;&#x5185;&#x3067;&#x6700;&#x7D42;&#x884C;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isPageLast() {
		return this.hasClass(&apos;page-last-row&apos;);
	}

	// --&#x53C2;&#x7167;&#x64CD;&#x4F5C;

	/**
	 * char&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x52A0;&#x3048;&#x308B;
	 * @param {Char} char &#x5B50;&#x306B;&#x52A0;&#x3048;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	pushChar(char) {
		return this.pushChild(char);
	}
	/**
	 * char&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x4F4D;&#x7F6E;&#x306B;&#x52A0;&#x3048;&#x308B;
	 * @param {number} pos &#x52A0;&#x3048;&#x308B;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @param {Char} char &#x52A0;&#x3048;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	insertChar(pos,char) {
		return this.insertChild(pos,char);
	}
	/**
	 * char&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x304B;&#x3089;&#x524A;&#x9664;&#x3059;&#x308B;
	 * @param {Char} char &#x524A;&#x9664;&#x3059;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	deleteChar(char) {
		return this.deleteChild(char);
	}

	// --Status

	/**
	 * &#x3053;&#x306E;&#x884C;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	 * @return {object[]} &#x3053;&#x306E;&#x884C;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	data() {
		const data = [];
		for (let char of this.chars()) {
			data.push(char.data());
		}
		return data;
	}
	/**
	 * &#x3053;&#x306E;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8FD4;&#x3059;&#x3002;EOL&#x306F;&#x542B;&#x307E;&#x306A;&#x3044;
	 * @return {number} &#x3053;&#x306E;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3002;&#x7A7A;&#x884C;&#x306A;&#x3089;&#xFF10;
	 */
	charLen() {
		return super.childLength();
	}
	/**
	 * &#x3053;&#x306E;&#x884C;&#x306E;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x6587;&#x5B57;&#x306E;&#x3046;&#x3061;&#x3001;&#x6700;&#x3082;&#x5927;&#x304D;&#x3044;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x3092;&#x8FD4;&#x3059;&#x3002;&apos;auto&apos;&#x306F;18&#x3068;&#x3057;&#x3066;&#x8A08;&#x7B97;&#x3059;&#x308B;
	 * @return {number} &#x6700;&#x5927;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x6570;
	 */
	maxFont() {
		let max = 0; // &#x7A7A;&#x884C;&#x3067;&#x306F;&#xFF10;&#x306B;&#x306A;&#x308B;
		for (let char of this.chars()) {
			max = Math.max(max,char.fontSize() === &apos;auto&apos; ? 18 : char.fontSize());
		}
		return max;
	}

	// --Style

	/**
	 * &#x3053;&#x306E;&#x884C;&#x306E;&#x6A2A;&#x5E45;&#x3092;&#x8FD4;&#x3059;&#x3002;&#x884C;&#x306F;&#xFF19;&#xFF10;&#x5EA6;&#x56DE;&#x8EE2;&#x3057;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x3001;css&#x4E0A;&#x306F;&#x9AD8;&#x3055;&#x306E;&#x3053;&#x3068;
	 * @param {boolean} [opt_useCache=true] true=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x3001;false=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3057;&#x306A;&#x3044;&#x3002;&#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x3067;true&#x306B;&#x306A;&#x308B;&#x306E;&#x3067;&#x3001;&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x4F7F;&#x308F;&#x305A;&#x8A08;&#x7B97;&#x3057;&#x76F4;&#x3059;&#x5834;&#x5408;&#x306B;&#x306F;&#x660E;&#x793A;&#x7684;&#x306B;false&#x3092;&#x6E21;&#x3059;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x5E45;
	 */
	width(opt_useCache) {
		return super.height(opt_useCache);
	}
	/**
	 * &#x3053;&#x306E;&#x884C;&#x306E;&#x9AD8;&#x3055;&#x3092;&#x8FD4;&#x3059;&#x3002;&#x884C;&#x306F;&#xFF19;&#xFF10;&#x5EA6;&#x56DE;&#x8EE2;&#x3057;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x3001;css&#x4E0A;&#x306F;&#x5E45;&#x306E;&#x3053;&#x3068;
	 * @param {boolean} [opt_useCache=true] true=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x3001;false=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3057;&#x306A;&#x3044;&#x3002;&#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x3067;true&#x306B;&#x306A;&#x308B;&#x306E;&#x3067;&#x3001;&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x4F7F;&#x308F;&#x305A;&#x8A08;&#x7B97;&#x3057;&#x76F4;&#x3059;&#x5834;&#x5408;&#x306B;&#x306F;&#x660E;&#x793A;&#x7684;&#x306B;false&#x3092;&#x6E21;&#x3059;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x9AD8;&#x3055;
	 */
	height(opt_useCache) {
		return super.width(opt_useCache);
	}

	// --DOM&#x64CD;&#x4F5C;&#x95A2;&#x4FC2;

	/**
	 * &#x5B50;&#x3092;&#x7A7A;&#x306B;&#x3057;&#x3066;&#x53C2;&#x7167;&#x3092;&#x6574;&#x3048;&#x308B;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	empty() {
		// emptyElem()&#x306B;&#x52A0;&#x3048;&#x3001;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x53C2;&#x7167;&#x3082;&#x5207;&#x308A;&#x96E2;&#x3059;
		this.emptyElem();
		const prevRow = this.prev();
		if (prevRow) {
			this.EOL().prev(prevRow.lastChild());
			prevRow.lastChild().next(this.EOL());
		} else {
			this.EOL().prev(null);
		}
		this.emptyChild();
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x521D;&#x306B;char&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {Char} char &#x633F;&#x5165;&#x3059;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	prepend(char) {
		this.firstChild().before(char);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x5F8C;(EOL&#x306E;&#x76F4;&#x524D;)&#x306B;char&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {Char} char &#x633F;&#x5165;&#x3059;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	append(char) {
		this.EOL().before(char);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x524D;&#x306B;row&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {Row} row &#x633F;&#x5165;&#x3059;&#x308B;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	before(row) {
		// DOM
		this.paragraph().elem().insertBefore(row.elem(),this.elem());

		// &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
		// oldPrev - row - this

		// row
		const oldPrev = this.prev();
		oldPrev &amp;&amp; oldPrev.next(row);
		row.prev(oldPrev);
		row.next(this);
		this.prev(row);
		// char
		oldPrev &amp;&amp; oldPrev.lastChild().next(row.firstChild());
		oldPrev &amp;&amp; row.firstChild().prev(oldPrev.lastChild());
		row.lastChild().next(this.firstChild());
		this.firstChild().prev(row.lastChild());
		// parent
		row.paragraph(this.paragraph());
		const pos = this.index();
		this.paragraph().insertRow(pos,row);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x5F8C;&#x306B;row&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {Row} row &#x633F;&#x5165;&#x3059;&#x308B;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	after(row) {
		// DOM
		if (this.hasNextSibling()) {
			this.paragraph().elem().insertBefore(row.elem(),this.next().elem());
		} else {
			this.paragraph().elem().appendChild(row.elem());
		}

		// &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
		// this - row - oldNext

		// row
		const oldNext = this.next();
		this.next(row);
		row.prev(this);
		row.next(oldNext);
		oldNext &amp;&amp; oldNext.prev(row);
		// char
		this.lastChild().next(row.firstChild());
		row.firstChild().prev(this.lastChild());
		oldNext &amp;&amp; row.lastChild().next(oldNext.firstChild());
		oldNext &amp;&amp; oldNext.firstChild().prev(row.lastChild());
		// parent
		row.paragraph(this.paragraph());
		const pos = this.index() + 1;
		this.paragraph().insertRow(pos,row);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;&#x3002;&#x6587;&#x66F8;&#x6574;&#x5F62;&#x306F;&#x884C;&#x308F;&#x308C;&#x306A;&#x3044;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	remove() {
		// &#x6BB5;&#x843D;&#x306B;&#x81EA;&#x5206;&#x3057;&#x304B;&#x884C;&#x304C;&#x306A;&#x3044;&#x5834;&#x5408;&#x3001;&#x6BB5;&#x843D;&#x3054;&#x3068;&#x524A;&#x9664;&#x3059;&#x308B;
		if (this.isOnlyChild()) {
			this.paragraph().remove();
			return this;
		}

		this.paragraph().elem().removeChild(this.elem());
		// oldPrev - this - oldNext &#x2192;&#x3000;oldPrev - oldNext
		// row
		const oldPrevRow = this.prev();
		const oldNextRow = this.next();
		oldPrevRow &amp;&amp; oldPrevRow.next(oldNextRow);
		oldNextRow &amp;&amp; oldNextRow.prev(oldPrevRow);
		// char
		const oldPrevChar = oldPrevRow &amp;&amp; oldPrevRow.lastChild();
		const oldNextChar = oldNextRow &amp;&amp; oldNextRow.firstChild();
		oldPrevChar &amp;&amp; oldPrevChar.next(oldNextChar);
		oldNextChar &amp;&amp; oldNextChar.prev(oldPrevChar);

		this.paragraph().deleteRow(this);

		this.next(null);
		this.prev(null);
		this.firstChild().prev(null);
		this.lastChild().next(null);
		return this;
	}
	// &#x6587;&#x7AE0;&#x6574;&#x5F62;&#x3092;&#x542B;&#x3080;&#x524A;&#x9664;
	// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x524D;&#x306E;&#x884C;&#x306B;&#x5E73;&#x884C;&#x79FB;&#x52D5;&#x3059;&#x308B;
	// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x52D5;&#x304B;&#x3057;&#x305F;&#x304F;&#x306A;&#x3051;&#x308C;&#x3070;remove()&#x3092;&#x4F7F;&#x3046;
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3057;&#x3001;&#x6587;&#x66F8;&#x6574;&#x5F62;&#x3092;&#x884C;&#x3046;(&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x524D;&#x306E;&#x884C;&#x3001;&#x524D;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x6B21;&#x306E;&#x884C;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;)
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	delete() {
		const oldPrevRow = this.prev();
		const oldNextRow = this.next();

		this.remove();

		// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x524A;&#x9664;&#x884C;&#x306B;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x3001;&#x305D;&#x306E;&#x524D;&#x306E;&#x884C;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;
		if (this.hasCursor()) {
			if (oldPrevRow) {
				this.cursor().moveRow(oldPrevRow);
			} else {
				this.cursor().moveRow(oldNextRow);
			}
		}
		return this;
	}
	/**
	 * &#x524D;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x7D42;&#x884C;&#x3068;&#x3057;&#x3066;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x5404;&#x6BB5;&#x843D;&#x6700;&#x521D;&#x306E;&#x884C;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;&#x3002;&#x81EA;&#x8EAB;&#x304C;&#x7A7A;&#x884C;&#x3067;&#x3042;&#x308C;&#x3070;&#x524A;&#x9664;&#x3055;&#x308C;&#x308B;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	moveLastBefore() {
		if (!this.isFirst()) { return this; } // &#x5404;&#x6BB5;&#x843D;&#x6700;&#x521D;&#x306E;&#x884C;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;
		if (this.paragraph().isFirst()) return this; // &#x6587;&#x7AE0;&#x5148;&#x982D;&#x3067;&#x306F;&#x7121;&#x52B9;

		const prevParagraph = this.paragraph().prev();

		// &#x7A7A;&#x884C;&#x3092;&#x79FB;&#x52D5;&#x3057;&#x3088;&#x3046;&#x3068;&#x3057;&#x305F;&#x6642;&#x306E;&#x51E6;&#x7406;
		if (this.isEmpty()) {
			// &#x524D;&#x306E;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x52D5;&#x305B;&#x305A;&#x524A;&#x9664;&#x3059;&#x308B;
			// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x524D;&#x306E;&#x884C;&#x306E;EOL&#x306B;&#x79FB;&#x52D5;
			this.remove();
			this.hasCursor() &amp;&amp; prevParagraph.lastChild().EOL().addCursor().setPosMemory();
			return this;
		}

		// &#x7A7A;&#x884C;&#x3067;&#x306F;&#x306A;&#x3044;
		if (!this.isEmpty()) {
			this.remove(); // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306F;&#x3044;&#x3058;&#x308B;&#x5FC5;&#x8981;&#x306A;&#x3057;
			prevParagraph.append(this);
			return this;
		}
	}
	/**
	 * &#x96A3;&#x306E;Row&#x306E;&#x7B2C;&#x4E00;&#x6587;&#x5B57;&#x3092;&#x3001;&#x81EA;&#x3089;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	bringChar() {
		if (this.isLast()) return this;
		this.next().firstChild().moveLastBefore();
		return this;
	}
	/**
	 * &#x96A3;&#x306E;Row&#x306E;&#x6700;&#x521D;&#x306E;num&#x6587;&#x5B57;&#x3092;&#x3001;&#x81EA;&#x3089;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;&#x3002;&#x6587;&#x5B57;&#x540C;&#x58EB;&#x306E;&#x9806;&#x756A;&#x306F;&#x5D29;&#x3055;&#x306A;&#x3044;
	 * @param {number} num &#x79FB;&#x52D5;&#x3059;&#x308B;&#x6587;&#x5B57;&#x6570;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	bringChars(num) {
		for (let i = 0; i &lt; num; i++) {
			this.bringChar();
		}
		return this;
	}
	/**
	 * &#x81EA;&#x5206;&#x306E;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x5B57;&#x3092;&#x3001;&#x6B21;&#x306E;&#x884C;&#x306E;&#x6700;&#x521D;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x6B21;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x65B0;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	takeChar() {
		if (!this.hasChar()) return this; // lastChar()&#x3067;null&#x304C;&#x53D6;&#x5F97;&#x3055;&#x308C;&#x308B;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x3042;&#x308B;&#x305F;&#x3081;
		this.lastChar().moveFirstAfter(); // lastChild()&#x3067;&#x306F;&#x6BCE;&#x56DE;EOL&#x304C;&#x53D6;&#x5F97;&#x3055;&#x308C;&#x308B;&#x306E;&#x3067;lastChar()
		return this;
	}
	/**
	 * &#x81EA;&#x5206;&#x306E;&#x6700;&#x5F8C;&#x306E;num&#x6587;&#x5B57;&#x3092;&#x3001;&#x6B21;&#x306E;&#x884C;&#x306E;&#x6700;&#x521D;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x6B21;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x65B0;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;
	 * @param {number} num &#x79FB;&#x52D5;&#x3059;&#x308B;&#x6587;&#x5B57;&#x6570;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	takeChars(num) {
		for (let i = 0; i &lt; num; i++) {
			this.takeChar();
		}
		return this;
	}
	/**
	 * &#x5F15;&#x6570;&#x306E;&#x6587;&#x5B57;&#x5217;&#x304B;&#x3089;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x305F;&#x88C5;&#x98FE;&#x306E;&#x306A;&#x3044;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x81EA;&#x3089;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x8FFD;&#x52A0;&#x3059;&#x308B;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	createPlainContent(str) {
		for (let c of str) {
			this.append(new Char(Char.createPlainCharData(c)));
		}
		return this;
	}

	// --&#x6587;&#x7AE0;&#x6574;&#x7406;

	/**
	 * &#x6307;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x3068;&#x7570;&#x306A;&#x308B;&#x6587;&#x5B57;&#x6570;&#x306A;&#x3089;&#x3001;&#x6307;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x306B;&#x5408;&#x308F;&#x305B;&#x3066;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8ABF;&#x7BC0;&#x3059;&#x308B;&#x3002;&#x6A19;&#x6E96;&#x4EE5;&#x5916;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x306E;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308C;&#x3070;&#x6587;&#x5B57;&#x6570;&#x306F;&#x8ABF;&#x6574;&#x3055;&#x308C;&#x308B;&#x3002;&#x307E;&#x305F;&#x3001;&#x81EA;&#x8EAB;&#x304C;&#x7A7A;&#x6BB5;&#x843D;&#x4EE5;&#x5916;&#x3067;&#x306E;&#x7A7A;&#x884C;&#x3067;&#x3042;&#x308C;&#x3070;&#x524A;&#x9664;&#x3059;&#x308B;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	cordinate() {
		if (this.index() &gt; 0 &amp;&amp; this.isEmpty()) return this.delete(); // &#x7A7A;&#x6BB5;&#x843D;&#x4EE5;&#x5916;&#x3067;&#x306E;&#x7A7A;&#x884C;&#x306F;&#x524A;&#x9664;&#x3059;&#x308B;

		const strLen = this.container().strLenOnRow();
		const len = this.charLen();
		if (len &lt; strLen) {
			this.bringChars(strLen - len);
		}

		// &#x591A;&#x3059;&#x304E;&#x308B;&#x6587;&#x5B57;&#x6570;&#x306F;&#x6E1B;&#x3089;&#x3059;
		// &#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x306E;&#x7570;&#x306A;&#x308B;&#x6587;&#x5B57;&#x304C;&#x6DF7;&#x3056;&#x3063;&#x3066;&#x3044;&#x308B;&#x5834;&#x5408;&#x3001;&#x4ED6;&#x306E;&#x884C;&#x3068;&#x9AD8;&#x3055;&#x304C;&#x7570;&#x306A;&#x3063;&#x3066;&#x3057;&#x307E;&#x3046;&#x305F;&#x3081;&#x3001;&#x305D;&#x306E;&#x884C;&#x306E;&#x6587;&#x5B57;&#x3092;&#x5909;&#x3048;&#x308B;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
		const maxSize = strLen * 18; // &#x6A19;&#x6E96;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#xD7;&#x6587;&#x5B57;&#x6570;&#x306E;&#x6570;&#x5024;&#x304C;&#x57FA;&#x6E96;
		let sum = 0;
		for (let array of this.chars().entries()) {
			const char = array[1];
			sum += char.fontSize() === &apos;auto&apos; ? 18 : char.fontSize();
			if (sum &gt; maxSize) {
				const index = array[0];
				this.takeChars(this.charLen() - index);
				break;
			}
		}
		return this;
	}
	/**
	 * &#x884C;&#x5185;&#x306E;&#x7981;&#x5247;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3046;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	checkKinsoku() {
		if (this.isEmpty()) { return this; }
		// &#x884C;&#x982D;&#x306B;&#x3042;&#x308B;&#x3079;&#x304D;&#x3067;&#x306F;&#x306A;&#x3044;&#x3082;&#x306E;
		for (let firstText = this.firstChild().text(); !this.isFirst() &amp;&amp; /[&#x300D;&#x300F;&#xFF09;&#x3002;&#x3001;&#xFF1F;]/.test(firstText); firstText = this.firstChild().text()) {
			this.firstChild().moveLastBefore();
		}
		// &#x884C;&#x672B;&#x306B;&#x3042;&#x308B;&#x3079;&#x304D;&#x3067;&#x306F;&#x306A;&#x3044;&#x3082;&#x306E;
		for (let lastText = this.lastChar().text(); !this.isLast() &amp;&amp; /[&#x300C;&#x300E;&#xFF08;]/.test(lastText); lastText = this.lastChar().text()) {
			this.lastChar().moveFirstAfter();
		}
		return this;
	}

	// --Display&#x95A2;&#x4FC2;

	/**
	 * &#x81EA;&#x8EAB;&#x3068;&#x5B50;&#x306E;Char&#x3092;&#x8868;&#x793A;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x975E;&#x8868;&#x793A;&#x306B;&#x3059;&#x308B;&#x3002;&#x5185;&#x90E8;&#x306E;&#x6587;&#x5B57;&#x306F;first&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x3067;&#x81EA;&#x8EAB;&#x306B;&#x53CE;&#x307E;&#x308B;&#x6587;&#x5B57;&#x3092;&#x8868;&#x793A;&#x3057;&#x3001;&#x305D;&#x308C;&#x4EE5;&#x5916;&#x306E;&#x6587;&#x5B57;&#x306F;&#x975E;&#x8868;&#x793A;&#x306B;&#x3059;&#x308B;
	 * @param {boolean} bDisplay true&#x3067;&#x3042;&#x308C;&#x3070;&#x81EA;&#x8EAB;&#x3092;&#x8868;&#x793A;&#x3057;&#x3001;false&#x3067;&#x975E;&#x8868;&#x793A;&#x306B;&#x3059;&#x308B;
	 * @param {number} first &#x81EA;&#x8EAB;&#x5185;&#x90E8;&#x306E;Char&#x3092;&#x4F55;&#x6587;&#x5B57;&#x76EE;&#x304B;&#x3089;&#x8868;&#x793A;&#x3059;&#x308B;&#x304B;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;(&#xFF10;&#x59CB;&#x307E;&#x308A;)
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	display(bDisplay,first) {
		if (!bDisplay) {
			this.elem().classList.remove(&apos;display&apos;);
			return this;
		}

		this.elem().classList.add(&apos;display&apos;);
		const dispHeight = this.height();
		let heightSum = 0;
		const addArray = [];
		for (let array of this.chars().entries()) {
			const index = array[0];
			const char = array[1];
			if (index &lt; first) {
				char.display(false);
				continue;
			}
			const fontHeight = char.fontSize(); // size&#x306E;&#x53D6;&#x5F97;&#x306F;DOM&#x306B;&#x30A2;&#x30AF;&#x30BB;&#x30B9;&#x305B;&#x305A;&#x306B;&#x884C;&#x3063;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x3001;&#x3053;&#x3053;&#x3067;&#x306F;&#x30EC;&#x30F3;&#x30C0;&#x30EA;&#x30F3;&#x30B0;&#x306F;&#x767A;&#x751F;&#x3057;&#x306A;&#x3044;
			heightSum += fontHeight === &apos;auto&apos; ? 18 : fontHeight;
			char.display(index &gt;= first &amp;&amp; heightSum &lt; dispHeight); // true&#x306B;&#x306A;&#x308C;&#x3070;&#x8868;&#x793A;&#x3001;false&#x306B;&#x306A;&#x308C;&#x3070;&#x975E;&#x8868;&#x793A;
		}
		return this;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x3092;&#x57FA;&#x6E96;&#x306B;&#x3001;&#x6587;&#x5B57;&#x3092;&#x4F55;&#x6587;&#x5B57;&#x76EE;&#x304B;&#x3089;&#x8868;&#x793A;&#x3059;&#x3079;&#x304D;&#x304B;&#x306E;&#x8A08;&#x7B97;&#x7D50;&#x679C;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x6587;&#x5B57;&#x306E;&#x8868;&#x793A;&#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 */
	computeDisplayCharPos() {
		const cursorIndex = this.cursorChar().index();
		const currentFirst = this.firstDisplayCharPos();
		const currentEnd = this.lastDisplayCharPos();
		if (cursorIndex &lt;= currentFirst) {
			// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x524D;&#x306B;&#x3042;&#x308B;
			return cursorIndex;
		} else if ( cursorIndex &gt; currentEnd) {
			// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x5F8C;&#x308D;&#x306B;&#x3042;&#x308B;
			return currentFirst + (cursorIndex - currentEnd);
		} else {
			return currentFirst;
		}
	}
	/**
	 * &#x3053;&#x306E;&#x884C;&#x304C;&#x4F55;&#x6587;&#x5B57;&#x76EE;&#x304B;&#x3089;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} EOL&#x542B;&#x3081;&#x6700;&#x521D;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x305F;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3002;&#x6587;&#x5B57;&#x304C;&#x5168;&#x3066;&#x975E;&#x8868;&#x793A;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308C;&#x3070;-1
	 */
	firstDisplayCharPos() {
		for (let char of this.children()) {
			if (char.isDisplay()) return char.index();
		}
		return -1; // display&#x304C;&#x3072;&#x3068;&#x3064;&#x3082;&#x306A;&#x3044;(EOL&#x306F;&#x5E38;&#x306B;display&#x306A;&#x306E;&#x3067;&#x3001;&#x3053;&#x3053;&#x307E;&#x3067;&#x6765;&#x305F;&#x3089;&#x7570;&#x5E38;)
	}
	/**
	 * &#x3053;&#x306E;&#x884C;&#x304C;&#x4F55;&#x6587;&#x5B57;&#x76EE;&#x307E;&#x3067;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} EOL&#x542B;&#x3081;&#x6700;&#x5F8C;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x305F;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3002;&#x6587;&#x5B57;&#x304C;&#x5168;&#x3066;&#x975E;&#x8868;&#x793A;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308C;&#x3070;-1
	 */
	lastDisplayCharPos() {
		if (!this.hasChar) return 0;
		for (let i = this.charLen()-1,char; char = this.chars(i); i--) {
			if (char.isDisplay()) return char.next().isEOL() ? i + 1 : i; // &#x3059;&#x3079;&#x3066;&#x306E;&#x6587;&#x5B57;&#x304C;display&#x3057;&#x3066;&#x3044;&#x308C;&#x3070;EOL&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
		}
		return -1;
	}

	// --&#x30A4;&#x30D9;&#x30F3;&#x30C8;

	/**
	 * &#x884C;&#x306E;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;&#x3002;&#x884C;&#x3092;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3059;&#x308B;&#x3068;&#x6700;&#x3082;&#x8FD1;&#x3044;&#x6587;&#x5B57;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x5F53;&#x305F;&#x308B;
	 * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	runClick(e) {
		if (this.container().inputBuffer().isDisplay()) return;
		const clickX = e.pageX;
		const clickY = e.pageY;
		let min = Number.MAX_VALUE;
		let closestChar;

		for (let char of this.children()) {
			const distance = char.computeDistanceFromPoint(clickX,clickY);
			if (distance &lt; min) {
				min = distance;
				closestChar = char;
			}
		}
		closestChar.slidePrevCursor().addCursor().setPosMemory();
	}

	// --&#x9759;&#x7684;&#x30E1;&#x30BD;&#x30C3;&#x30C9;

	/**
	 * &#x7A7A;&#x884C;&#x306E;Row&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x65B0;&#x305F;&#x306B;&#x4F5C;&#x6210;&#x3059;&#x308B;
	 * @return {Row} &#x4F5C;&#x6210;&#x3055;&#x308C;&#x305F;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	static createEmptyRow() {
		return new Row([]);
	}

	// -- other

	/**
	 * &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x3067;&#x81EA;&#x5206;&#x4EE5;&#x964D;&#x306E;&#x884C;&#x306B;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3046;&#x3002; &#x51E6;&#x7406;&#x4E2D;&#x306B;&#x540C;&#x4E00;&#x6BB5;&#x843D;&#x306E;&#x884C;&#x3067;&#x306A;&#x304F;&#x306A;&#x3063;&#x305F;&#x306A;&#x3069;&#x3057;&#x3066;&#x3082;&#x5F71;&#x97FF;&#x305B;&#x305A;&#x51E6;&#x7406;&#x3055;&#x308C;&#x308B;
	 * @param {function} func &#x51E6;&#x7406;&#x304C;&#x5B9A;&#x7FA9;&#x3055;&#x308C;&#x305F;&#x95A2;&#x6570;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	afterEach(func) {
		const index = this.index();
		let cnt = 0;
		for (let row of this.paragraph().rows()) {
			if (cnt &gt;= index) func(row);
			cnt++;
		}
		return this;
	}

}

/**
 * &#x6BB5;&#x843D;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class Paragraph extends AbstractHierarchy {
	/**
	 * @param {object} data &#x6BB5;&#x843D;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&lt;br&gt;
	 * &#x4F8B;
	 * &lt;pre&gt;
	 * &lt;code&gt;
	 *  // &#x6BB5;&#x843D;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x3068;&#x5404;&#x6587;&#x5B57;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x914D;&#x5217;&#x306E;&#x5165;&#x3063;&#x305F;&#x914D;&#x5217;
	 *	[
	 *		[&quot;decolation-textalign-center&quot;],		 // &#x6BB5;&#x843D;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x304C;&#x6587;&#x5B57;&#x5217;&#x306E;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
	 *		[												 // &#x5404;&#x6587;&#x5B57;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
	 *			{											 // &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 *				&quot;char&quot;:&quot;&#x3042;&quot;,
	 *				&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	 *				&quot;fontSize&quot;:&quot;auto&quot;
	 *			},
	 *			{
	 *				&quot;char&quot;:&quot;&#x3044;&quot;,
	 *				&quot;decolation&quot;:[]
	 *				&quot;fontSize&quot;:&quot;30&quot;
	 *			}
	 *			]
	 *	]
	 *	&lt;/code&gt;
	 *	&lt;/pre&gt;
	 */
	constructor(data) {
		super(Util.createParagraphElement(data));
		const strLen = 40;
		const spArray = Util.splitArray(data[1],strLen); // data[1]&#x304C;&#x7A7A;&#x914D;&#x5217;&#x306A;&#x3089;&#x3001;spArray&#x306B;&#x3082;&#x7A7A;&#x914D;&#x5217;&#x304C;&#x5165;&#x308B;
		for (let charArray of spArray) {
			this.append(new Row(charArray));
		}
		// data[1]&#x304C;&#x7A7A;&#x914D;&#x5217; = &#x7A7A;&#x6BB5;&#x843D;(&#x7A7A;&#x884C;)&#x306E;&#x5834;&#x5408;&#x306F;&#x4E0A;&#x8A18;for&#x6587;&#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x5225;&#x306B;&#x7A7A;&#x884C;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x3066;&#x9023;&#x7D50;&#x3059;&#x308B;
		if (spArray.length === 0) {
			this.append(Row.createEmptyRow());
		}
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x89AA;&#x306E;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x3092;&#x8A2D;&#x5B9A;&#x3001;&#x307E;&#x305F;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {SentenceContainer} [opt_newContainer] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;&#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Paragraph SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x306E;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	container(opt_newContainer) {
		return this.parent(opt_newContainer);
	}
	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} [opt_index] &#x53D6;&#x5F97;&#x3059;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @return {Row Row[]} &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5B50;&#x306E;&#x914D;&#x5217;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	rows(opt_index) {
		return this.children(opt_index);
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x5185;&#x90E8;&#x306B;&#x884C;&#x3092;&#x6301;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x5B50;&#x3092;&#x6301;&#x3063;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasRow() {
		return this.hasChild();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x7A7A;&#x6BB5;&#x843D;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;&#x3002;&#x7A7A;&#x884C;&#x304C;&#x3072;&#x3068;&#x3064;&#x3060;&#x3051;&#x3042;&#x3063;&#x3066;&#x3082;true(&#x7A7A;&#x884C;&#x306F;&#x7A7A;&#x6BB5;&#x843D;&#x306B;&#x3057;&#x304B;&#x5B58;&#x5728;&#x3057;&#x306A;&#x3044;&#x306E;&#x304C;&#x6B63;&#x5E38;&#x3067;&#x3042;&#x308B;&#x305F;&#x3081;)
	 * @return {boolean} &#x5185;&#x90E8;&#x306B;&#x884C;&#x304C;&#x5B58;&#x5728;&#x3057;&#x306A;&#x3044;&#x304B;&#x3001;&#x7A7A;&#x884C;&#x304C;&#x4E00;&#x3064;&#x3060;&#x3051;&#x306A;&#x3089;true
	 */
	isEmpty() {
		return !this.hasChild() || this.firstChild().isEmpty();
	}
	/**
	 * &#x6BB5;&#x843D;&#x5185;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x6BB5;&#x843D;&#x5185;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasCursor() {
		for (let row of this.rows()) {
			if (row.hasCursor()) return true;
		}
		return false;
	}
	/**
	 * &#x5F15;&#x6570;&#x3067;&#x6E21;&#x3055;&#x308C;&#x305F;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x6BB5;&#x843D;&#x5185;&#x306B;&#x3042;&#x308B;&#x884C;&#x304B;&#x6587;&#x5B57;&#x306E;&#x3044;&#x305A;&#x308C;&#x304B;&#x306B;&#x4E00;&#x81F4;&#x3059;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @param {AbstractHierarchy} obj &#x5224;&#x5B9A;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {boolean} &#x5F15;&#x6570;&#x3067;&#x6E21;&#x3055;&#x308C;&#x305F;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x6BB5;&#x843D;&#x5185;&#x306B;&#x3042;&#x308B;&#x884C;&#x304B;&#x6587;&#x5B57;&#x306E;&#x3044;&#x305A;&#x308C;&#x304B;&#x306B;&#x4E00;&#x81F4;&#x3059;&#x308B;&#x3068;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	contains(obj) {
		for (let row of this.rows()) {
			if (row.is(obj)) return true;
			if (row.contains(obj)) return true;
		}
		return false;
	}

	// --&#x53C2;&#x7167;&#x64CD;&#x4F5C;

	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6700;&#x5F8C;&#x306B;row&#x3092;&#x52A0;&#x3048;&#x308B;
	 * @param {Row} row &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x52A0;&#x3048;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	pushRow(row) {
		return this.pushChild(row);
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x4F4D;&#x7F6E;&#x306B;row&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {number} pos row&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @param {Row} row &#x633F;&#x5165;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	insertRow(pos,row) {
		return this.insertChild(pos,row);
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x304B;&#x3089;row&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;
	 * @param {Row} row &#x524A;&#x9664;&#x3059;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	deleteRow(row) {
		return this.deleteChild(row);
	}

	// --Status

	/**
	 * &#x3053;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	 * @return {object[]} &#x3053;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	data() {
		const data = [];
		data[0] = this.classArray();
		const charArray = [];
		for (let row of this.rows()) {
			for (let char of row.chars()) {
				charArray.push(char.data());
			}
		}
		data[1] = charArray;
		return data;
	}
	/**
	 * &#x3053;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x88C5;&#x98FE;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x6587;&#x5B57;&#x5217;&#x306E;&#x914D;&#x5217;&#x306B;&#x3059;&#x308B;
	 * @return {string[]} &#x88C5;&#x98FE;&#x95A2;&#x4FC2;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3002;&#x306A;&#x3051;&#x308C;&#x3070;&#x7A7A;&#x306E;&#x914D;&#x5217;
	 */
	classArray() {
		return this.elem().className.match(/decolation-\S+/g) || [];
	}
	/**
	 * &#x6BB5;&#x843D;&#x5185;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3092;&#x6570;&#x3048;&#x308B;
	 * @return {number} &#x6BB5;&#x843D;&#x5185;&#x306E;&#x6587;&#x5B57;&#x6570;
	 */
	countChar() {
		let cnt = 0;
		for (let row of this.rows()) {
			cnt += row.charLen();
		}
		return cnt;
	}

	// --Style

	/**
	 * &#x6BB5;&#x843D;&#x306B;text-align&#x3092;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;text-align&#x306E;&#x72B6;&#x614B;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {string boolean} [opt_align] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&apos;left&apos;,&apos;center&apos;,&apos;right&apos;&#x306E;&#x6587;&#x5B57;&#x5217;&#x3002;&apos;left&apos;&#x3042;&#x308B;&#x3044;&#x306F;false&#x306A;&#x3089;align&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
	 * @return {Paragraph string} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;text-align&#x306E;&#x72B6;&#x614B;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	align(opt_align) {
		if (opt_align === undefined) {
			const align = this.className().match(/decolation-textalign-(\S+)/);
			return align ? align[1] : &apos;left&apos;;
		}
		if (opt_align) {
			const oldAlign = this.className().match(/decolation-textalign-\S+/);
			if (oldAlign) this.removeClass(oldAlign[0]);
			if (opt_align !== &apos;left&apos;) this.addClass(&apos;decolation-textalign-&apos;+ opt_align);
		} else {
			const oldAlign = this.className().match(/decolation-textalign-\S+/);
			if (oldAlign) this.removeClass(oldAlign[0]);
		}
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x3059;&#x3079;&#x3066;&#x306E;Char&#x304B;&#x3089;&#x6307;&#x5B9A;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x9664;&#x53BB;&#x3059;&#x308B;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeClassFromAllChar(className) {
		for (let row of this.rows()) {
			row.removeClassFromAllChild(className);
		}
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x6587;&#x5B57;&#x306B;str&#x3068;&#x5408;&#x81F4;&#x3059;&#x308B;&#x6587;&#x5B57;&#x5217;&#x304C;&#x3042;&#x308C;&#x3070;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;
	 * @param {string} str &#x5224;&#x5B9A;&#x3059;&#x308B;&#x6587;&#x5B57;&#x5217;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	search(str) {
		this.removeClassFromAllChar(&apos;search-label&apos;);
		this.removeClassFromAllChar(&apos;search-word&apos;);
		for (let row of this.rows()) {
			for (let char of row.chars()) {
				char.markSearchPhrase(str);
			}
		}
		return this;
	}

	// --DOM&#x64CD;&#x4F5C;&#x95A2;&#x4FC2;

	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x5F8C;&#x306B;row&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;
	 * @param {Row} row &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	append(row) {
		this.elem().appendChild(row.elem());
		row.paragraph(this);
		const nextParagraph = this.next();
		// row&#x306E;&#x5F8C;&#x5074;&#x63A5;&#x7D9A;
		if (nextParagraph) {
			// row
			const nextRow = nextParagraph.firstChild();
			nextRow.prev(row);
			row.next(nextRow);
			// char
			nextRow.firstChild().prev(row.lastChild());
			row.lastChild().next(nextRow.firstChild());
		}
		// row&#x306E;&#x524D;&#x5074;&#x63A5;&#x7D9A;
		const oldLastRow = this.hasRow() ? this.lastChild() : (this.prev() ? this.prev().lastChild() : null); // &#x81EA;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x7D42;&#x884C;&#x3000;&#x2192;&#x3000;&#x524D;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x7D42;&#x884C;&#x3000;&#x2192;&#x3000;null

		this.pushRow(row);
		if (oldLastRow === null) {
			// &#x4E00;&#x884C;&#x3082;&#x5B58;&#x5728;&#x3057;&#x306A;&#x3044;&#x72B6;&#x614B;&#x304B;&#x3089;&#x306E;append
			return this;
		}
		// row
		oldLastRow.next(row);
		row.prev(oldLastRow);
		// char
		oldLastRow.lastChild().next(row.firstChild());
		row.firstChild().prev(oldLastRow.lastChild());

		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x5F8C;&#x306B;paragraph&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {Paragraph} paragraph &#x633F;&#x5165;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	after(paragraph) {
		// DOM
		if (this.hasNextSibling()) {
			this.container().elem().insertBefore(paragraph.elem(),this.next().elem());
		} else {
			this.container().elem().appendChild(paragraph.elem());
		}

		// &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
		// this - paragraph - oldNext

		// paragraph
		const oldNext = this.next();
		this.next(paragraph);
		paragraph.prev(this);
		paragraph.next(oldNext);
		oldNext &amp;&amp; oldNext.prev(paragraph);
		// row
		this.lastChild().next(paragraph.firstChild());
		paragraph.firstChild().prev(this.lastChild());
		oldNext &amp;&amp; paragraph.lastChild().next(oldNext.firstChild());
		oldNext &amp;&amp; oldNext.firstChild().prev(paragraph.lastChild());
		// char
		this.lastChild().lastChild().next(paragraph.firstChild().firstChild());
		paragraph.firstChild().firstChild().prev(this.lastChild().lastChild());
		oldNext &amp;&amp; paragraph.lastChild().lastChild().next(oldNext.firstChild().firstChild());
		oldNext &amp;&amp; oldNext.firstChild().firstChild().prev(paragraph.lastChild().lastChild());
		// parent
		paragraph.container(this.container());
		const pos = this.index() + 1;
		this.container().insertParagraph(pos,paragraph);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;&#x3002;&#x6587;&#x66F8;&#x6574;&#x5F62;&#x306F;&#x884C;&#x308F;&#x308C;&#x306A;&#x3044;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	remove() {
		this.container().elem().removeChild(this.elem());
		// oldPrev - this - oldNext &#x2192;&#x3000;oldPrev - oldNext

		// paragraph
		// oldPrevParagraph - oldNextParagraph
		const oldPrevParagraph = this.prev();
		const oldNextParagraph = this.next();
		oldPrevParagraph &amp;&amp; oldPrevParagraph.next(oldNextParagraph);
		oldNextParagraph &amp;&amp; oldNextParagraph.prev(oldPrevParagraph);

		// row
		// oldPrevParagraph.lastChild() - oldNextParagraph.firstChild();
		// oldPrevRow - oldNextRow
		const oldPrevRow = oldPrevParagraph &amp;&amp; oldPrevParagraph.lastChild();
		const oldNextRow = oldNextParagraph &amp;&amp; oldNextParagraph.firstChild();
		oldPrevRow &amp;&amp; oldPrevRow.next(oldNextRow);
		oldNextRow &amp;&amp; oldNextRow.prev(oldPrevRow);

		// char
		// oldPrevRow.lastChild() - oldNextRow.lastChild();
		// oldPrevChar - oldNextChar
		const oldPrevChar = oldPrevRow &amp;&amp; oldPrevRow.lastChild();
		const oldNextChar = oldNextRow &amp;&amp; oldNextRow.firstChild();
		oldPrevChar &amp;&amp; oldPrevChar.next(oldNextChar);
		oldNextChar &amp;&amp; oldNextChar.prev(oldPrevChar);

		this.container().deleteParagraph(this);
		this.prev(null).firstChild() &amp;&amp; this.firstChild().prev(null).firstChild() &amp;&amp; this.firstChild().firstChild().prev(null);
		this.next(null).lastChild() &amp;&amp; this.lastChild().next(null).lastChild() &amp;&amp; this.lastChild().lastChild().next(null);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3057;&#x3001;&#x6587;&#x66F8;&#x3092;&#x6574;&#x5F62;&#x3059;&#x308B;(&#x5185;&#x90E8;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308C;&#x3070;&#x76F4;&#x524D;&#x306E;&#x884C;&#x306B;&#x5E73;&#x884C;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;&#x76F4;&#x524D;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x76F4;&#x5F8C;&#x306E;&#x884C;)
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	delete() {
		const oldPrevRow = this.prev() &amp;&amp; this.prev().lastChild();
		const oldNextRow = this.next() &amp;&amp; this.next().firstChild();

		this.remove();

		if (this.hasCursor()) {
			if (oldPrevRow) {
				this.cursor().moveRow(oldPrevRow);
			} else { // &#x76F4;&#x524D;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x76F4;&#x5F8C;
				this.cursor().moveRow(oldNextRow);
			}
		}
		return this;
	}
	/**
	 * &#x6E21;&#x3055;&#x308C;&#x305F;&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x3092;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x3066;&#x3001;&#x6BB5;&#x843D;&#x3092;&#xFF12;&#x3064;&#x306B;&#x5206;&#x3051;&#x308B;
	 * @param {Char} char &#x6BB5;&#x843D;&#x5206;&#x5272;&#x306E;&#x57FA;&#x6E96;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	divide(char) {
		// &#x6BB5;&#x843D;&#x5148;&#x982D;&#x304B;&#x3089;:&#x4E00;&#x884C;&#x76EE;&#x306E;&#x6587;&#x5B57;&#x304C;&#x4E38;&#x3005;&#x65B0;&#x3057;&#x3044;&#x884C;&#x306B;&#x79FB;&#x3063;&#x3066;&#x6B21;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x4E00;&#x884C;&#x76EE;&#x3068;&#x306A;&#x308B;&#x3002;&#x4E8C;&#x884C;&#x76EE;&#x4EE5;&#x964D;&#x306F;&#x884C;&#x3054;&#x3068;&#x6B21;&#x306E;&#x6BB5;&#x843D;&#x3078; &#x2192;&#x3000;&#x57FA;&#x6E96;&#x6587;&#x5B57;&#x306E;&#x3042;&#x3063;&#x305F;&#x884C;&#x306F;&#x7A7A;&#x884C;&#x3068;&#x306A;&#x308A;&#x3082;&#x3068;&#x3082;&#x3068;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x552F;&#x4E00;&#x306E;&#x884C;&#x3068;&#x306A;&#x308B;&#x305F;&#x3081;&#x3001;&#x3042;&#x305F;&#x304B;&#x3082;&#x7A7A;&#x6BB5;&#x843D;&#x304C;&#x57FA;&#x6E96;&#x884C;&#x306E;&#x524D;&#x306B;&#x633F;&#x5165;&#x3055;&#x308C;&#x305F;&#x3088;&#x3046;&#x306B;&#x306A;&#x308B;
		// &#x884C;&#x982D;&#x304B;&#x3089;:&#x57FA;&#x6E96;&#x884C;&#x306E;&#x6587;&#x5B57;&#x304C;&#x307E;&#x308B;&#x307E;&#x308B;&#x65B0;&#x3057;&#x3044;&#x884C;&#x306B;&#x79FB;&#x3063;&#x3066;&#x6B21;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x4E00;&#x884C;&#x76EE;&#x306B;&#x306A;&#x308B;&#x3002;&#x57FA;&#x6E96;&#x884C;&#x4EE5;&#x964D;&#x306E;&#x884C;&#x306F;&#x884C;&#x3054;&#x3068;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x308B;&#x3002;&#x3000;&#x2192;&#x3000;&#x57FA;&#x6E96;&#x884C;&#x4EE5;&#x964D;&#x304C;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x308A;&#x3001;&#x305D;&#x308C;&#x4EE5;&#x524D;&#x306E;&#x884C;&#x306F;&#x3082;&#x3068;&#x3082;&#x3068;&#x306E;&#x6BB5;&#x843D;&#x306B;&#x6B8B;&#x308B;&#x305F;&#x3081;&#x3001;&#x6BB5;&#x843D;&#x304C;&#xFF12;&#x3064;&#x306B;&#x5225;&#x308C;&#x308B;&#x3002;&#x3053;&#x306E;&#x6642;&#x70B9;&#x3067;&#x306F;&#x3001;&#x3082;&#x3068;&#x3082;&#x3068;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x7A7A;&#x884C;&#x304C;&#x6B8B;&#x3063;&#x3066;&#x3044;&#x308B;&#x72B6;&#x614B;&#x306A;&#x306E;&#x3067;&#x3001;cordinate()&#x3067;&#x5BFE;&#x5FDC;&#x3059;&#x308B;
		// &#x884C;&#x306E;&#x9014;&#x4E2D;&#x304B;&#x3089;:&#x57FA;&#x6E96;&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x306E;&#x540C;&#x3058;&#x884C;&#x306E;&#x6587;&#x5B57;&#x304C;&#x65B0;&#x3057;&#x3044;&#x884C;&#x306B;&#x79FB;&#x3063;&#x3066;&#x6B21;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x4E00;&#x884C;&#x76EE;&#x306B;&#x306A;&#x308B;&#x3002;&#x305D;&#x308C;&#x4EE5;&#x964D;&#x306F;&#x884C;&#x3054;&#x3068;&#x6B21;&#x306E;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x308B;&#x3002;&#x3000;&#x2192;&#x3000;&#x57FA;&#x6E96;&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x304C;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x306A;&#x308B;&#x3002;&#x3053;&#x306E;&#x6642;&#x70B9;&#x3067;&#x306F;&#x4E00;&#x884C;&#x76EE;&#x306E;&#x6587;&#x5B57;&#x6570;&#x304C;&#x304A;&#x304B;&#x3057;&#x3044;&#x306E;&#x3067;&#x3001;cordinate()&#x3067;&#x8ABF;&#x6574;&#x3059;&#x308B;
		// &#x6BB5;&#x843D;&#x6700;&#x5F8C;&#x306E;EOL&#x304B;&#x3089;: &#x57FA;&#x6E96;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x304C;&#x540C;&#x4E00;&#x884C;&#x306E;&#x4ED6;&#x306E;&#x6587;&#x5B57;&#x3088;&#x308A;&#x5927;&#x304D;&#x3044;&#x305F;&#x3081;&#x3001;afterEach()&#x304C;&#x4E00;&#x5EA6;&#x3082;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x306A;&#x3044;&#x3002;&#x6B21;&#x306E;&#x884C;&#x3082;&#x5B58;&#x5728;&#x3057;&#x306A;&#x3044;&#x306E;&#x3067;nextRow&#x304C;&#x5B58;&#x5728;&#x305B;&#x305A;&#x3001;nextRow.afterEach()&#x306F;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x306A;&#x3044;&#x3002;&#x305F;&#x3060;&#x3057;&#x3001;&#x65B0;&#x3057;&#x3044;&#x884C;&#x306F;newParagraph&#x3092;&#x4F5C;&#x6210;&#x3057;&#x305F;&#x6642;&#x70B9;&#x3067;&#x5B58;&#x5728;&#x3057;&#x3066;&#x3044;&#x308B;&#x3002; &#x2192;&#x3000;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x304C;&#x4ECA;&#x3044;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x5F8C;&#x308D;&#x306B;&#x8FFD;&#x52A0;&#x3055;&#x308C;&#x308B;&#x3060;&#x3051;
		if (!this.contains(char)) return this;
		const paragraph = char.row().paragraph();
		const newParagraph = Paragraph.createEmptyParagraph().align(paragraph.align()); // &#x4F5C;&#x6210;&#x6642;&#x70B9;&#x3067;&#x7A7A;&#x884C;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308B; &#x6BB5;&#x843D;&#x306B;&#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x30A2;&#x30E9;&#x30A4;&#x30F3;&#x304C;&#x4ED8;&#x4E0E;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x3001;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x3082;&#x540C;&#x69D8;&#x306B;&#x3059;&#x308B;
		const nextRow = char.row().hasNextSibling() ? char.row().next() : null; // &#x3053;&#x306E;&#x884C;&#x4EE5;&#x964D;&#x3092;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x52D5;
		// &#x4E00;&#x884C;&#x76EE;
		// &#x57FA;&#x6E96;&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x3092;&#x65B0;&#x3057;&#x3044;&#x884C;&#x306B;&#x79FB;&#x3057;&#x3001;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x633F;&#x5165;&#x3059;&#x308B;
		// &#x5143;&#x3005;&#x306E;&#x884C;&#x306F;&#x7A7A;&#x306B;&#x306A;&#x3063;&#x3066;&#x3082;&#x305D;&#x306E;&#x307E;&#x307E;
		const newRow = newParagraph.firstChild();
		char.afterEach(function (c) {
			c.remove();
			newRow.append(c);
		});

		// &#x4E8C;&#x884C;&#x76EE;&#x4EE5;&#x964D;
		// &#x884C;&#x3054;&#x3068;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x52D5;
		if (nextRow) {
			nextRow.afterEach(function (row) {
				row.remove();
				newParagraph.append(row);
			});
		}

		this.after(newParagraph);
		paragraph.cordinate().checkKinsoku();
		newParagraph.cordinate().checkKinsoku();
		return this;
	}

	// --&#x6587;&#x7AE0;&#x6574;&#x7406;

	/**
	 * &#x5185;&#x90E8;&#x884C;&#x304C;&#x6307;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x3068;&#x7570;&#x306A;&#x308B;&#x6587;&#x5B57;&#x6570;&#x306A;&#x3089;&#x3001;&#x6307;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x306B;&#x5408;&#x308F;&#x305B;&#x3066;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8ABF;&#x7BC0;&#x3059;&#x308B;&#x3002;&#x6A19;&#x6E96;&#x4EE5;&#x5916;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x306E;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308C;&#x3070;&#x6587;&#x5B57;&#x6570;&#x306F;&#x8ABF;&#x6574;&#x3055;&#x308C;&#x308B;&#x3002;&#x307E;&#x305F;&#x3001;&#x81EA;&#x8EAB;&#x304C;&#x7A7A;&#x6BB5;&#x843D;&#x3067;&#x306F;&#x306A;&#x304F;&#x5185;&#x90E8;&#x306B;&#x7A7A;&#x884C;&#x304C;&#x3042;&#x308C;&#x3070;&#x524A;&#x9664;&#x3059;&#x308B;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	cordinate() {
		// &#x30A8;&#x30E9;&#x30FC;&#x539F;&#x56E0;&#x307E;&#x3068;&#x3081;
		// &#x3053;&#x3053;&#x3067;&#x4E00;&#x65E6;rows()&#x306E;&#x5185;&#x5BB9;&#x304C;&#x4FDD;&#x5B58;&#x3055;&#x308C;&#x3001;&#x305D;&#x3053;&#x304B;&#x3089;&#x4E00;&#x3064;&#x4E00;&#x3064;row&#x3092;&#x53D6;&#x308A;&#x51FA;&#x3059;(rows()&#x306F;&#x30B3;&#x30D4;&#x30FC;&#x3055;&#x308C;&#x305F;&#x914D;&#x5217;&#x304C;&#x8FD4;&#x3055;&#x308C;&#x308B;)
		// row.cordinate()&#x5185;&#x306E;bringChar()&#x306B;&#x3088;&#x3063;&#x3066;&#x3001;&#x6700;&#x7D42;&#x884C;&#x304C;&#x524A;&#x9664;&#x3055;&#x308C;&#x308B;&#x3053;&#x3068;&#x304C;&#x3042;&#x308B;
		// &#x524A;&#x9664;&#x3055;&#x308C;&#x305F;&#x6700;&#x7D42;&#x884C;&#x3067;&#x3082;&#x3001;&#x5148;&#x306B;&#x4FDD;&#x5B58;&#x3055;&#x308C;&#x3066;&#x3044;&#x305F;&#x305F;&#x3081;row.cordinate()&#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B;
		// &#x524A;&#x9664;&#x884C;&#x306E;&#x53C2;&#x7167;&#x306F;&#x4FDD;&#x6301;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;cordinate()&#x306F;&#x30A8;&#x30E9;&#x30FC;&#x304C;&#x8D77;&#x304D;&#x305A;&#x306B;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B;
		// &#x305F;&#x3060;&#x3057;remove()&#x3055;&#x308C;&#x305F;&#x6642;&#x306B;parent&#x306B;null&#x304C;&#x4EE3;&#x5165;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;&#x5185;&#x90E8;&#x3067;paragraph().container()&#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B;&#x3068;&#x304D;&#x306B;NullPointer
		for (let row of this.rows()) {
			if (!row.paragraph()) continue; // cordinate()&#x5185;&#x3067;&#x884C;&#x304C;&#x524A;&#x9664;&#x3055;&#x308C;&#x305F;&#x5834;&#x5408;&#x306E;&#x5BFE;&#x7B56;
			row.cordinate();
		}
		return this;
	}
	/**
	 * &#x6BB5;&#x843D;&#x5185;&#x306B;&#x7981;&#x5247;&#x51E6;&#x7406;&#x3092;&#x65BD;&#x3059;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	checkKinsoku() {
		for (let row of this.rows()) {
			if (!row.paragraph()) continue;
			row.checkKinsoku();
		}
		return this;
	}

	/**
	 * &#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x3059;&#x3079;&#x3066;&#x306E;&#x884C;&#x306E;&#x8868;&#x793A;&#x975E;&#x8868;&#x793A;&#x3092;&#x5207;&#x308A;&#x66FF;&#x3048;&#x308B;
	 * @param {boolean} bDisplay &#x8868;&#x793A;&#x3059;&#x308B;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;
	 * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	display(bDisplay) {
		for (let row of this.rows()) {
			row.display(bDisplay);
		}
		return this;
	}

	/**
	 * &#x7A7A;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x65B0;&#x305F;&#x306B;&#x4F5C;&#x6210;&#x3059;&#x308B;
	 * @return {Paragraph} &#x7A7A;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	static createEmptyParagraph() {
		const arg = [];
		arg[0] = [];
		arg[1] = [];
		return new Paragraph(arg);
	}
}

// class&#x306F;&#x5DFB;&#x304D;&#x4E0A;&#x3052;&#x304C;&#x8D77;&#x3053;&#x3089;&#x306A;&#x3044;&#x305F;&#x3081;&#x3001;Char&#x30FB;Row&#x306E;&#x4E0B;&#x306B;&#x4F5C;&#x308B;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;&#x3002;&#x305F;&#x3060;&#x3057;&#x3001;SentenceContainer&#x5185;&#x3067;&#x5229;&#x7528;&#x3059;&#x308B;&#x306E;&#x3067;SentenceContainer&#x3088;&#x308A;&#x306F;&#x4E0A;&#x306B;&#x306A;&#x3051;&#x308C;&#x3070;&#x306A;&#x3089;&#x306A;&#x3044;
/**
 * &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x30D3;&#x30E5;&#x30FC;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;&#x3002;&#x305D;&#x308C;&#x305E;&#x308C;&#x4E00;&#x3064;&#x306E;&#x6587;&#x7BC0;&#x3092;&#x62C5;&#x5F53;&#x3057;&#x3001;&#x8907;&#x6570;&#x306E;&#x6F22;&#x5B57;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x3092;&#x6301;&#x3064;&#x3002;&#x307E;&#x305F;&#x3001;&#x5185;&#x90E8;&#x306B;&#x306F;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x3068;&#x3057;&#x3066;Row&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x6301;&#x3064;
 */
export class ConvertView extends AbstractHierarchy {
	// &#x6587;&#x7BC0;&#x756A;&#x53F7;&#x306F;&#x3001;ConvertView&#x306E;index()&#x3068;&#x540C;&#x3058;
	/**
	 * @param {object} data &#x5909;&#x63DB;&#x5019;&#x88DC;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&lt;br&gt;
	 * &#x4F8B;
	 * &lt;pre&gt;
	 * &lt;code&gt;
	 * [[&#x3072;&#x3089;&#x304C;&#x306A;],[&#x5E73;&#x4EEE;&#x540D;,&#x30D2;&#x30E9;&#x30AC;&#x30CA;,&#x5E73;&#x8CC0;&#x306A;,&#x5E73;&#x304C;&#x306A;,HIRAGANA]]
	 *	&lt;/code&gt;
	 *	&lt;/pre&gt;
	 */
	constructor(data) {
		super(Util.createConvertViewElement());
		data[1].push(data[0]); // &#x672B;&#x5C3E;&#x306B;&#x660E;&#x78BA;&#x306B;&#x3072;&#x3089;&#x304C;&#x306A;&#x3092;&#x5165;&#x308C;&#x308B;
		for (let str of data[1]) {
			const row = Row.createEmptyRow();
			row.createPlainContent(str);
			this.append(row);
		}
		this.removeClass(&apos;paragraph&apos;);
		this.addClass(&apos;convert-view&apos;);
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x81EA;&#x5206;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6F22;&#x5B57;&#x5909;&#x63DB;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x5C5E;&#x3057;&#x3066;&#x3044;&#x308B;&#x306E;&#x6F22;&#x5B57;&#x5909;&#x63DB;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {ConvertContainer} [opt_newContainer] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x6F22;&#x5B57;&#x5909;&#x63DB;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {ConvertView ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x6240;&#x5C5E;&#x3059;&#x308B;&#x6F22;&#x5B57;&#x5909;&#x63DB;&#x30B3;&#x30F3;&#x30C6;&#x30CA;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	container(opt_newContainer) {
		return this.parent(opt_newContainer);
	}
	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x3092;&#x8868;&#x3059;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} [opt_index] &#x53D6;&#x5F97;&#x3059;&#x308B;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @return {Row Row[]} &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;) 
	 */
	rows(opt_index) {
		return this.children(opt_index);
	}
	/**
	 * &#x73FE;&#x5728;&#x9078;&#x629E;&#x4E2D;&#x306E;&#x884C;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {Row} &#x73FE;&#x5728;&#x9078;&#x629E;&#x4E2D;&#x306E;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x9078;&#x629E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x5019;&#x88DC;&#x6700;&#x5F8C;&#x306E;&#x3072;&#x3089;&#x304C;&#x306A;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	getSelect() {
		for (let row of this.rows()) {
			if (row.hasClass(&apos;select&apos;)) return row;
		}
		return this.lastChild(); // &#x9078;&#x629E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x3072;&#x3089;&#x304C;&#x306A;&#x884C;
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x3053;&#x306E;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x304C;&#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;
	 * @return {boolean} &#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isActive() {
		return this.hasClass(&apos;active&apos;);
	}

	// --Status

	/**
	 * &#x3053;&#x306E;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x304C;&#x62C5;&#x5F53;&#x3059;&#x308B;&#x6587;&#x7BC0;&#x306E;&#x3072;&#x3089;&#x304C;&#x306A;&#x3092;&#x6587;&#x5B57;&#x5217;&#x3067;&#x8FD4;&#x3059;
	 * @return {string} &#x62C5;&#x5F53;&#x6587;&#x7BC0;&#x306E;&#x3072;&#x3089;&#x304C;&#x306A;
	 */
	hiragana() {
		return this.lastChild().text(); // &#x6700;&#x7D42;&#x884C;&#x306F;&#x5FC5;&#x305A;&#x3072;&#x3089;&#x304C;&#x306A;
	}

	/**
	 * &#x3072;&#x3089;&#x304C;&#x306A;&#x3067;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x3072;&#x3089;&#x304C;&#x306A;&#x3067;&#x306E;&#x6587;&#x5B57;&#x6570;
	 */
	kanaLength() {
		return this.hiragana().length;
	}
	/**
	 * &#x62C5;&#x5F53;&#x3059;&#x308B;&#x6587;&#x7BC0;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x62C5;&#x5F53;&#x6587;&#x7BC0;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;(&#xFF10;&#x59CB;&#x307E;&#x308A;)
	 */
	phraseNum() {
		return this.index();
	}

	// --Style

	/**
	 * &#x3053;&#x306E;&#x6F22;&#x5B57;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x3092;&#x53EF;&#x8996;&#x5316;&#x3059;&#x308B;
	 * @return {ConvertView} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	active() {
		for (let view of this.container().views()) {
			if (view.hasClass(&apos;active&apos;)) { view.removeClass(&apos;active&apos;); }
		}
		this.addClass(&apos;active&apos;);
		return this;
	}
	/**
	 * &#x5909;&#x63DB;&#x5019;&#x88DC;&#x306E;&#x9078;&#x629E;&#x3092;&#x3072;&#x3068;&#x3064;&#x5DE6;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;
	 * @return {ConvertView} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	selectLeft() {
		const index = this.getSelect().index() + 1;
		this.select(index);
		return this;
	}
	/**
	 * &#x5909;&#x63DB;&#x5019;&#x88DC;&#x306E;&#x9078;&#x629E;&#x3092;&#x3072;&#x3068;&#x3064;&#x53F3;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;
	 * @return {ConvertView} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	selectRight() {
		const index = this.getSelect().index() - 1;
		this.select(index);
		return this;
	}

	// --DOM&#x64CD;&#x4F5C;

	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x3092;&#x9078;&#x629E;&#x3059;&#x308B;
	 * @param {number} index &#x9078;&#x629E;&#x3059;&#x308B;&#x5019;&#x88DC;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @return {ConvertView} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	select(index) {
		if (index &lt; 0) index = 0;
		if (index &gt;= this.childLength()) index = this.childLength() - 1;

		for (let row of this.rows()) {
			if (row.hasClass(&apos;select&apos;)) row.removeClass(&apos;select&apos;);
		}
		const newRow = this.rows(index);
		newRow.addClass(&apos;select&apos;);
		this.container().inputBuffer().insertPhrase(this.phraseNum(),newRow.text());
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;
	 * @param {Row} row &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x5909;&#x63DB;&#x5019;&#x88DC;
	 * @return {ConvertView} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	append(row) {
		// DOM
		this.elem().appendChild(row.elem());
		// &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
		// view
		if (this.hasChild()) {
			this.lastChild().next(row);
			row.prev(this.lastChild());
		}
		// parent
		row.parent(this);
		this.pushChild(row);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x524D;&#x306B;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {ConvertView} view &#x633F;&#x5165;&#x3059;&#x308B;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;
	 * @return {ConvertView} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	before(view) {
		// DOM
		this.container().elem().insertBefore(view.elem(),this.elem());

		// &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
		// oldPrev - view - this

		// view
		const oldPrev = this.prev();
		oldPrev &amp;&amp; oldPrev.next(view);
		view.prev(oldPrev);
		view.next(this);
		this.prev(view);
		// paretn
		view.container(this.container());
		const pos = this.index();
		this.container().insertChild(pos,view);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x5F8C;&#x306B;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {ConvertView} view &#x633F;&#x5165;&#x3059;&#x308B;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;
	 * @return {ConvertView} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	after(view) {
		// DOM
		if (this.hasNextSibling()) {
			this.container().elem().insertBefore(view.elem(),this.next().elem());
		} else {
			this.container().elem().appendChild(view.elem());
		}

		// &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
		// this - view - oldNext

		// view
		const oldNext = this.next();
		this.next(view);
		view.prev(this);
		view.next(oldNext);
		oldNext &amp;&amp; oldNext.prev(view);
		// parent
		view.container(this.container());
		const pos = this.index() + 1;
		this.container().insertChild(pos,view);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;
	 * @return {ConvertView} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	remove() {
		// DOM
		this.container().elem().removeChild(this.elem());

		// &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
		// oldPrev - this - oldNext &#x2192;&#x3000;oldPrev - oldNext

		// view
		const oldPrev = this.prev();
		const oldNext = this.next();
		oldPrev &amp;&amp; oldPrev.next(oldNext);
		oldNext &amp;&amp; oldNext.prev(oldPrev);
		this.prev(null);
		this.next(null);
		// parent
		this.container().deleteChild(this);
		this.container(null);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;view&#x3068;&#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;
	 * @param {ConvertView} view &#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;
	 * @return {ConvertView} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	replace(view) {
		this.before(view);
		if (this.isActive()) view.active();
		return this.remove();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x62C5;&#x5F53;&#x3059;&#x308B;&#x6587;&#x7BC0;&#x3092;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x5909;&#x63DB;&#x3059;&#x308B;
	 * @return {ConvertView} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	toKatakana() {
		this.container().inputBuffer().insertPhrase(this.phraseNum(),this.getKatakana());
		return this;
	}
	/**
	 * @private
	 * &#x81EA;&#x8EAB;&#x304C;&#x62C5;&#x5F53;&#x3059;&#x308B;&#x6587;&#x7BC0;&#x306E;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x3092;&#x6587;&#x5B57;&#x5217;&#x3067;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {string} &#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x5909;&#x63DB;&#x3057;&#x305F;&#x5834;&#x5408;&#x306E;&#x6587;&#x5B57;&#x5217;
	 */
	getKatakana() {
		const str = this.hiragana();
		let rtnKatakana = &apos;&apos;;
		for (let char of str) {
			const cKatakana = key_table.katakana[char];
			if (cKatakana) {
				rtnKatakana += cKatakana;
			} else {
				// &#x5909;&#x63DB;&#x3067;&#x304D;&#x306A;&#x3051;&#x308C;&#x3070;&#x5143;&#x306E;&#x6587;&#x5B57;&#x3092;&#x305D;&#x306E;&#x307E;&#x307E;&#x9023;&#x7D50;
				rtnKatakana += char;
			}
		}
		return rtnKatakana;
	}
}
/**
 * &#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x3092;&#x675F;&#x306D;&#x308B;&#x6F22;&#x5B57;&#x5909;&#x63DB;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class ConvertContainer extends AbstractHierarchy {
	/**
	 * @param {InputBuffer} inputBuffer &#x5165;&#x529B;&#x5143;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	constructor(inputBuffer) {
		super(document.getElementById(&apos;convert_container&apos;));
		this._inputBuffer = inputBuffer;
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x5165;&#x529B;&#x5143;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {InputBuffer} &#x5165;&#x529B;&#x5143;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	inputBuffer() {
		return this._inputBuffer;
	}
	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x306E;&#x914D;&#x5217;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} [opt_index] &#x53D6;&#x5F97;&#x3059;&#x308B;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @return {ConvertView ConvertView[]} &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x5019;&#x88DC;&#x4E00;&#x89A7;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x306E;&#x914D;&#x5217;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	views(opt_index) {
		return super.children(opt_index);
	}
	/**
	 * &#x73FE;&#x5728;&#x30A2;&#x30AF;&#x30C6;&#x30A3;&#x30D6;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {ConvertView} &#x73FE;&#x5728;&#x30A2;&#x30AF;&#x30C6;&#x30A3;&#x30D6;&#x306A;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	activeView() {
		for (let view of this.views()) {
			if (view.isActive()) return view;
		}
		return null;
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x304C;&#x884C;&#x308F;&#x308C;&#x3066;&#x3044;&#x308B;&#x3068;&#x3053;&#x308D;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5019;&#x88DC;&#x4E00;&#x89A7;&#x304C;&#x3072;&#x3068;&#x3064;&#x3067;&#x3082;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isActive() {
		return this.childLength() &gt; 0;
	}

	// --Style

	/**
	 * &#x8868;&#x793A;&#x4F4D;&#x7F6E;&#x3092;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6A2A;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	reposition() {
		const x = this.cursorX();
		const y = this.cursorY();
		this.elem().style.top = y + &apos;px&apos;;
		this.elem().style.left = (x - this.width()) + &apos;px&apos;;
		return this;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306E;X&#x5EA7;&#x6A19;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306E;X&#x5EA7;&#x6A19;
	 */
	cursorX() {
		return this.inputBuffer().cursorX();
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306E;Y&#x5EA7;&#x6A19;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306E;Y&#x5EA7;&#x6A19;
	 */
	cursorY() {
		return this.inputBuffer().cursorY();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x8868;&#x793A;&#x3059;&#x308B;
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	show() {
		this.elem().style.display = &apos;block&apos;;
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x975E;&#x8868;&#x793A;&#x306B;&#x3059;&#x308B;
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	hide() {
		this.elem().style.display = &apos;none&apos;;
		this.removeKeydownEventListener();
		return this;
	}

	// --DOM&#x64CD;&#x4F5C;

	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x304B;&#x3089;&#x6587;&#x5B57;&#x3092;&#x633F;&#x5165;&#x3057;&#x3066;&#x3001;&#x5185;&#x90E8;&#x306E;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x3092;&#x7834;&#x68C4;&#x3059;&#x308B;
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	print() {
		this.inputBuffer().print();
		return this;
	}
	/**
	 * &#x5185;&#x90E8;&#x306B;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x7FA4;&#x3092;&#x69CB;&#x7BC9;&#x3059;&#x308B;
	 * @param {object} data &#x6587;&#x7BC0;&#x5206;&#x3051;&#x53CA;&#x3073;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x3092;&#x793A;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&lt;br&gt;
	 * &lt;pre&gt;
	 * &lt;code&gt;
	 *  // data&#x5F62;&#x5F0F;&#x4F8B;
	 * [[&#x3072;&#x3089;&#x304C;&#x306A;,[&#x6F22;&#x5B57;&#xFF11;,&#x6F22;&#x5B57;&#xFF12;,&#x6F22;&#x5B57;&#xFF13;]],[&#x3072;&#x3089;&#x304C;&#x306A;&#xFF12;,[&#x6F22;&#x5B57;&#xFF14;,&#x6F22;&#x5B57;&#xFF15;]],[[&#x3072;&#x3089;&#x304C;&#x306A;&#xFF13;,[&#x6F22;&#x5B57;&#xFF16;,&#x6F22;&#x5B57;&#xFF17;]]]]
	 * &lt;/code&gt;
	 * &lt;/pre&gt;
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	createViews(data) {
		this.empty();
		for (let phraseData of data) {
			this.append(new ConvertView(phraseData));
		}
		return this;
	}
	/**
	 * &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x3092;&#x59CB;&#x3081;&#x308B;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @param {string} str &#x5909;&#x63DB;&#x3059;&#x308B;&#x6587;&#x5B57;&#x5217;
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/KanjiProxy.html
	 */
	convert(str) {
		Util.post(&quot;/tategaki/KanjiProxy&quot;,{
			sentence: str
		},function (json) {
			this.createViews(json);
			this.inputBuffer().setPhraseNum();
			// &#x3059;&#x3079;&#x3066;&#x5909;&#x63DB;&#x7B2C;&#x4E00;&#x5019;&#x88DC;&#x3092;&#x9078;&#x629E;&#x3059;&#x308B;
			for (let view of this.views()) {
				view.select(0);
			}
			// &#x6700;&#x521D;&#x306E;&#x6587;&#x7BC0;&#x3092;&#x9078;&#x629E;
			this.inputBuffer().select(0);

			this.reposition();
			this.addKeydownEventListener();
		}.bind(this));
		this.show();

		return this;
	}
	/**
	 * &#x6587;&#x7BC0;&#x533A;&#x5207;&#x308A;&#x3092;&#x3072;&#x3068;&#x3064;&#x524D;&#x306B;&#x305A;&#x3089;&#x3057;&#x3066;&#x5909;&#x63DB;&#x3057;&#x76F4;&#x3059;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/KanjiProxy.html
	 */
	shiftUp() {
		const activeView = this.activeView();

		if (activeView.kanaLength() === 1) { return this; }

		// &#x6700;&#x7D42;&#x6587;&#x7BC0;&#x304B;&#x3089;
		// &#x6700;&#x5F8C;&#x306E;&#x4E00;&#x5B57;&#x3092;&#x5206;&#x96E2;&#x3057;&#x3066;&#x3001;&#x4E8C;&#x6587;&#x7BC0;&#x3092;&#x5909;&#x63DB;&#x3057;&#x76F4;&#x3059;
		if (activeView.isLast()) {
			const activeKana = activeView.hiragana();
			const sendString = activeKana.slice(0,-1) + &apos;,&apos; + activeKana.slice(-1);
			Util.post(&quot;/tategaki/KanjiProxy&quot;,{
				sentence: sendString
			},function (json) {
				this.replace(activeView.phraseNum(),json);
			}.bind(this));
			return this;
		}

		// &#x6700;&#x7D42;&#x6587;&#x7BC0;&#x304B;&#x3089;&#x3067;&#x306F;&#x306A;&#x3044;
		// &#x9078;&#x629E;&#x6587;&#x5B57;&#x5217;&#x304B;&#x3089;&#x6700;&#x5F8C;&#x306E;&#x4E00;&#x6587;&#x5B57;&#x3092;&#x53D6;&#x308A;&#x9664;&#x304D;&#x3001;&#x305D;&#x306E;&#x6B21;&#x306E;&#x6587;&#x7BC0;&#x306E;&#x982D;&#x306B;&#x3064;&#x306A;&#x3052;&#x3066;&#x305D;&#x308C;&#x305E;&#x308C;&#x3092;&#x5909;&#x63DB;&#x3057;&#x76F4;&#x3059;
		if (!activeView.isLast()) {
			const activeKana = activeView.hiragana();
			const nextView = activeView.next();
			const nextKana = nextView.hiragana();
			const sendString = activeKana.slice(0,-1) + &apos;,&apos; + activeKana.slice(-1) + nextKana;
			Util.post(&quot;/tategaki/KanjiProxy&quot;,{
				sentence: sendString
			},function (json) {
				const newFirst = new ConvertView(json[0]);
				activeView.replace(newFirst);
				newFirst.select(0);
				const newSecond = new ConvertView(json[1]);
				nextView.replace(newSecond);
				newSecond.select(0);
			});
			return this;
		}
	}
	/**
	 * &#x6587;&#x7BC0;&#x533A;&#x5207;&#x308A;&#x3092;&#x3072;&#x3068;&#x3064;&#x4E0B;&#x306B;&#x305A;&#x3089;&#x3057;&#x3066;&#x5909;&#x63DB;&#x3057;&#x76F4;&#x3059;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/KanjiProxy.html
	 */
	shiftDown() {
		const activeView = this.activeView();
		const nextView = activeView.next();

		if (activeView.isLast()) return;

		// &#x6B21;&#x306E;&#x6587;&#x7BC0;&#x306E;&#x6587;&#x5B57;&#x6570;&#x304C;&#xFF11;&#x6587;&#x5B57;&#x3060;&#x3051;&#x306A;&#x3089;&#x878D;&#x5408;&#x3057;&#x3066;&#x3001;&#xFF11;&#x6587;&#x7BC0;&#x3068;&#x3057;&#x3066;&#x5909;&#x63DB;&#x3059;&#x308B;
		if (nextView.kanaLength() === 1) {
			const nextPhrase = this.inputBuffer().phrases(nextView.phraseNum())[0];
			const sendString = activeView.hiragana() + nextView.hiragana() + &apos;,&apos;; // &#x6587;&#x7BC0;&#x3092;&#x533A;&#x5207;&#x3089;&#x308C;&#x306A;&#x3044;&#x3088;&#x3046;&#x3001;,&#x3092;&#x672B;&#x5C3E;&#x306B;&#x8FFD;&#x52A0;&#x3059;&#x308B;
			Util.post(&quot;/tategaki/KanjiProxy&quot;,{
				sentence: sendString
			},function (json) {
				const newView = new ConvertView(json[0]);
				activeView.replace(newView);
				nextView.remove();
				nextPhrase.remove();
				newView.select(0);
				this.inputBuffer().setPhraseNum();
			}.bind(this));
			return this;
		}

		// &#x6B21;&#x306E;&#x6587;&#x7BC0;&#x304C;&#x4E8C;&#x6587;&#x5B57;&#x4EE5;&#x4E0A;
		// &#x6B21;&#x306E;&#x6587;&#x7BC0;&#x306E;&#xFF11;&#x6587;&#x5B57;&#x76EE;&#x3092;&#x9078;&#x629E;&#x6587;&#x7BC0;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x3066;&#x3001;&#x305D;&#x308C;&#x305E;&#x308C;&#x3092;&#x5909;&#x63DB;&#x3057;&#x76F4;&#x3059;
		const activeKana = activeView.hiragana();
		const nextKana = nextView.hiragana();
		const sendString = activeKana + nextKana.slice(0,1) + &apos;,&apos; + nextKana.slice(1);
		Util.post(&quot;/tategaki/KanjiProxy&quot;,{
			sentence: sendString
		},function (json) {
			const newFirst = new ConvertView(json[0]);
			activeView.replace(newFirst);
			newFirst.select(0);
			const newSecond = new ConvertView(json[1]);
			nextView.replace(newSecond);
			newSecond.select(0);
		});
		return this;
	}
	/**
	 * &#x5165;&#x529B;&#x5143;&#x306E;&#x6587;&#x5B57;&#x304C;&#x3072;&#x3089;&#x304C;&#x306A;&#x306B;&#x3057;&#x3066;&#xFF11;&#x6587;&#x5B57;&#x3057;&#x304B;&#x306A;&#x3051;&#x308C;&#x3070;&#x5168;&#x3066;&#x7834;&#x68C4;&#x3057;&#x3066;&#x5165;&#x529B;&#x3092;&#x7D42;&#x4E86;&#x3059;&#x308B;&#x3002;&#x4E8C;&#x6587;&#x5B57;&#x4EE5;&#x4E0A;&#x3042;&#x308C;&#x3070;&#x6700;&#x5F8C;&#x306E;&#xFF11;&#x97F3;&#x306E;&#x307F;&#x524A;&#x9664;&#x3057;&#x3066;&#x9078;&#x629E;&#x6587;&#x7BC0;&#x3092;&#x5909;&#x63DB;&#x3057;&#x76F4;&#x3059;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/KanjiProxy.html
	 */
	backSpace() {
		const activeView = this.activeView();
		// buffer&#x6587;&#x5B57;&#x304C;&#x3072;&#x3089;&#x304C;&#x306A;&#x306B;&#x3057;&#x3066;&#x4E00;&#x6587;&#x5B57;&#x3057;&#x304B;&#x306A;&#x3044;
		// &#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;&#x3057;&#x3066;input&#x7D42;&#x4E86;
		if (activeView.isOnlyChild() &amp;&amp; activeView.kanaLength() === 1) {
			this.empty();
			this.inputBuffer().decreace();
			return this;
		}

		// &#x6587;&#x7BC0;&#x304C;&#x3072;&#x3089;&#x304C;&#x306A;&#x306B;&#x3057;&#x3066;&#x4E00;&#x6587;&#x5B57;&#x3057;&#x304B;&#x306A;&#x3044;
		// &#x305D;&#x306E;&#x6587;&#x7BC0;&#x3092;&#x524A;&#x9664;&#x3057;&#x3066;&#x3072;&#x3068;&#x3064;&#x524D;&#x306E;&#x6587;&#x7BC0;&#x3092;&#x9078;&#x629E;&#x3059;&#x308B;
		if (activeView.kanaLength() === 1) {
			const phraseNum = activeView.phraseNum();
			const phraseChar = this.inputBuffer().phrases(phraseNum)[0];
			phraseChar.remove();
			activeView.remove();
			this.inputBuffer().setPhraseNum()
				.select(phraseNum &gt; 0 ? phraseNum - 1 : phraseNum); // &#x4E00;&#x3064;&#x524D;&#x306E;&#x6587;&#x7BC0;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x3001;&#x4E00;&#x3064;&#x6B21;&#x306E;&#x6587;&#x7BC0;
			return this;
		}

		// &#x6587;&#x7BC0;&#x306B;&#x3072;&#x3089;&#x304C;&#x306A;&#x306B;&#x3057;&#x3066;&#x4E8C;&#x6587;&#x5B57;&#x4EE5;&#x4E0A;&#x3042;&#x308B;
		// &#x6700;&#x5F8C;&#x306E;&#x4E00;&#x5B57;&#x3092;&#x524A;&#x9664;&#x3057;&#x3066;&#x3001;&#x305D;&#x306E;&#x6587;&#x7BC0;&#x3092;&#x5909;&#x63DB;&#x3057;&#x76F4;&#x3059;
		const phraseNum = activeView.phraseNum();
		const newString = activeView.hiragana().slice(0,-1) + &apos;,&apos;; // &#x6587;&#x7BC0;&#x3092;&#x533A;&#x5207;&#x3089;&#x308C;&#x306A;&#x3044;&#x3088;&#x3046;&#x3001;,&#x3092;&#x672B;&#x5C3E;&#x306B;&#x8FFD;&#x52A0;&#x3059;&#x308B;
		Util.post(&quot;/tategaki/KanjiProxy&quot;,{
			sentence: newString
		},function (json) {
			this.replace(phraseNum,json);
		}.bind(this));
		return this;
	}
	/**
	 * &#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x304C;num&#x306E;&#x6587;&#x7BC0;&#x306E;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x3092;&#x3001;&#x65B0;&#x305F;&#x306A;data&#x3067;&#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;
	 * @param {number} num &#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;&#x6587;&#x7BC0;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @param {object} data &#x5909;&#x63DB;&#x5019;&#x88DC;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&lt;br&gt;
	 * &#x4F8B;
	 * &lt;pre&gt;
	 * &lt;code&gt;
	 * [[&#x3072;&#x3089;&#x304C;&#x306A;],[&#x5E73;&#x4EEE;&#x540D;,&#x30D2;&#x30E9;&#x30AC;&#x30CA;,&#x5E73;&#x8CC0;&#x306A;,&#x5E73;&#x304C;&#x306A;,HIRAGANA]]
	 *	&lt;/code&gt;
	 *	&lt;/pre&gt;
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	replace(num,data) {
		const oldView = this.views(num);
		const newViews = []; // &#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;&#x632F;&#x308A;&#x76F4;&#x3057;&#x305F;&#x5F8C;&#x3067;&#x306A;&#x3044;&#x3068;view.select()&#x3067;&#x304D;&#x306A;&#x3044;(&#x4E2D;&#x3067;insertPhrase()&#x3092;&#x3057;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;)&#x306E;&#x3067;&#x3001;&#x3044;&#x3063;&#x305F;&#x3093;&#x65B0;&#x3057;&#x3044;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x5165;&#x308C;&#x3066;&#x304A;&#x304F;
		// view&#x3092;&#x5165;&#x308C;&#x66FF;&#x3048;&#x3001;buffer&#x306B;&#x306F;&#x3044;&#x3063;&#x305F;&#x3093;&#x3072;&#x3089;&#x304C;&#x306A;&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;
		for (let phraseData of data.entries()) {
			// view
			const newView = new ConvertView(phraseData[1]);
			newViews.push(newView);
			oldView.before(newView);
			// input_buffer
			// setPhraseNum()&#x306F;&#x3001;select()&#x3059;&#x308B;&#x524D;&#x306E;view&#x3067;&#x306F;&#x3072;&#x3089;&#x304C;&#x306A;&#x306E;&#x9577;&#x3055;&#x3092;&#x4F7F;&#x3063;&#x3066;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;&#x5272;&#x308A;&#x632F;&#x308B;&#x3002;&#x305D;&#x306E;&#x305F;&#x3081;&#x3001;&#x3044;&#x3063;&#x305F;&#x3093;&#x3072;&#x3089;&#x304C;&#x306A;&#x3092;buffer&#x306B;&#x8FFD;&#x52A0;&#x3059;&#x308B;
			if (phraseData[0] === 0) // &#x3072;&#x3068;&#x3064;&#x3081;&#x3060;&#x3051;&#x5165;&#x66FF;&#x3048;&#x3067;&#x3001;&#x4ED6;&#x306F;&#x305D;&#x306E;&#x5F8C;&#x306B;&#x8FFD;&#x52A0;&#x3057;&#x3066;&#x3044;&#x304F;
				this.inputBuffer().insertPhrase(num,oldView.prev().hiragana()); // &#x53E4;&#x3044;buffer&#x6587;&#x5B57;&#x306F;&#x3053;&#x3053;&#x3067;&#x306A;&#x304F;&#x306A;&#x308B;
			else
				this.inputBuffer().insertPhraseAfter(num,oldView.prev().hiragana()); // HACK:&#x8FFD;&#x52A0;&#x5206;&#x306E;&#x6587;&#x5B57;&#x306E;&#x9806;&#x756A;&#x304C;&#x3053;&#x306E;&#x6642;&#x70B9;&#x3067;&#x306F;&#x304A;&#x304B;&#x3057;&#x304F;&#x306A;&#x308B;&#x304C;&#x3001;&#x5408;&#x8A08;&#x306E;&#x3072;&#x3089;&#x304C;&#x306A;&#x306E;&#x6570;&#x306F;&#x6B63;&#x3057;&#x304F;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;buffer.setPhraseNum()&#x3068;newView.select(0)&#x3067;&#x6B63;&#x3057;&#x304F;&#x6587;&#x5B57;&#x304C;&#x7F6E;&#x304D;&#x63DB;&#x308F;&#x308B;
		}
		oldView.remove();

		// &#x6587;&#x7BC0;&#x756A;&#x53F7;&#x306E;&#x632F;&#x308A;&#x76F4;&#x3057;
		this.inputBuffer().setPhraseNum();
		// &#x6700;&#x521D;&#x306E;&#x5019;&#x88DC;&#x3067;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;
		for (let newView of newViews) {
			newView.select(0);
		}
		if (oldView.isActive()) newViews[0].active();
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;
	 * @param {ConvertContainer} view &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	append(view) {
		this.elem().appendChild(view.elem());
		if (this.hasChild()) {
			this.lastChild().next(view);
			view.prev(this.lastChild());
		}
		view.container(this);
		this.pushChild(view);
		return this;
	}

	// --&#x30A4;&#x30D9;&#x30F3;&#x30C8;

	/**
	 * &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x4E2D;&#x306E;keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30EA;&#x30B9;&#x30CA;&#x30FC;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;&#x3002;&#x91CD;&#x306D;&#x304C;&#x3051;&#x306F;&#x7121;&#x52B9;
	 * @return {ConvertContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addKeydownEventListener() {
		this.inputBuffer().removeKeydownEventListener()
			.container().removeKeydownEventListener();
		super.addKeydownEventListener();
		return this;
	}
	/**
	 * keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;
	 * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @param {number} keycode &#x62BC;&#x4E0B;&#x3055;&#x308C;&#x305F;&#x30AD;&#x30FC;&#x306E;&#x30AD;&#x30FC;&#x30B3;&#x30FC;&#x30C9;
	 */
	runKeydown(e,keycode) {
		switch (keycode) {
			case 8:
				this.backSpace();
				break;
			case 13:
				// Enter
				this.print();
				break;
			case 32:
			case 37:
				// space
				// Left
				this.activeView().selectLeft();
				break;
			case 38:
				// Up
				if (e.shiftKey) {
					this.shiftUp();
				} else {
					this.inputBuffer().selectPrev();
				}
				break;
			case 39:
				// Right
				this.activeView().selectRight();
				break;
			case 40:
				// Down
				if (e.shiftKey) {
					this.shiftDown();
				} else {
					this.inputBuffer().selectNext();
				}
				break;
			case 118:
				// F7
				this.activeView().toKatakana();
				break;
			default:
				break;
		}
	}
}
/**
 * &#x5165;&#x529B;&#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class InputChar extends Char {
	/**
	 * @param {object} data &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&lt;br&gt;
	 * &#x4F8B;
	 * &lt;pre&gt;
	 * &lt;code&gt;
	 *	{
	 *		&quot;char&quot;:&quot;&#x3042;&quot;,
	 *		&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	 *		&quot;fontSize&quot;: &quot;auto&quot;
	 *	}
	 *	&lt;/code&gt;
	 *	&lt;/pre&gt;
	 *	@param {number} [opt_phraseNum=-1] &#x6587;&#x7BC0;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 */
	constructor(data,opt_phraseNum) {
		super(data);
		if (opt_phraseNum === undefined) opt_phraseNum = -1;
		this.phraseNum(opt_phraseNum);
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x304C;num&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;
	 * @param {number} num &#x5224;&#x5B9A;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x306E;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x304C;num&#x3067;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isPhraseNum(num) {
		return num === this.phraseNum();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x9078;&#x629E;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8868;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x9078;&#x629E;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false&#x3002;&#x6F22;&#x5B57;&#x5909;&#x63DB;&#x304C;&#x4E00;&#x5EA6;&#x3082;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isSelect() {
		return this.hasClass(&apos;select-phrase&apos;);
	}

	// --Status

	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;opt_newNum&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} [opt_newNum] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x6587;&#x7BC0;&#x756A;&#x53F7;(&#xFF10;&#x59CB;&#x307E;&#x308A;)
	 * @return {InputChar number} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;&#x6587;&#x7BC0;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	phraseNum(opt_newNum) {
		if (opt_newNum === undefined) {
			return this._phraseNum;
		} else {
			this.elem().dataset.phraseNum = opt_newNum;
			this._phraseNum = opt_newNum;
			return this;
		}
	}

	// --Style

	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x3092;&#x9078;&#x629E;&#x72B6;&#x614B;&#x306B;&#x3059;&#x308B;
	 * @return {InputChar} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	select() {
		this.addClass(&apos;select-phrase&apos;);
		return this;
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x5B57;&#x3092;&#x975E;&#x9078;&#x629E;&#x72B6;&#x614B;&#x306B;&#x3059;&#x308B;
	 * @return {InputChar} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeSelect() {
		this.removeClass(&apos;select-phrase&apos;);
		return this;
	}

}

/**
 * &#x5165;&#x529B;&#x3055;&#x308C;&#x305F;&#x6587;&#x5B57;&#x3092;&#x3044;&#x3063;&#x305F;&#x3093;&#x4FDD;&#x6301;&#x3059;&#x308B;&#x30D0;&#x30C3;&#x30D5;&#x30A1;&#x30FC;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;&#x3002;&#x5185;&#x90E8;&#x306E;&#x5B50;&#x306B;InputChar&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x7FA4;&#x3092;&#x6301;&#x3064;&#x3002;
 *     &#x307E;&#x305F;&#x3001;&#x4E00;&#x5EA6;&#x3082;&#x6F22;&#x5B57;&#x5909;&#x63DB;&#x304C;&#x3055;&#x308C;&#x305A;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x304C;&#x3059;&#x3079;&#x3066;-1&#x306E;&#x5834;&#x5408;&#x3068;&#x3001;&#x6F22;&#x5B57;&#x5909;&#x63DB;&#x304C;&#x884C;&#x308F;&#x308C;&#x6587;&#x7BC0;&#x304C;&#x5206;&#x3051;&#x3089;&#x308C;&#x3066;&#x3044;&#x308B;&#x5834;&#x5408;&#x3068;&#xFF12;&#x3064;&#x306E;&#x72B6;&#x614B;&#x304C;&#x3042;&#x308B;
 */
export class InputBuffer extends Row {
	/**
	 * @param {SentenceContainer} container &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	constructor(container) {
		super(document.getElementById(&apos;input_buffer&apos;));
		this._container = container;
		this._convertContainer = new ConvertContainer(this);
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;
	 */
	container() {
		return this._container;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {Cursor} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	cursor() {
		return this.container().cursor();
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x3042;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {Char} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	cursorChar() {
		return this.cursor().getChar();
	}
	/**
	 * &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {ConvertContainer} &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	convertContainer() {
		return this._convertContainer;
	}
	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x306E;&#x5165;&#x529B;&#x6587;&#x5B57;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x914D;&#x5217;&#x306B;&#x3057;&#x3066;&#x8FD4;&#x3059;
	 * @param {number} num &#x96C6;&#x3081;&#x308B;&#x5165;&#x529B;&#x6587;&#x5B57;&#x306E;&#x6587;&#x7BC0;&#x756A;&#x53F7;
	 * @return {InputChar[]} &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x306E;&#x5165;&#x529B;&#x6587;&#x5B57;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;
	 */
	phrases(num) {
		const ret = [];
		for (let char of this.chars()) {
			if (char.isPhraseNum(num)) ret.push(char);
		}
		return ret;
	}
	/**
	 * &#x9078;&#x629E;&#x4E2D;&#x306E;&#x6587;&#x7BC0;&#x306E;&#x5165;&#x529B;&#x6587;&#x5B57;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {InputChar[]} &#x9078;&#x629E;&#x4E2D;&#x306E;&#x5165;&#x529B;&#x6587;&#x5B57;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3002;&#x9078;&#x629E;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;&#x7A7A;&#x306E;&#x914D;&#x5217;
	 */
	selectPhrases() {
		const ret = [];
		for (let char of this.chars()) {
			if (char.isSelect()) ret.push(char);
		}
		return ret;
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;(&#x6587;&#x5B57;&#x5165;&#x529B;&#x4E2D;)&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isDisplay() {
		return this.elem().style.display === &apos;block&apos;;
	}

	// --Status

	/**
	 * &#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x7FA4;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x305F;&#x5F8C;&#x306B;&#x3001;&#x5404;&#x5165;&#x529B;&#x6587;&#x5B57;&#x306B;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;&#x3075;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	setPhraseNum() {
		let cnt = 0;
		for (let view of this.convertContainer().views()) {
			const num = view.phraseNum();
			const len = view.getSelect().length(); // &#x9078;&#x629E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x3072;&#x3089;&#x304C;&#x306A;&#x3092;&#x4F7F;&#x3063;&#x3066;&#x8A08;&#x7B97;
			for (let i = 0; i &lt; len; i++,cnt++) {
				this.chars(cnt).phraseNum(num);
			}
		}
		return this;
	}
	/**
	 * &#x9078;&#x629E;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x6587;&#x7BC0;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x9078;&#x629E;&#x6587;&#x7BC0;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3002;&#x9078;&#x629E;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;-1
	 */
	selectIndex() {
		for (let char of this.chars()) {
			if (char.isSelect()) return char.phraseNum();
		}
		return -1;
	}

	// --Style

	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5E45;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;&#x3002;&#x6587;&#x7AE0;&#x5185;&#x306E;Row&#x3068;&#x7570;&#x306A;&#x308A;&#x56DE;&#x8EE2;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3044;&#x305F;&#x3081;&#x3001;css&#x4E0A;&#x306E;&#x5E45;&#x3068;&#x4E00;&#x81F4;&#x3059;&#x308B;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x5E45;
	 */
	width() {
		return super.super.width();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x9AD8;&#x3055;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;&#x3002;&#x6587;&#x7AE0;&#x5185;&#x306E;Row&#x3068;&#x7570;&#x306A;&#x308A;&#x56DE;&#x8EE2;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3044;&#x305F;&#x3081;&#x3001;css&#x4E0A;&#x306E;&#x9AD8;&#x3055;&#x3068;&#x4E00;&#x81F4;&#x3059;&#x308B;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x9AD8;&#x3055;
	 */
	height() {
		return super.super.height();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x9AD8;&#x3055;&#x3084;&#x5E45;&#x3092;&#x5185;&#x90E8;&#x306E;&#x5404;&#x5165;&#x529B;&#x6587;&#x5B57;&#x306B;&#x5408;&#x308F;&#x305B;&#x3066;&#x8ABF;&#x6574;&#x3059;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	resize() {
		const style = this.elem().style;
		style.width = this.newWidth() + &apos;px&apos;;
		style.height = this.newHeight() + &apos;px&apos;;
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x8868;&#x793A;&#x4F4D;&#x7F6E;&#x3092;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306B;&#x5408;&#x308F;&#x305B;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	move() {
		this.elem().style.left = this.cursorX() + &apos;px&apos;;
		this.elem().style.top = this.cursorY() + &apos;px&apos;;
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x8868;&#x793A;&#x3059;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	show() {
		this.elem().style.display = &apos;block&apos;;
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x975E;&#x8868;&#x793A;&#x306B;&#x3059;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	hide() {
		this.elem().style.display = &apos;none&apos;;
		this.removeKeydownEventListener();
		return this;
	}
	/**
	 * &#x9078;&#x629E;&#x6587;&#x7BC0;&#x3092;&#x6B21;&#x306E;&#x6587;&#x7BC0;&#x306B;&#x5909;&#x66F4;&#x3059;&#x308B;&#x3002;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x7BC0;&#x304B;&#x3089;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308C;&#x3070;&#x3001;&#x6700;&#x521D;&#x306E;&#x6587;&#x7BC0;&#x304C;&#x9078;&#x629E;&#x3055;&#x308C;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	selectNext() {
		return this.select(this.selectIndex() + 1);
	}
	/**
	 * &#x9078;&#x629E;&#x6587;&#x7BC0;&#x3092;&#x524D;&#x306E;&#x6587;&#x7BC0;&#x306B;&#x5909;&#x66F4;&#x3059;&#x308B;&#x3002;&#x6700;&#x521D;&#x306E;&#x6587;&#x7BC0;&#x304B;&#x3089;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308C;&#x3070;&#x3001;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x7BC0;&#x304C;&#x9078;&#x629E;&#x3055;&#x308C;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	selectPrev() {
		return this.select(this.selectIndex() - 1);
	}
	/**
	 * &#x6587;&#x7BC0;&#x756A;&#x53F7;&#x304C;index&#x306E;&#x6587;&#x5B57;&#x3092;&#x9078;&#x629E;&#x3059;&#x308B;&#x3002;&#x5F15;&#x6570;&#x304C;&#x8CA0;&#x306B;&#x306A;&#x308C;&#x3070;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x7BC0;&#x3092;&#x3001;&#x6700;&#x5927;&#x306E;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;&#x8D8A;&#x3048;&#x308C;&#x3070;&#x6700;&#x521D;&#x306E;&#x6587;&#x7BC0;&#x3092;&#x9078;&#x629E;&#x3059;&#x308B;
	 * @param {number} index &#x9078;&#x629E;&#x3059;&#x308B;&#x6587;&#x7BC0;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3002;&#x8CA0;&#x306E;&#x6570;&#x306A;&#x3089;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x7BC0;&#x3001;&#x7BC4;&#x56F2;&#x3088;&#x308A;&#x5927;&#x304D;&#x306A;&#x6570;&#x306A;&#x3089;&#x6700;&#x521D;&#x306E;&#x6587;&#x7BC0;&#x304C;&#x9078;&#x629E;&#x3055;&#x308C;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	select(index) {
		const maxIndex = this.lastChar().phraseNum();
		if (index &lt; 0) index = maxIndex;
		if (index &gt; maxIndex) index = 0;

		for (let char of this.chars()) {
			if (char.phraseNum() === index)
				char.select();
			else
				char.removeSelect();
		}
		this.convertContainer().views(index).active();
		return this;
	}

	// --DOM&#x64CD;&#x4F5C;

	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x7A7A;&#x306B;&#x3057;&#x3066;&#x3001;&#x6587;&#x5B57;&#x5165;&#x529B;&#x3092;&#x7D42;&#x4E86;&#x3059;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	empty() {
		super.empty();
		if (this.convertContainer().isActive()) {
			this.convertContainer().empty().hide();
		}
		return this;
	}
	/**
	 * keycode&#x3092;&#x8FFD;&#x52A0;&#x3057;&#x305F;&#x5834;&#x5408;&#x306E;&#x65B0;&#x305F;&#x306A;&#x6587;&#x5B57;&#x5217;&#x3067;&#x5165;&#x529B;&#x6587;&#x5B57;&#x3092;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;
	 * @param {number} keycode &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x30AD;&#x30FC;&#x306E;&#x30AD;&#x30FC;&#x30B3;&#x30FC;&#x30C9;
	 * @param {boolean} bShift &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	increace(keycode,bShift) {
		const newInputStr = this.newString(keycode,bShift);

		if (newInputStr === undefined || newInputStr.indexOf(&apos;undefined&apos;) !== -1) {
			// &#x672A;&#x5B9A;&#x7FA9;&#x6587;&#x5B57;(alt,ctrl,tab&#x306A;&#x3069;)&#x306F;return
			return this;
		}
		this.update(newInputStr);
		this.resize();
		return this;
	}
	/**
	 * buffer&#x306E;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;&#x3002;&#x5185;&#x90E8;&#x306B;&#x6587;&#x5B57;&#x304C;&#x306A;&#x304F;&#x306A;&#x308C;&#x3070;&#x5165;&#x529B;&#x3092;&#x7D42;&#x4E86;&#x3059;&#x308B;
	 * @return {InputChar} &#x524A;&#x9664;&#x3057;&#x305F;&#x5165;&#x529B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	decreace() {
		if (!this.hasChar) return this;
		const ret = this.lastChar().remove();
		this.resize();
		if (!this.hasChar()) {
			this.hide();
			this.container().addKeydownEventListener();
		}
		return ret;
	}
	/**
	 * &#x5185;&#x90E8;&#x306E;&#x5165;&#x529B;&#x6587;&#x5B57;&#x3092;str&#x3067;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;
	 * @param {string} str &#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;&#x6587;&#x5B57;&#x5217;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	update(str) {
		this.empty();
		for (let char of str) {
			this.append(new InputChar(this.cursorChar().createData(char)));
		}
		this.show();
		return this;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306B;&#x6587;&#x5B57;&#x3092;&#x633F;&#x5165;&#x3057;&#x3001;&#x5F8C;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3063;&#x3066;&#x5165;&#x529B;&#x72B6;&#x614B;&#x3092;&#x7D42;&#x4E86;&#x3059;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	print() {
		this.cursor().insert(this.text());
		this.empty().hide();
		this.container().addKeydownEventListener();
		this.container().changeDisplay();
		return this;
	}
	/**
	 * &#x5165;&#x529B;&#x6587;&#x5B57;&#x3092;&#x3059;&#x3079;&#x3066;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	toKatakanaAll() {
		this.update(this.getKatakana());
		return this;
	}
	/**
	 * &#x5165;&#x529B;&#x6587;&#x5B57;&#x3059;&#x3079;&#x3066;&#x3092;&#x6F22;&#x5B57;&#x5909;&#x63DB;&#x3059;&#x308B;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/KanjiProxy.html
	 */
	convert() {
		this.convertContainer().convert(this.text());
		return this;
	}
	/**
	 * &#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x304C;num&#x3067;&#x3042;&#x308B;&#x6587;&#x7BC0;&#x306E;&#x5165;&#x529B;&#x6587;&#x5B57;&#x3092;str&#x3067;&#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;
	 * @param {number} num &#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;&#x6587;&#x7BC0;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @param {string} str &#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;&#x6587;&#x5B57;&#x5217;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	insertPhrase(num,str) {
		const phrases = this.phrases(num);
		if (phrases.length === 0) return this; // &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x306E;&#x6587;&#x5B57;&#x304C;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x304B;&#x3063;&#x305F;
		// &#x65B0;&#x3057;&#x3044;InputChar&#x3092;&#x3082;&#x3068;&#x3082;&#x3068;&#x3042;&#x3063;&#x305F;&#x6587;&#x5B57;&#x306E;&#x524D;&#x306B;&#x633F;&#x5165;&#x3057;&#x3066;&#x3044;&#x304F;
		for (let c of str) {
			const newChar = new InputChar(this.cursorChar().createData(c),num);
			phrases[0].before(newChar);
			if (phrases[0].isSelect()) newChar.select(); // &#x9078;&#x629E;&#x4E2D;&#x306E;&#x6587;&#x7BC0;&#x306A;&#x3089;&#x5165;&#x66FF;&#x3048;&#x6587;&#x5B57;&#x3082;&#x9078;&#x629E;
		}
		// &#x53E4;&#x3044;&#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;
		for (let old of phrases) {
			old.remove();
		}
		this.resize();
		return this;
	}
	/**
	 * &#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x304C;num&#x3067;&#x3042;&#x308B;&#x6587;&#x7BC0;&#x306E;&#x5F8C;&#x308D;&#x306B;str&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;&#x3002;&#x8FFD;&#x52A0;&#x3057;&#x305F;&#x6587;&#x5B57;&#x306E;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x306F;&#x8CA0;&#x306E;&#x5024;&#x306B;&#x306A;&#x308B;
	 * @param {number} num &#x633F;&#x5165;&#x4F4D;&#x7F6E;&#x306E;&#x6307;&#x5B9A;
	 * @param {string} str &#x633F;&#x5165;&#x3059;&#x308B;&#x6587;&#x5B57;&#x5217;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	insertPhraseAfter(num,str) {
		const phrases = this.phrases(num);
		if (phrases.length === 0) return this; // &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x306E;&#x6587;&#x5B57;&#x304C;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x304B;&#x3063;&#x305F;
		const nextChar = phrases[phrases.length -1].next(); // &#x633F;&#x5165;&#x7528;&#x306E;&#x6587;&#x5B57;&#x3002;&#x6700;&#x5F8C;&#x306B;&#x306F;EOL&#x304C;&#x3042;&#x308B;&#x306E;&#x3067;&#x3001;&#x5FC5;&#x305A;&#x5B58;&#x5728;&#x3059;&#x308B;
		for (let c of str) {
			nextChar.before(new InputChar(this.cursorChar().createData(c),-num));
		}
		this.resize();
		return this;
	}

	// --&#x5916;&#x304B;&#x3089;&#x306E;&#x60C5;&#x5831;&#x53D6;&#x5F97;

	/**
	 * @private
	 * &#x73FE;&#x5728;&#x306E;&#x6587;&#x5B57;&#x5217;&#x306B;keycode&#x3092;&#x52A0;&#x3048;&#x3066;&#x4F5C;&#x3089;&#x308C;&#x308B;&#x6587;&#x5B57;&#x5217;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} keycode &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x30AD;&#x30FC;&#x306E;&#x30AD;&#x30FC;&#x30B3;&#x30FC;&#x30C9;
	 * @param {boolean} bShift &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 * @return {string} keycode&#x3092;&#x8FFD;&#x52A0;&#x3057;&#x3066;&#x4F5C;&#x3089;&#x308C;&#x305F;&#x6587;&#x5B57;&#x5217;
	 */
	newString(keycode,bShift) {
		const inputStr = this.text(); //&#x3082;&#x3068;&#x3082;&#x3068;&#x306E;&#x6587;&#x5B57;&#x5217;
		if (bShift) {
			return inputStr + key_table.shift_key[keycode];
		} else {
			return key_table.getString(inputStr,keycode); //keycode&#x3092;&#x52A0;&#x3048;&#x305F;&#x65B0;&#x3057;&#x3044;&#x6587;&#x5B57;&#x5217;
		}
	}
	/**
	 * @private
	 * &#x73FE;&#x5728;&#x306E;&#x5165;&#x529B;&#x6587;&#x5B57;&#x3092;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x5909;&#x63DB;&#x3057;&#x305F;&#x5834;&#x5408;&#x306E;&#x6587;&#x5B57;&#x5217;&#x3002;&#x5909;&#x63DB;&#x3067;&#x304D;&#x306A;&#x3044;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308C;&#x3070;&#x5909;&#x63DB;&#x305B;&#x305A;&#x306B;&#x5143;&#x306E;&#x6587;&#x5B57;&#x3092;&#x305D;&#x306E;&#x307E;&#x307E;&#x9023;&#x7D50;&#x3059;&#x308B;
	 * @return {string} &#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x305F;&#x6587;&#x5B57;&#x5217;
	 */
	getKatakana() {
		const str = this.text();
		let rtnKatakana = &apos;&apos;;
		for (let char of str) {
			const cKatakana = key_table.katakana[char];
			if (cKatakana) {
				rtnKatakana += cKatakana;
			} else {
				// &#x5909;&#x63DB;&#x3067;&#x304D;&#x306A;&#x3051;&#x308C;&#x3070;&#x5143;&#x306E;&#x6587;&#x5B57;&#x3092;&#x305D;&#x306E;&#x307E;&#x307E;&#x9023;&#x7D50;
				rtnKatakana += char;
			}
		}
		return rtnKatakana;
	}
	/**
	 * @private
	 * &#x5185;&#x90E8;&#x306E;&#x5165;&#x529B;&#x6587;&#x5B57;&#x3092;&#x5143;&#x306B;&#x3001;&#x9069;&#x5207;&#x306A;&#x5E45;&#x3092;&#x8A08;&#x7B97;&#x3059;&#x308B;
	 * @return {number} &#x8A08;&#x7B97;&#x3055;&#x308C;&#x305F;&#x5E45;&#x306E;&#x30D4;&#x30AF;&#x30BB;&#x30EB;&#x6570;
	 */
	newWidth() {
		const cache = {};
		let width = 0;
		for (let char of this.chars()) {
			const size = char.fontSize();
			if (cache[size]) {
				width = Math.max(width,cache[size]);
			} else {
				cache[size] = char.width();
				width = Math.max(width,char.width());
			}
		}
		return width + 5; // 5px&#x4F59;&#x88D5;&#x3092;&#x3082;&#x305F;&#x305B;&#x308B;
	}
	/**
	 * @private
	 * &#x5185;&#x90E8;&#x306E;&#x5165;&#x529B;&#x6587;&#x5B57;&#x3092;&#x5143;&#x306B;&#x3001;&#x9069;&#x5207;&#x306A;&#x9AD8;&#x3055;&#x3092;&#x8A08;&#x7B97;&#x3059;&#x308B;
	 * @return {number} &#x8A08;&#x7B97;&#x3055;&#x308C;&#x305F;&#x9AD8;&#x3055;&#x306E;&#x30D4;&#x30AF;&#x30BB;&#x30EB;&#x6570;
	 */
	newHeight() {
		const cache = {};
		let height = 0;
		for (let char of this.chars()) {
			const size = char.fontSize();
			if (cache[size]) {
				height += cache[size];
			} else {
				cache[size] = char.height();
				height += cache[size];
			}
		}
		return height + 5; // 5px&#x4F59;&#x88D5;&#x3092;&#x3082;&#x305F;&#x305B;&#x308B;
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306E;X&#x5EA7;&#x6A19;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306E;X&#x5EA7;&#x6A19;
	 */
	cursorX() {
		return this.cursorChar().x();
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306E;Y&#x5EA7;&#x6A19;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306E;Y&#x5EA7;&#x6A19;
	 */
	cursorY() {
		return this.cursorChar().y();
	}

	// --&#x30A4;&#x30D9;&#x30F3;&#x30C8;

	/**
	 * keyevent&#x304C;SentenceContainer&#x304B;&#x3089;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x5224;&#x5B9A;&#x3057;&#x3066;&#x524D;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3046;(&#x30AD;&#x30FC;&#x30B3;&#x30FC;&#x30C9;&#x3092;increace()&#x3057;&#x3066;&#x5165;&#x529B;&#x6587;&#x5B57;&#x304C;&#x3067;&#x304D;&#x308C;&#x3070;&#x5165;&#x529B;&#x30E2;&#x30FC;&#x30C9;&#x306B;&#x79FB;&#x884C;&#x3059;&#x308B;)
	 * @param {number} keycode &#x62BC;&#x4E0B;&#x3055;&#x308C;&#x305F;&#x30AD;&#x30FC;&#x306E;&#x30AD;&#x30FC;&#x30B3;&#x30FC;&#x30C9;
	 * @param {boolean} bShift &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	transfer(keycode,bShift) {
		this.increace(keycode,bShift);
		if (this.hasChar()) {
			this.addKeydownEventListener();
			this.move();
		}
		return this;
	}
	/**
	 * &#x5165;&#x529B;&#x6642;&#x306E;keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30EA;&#x30B9;&#x30CA;&#x30FC;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;
	 * @return {InputBuffer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addKeydownEventListener() {
		this.container().removeKeydownEventListener();
		this.convertContainer().removeKeydownEventListener();
		super.addKeydownEventListener();
		return this;
	}
	/**
	 * &#x5165;&#x529B;&#x6642;&#x306E;keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;
	 * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @param {number} keycode &#x62BC;&#x4E0B;&#x3055;&#x308C;&#x305F;&#x30AD;&#x30FC;&#x306E;&#x30AD;&#x30FC;&#x30B3;&#x30FC;&#x30C9;
	 */
	runKeydown(e,keycode) {
		switch (keycode) {
			case 8:
				// backspace
				this.decreace();
				break;
			case 13:
				// enter
				this.print();
				break;
			case 32:
				// space
				this.convert();
				break;
			case 118:
				// F7
				this.toKatakanaAll();
				break;
			default:
				this.increace(keycode,e.shiftKey);
				break;
		}
	}
}

/**
 * &#x30E6;&#x30FC;&#x30B6;&#x30FC;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x60C5;&#x5831;&#x306E;&#x3072;&#x3068;&#x3064;&#x3092;&#x6271;&#x3046;&#x30AF;&#x30E9;&#x30B9;
 */
export class File extends AbstractHierarchy {
	/**
	 * @param {number} id &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;ID
	 * @param {string} filename &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;
	 */
	constructor(id,filename) {
		super(Util.createFileElement(id,filename));
		this._link = this.elem().getElementsByTagName(&apos;a&apos;)[0];
		this._id = id;
		this._name = filename;
		this._nextFile = null;
		this._prevFile = null;
		this.addClickEventListener();
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x53C2;&#x7167;&#x3092;&#x63A2;&#x3057;&#x3066;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	fileList() {
		for (let parentDir = this.parent(); parentDir ;parentDir = parentDir.parent() ) {
			if (parentDir.isRoot()) return parentDir;
		}
		return null;
	}

	/**
	 * &#x5185;&#x90E8;&#x306E;a&#x30BF;&#x30B0;&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {Element} &#x81EA;&#x8EAB;&#x306E;&#x6301;&#x3064;a&#x30BF;&#x30B0;&#x306E;DOM&#x8981;&#x7D20;
	 */
	link() {
		return this._link;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306B;&#x4F4D;&#x7F6E;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3001;&#x307E;&#x305F;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x53D6;&#x5F97;&#x3059;&#x308B;&#x3002;
	 *     &#x901A;&#x5E38;&#x306E;next()&#x306F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x3082;&#x542B;&#x3081;&#x540C;&#x968E;&#x5C64;&#x306E;&#x307F;&#x3092;&#x3064;&#x306A;&#x3050;&#x3002;nextFile()&#x306F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x307F;&#x3092;&#x3001;&#x305D;&#x308C;&#x3082;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x6A2A;&#x65AD;&#x7684;&#x306B;&#x3001;&#x3055;&#x3089;&#x306B;&#x968E;&#x5C64;&#x3082;&#x307E;&#x305F;&#x3044;&#x3067;&#x3064;&#x306A;&#x3050;
	 * @param {File} [opt_file] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {File} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	nextFile(opt_file) {
		if (opt_file === undefined) {
			return this._nextFile;
		} else {
			this._nextFile = opt_file;
			return this;
		}
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306B;&#x4F4D;&#x7F6E;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3001;&#x307E;&#x305F;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x53D6;&#x5F97;&#x3059;&#x308B;&#x3002;
	 *     &#x901A;&#x5E38;&#x306E;&#x3084;prev()&#x306F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x3082;&#x542B;&#x3081;&#x540C;&#x968E;&#x5C64;&#x306E;&#x307F;&#x3092;&#x3064;&#x306A;&#x3050;&#x3002;prevFile()&#x306F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x307F;&#x3092;&#x3001;&#x305D;&#x308C;&#x3082;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x6A2A;&#x65AD;&#x7684;&#x306B;&#x3001;&#x3055;&#x3089;&#x306B;&#x968E;&#x5C64;&#x3082;&#x307E;&#x305F;&#x3044;&#x3067;&#x3064;&#x306A;&#x3050;
	 * @param {File} [opt_file] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {File} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	prevFile(opt_file) {
		if (opt_file === undefined) {
			return this._prevFile;
		} else {
			this._prevFile = opt_file;
			return this;
		}
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x81EA;&#x8EAB;&#x304C;FileList&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5E38;&#x306B;false
	 */
	isRoot() {
		return false;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5E38;&#x306B;false
	 */
	isDirectory() {
		return false;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5E38;&#x306B;true
	 */
	isFile() {
		return true;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x6700;&#x521D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;(&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x5358;&#x4F4D;&#x3067;&#x306F;&#x306A;&#x304F;&#x3001;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x5168;&#x4F53;&#x306E;&#x4E2D;&#x3067;&#x6700;&#x521D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;)
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x4E2D;&#x3067;&#x6700;&#x521D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isFirstFile() {
		return this.prevFile() === null;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x6700;&#x5F8C;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;(&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x5358;&#x4F4D;&#x3067;&#x306F;&#x306A;&#x304F;&#x3001;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x5168;&#x4F53;&#x306E;&#x4E2D;&#x3067;&#x6700;&#x5F8C;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;)
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x4E2D;&#x3067;&#x6700;&#x5F8C;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isLastFile() {
		return this.nextFile() === null;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x8868;&#x3059;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306B;&#x8AAD;&#x307F;&#x8FBC;&#x307E;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x73FE;&#x5728;&#x8AAD;&#x307F;&#x8FBC;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isOpen() {
		return this.fileList().sentenceContainer().fileId() === this.id();
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;&#x8868;&#x3059;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306B;&#x8AAD;&#x307F;&#x8FBC;&#x307E;&#x308C;&#x3066;&#x3044;&#x306A;&#x3044;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x73FE;&#x5728;&#x8AAD;&#x307F;&#x8FBC;&#x307E;&#x308C;&#x3066;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isClose() {
		return this.fileList().sentenceContainer().fileId() !== this.id();
	}

	// --Status
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;ID&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;ID
	 */
	id() {
		return this._id;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x3092;&#x8FD4;&#x3059;
	 * @return {string} &#x81EA;&#x8EAB;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;
	 */
	name() {
		return this._name;
	}

	// --DOM&#x64CD;&#x4F5C;

	/**
	 * &#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306B;&#x81EA;&#x8EAB;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x975E;&#x540C;&#x671F;&#x3067;&#x8AAD;&#x307F;&#x8FBC;&#x3080;
	 * @return {File} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	open() {
		const sentenceContainer = this.fileList().sentenceContainer();

		const data = {};
		data.user_id = sentenceContainer.userId();
		data.file_id = this.id();
		sentenceContainer.userAlert(&apos;&#x8AAD;&#x8FBC;&#x4E2D;&apos;);
		Util.post(&apos;/tategaki/ReadJsonFile&apos;,data,function (json) {
			sentenceContainer.init(json).userAlert(&apos;&#x8AAD;&#x307F;&#x8FBC;&#x307F;&#x5B8C;&#x4E86;&apos;);
		}.bind(this));
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x8981;&#x7D20;&#x53CA;&#x3073;&#x81EA;&#x8EAB;&#x3078;&#x306E;&#x53C2;&#x7167;&#x3092;&#x524A;&#x9664;&#x3057;&#x3001;&#x81EA;&#x8EAB;&#x304C;&#x8868;&#x3059;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @return {File} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/DeleteFile.html
	 */
	delete() {
		Util.post(&apos;/tategaki/DeleteFile&apos;,{
			user_id: this.fileList().sentenceContainer().userId(),
			file_id: this.id()
		},function (json) {
			if (!result) { console.log(&apos;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x524A;&#x9664;&#x30A8;&#x30E9;&#x30FC;&#x3067;&#x3059;(&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x756A;&#x53F7;&#xFF1A;&apos;+ this.id() + &apos;)&apos;); }
					// &#x73FE;&#x5728;&#x958B;&#x3044;&#x3066;&#x3044;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x524A;&#x9664;&#x3057;&#x305F;&#x306A;&#x3089;&#x3001;&#x524D;&#x5F8C;&#x3069;&#x3061;&#x3089;&#x304B;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x958B;&#x304F;
					// &#x540C;&#x3058;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306B;&#x4ED6;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x65B0;&#x3057;&#x3044;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x958B;&#x304F;
					// &#x6700;&#x5F8C;&#x306B;&#x3001;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x3092;&#x4F5C;&#x308A;&#x76F4;&#x3059;
					if (this.sentenceContainer().fileList().currentFile() === this) {
						const nextFile = this.next() || this.prev();
						if (nextFile) {
							nextFile.open();
							this.sentenceContainer().fileList().read();
							return;
						}
						if (!nextFile) {
							this.sentenceContainer().newFile();
							this.sentenceContainer().fileList().read();
							return;
						}
					}
					this.sentenceContainer().fileList().read();
					}.bind(this));
			return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;newParentDir&#x306E;&#x4E2D;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x3001;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x3092;&#x4F5C;&#x308A;&#x76F4;&#x3059;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @param {Directory} newParentDir &#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x3068;&#x306A;&#x308B;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {File} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/MoveFile.html
	 */
	move(newParentDir) {
		const fileList = this.fileList();
		Util.post(&quot;/tategaki/MoveFile&quot;,{
			user_id: fileList.sentenceContainer().userId(),
			file_id: this.id(),
			directory_id: newParentDir.id()
		},function (data) {
			fileList.read();
		});
		return this;
	}

	// --&#x30A4;&#x30D9;&#x30F3;&#x30C8;

	// li&#x30BF;&#x30B0;&#x306E;&#x8981;&#x7D20;&#x3067;&#x306F;&#x306A;&#x304F;a&#x30BF;&#x30B0;&#x8981;&#x7D20;&#x306B;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x305F;&#x3081;&#x30AA;&#x30FC;&#x30D0;&#x30FC;&#x30E9;&#x30A4;&#x30C9;
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x30EA;&#x30F3;&#x30AF;&#x306B;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;
	 * @return {File} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addClickEventListener() {
		this._clickArg = this.onClick.bind(this);
		this.link().addEventListener(&apos;click&apos;,this._clickArg);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x30EA;&#x30F3;&#x30AF;&#x3078;&#x306E;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x9664;&#x53BB;&#x3059;&#x308B;
	 * @return {File} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeClickEventListener() {
		if (!this._clickArg) return this;
		this.link().removeEventListener(&apos;click&apos;,this._clickArg);
		this._clickArg = null;
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x30EA;&#x30F3;&#x30AF;&#x3078;&#x306E;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5185;&#x5BB9;(&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3059;&#x308B;&#x3068;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x8AAD;&#x307F;&#x8FBC;&#x307E;&#x308C;&#x308B;)
	 * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	runClick(e) {
		this.open();
		$(&apos;#file_list_modal&apos;).modal(&apos;hide&apos;);
	}
}
/**
 * &#x30E6;&#x30FC;&#x30B6;&#x30FC;&#x306E;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x60C5;&#x5831;&#x306E;&#x3072;&#x3068;&#x3064;&#x3092;&#x6271;&#x3046;&#x30AF;&#x30E9;&#x30B9;
 */
export class Directory extends AbstractHierarchy {
	/**
	 * @param {number} dirId &#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;ID
	 * @param {object} data &#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x60C5;&#x5831;&#x3092;&#x6301;&#x3064;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * &lt;pre&gt;
	 * &lt;code&gt;
	 *  // &#x30C7;&#x30FC;&#x30BF;&#x306E;&#x5185;&#x5BB9;&#x4F8B;
	 * {
	 *		&quot;directoryname&quot;: &quot;dirname&quot;,
	 *		&quot;4&quot;:&quot;indirfile&quot;,
	 *		&quot;9&quot;:&quot;file&quot;,
	 *		&quot;12&quot;: {
	 *			&quot;directoryname&quot;: &quot;seconddir&quot;,
	 *			&quot;17&quot;: &quot;file&quot;
	 *		}
	 *	}
	 *	&lt;/code&gt;
	 *	&lt;/pre&gt;
	 */
	constructor(dirId,data) {
		/*
		 * data&#x306E;&#x4E2D;&#x8EAB;&#x4F8B;(root&#x304B;&#x3089;&#x898B;&#x3066;)
		 * data = {
		 * 	&quot;directoryname&quot;: &quot;root&quot;,
		 * 	&quot;1&quot;:&quot;sample&quot;,
		 * 	&quot;8&quot;:&quot;file&quot;,
		 * 	&quot;6&quot;: {
		 * 		&quot;directoryname&quot;: &quot;dirname&quot;,
		 * 		&quot;4&quot;:&quot;indirfile&quot;,
		 * 		&quot;9&quot;:&quot;file&quot;,
		 * 		&quot;12&quot;: {
		 * 			&quot;directoryname&quot;: &quot;seconddir&quot;,
		 * 			&quot;17&quot;: &quot;file&quot;
		 * 		}
		 * 	}
		 * }
		 * fileId:filename
		 */
		super(Util.createDirectoryElement(dirId,data));
		this._link = this.elem().getElementsByTagName(&apos;a&apos;)[0];
		this._innerList = this.elem().getElementsByTagName(&apos;ul&apos;)[0];

		this._id = parseInt(dirId);
		this._name = data[&apos;directoryname&apos;];
		for (let id in data) {
			if (id === &apos;directoryname&apos;) continue;
			if (typeof data[id] === &apos;string&apos;) {
				this.append(new File(id,data[id]));
			} else {
				this.append(new Directory(id,data[id]));
			}
		}
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x5185;&#x90E8;&#x306E;a&#x30BF;&#x30B0;&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {Element} &#x81EA;&#x8EAB;&#x306E;&#x6301;&#x3064;a&#x30BF;&#x30B0;&#x306E;DOM&#x8981;&#x7D20;
	 */
	link() {
		return this._link;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x306E;&#x8981;&#x7D20;&#x306E;&#x69CB;&#x7BC9;&#x5148;&#x3067;&#x3042;&#x308B;DOM&#x8981;&#x7D20;(&#x30B3;&#x30E9;&#x30D7;&#x30B9;&#x306E;&#x5185;&#x5BB9;&#x306E;&#x683C;&#x7D0D;&#x5148;)&#x3092;&#x8FD4;&#x3059;
	 * @return {Element} &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x30EA;&#x30B9;&#x30C8;&#x306E;DOM&#x8981;&#x7D20;
	 */
	innerList() {
		return this._innerList;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x53C2;&#x7167;&#x3092;&#x63A2;&#x3057;&#x3066;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	fileList() {
		for (let parentDir = this.parent(); parentDir ;parentDir = parentDir.parent() ) {
			if (parentDir.isRoot()) return parentDir;
		}
		return null;
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x81EA;&#x8EAB;&#x304C;FileList&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5E38;&#x306B;false
	 */
	isRoot() {
		return false;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;Directory&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5E38;&#x306B;true
	 */
	isDirectory() {
		return true;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;File&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5E38;&#x306B;false
	 */
	isFile() {
		return false;
	}

	// --&#x53C2;&#x7167;&#x64CD;&#x4F5C;

	// --Status

	/**
	 * &#x81EA;&#x8EAB;&#x306E;ID&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;ID
	 */
	id() {
		return this._id;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x540D;&#x3092;&#x8FD4;&#x3059;
	 * @return {string} &#x81EA;&#x8EAB;&#x306E;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x540D;
	 */
	name() {
		return this._name;
	}

	// --DOM&#x64CD;&#x4F5C;

	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x306E;&#x6700;&#x5F8C;&#x306B;file&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;
	 * @param {File Directory} file &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Directory} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	append(file) {
		// DOM
		this.appendElem(file);

		// &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
		// &#x6700;&#x521D;&#x306E;&#x8981;&#x7D20;&#x3068;&#x6700;&#x5F8C;&#x306E;&#x8981;&#x7D20;&#x306F;&#x3064;&#x306A;&#x3052;&#x308B;

		if (this.hasChild()) {
			this.lastChild().next(file);
			file.prev(this.lastChild());
		}
		file.parent(this);
		this.pushChild(file);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x5185;&#x90E8;&#x306E;&#x6700;&#x5F8C;&#x306B;file&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;
	 * @param {File Directory} file &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {Directory} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	appendElem(file) {
		this.innerList().appendChild(file.elem());
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @param {boolean} [opt_bl=false] &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x306B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x3042;&#x308B;&#x3068;&#x304D;&#x3001;&#x5F37;&#x5236;&#x7684;&#x306B;&#x4E2D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3054;&#x3068;&#x524A;&#x9664;&#x3059;&#x308B;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;
	 * @return {Directory} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/DeleteDirectory.html
	 */
	delete(opt_bl) {
		const bl = opt_bl || false; // &#x5F15;&#x6570;&#x7701;&#x7565;&#x306E;&#x5834;&#x5408;&#x3067;&#x3082;&#x3001;&#x660E;&#x78BA;&#x306B;false&#x3092;&#x5165;&#x308C;&#x308B;
		Util.post(&quot;/tategaki/DeleteDirectory&quot;,{
			directory_id: this.id(),
			option: bl
		},function (data) {
			this.fileList().read();
			if (data.result === &apos;within&apos;) {
				alert(&apos;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x304C;&#x7A7A;&#x3067;&#x306F;&#x306A;&#x3044;&#x306E;&#x3067;&#x524A;&#x9664;&#x3067;&#x304D;&#x307E;&#x305B;&#x3093;&#x3067;&#x3057;&#x305F;&#x3002;&apos;);
			}
		}.bind(this));
		return this;
	}
}
/**
 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3084;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x3092;&#x4E00;&#x89A7;&#x306B;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class FileList extends AbstractHierarchy {
	/**
	 * @param {SentenceContainer} sentenceContainer &#x81EA;&#x8EAB;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x5C55;&#x958B;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @param {object} [opt_data] &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3084;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x60C5;&#x5831;&#x3092;&#x6271;&#x3046;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3002;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;&#x306F;&#x3001;init()&#x306B;data&#x3092;&#x6E21;&#x3057;&#x3066;&#x53C2;&#x7167;&#x3084;DOM&#x306E;&#x69CB;&#x7BC9;&#x3092;&#x884C;&#x3046;
	 * &lt;pre&gt;
	 * &lt;code&gt;
	 *  // data&#x306E;&#x4E2D;&#x8EAB;&#x4F8B;
	 * {
	 * 	&quot;directoryname&quot;: &quot;root&quot;,
	 * 	&quot;1&quot;:&quot;sample&quot;,
	 * 	&quot;8&quot;:&quot;file&quot;,
	 * 	&quot;6&quot;: {
	 * 		&quot;directoryname&quot;: &quot;dirname&quot;,
	 * 		&quot;4&quot;:&quot;indirfile&quot;,
	 * 		&quot;9&quot;:&quot;file&quot;,
	 * 		&quot;12&quot;: {
	 * 			&quot;directoryname&quot;: &quot;seconddir&quot;,
	 * 			&quot;17&quot;: &quot;file&quot;
	 * 		}
	 * 	}
	 * }
	 * &lt;/code&gt;
	 * &lt;/pre&gt;
	 */
	constructor(sentenceContainer,opt_data) {
		super(document.getElementById(&apos;file_list&apos;));
		this._sentenceContainer = sentenceContainer;
		this._$modal = $(&apos;#file_list_modal&apos;);
		this._filterInputElem = document.getElementById(&apos;file_list_filter&apos;);
		this.addEventListenerOnInput();
		if (opt_data) {
			this.init(opt_data);
		} else {
			this.read();
		}
	}
	/**
	 * &#x53C2;&#x7167;&#x3084;DOM&#x306E;&#x69CB;&#x7BC9;&#x3092;&#x884C;&#x3046;
	 * @param {object} data &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3084;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x60C5;&#x5831;&#x3092;&#x6271;&#x3046;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3002;&#x8A73;&#x7D30;&#x306F;constructor&#x306E;&#x8AAC;&#x660E;&#x3078;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	init(data) {
		this.empty();
		for (let id in data) {
			if (id === &apos;directoryname&apos;) continue;
			if (typeof data[id] === &apos;string&apos;) {
				this.append(new File(id,data[id]));
			} else {
				this.append(new Directory(id,data[id]));
			}
		}
		this.chainFile();
		return this;
	}
	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x5C55;&#x958B;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	sentenceContainer() {
		return this._sentenceContainer;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x3046;&#x3061;&#x3001;&#x6700;&#x521D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {File} &#x6700;&#x521D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	firstFile() {
		return this.findNextFile(this);
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x3046;&#x3061;&#x3001;&#x6700;&#x5F8C;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @return {File} &#x6700;&#x5F8C;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	lastFile() {
		for (let file = this.firstFile(); file; file = file.nextFile()) {
			if (file.isLastFile()) return file;
		}
		return null;
	}
	/**
	 * &#x73FE;&#x5728;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306B;&#x5C55;&#x958B;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {File} &#x73FE;&#x5728;&#x958B;&#x304B;&#x308C;&#x3066;&#x3044;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	currentFile() {
		for (let file = this.firstFile(); file; file = file.nextFile()) {
			if (file.isOpen()) return file;
		}
		return null;
	}
	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x306E;jQuery&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x8FD4;&#x3059;
	 * @return {jQuery} &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x306E;jQuery&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	$modal() {
		return this._$modal;
	}
	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x4E0B;&#x90E8;&#x306B;&#x3042;&#x308B;&#x691C;&#x7D22;&#x30DC;&#x30C3;&#x30AF;&#x30B9;&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x8FD4;&#x3059;
	 * @return {Element} &#x691C;&#x7D22;&#x7528;Input&#x306E;DOM&#x8981;&#x7D20;
	 */
	filterInputElem() {
		return this._filterInputElem;
	}
	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x63A2;&#x7D22;&#x3057;&#x3066;&#x8FD4;&#x3059;&#x3002;&#x540C;&#x3058;&#x540D;&#x524D;&#x3092;&#x6301;&#x3064;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x8907;&#x6570;&#x898B;&#x3064;&#x304B;&#x308B;&#x5834;&#x5408;&#x3082;&#x3042;&#x308B;&#x306E;&#x3067;&#x3001;&#x7D50;&#x679C;&#x306F;&#x914D;&#x5217;&#x306B;&#x3057;&#x3066;&#x8FD4;&#x3059;
	 * @param {number string} idOrName &#x5BFE;&#x8C61;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;ID&#x3001;&#x3082;&#x3057;&#x304F;&#x306F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;
	 * @return {File[]} &#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;
	 */
	findFile(idOrName) {
		const ret = [];
		for (let file = this.firstFile(); file; file = file.nextFile()) {
			if (file.id() == idOrName || (typeof idOrName === &apos;string&apos; &amp;&amp; new RegExp(&apos;^&apos;+ idOrName +&apos;$&apos;,&apos;i&apos;).test(file.name()))) {
				ret.push(file);
			}
		}
		return ret;
	}
	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x63A2;&#x7D22;&#x3057;&#x3066;&#x8FD4;&#x3059;&#x3002;&#x540C;&#x3058;&#x540D;&#x524D;&#x3092;&#x6301;&#x3064;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x304C;&#x8907;&#x6570;&#x898B;&#x3064;&#x304B;&#x308B;&#x5834;&#x5408;&#x3082;&#x3042;&#x308B;&#x306E;&#x3067;&#x3001;&#x7D50;&#x679C;&#x306F;&#x914D;&#x5217;&#x306B;&#x3057;&#x3066;&#x8FD4;&#x3059;
	 * @param {number string} idOrName &#x5BFE;&#x8C61;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;ID&#x3001;&#x3082;&#x3057;&#x304F;&#x306F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x540D;
	 * @return {Directory[]} &#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;
	 */
	findDirectory(idOrName) {
		const ret = [];
		this.each(function (dir) {
			if (dir.isDirectory &amp;&amp; (dir.id() === idOrName || (typeof idOrName === &apos;string&apos; &amp;&amp; new RegExp(&apos;^&apos;+ idOrName +&apos;$&apos;,&apos;i&apos;).test(dir.name())))) {
				ret.push(dir);
			}
		});
		return ret;
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x81EA;&#x8EAB;&#x304C;FileList&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5E38;&#x306B;true
	 */
	isRoot() {
		return true;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;Directory&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5E38;&#x306B;false
	 */
	isFile() {
		return false;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x304C;File&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x5E38;&#x306B;false
	 */
	isDirectory() {
		return false;
	}
	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x304C;&#x958B;&#x3044;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x304C;&#x958B;&#x3044;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	isOpen() {
		return this.$modal().hasClass(&apos;in&apos;);
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x306B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasFile() {
		return this.firstFile() !== null;
	}

	// --&#x53C2;&#x7167;&#x64CD;&#x4F5C;

	/**
	 * &#x5185;&#x90E8;&#x306E;File&#x540C;&#x58EB;&#x3092;&#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x3067;&#x3064;&#x306A;&#x3050;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	chainFile() {
		let prev;
		this.each(function (file) {
			if (!file.isFile()) return;
			if (prev) prev.nextFile(file);
			file.prevFile(prev);
			prev = file;
		});
		return this;
	}
	/**
	 * &#x30EA;&#x30B9;&#x30C8;&#x3067;&#x4E0A;&#x304B;&#x3089;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3060;&#x3051;&#x3092;&#x6570;&#x3048;&#x305F;&#x5834;&#x5408;&#x306E;&#x3001;&#x5F15;&#x6570;&#x306E;&#x6B21;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x8FD4;&#x3059;
	 * @param {FileList File Directory} file &#x57FA;&#x6E96;&#x3068;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {File} &#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x5F15;&#x6570;&#x306E;&#x6B21;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	findNextFile(file) {
		// &#x30C1;&#x30A7;&#x30C3;&#x30AF;&#x3059;&#x308B;&#x9806;&#x756A;&#x306F;&#x3001;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306A;&#x3089;&#x305D;&#x306E;&#x6B21;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x30C1;&#x30A7;&#x30C3;&#x30AF;&#x3057;&#x3001;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306A;&#x3089;&#x4E0B;&#x306B;&#x6F5C;&#x3063;&#x3066;&#x6700;&#x521D;&#x306B;&#x898B;&#x3064;&#x3051;&#x305F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x30C1;&#x30A7;&#x30C3;&#x30AF;&#x3059;&#x308B;
		// -- &#x5168;&#x8981;&#x7D20;&#x3092;&#x9806;&#x306B;&#x63A2;&#x7D22;&#x3057;&#x3066;&#x3044;&#x304F;&#x305F;&#x3081;&#x306E;&#x9053;&#x306E;&#x308A; --
		// &#x5F15;&#x6570;&#x304C;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306A;&#x3089;&#x3002;&#x5F15;&#x6570;&#x306E;&#x6B21;&#x3092;&#x78BA;&#x8A8D;&#x3059;&#x308B;
		// &#x5F15;&#x6570;&#x304C;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306A;&#x3089;&#x3001;&#x305D;&#x306E;&#x6700;&#x521D;&#x306E;&#x5B50;&#x3092;&#x78BA;&#x8A8D;&#x3059;&#x308B;(FileList&#x306F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x6271;&#x3044;)
		// &#x7A7A;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;(firstChild()===null)&#x306A;&#x3089;&#x3001;&#x5F15;&#x6570;&#x306E;&#x6B21;&#x3092;&#x78BA;&#x8A8D;&#x3059;&#x308B;
		// &#x5F15;&#x6570;&#x306E;&#x6B21;&#x304C;&#x540C;&#x3058;&#x968E;&#x5C64;&#x306B;&#x306A;&#x3051;&#x308C;&#x3070;(&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x5185;&#x306E;&#x6700;&#x5F8C;&#x3068;&#x5224;&#x65AD;&#x3059;&#x308B;)&#x3001;&#x89AA;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x6B21;&#x3092;&#x78BA;&#x8A8D;&#x3059;&#x308B;(&#x305D;&#x308C;&#x3067;&#x3082;&#x306A;&#x3051;&#x308C;&#x3070;&#x3001;&#x3055;&#x3089;&#x306B;&#x4E0A;&#x306E;&#x89AA;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x6B21;&#x3001;&#x3068;&#x7E70;&#x308A;&#x8FD4;&#x3059;)
		// &#x5F15;&#x6570;&#x306E;&#x6B21;&#x306E;&#x8981;&#x7D20;&#x304C;&#x898B;&#x3064;&#x304B;&#x3089;&#x305A;&#x89AA;&#x3092;&#x305F;&#x3069;&#x3063;&#x3066;&#x3044;&#x304F;&#x904E;&#x7A0B;&#x3067;&#x30EB;&#x30FC;&#x30C8;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;(FileList)&#x306B;&#x8FBF;&#x308A;&#x7740;&#x3044;&#x305F;&#x5834;&#x5408;&#x306F;&#x3001;&#x63A2;&#x7D22;&#x304C;&#x6700;&#x5F8C;&#x306B;&#x9054;&#x3057;&#x305F;&#x3068;&#x3057;&#x3066;null&#x3092;&#x8FD4;&#x3059;
		// -- &#x3053;&#x3053;&#x307E;&#x3067;&#x3067;&#x78BA;&#x8A8D;&#x8981;&#x7D20;&#x3092;&#x53D6;&#x5F97; --
		// &#x53D6;&#x5F97;&#x3057;&#x305F;&#x78BA;&#x8A8D;&#x8981;&#x7D20;&#x304C;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306A;&#x3089;&#x3001;&#x3055;&#x3089;&#x306B;&#x6F5C;&#x3063;&#x3066;&#x63A2;&#x7D22;&#x3092;&#x6B21;&#x306B;&#x9032;&#x3081;&#x308B;&#x305F;&#x3081;&#x518D;&#x5E30;&#x3059;&#x308B;
		// &#x53D6;&#x5F97;&#x3057;&#x305F;&#x78BA;&#x8A8D;&#x8981;&#x7D20;&#x304C;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306A;&#x3089;&#x3001;&#x305D;&#x306E;&#x8981;&#x7D20;&#x304C;&#x5F15;&#x6570;&#x306E;&#x6B21;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306A;&#x306E;&#x3067;&#x8FD4;&#x3059;
		if (file.isEmpty() &amp;&amp; file.isRoot()) return null;
		let check;
		if (file.isFile()) {
			check = file.next();
		}
		if (file.isDirectory() || file.isRoot()) {
			check = file.firstChild() || file.next();
		}
		if (!check) {
			for (let parentDir = file.parent(); !(check = parentDir.next()); parentDir = parentDir.parent()) {
				if (parentDir.isRoot()) return null;
			}
		}
		if (check.isDirectory()) {
			return this.findNextFile(check);
		}
		if (check.isFile()) {
			return check;
		}
		return null;
	}
	/**
	 * &#x3059;&#x3079;&#x3066;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3068;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x3092;&#x9806;&#x306B;&#x5F15;&#x6570;&#x306B;&#x3057;&#x3066;&#x95A2;&#x6570;&#x3092;&#x5B9F;&#x884C;&#x3059;&#x308B;
	 * @param {function} func &#x5B9F;&#x884C;&#x3059;&#x308B;&#x95A2;&#x6570;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	each(func) {
		// file&#x306B;&#x5B50;&#x304C;&#x3042;&#x308C;&#x3070;&#x5B50;&#x306B;&#x9032;&#x307F;&#x3001;&#x306A;&#x3051;&#x308C;&#x3070;&#x6B21;&#x306B;&#x9032;&#x3080;(&#x5B50;&#x306E;&#x3042;&#x308B;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306A;&#x3089;&#x6700;&#x521D;&#x306E;&#x5B50;&#x3001;file&#x304B;&#x7A7A;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306A;&#x3089;&#x6B21;&#x306B;&#x9032;&#x3080;)
		// &#x6B21;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x89AA;&#x306E;&#x6B21;&#x306B;&#x9032;&#x3080;&#x3002;&#x305D;&#x308C;&#x3067;&#x3082;&#x306A;&#x3051;&#x308C;&#x3070;&#x3055;&#x3089;&#x306B;&#x89AA;&#x306E;&#x6B21;&#x3001;&#x3068;&#x7E70;&#x308A;&#x8FD4;&#x3059;
		// &#x305D;&#x306E;&#x904E;&#x7A0B;&#x3067;&#x30EB;&#x30FC;&#x30C8;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x304C;&#x898B;&#x3064;&#x304B;&#x308C;&#x3070;&#x63A2;&#x7D22;&#x7D42;&#x4E86;
		for (let file = this.firstChild(),temp = this;; temp = file, file = file.hasChild() ? file.firstChild() : file.next()) {
			if (!file) {
				for (let parentDir = temp.parent(); !(file = parentDir.next()); parentDir = parentDir.parent()) {
					if (parentDir.isRoot()) return this;
				}
			}
			func(file);
		}
		return this;
	}

	// --Style

	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x3092;&#x958B;&#x304F;&#x3002;&#x305D;&#x306E;&#x969B;&#x3001;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x691C;&#x7D22;&#x30DC;&#x30C3;&#x30AF;&#x30B9;&#x306B;&#x81EA;&#x52D5;&#x7684;&#x306B;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x3092;&#x5F53;&#x3066;&#x308B;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	showModal() {
		this.filterInputElem().value = &apos;&apos;;
		this.filterInputElem().focus();
		this.resetList();
		this.$modal().modal();
		return this;
	}
	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x3092;&#x9589;&#x3058;&#x308B;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	hideModal() {
		this.$modal().modal(&apos;hide&apos;);
		return this;
	}

	// --DOM&#x64CD;&#x4F5C;

	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x672B;&#x7AEF;&#x306B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3001;&#x307E;&#x305F;&#x306F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;
	 * @param {File Directory} file &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3001;&#x307E;&#x305F;&#x306F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	append(file) {
		// DOM
		this.appendElem(file);

		// &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
		// &#x6700;&#x521D;&#x306E;&#x8981;&#x7D20;&#x3068;&#x6700;&#x5F8C;&#x306E;&#x8981;&#x7D20;&#x306F;&#x3064;&#x306A;&#x3052;&#x308B;

		if (this.hasChild()) {
			this.lastChild().next(file);
			file.prev(this.lastChild());
		}
		file.parent(this);
		this.pushChild(file);
		return this;
	}
	/**
	 * &#x81EA;&#x8EAB;&#x306E;DOM&#x8981;&#x7D20;&#x306E;&#x5185;&#x90E8;&#x306E;&#x6700;&#x5F8C;&#x306B;file&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;
	 * @param {File Directory} file &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3001;&#x307E;&#x305F;&#x306F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	appendElem(file) {
		this.elem().appendChild(file.elem());
		return this;
	}
	/**
	 * &#x5185;&#x90E8;&#x306E;&#x30A8;&#x30EC;&#x30E1;&#x30F3;&#x30C8;&#x3092;&#x7A7A;&#x306B;&#x3059;&#x308B;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	emptyElem() {
		// FileList&#x306F;&#x5185;&#x90E8;&#x306E;&#x30A8;&#x30EC;&#x30E1;&#x30F3;&#x30C8;&#x304C;&#x53C2;&#x7167;&#x3068;&#x306F;&#x72EC;&#x7ACB;&#x3057;&#x3066;&#x5909;&#x52D5;&#x3059;&#x308B;&#x305F;&#x3081;&#x3001;&#x53C2;&#x7167;&#x3068;&#x3057;&#x3066;&#x4FDD;&#x6301;&#x3057;&#x3066;&#x3044;&#x308B;&#x30A8;&#x30EC;&#x30E1;&#x30F3;&#x30C8;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;&#x65B9;&#x5F0F;&#x3067;&#x306F;
		// &#x5B58;&#x5728;&#x3057;&#x306A;&#x3044;&#x30A8;&#x30EC;&#x30E1;&#x30F3;&#x30C8;&#x3092;&#x524A;&#x9664;&#x3057;&#x3088;&#x3046;&#x3068;&#x3059;&#x308B;&#x3053;&#x3068;&#x306B;&#x306A;&#x308A;&#x30A8;&#x30E9;&#x30FC;&#x304C;&#x8D77;&#x3053;&#x308B;&#x305F;&#x3081;&#x3001;&#x30AA;&#x30FC;&#x30D0;&#x30FC;&#x30E9;&#x30A4;&#x30C9;&#x3059;&#x308B;
		const children = this.elem().children;
		let child;
		while (child = children[0]) {
			this.elem().removeChild(child);
		}
		return this;
	}
	/**
	 * &#x5404;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x53C2;&#x7167;&#x306F;&#x305D;&#x306E;&#x307E;&#x307E;&#x3067;&#x3001;DOM&#x8981;&#x7D20;&#x306E;&#x307F;&#x3092;&#x69CB;&#x7BC9;&#x3057;&#x76F4;&#x3059;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	resetList() {
		this.emptyElem();
		this.each(function (file) {
			file.parent().appendElem(file);
		});
		return this;
	}
	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x5185;&#x5BB9;&#x3092;str&#x304B;&#x3089;&#x59CB;&#x307E;&#x308B;&#x540D;&#x524D;&#x3092;&#x6301;&#x3064;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30FB;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x307F;&#x306B;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;(&#x5404;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x53C2;&#x7167;&#x306F;&#x305D;&#x306E;&#x307E;&#x307E;&#x3067;&#x3001;DOM&#x8981;&#x7D20;&#x306E;&#x307F;&#x3092;&#x5909;&#x66F4;&#x3059;&#x308B;)
	 * @param {string} str &#x3053;&#x306E;&#x6587;&#x5B57;&#x5217;&#x304B;&#x3089;&#x59CB;&#x307E;&#x308B;&#x540D;&#x524D;&#x3092;&#x6301;&#x3064;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3001;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x3060;&#x3051;&#x304C;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x5185;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	filter(str) {
		this.emptyElem();
		const regexp = new RegExp(&apos;^&apos;+ str +&apos;.*&apos;,&apos;i&apos;);
		this.each(function (file) {
			if (regexp.test(file.name())) {
				this.elem().appendChild(file.elem());
			}
		}.bind(this));
		if (this.elem().children.length === 0) {
			const li = document.createElement(&apos;li&apos;);
			li.textContent = &apos;&#x8A72;&#x5F53;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306F;&#x898B;&#x3064;&#x304B;&#x308A;&#x307E;&#x305B;&#x3093;&#x3067;&#x3057;&#x305F;&#x3002;&apos;;
			this.elem().appendChild(li);
		}
		return this;
	}

	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x3092;&#x30B5;&#x30FC;&#x30D0;&#x30FC;&#x304B;&#x3089;&#x8AAD;&#x307F;&#x8FBC;&#x307F;&#x3001;&#x5404;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x69CB;&#x7BC9;&#x3057;&#x76F4;&#x3059;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/FileListMaker.html
	 */
	read() {
		const userId = this.sentenceContainer().userId();
		Util.post(&quot;/tategaki/FileListMaker&quot;,{
			user_id: userId
		},function (json) {
			this.init(json);
		}.bind(this));
		return this;
	}
	/**
	 * &#x73FE;&#x5728;&#x958B;&#x3044;&#x3066;&#x3044;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x6B21;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x8AAD;&#x307F;&#x8FBC;&#x307F;&#x3001;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306B;&#x5C55;&#x958B;&#x3059;&#x308B;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	openNextFile() {
		const currentFile = this.currentFile();
		const file = currentFile &amp;&amp; currentFile.nextFile();
		if (file) {
			file.open();
		} else if(this.hasFile()) {
			this.firstFile().open();
		}
		return this;
	}
	/**
	 * &#x73FE;&#x5728;&#x958B;&#x3044;&#x3066;&#x3044;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x524D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x8AAD;&#x307F;&#x8FBC;&#x307F;&#x3001;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306B;&#x5C55;&#x958B;&#x3059;&#x308B;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	openPrevFile() {
		const currentFile = this.currentFile();
		const file = currentFile &amp;&amp; currentFile.prevFile();
		if (file) {
			file.open();
		} else {
			this.lastFile().open();
		}
		return this;
	}
	/**
	 * &#x540D;&#x524D;&#x3067;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)&#x3002;&#x540C;&#x540D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x8907;&#x6570;&#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x5834;&#x5408;&#x306F;&#x78BA;&#x8A8D;&#x3059;&#x308B;
	 * @param {string} filename &#x524A;&#x9664;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x540D;&#x524D;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/DeleteFile.html
	 */
	deleteFile(filename) {
		const files = this.findFile(filename);
		const fileLength = files.length;
		if (fileLength === 0) {
			this.sentenceContainer().userAlert(&apos;&#x5B58;&#x5728;&#x3057;&#x306A;&#x3044;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3067;&#x3059;&apos;,&apos;red&apos;);
			return this;
		}
		if (fileLength === 1) {
			files[0].delete();
			return this;
		}
		if (fileLength &gt; 0) {
			if (window.confirm(&apos;&#x540C;&#x4E00;&#x540D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x8907;&#x6570;&#x5B58;&#x5728;&#x3057;&#x307E;&#x3059;&#x3002;\n&#x3059;&#x3079;&#x3066;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x524A;&#x9664;&#x3057;&#x307E;&#x3059;&#x304B;&#x3002;\n&#x3053;&#x306E;&#x3046;&#x3061;&#x306E;&#x3069;&#x308C;&#x304B;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;&#x5834;&#x5408;&#x306F;&#x30AD;&#x30E3;&#x30F3;&#x30BB;&#x30EB;&#x3057;&#x3001;&#x500B;&#x5225;&#x306B;&#x524A;&#x9664;&#x3057;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;&#x3002;&apos;)) {
				for (let i = 0,file; file = files[i]; i++) {
					file.delete();
				}
			} else {
				console.log(&apos;[&#x8907;&#x6570;&#x30D5;&#x30A1;&#x30A4;&#x30EB;]&#x524A;&#x9664;&#x3067;&#x304D;&#x307E;&#x305B;&#x3093;&#x3067;&#x3057;&#x305F;&#x3002;:&apos; + filename);
			}
		}
		return this;
	}
	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x540D;&#x524D;&#x3067;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @param {string} dirname &#x65B0;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x308B;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x540D;&#x524D;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/DirectoryMaker.html
	 */
	mkdir(dirname) {
		if (!dirname) return this;
		Util.post(&quot;/tategaki/DirectoryMaker&quot;,{
			user_id: this.sentenceContainer().userId(),
			directoryname: dirname,
			saved: Date.now()
		},function (data) {
			this.sentenceContainer().userAlert(&apos;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3057;&#x305F;:&apos;+ dirname);
			this.read();
		}.bind(this));
		return this;
	}
	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x540D;&#x524D;&#x306E;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @param {string} dirname &#x524A;&#x9664;&#x3059;&#x308B;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306E;&#x540D;&#x524D;
	 * @param {boolean} isForce &#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x5185;&#x306B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x7B49;&#x304C;&#x3042;&#x3063;&#x3066;&#x3082;&#x5F37;&#x5236;&#x7684;&#x306B;&#x4E2D;&#x8EAB;&#x3054;&#x3068;&#x524A;&#x9664;&#x3059;&#x308B;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/DeleteDirectory.html
	 */
	deleteDirectory(dirname,isForce) {
		const dirs = this.findDirectory(dirname);
		if (dirs.length === 0) return this;
		dirs[0].delete(isForce);
		return this;
	}
	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x5185;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @param {string} filename &#x79FB;&#x52D5;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x3002;&#x540C;&#x540D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x5834;&#x5408;&#x306F;&#x3001;&#x6700;&#x521D;&#x306B;&#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x9078;&#x629E;&#x3055;&#x308C;&#x308B;
	 * @param {string} dirname &#x79FB;&#x52D5;&#x5148;&#x306E;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x540D;&#x3002;&#x540C;&#x540D;&#x306E;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x304C;&#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x5834;&#x5408;&#x306F;&#x3001;&#x6700;&#x521D;&#x306B;&#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x304C;&#x9078;&#x629E;&#x3055;&#x308C;&#x308B;
	 * @return {FileList} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/MoveFile.html
	 */
	moveFile(filename,dirname) {
		const files = this.findFile(filename);
		const dirs = this.findDirectory(dirname);
		if (files.length === 0 || dirs.length === 0) return this;
		files[0].move(dirs[0]);
		return this;
	}

	// --&#x30A4;&#x30D9;&#x30F3;&#x30C8;

	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x5185;&#x306B;&#x3042;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x691C;&#x7D22;&#x30DC;&#x30C3;&#x30AF;&#x30B9;&#x95A2;&#x4FC2;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;
	 */
	addEventListenerOnInput() {
		// &#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x304C;&#x958B;&#x304F;&#x3068;&#x3001;&#x691C;&#x7D22;&#x6B04;&#x306B;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x304C;&#x79FB;&#x52D5;&#x3059;&#x308B;
		this.$modal().on(&apos;shown.bs.modal&apos;,function (e) {
			this.filterInputElem().focus();
		}.bind(this));
		// &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x691C;&#x7D22;&#x6B04;
		this.filterInputElem().addEventListener(&apos;keyup&apos;,this.onKeyupOnInput.bind(this));
	}
	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x691C;&#x7D22;&#x30DC;&#x30C3;&#x30AF;&#x30B9;&#x306E;keyup&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5185;&#x5BB9;
	 * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	onKeyupOnInput(e) {
		let keycode;
		if (document.all) {
			// IE
			keycode = e.keyCode
		} else {
			// IE&#x4EE5;&#x5916;
			keycode = e.which;
		}
		if (keycode === 123) { return; } // F12&#x306E;&#x307F;&#x30D6;&#x30E9;&#x30A6;&#x30B6;&#x30B7;&#x30E7;&#x30FC;&#x30C8;&#x30AB;&#x30C3;&#x30C8;&#x30AD;&#x30FC;
		if (keycode == 13) {
			// enter
			const file = this.findFile(this.filterInputElem().value)[0];
			if (file) {
				file.open();
			}
			this.hideModal();
			this.resetList();
		} else if (this.filterInputElem().value.length === 0) {
			this.resetList();
		} else {
			this.filter(this.filterInputElem().value);
		}
	}
}

/**
 * &#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class SentenceContainer extends AbstractHierarchy {
	/**
	 * @param {number} userId &#x30E6;&#x30FC;&#x30B6;&#x30FC;ID
	 * @param {object} [opt_data] &#x6587;&#x66F8;&#x60C5;&#x5831;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * &lt;pre&gt;
	 * {
	 * 	&quot;filename&quot;: &quot;sampleFile&quot;,
	 * 	&quot;fileId&quot;: &quot;12&quot;,
	 *		&quot;saved&quot;: &quot;2016-08-23 02:13:05&quot;,
	 *		&quot;userId&quot;: &quot;7&quot;,
	 *		&quot;data&quot;: {
	 *			&quot;conf&quot;: { // &#x6587;&#x66F8;&#x5168;&#x4F53;&#x306B;&#x95A2;&#x3059;&#x308B;&#x8A2D;&#x5B9A;&#x60C5;&#x5831;
	 *				&quot;strLen&quot;: &quot;36&quot;,
	 *				&quot;rowLen&quot;: &quot;42&quot;
	 *			},
	 *			&quot;text&quot;:[ // &#x5404;&#x6BB5;&#x843D;&#x306E;&#x60C5;&#x5831;&#x304C;&#x5165;&#x3063;&#x305F;&#x914D;&#x5217;&#x306E;&#x914D;&#x5217;
	 *						[ // &#x6BB5;&#x843D;&#x306E;&#x60C5;&#x5831;&#x304C;&#x5165;&#x3063;&#x305F;&#x914D;&#x5217;
	 *							[&quot;decolation-textalign-center&quot;],		 // &#x6BB5;&#x843D;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x304C;&#x6587;&#x5B57;&#x5217;&#x306E;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
	 *							[	 // &#x5404;&#x6587;&#x5B57;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
	 *								{	 // &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 *									&quot;char&quot;:&quot;&#x3042;&quot;,
	 *									&quot;decolation&quot;:[&quot;decolation-color-blue&quot;],
	 *									&quot;fontSize&quot;:&quot;auto&quot;
	 *								},
	 *								{
	 *									&quot;char&quot;:&quot;&#x3044;&quot;,
	 *									&quot;decolation&quot;:[]
	 *								}
	 *							]
	 *						],
	 *						[
	 *							[],
	 *							[
	 *								{
	 *									&quot;char&quot;:&quot;&#x3044;&quot;,
	 *									&quot;decolation&quot;:[&quot;decolation-color-red&quot;],
	 *									&quot;fontSize&quot;:&quot;30&quot;
	 *								},
	 *								{
	 *									&quot;char&quot;:&quot;&#x3046;&quot;,
	 *									&quot;decolation&quot;:[&quot;decolation-color-red&quot;],
	 *									&quot;fontSize&quot;:&quot;30&quot;
	 *								}
	 *							]
	 *						]
	 *			]
	 *		}
	 * }
	 * &lt;/pre&gt;
	 */
	constructor(userId,opt_data) {
		super(document.getElementById(&apos;sentence_container&apos;));
		if (opt_data) this.init(opt_data);
		this._userId = userId;
		this._titleElem = document.getElementById(&apos;file_title&apos;);
		this._searchInputElem = document.getElementById(&apos;search&apos;);
		this._userAlertElem = document.getElementById(&apos;user_info&apos;);
		this.addFileTitleEvent();
		this.addSelectEvent();
		this._cursor = new Cursor(this);
		this._inputBuffer = new InputBuffer(this);
		this._fileList = new FileList(this);
		this._command = new CommandLine(this);
		this._menu = new Menu(this);

		if (!opt_data) this.newFile();
	}
	/**
	 * &#x6587;&#x66F8;&#x3092;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306B;&#x5C55;&#x958B;&#x3059;&#x308B;
	 * @param {object} data &#x6587;&#x66F8;&#x60C5;&#x5831;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	init(data) {
		this.empty();
		// &#x6587;&#x66F8;&#x60C5;&#x5831;
		this.filename(data[&quot;filename&quot;]);
		this.fileId(data[&quot;fileId&quot;]);
		this.saved(data[&quot;saved&quot;] || (new Date(Date.now()).toLocaleDateString() + &apos; &apos; + new Date(Date.now()).toLocaleTimeString()).replace(/\//g,&apos;-&apos;));
		this._strLenOnRow = data[&quot;data&quot;][&quot;conf&quot;][&quot;strLen&quot;] || 40; // &#xFF11;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;
		this._rowLenOnPage = data[&quot;data&quot;][&quot;conf&quot;][&quot;rowLen&quot;] || 40; // &#xFF11;&#x30DA;&#x30FC;&#x30B8;&#x306E;&#x884C;&#x6570;
		this.menu().confStrLenElem().value = this._strLenOnRow;
		this.menu().confRowLenElem().value = this._rowLenOnPage;
		// DOM&#x306E;&#x69CB;&#x7BC9;
		for (let paraData of data[&quot;data&quot;][&quot;text&quot;]) {
			this.append(new Paragraph(paraData));
		}

		this.cursor().init();
		this.cordinate().resetDisplay();
		this.breakPage().printInfo();
		this.addKeydownEventListener();
		this.addWheelEventListener();
		return this;
	}

	// --&#x53C2;&#x7167;&#x53D6;&#x5F97;

	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x5B50;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} [opt_index] &#x53D6;&#x5F97;&#x3059;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @return {Paragraph Paragraph[]} &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;(&#x5B50;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x7A7A;&#x306E;&#x914D;&#x5217;)
	 */
	paragraphs(opt_index) {
		return this.children(opt_index);
	}
	/**
	 * &#x6587;&#x7AE0;&#x5185;&#x306E;&#x6700;&#x521D;&#x306E;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Row} &#x6700;&#x521D;&#x306E;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	firstRow() {
		return this.firstChild().firstChild();
	}
	/**
	 * &#x6587;&#x7AE0;&#x5185;&#x306E;&#x6700;&#x7D42;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Row} &#x6700;&#x7D42;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	lastRow() {
		return this.lastChild().lastChild();
	}
	/**
	 * num&#x884C;&#x76EE;&#x306E;Row&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;&#x3002;num&#x304C;&#x8CA0;&#x306E;&#x6570;&#x306A;&#x3089;&#x6700;&#x521D;&#x306E;&#x884C;&#x3001;num&#x304C;&#x884C;&#x6570;&#x4EE5;&#x4E0A;&#x306E;&#x6570;&#x5024;&#x3067;&#x3042;&#x308C;&#x3070;&#x6700;&#x7D42;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x304C;&#x53D6;&#x5F97;&#x3055;&#x308C;&#x308B;
	 * @param {number} num &#x53D6;&#x5F97;&#x3059;&#x308B;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @return {Row} &#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	row(num) {
		if (num &lt;= 0) return this.firstRow();
		let cnt = 0;
		for (let row = this.firstRow(); row; row = row.next()) {
			cnt++;
			if (cnt === num) return row;
		}
		return this.lastRow();
	}
	/**
	 * num&#x30DA;&#x30FC;&#x30B8;&#x76EE;&#x306E;&#x7B2C;&#x4E00;&#x884C;&#x76EE;&#x306E;Row&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;&#x3002;num&#x304C;&#x8CA0;&#x306E;&#x6570;&#x306A;&#x3089;&#x6700;&#x521D;&#x306E;&#x884C;&#x3001;num&#x304C;&#x30DA;&#x30FC;&#x30B8;&#x6570;&#x4EE5;&#x4E0A;&#x306E;&#x6570;&#x5024;&#x3067;&#x3042;&#x308C;&#x3070;&#x6700;&#x7D42;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x304C;&#x53D6;&#x5F97;&#x3055;&#x308C;&#x308B;
	 * @param {number} num &#x4F55;&#x30DA;&#x30FC;&#x30B8;&#x76EE;&#x304B;
	 * @return {Row} &#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	pageRow(num) {
		if (num &lt;= 0) return this.firstRow();
		let cnt = 0;
		for (let row = this.firstRow(); row; row = row.next()) {
			if (row.isPageBreak()) {
				cnt++;
				if (cnt === num) return row;
			}
		}
		return this.lastRow();
	}
	/**
	 * &#x6587;&#x66F8;&#x5185;&#x3067;&#x6700;&#x521D;&#x306E;&#x6587;&#x5B57;(&#x3042;&#x308B;&#x3044;&#x306F;EOL)&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Char EOL} &#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	firstChar() {
		return this.firstRow().firstChild();
	}
	/**
	 * &#x6587;&#x66F8;&#x5185;&#x3067;&#x6700;&#x7D42;&#x6587;&#x5B57;(EOL&#x306F;&#x9664;&#x304F;)&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Char} &#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	lastChar() {
		return this.lastEOL().prevChar();
	}
	/**
	 * &#x6587;&#x66F8;&#x5185;&#x3067;&#x6700;&#x7D42;&#x884C;&#x306E;EOL&#x3092;&#x8FD4;&#x3059;
	 * @return {EOL} &#x6700;&#x5F8C;&#x306E;EOL
	 */
	lastEOL() {
		return this.lastRow().lastChild();
	}
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Cursor} &#x6587;&#x66F8;&#x5185;&#x306E;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	cursor() {
		return this._cursor;
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x66F8;&#x5185;&#x3067;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x3042;&#x305F;&#x3063;&#x3066;&#x3044;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Char} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	cursorChar() {
		return this.cursor().getChar();
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x66F8;&#x5185;&#x3067;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x3042;&#x308B;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Row} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	cursorRow() {
		return this.cursorChar().row();
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x66F8;&#x306B;&#x5165;&#x529B;&#x3059;&#x308B;&#x969B;&#x306B;&#x4F7F;&#x7528;&#x3059;&#x308B;&#x5165;&#x529B;&#x30D0;&#x30C3;&#x30D5;&#x30A1;&#x30FC;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {InputBuffer} &#x5165;&#x529B;&#x30D0;&#x30C3;&#x30D5;&#x30A1;&#x30FC;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	inputBuffer() {
		return this._inputBuffer;
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x66F8;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x3092;&#x4F7F;&#x7528;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {FileList} &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	fileList() {
		return this._fileList;
	}
	/**
	 * &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {CommandLine} &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x30E9;&#x30A4;&#x30F3;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	command() {
		return this._command;
	}
	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;Input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x8FD4;&#x3059;
	 * @return {Element} &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;DOM&#x8981;&#x7D20;
	 */
	titleElem() {
		return this._titleElem;
	}
	/**
	 * &#x6587;&#x66F8;&#x5185;&#x8A9E;&#x53E5;&#x691C;&#x7D22;&#x3067;&#x4F7F;&#x7528;&#x3059;&#x308B;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x8FD4;&#x3059;
	 * @return {Element} &#x8A9E;&#x53E5;&#x691C;&#x7D22;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;DOM&#x8981;&#x7D20;
	 */
	searchInputElem() {
		return this._searchInputElem;
	}
	/**
	 * &#x30E6;&#x30FC;&#x30B6;&#x30FC;&#x3078;&#x306E;&#x60C5;&#x5831;&#x3092;&#x8868;&#x793A;&#x3059;&#x308B;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;DOM&#x8981;&#x7D20;&#x3092;&#x8FD4;&#x3059;
	 * @return {Element} &#x60C5;&#x5831;&#x8868;&#x793A;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;DOM&#x8981;&#x7D20;
	 */
	userAlertElem() {
		return this._userAlertElem;
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x66F8;&#x3092;&#x64CD;&#x4F5C;&#x3059;&#x308B;Menu&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Menu} &#x30E1;&#x30CB;&#x30E5;&#x30FC;&#x30D0;&#x30FC;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	menu() {
		return this._menu;
	}

	// --&#x5224;&#x5B9A;

	/**
	 * &#x3053;&#x306E;&#x6587;&#x66F8;&#x5185;&#x306B;&#x6BB5;&#x843D;&#x304C;&#x5B58;&#x5728;&#x3059;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {boolean} &#x6BB5;&#x843D;&#x304C;&#x5B58;&#x5728;&#x3059;&#x308B;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 */
	hasParagraph() {
		return this.hasChild();
	}

	// --&#x53C2;&#x7167;&#x64CD;&#x4F5C;

	/**
	 * &#x5B50;&#x306E;&#x6700;&#x5F8C;&#x306B;paragraph&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;
	 * @param {Paragraph} paragraph &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	pushParagraph(paragraph) {
		return this.pushChild(paragraph);
	}
	/**
	 * &#x5B50;&#x306E;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x4F4D;&#x7F6E;&#x306B;paragraph&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @param {number} pos &#x633F;&#x5165;&#x3059;&#x308B;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @param {Paragraph} paragraph &#x633F;&#x5165;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	insertParagraph(pos,paragraph) {
		return this.insertChild(pos,paragraph);
	}
	/**
	 * &#x5B50;&#x304B;&#x3089;paragraph&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;
	 * @param {Paragraph} paragraph &#x524A;&#x9664;&#x3059;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	deleteParagraph(paragraph) {
		return this.deleteChild(paragraph);
	}

	// --Status

	/**
	 * &#x6587;&#x66F8;&#x306E;&#x5185;&#x5BB9;&#x3092;&#x8868;&#x3057;&#x305F;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	 * @return {object} &#x6587;&#x66F8;&#x5185;&#x5BB9;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	data() {
		const data = {};
		data[&quot;conf&quot;] = this.menu().configueData();
		const paraArr = [];
		for (let paragraph of this.paragraphs()) {
			paraArr.push(paragraph.data());
		}
		data[&quot;text&quot;] = paraArr;

		return JSON.stringify(data);
	}
	/**
	 * &#x30E6;&#x30FC;&#x30B6;&#x30FC;ID&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x30E6;&#x30FC;&#x30B6;&#x30FC;ID
	 */
	userId() {
		return this._userId;
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x66F8;&#x5185;&#x306B;&#x5C55;&#x958B;&#x3057;&#x3066;&#x3044;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x3092;&#x5909;&#x66F4;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {string} [opt_newFilename] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;
	 * @return {SentenceContainer string} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	filename(opt_newFilename) {
		if (opt_newFilename === undefined) {
			return this._filename;
		} else {
			this._filename = opt_newFilename;
			this.titleElem().value = opt_newFilename;
			this.titleElem().dataset.filename = opt_newFilename;
			return this;
		}
	}
	/**
	 * &#x73FE;&#x5728;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306B;&#x65B0;&#x305F;&#x306A;ID&#x3092;&#x4E0E;&#x3048;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;ID&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} [opt_newId] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;ID
	 * @return {SentenceContainer number} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;ID(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	fileId(opt_newId) {
		if (opt_newId === undefined) {
			return this._fileId;
		} else {
			const newId = opt_newId;
			this._fileId = newId;
			this.titleElem().dataset.fileId = newId;
			return this;
		}
	}
	/**
	 * &#x6700;&#x7D42;&#x66F4;&#x65B0;&#x65E5;&#x6642;&#x3092;&#x8A2D;&#x5B9A;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x6700;&#x7D42;&#x66F4;&#x65B0;&#x65E5;&#x6642;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {string} [opt_newSaved] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x6700;&#x7D42;&#x66F4;&#x65B0;&#x65E5;&#x6642;&#x306E;&#x6587;&#x5B57;&#x5217;
	 * @return {SentenceContainer string} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;&#x6700;&#x7D42;&#x66F4;&#x65B0;&#x65E5;&#x6642;&#x306E;&#x6587;&#x5B57;&#x5217;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	saved(opt_newSaved) {
		if (opt_newSaved === undefined) {
			return this._saved;
		} else {
			const newSaved = opt_newSaved;
			this._saved = newSaved;
			document.getElementById(&apos;saved&apos;).textContent = newSaved;
			return this;
		}
	}
	/**
	 * &#x4E00;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3092;&#x5909;&#x66F4;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;&#x8A2D;&#x5B9A;&#x4E0A;&#x306E;&#x4E00;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} [opt_newStrLen] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x884C;&#x5185;&#x6587;&#x5B57;&#x6570;
	 * @return {SentenceContainer number} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;&#x8A2D;&#x5B9A;&#x4E0A;&#x306E;&#x884C;&#x5185;&#x6587;&#x5B57;&#x6570;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	strLenOnRow(opt_newStrLen) {
		if (opt_newStrLen === undefined) {
			return this._strLenOnRow;
		} else {
			const newStrLen = opt_newStrLen;
			this._strLenOnRow = newStrLen;
			this.cordinate().checkKinsoku().changeDisplay().breakPage().printInfo();
			this.cursor().createCursorLine();
			return this;
		}
	}
	// &#x8A2D;&#x5B9A;&#x4E0A;&#x306E;&#x30DA;&#x30FC;&#x30B8;&#x5185;&#x884C;&#x6570;
	/**
	 * &#x4E00;&#x30DA;&#x30FC;&#x30B8;&#x306E;&#x884C;&#x6570;&#x3092;&#x5909;&#x66F4;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;&#x4E00;&#x30DA;&#x30FC;&#x30B8;&#x306E;&#x884C;&#x6570;&#x3092;&#x53D6;&#x5F97;&#x3059;&#x308B;
	 * @param {number} [opt_newRowLen] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x30DA;&#x30FC;&#x30B8;&#x5185;&#x884C;&#x6570;
	 * @return {SentenceContainer number} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;&#x30DA;&#x30FC;&#x30B8;&#x5185;&#x884C;&#x6570;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
	 */
	rowLenOnPage(opt_newRowLen) {
		if (opt_newRowLen === undefined) {
			return this._rowLenOnPage;
		} else {
			const newRowLen = opt_newRowLen;
			this._rowLenOnPage = newRowLen;
			this.breakPage().printInfo();
			return this;
		}
	}
	/**
	 * &#x6587;&#x66F8;&#x5185;&#x6587;&#x5B57;&#x6570;&#x3092;&#x6570;&#x3048;&#x308B;
	 * @return {number} &#x6587;&#x66F8;&#x5185;&#x306E;&#x7DCF;&#x6587;&#x5B57;&#x6570;
	 */
	countChar() {
		let cnt = 0;
		for (let paragraph of this.paragraphs()) {
			cnt += paragraph.countChar();
		}
		return cnt;
	}
	// &#x5168;&#x884C;&#x6570;
	/**
	 * &#x6587;&#x66F8;&#x5185;&#x884C;&#x6570;&#x3092;&#x6570;&#x3048;&#x308B;
	 * @return {number} &#x6587;&#x66F8;&#x5185;&#x306E;&#x7DCF;&#x884C;&#x6570;
	 */
	countRow() {
		let cnt = 0;
		for (let paragraph of this.paragraphs()) {
			cnt += paragraph.childLength();
		}
		return cnt;
	}
	/**
	 * &#x6587;&#x66F8;&#x5185;&#x306E;&#x30DA;&#x30FC;&#x30B8;&#x6570;&#x3092;&#x6570;&#x3048;&#x308B;
	 * @return {number} &#x6587;&#x66F8;&#x5185;&#x306E;&#x7DCF;&#x30DA;&#x30FC;&#x30B8;&#x6570;
	 */
	countPage() {
		let cnt = 0;
		for (let row = this.firstRow(); row; row = row.next()) {
			if (row.isPageBreak()) cnt++;
		}
		return cnt;
	}

	// --Style

	/**
	 * &#x3053;&#x306E;&#x6587;&#x66F8;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x6A2A;&#x5E45;&#x3092;&#x8FD4;&#x3059;&#x3002;&#x6587;&#x66F8;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306F;&#xFF19;&#xFF10;&#x5EA6;&#x56DE;&#x8EE2;&#x3057;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x3001;css&#x4E0A;&#x306F;&#x9AD8;&#x3055;&#x306E;&#x3053;&#x3068;
	 * @param {boolean} [opt_useCache=true] true=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x3001;false=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3057;&#x306A;&#x3044;&#x3002;&#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x3067;true&#x306B;&#x306A;&#x308B;&#x306E;&#x3067;&#x3001;&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x4F7F;&#x308F;&#x305A;&#x8A08;&#x7B97;&#x3057;&#x76F4;&#x3059;&#x5834;&#x5408;&#x306B;&#x306F;&#x660E;&#x793A;&#x7684;&#x306B;false&#x3092;&#x6E21;&#x3059;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x5E45;
	 */
	width(opt_useCache) {
		return super.height(opt_useCache);
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x66F8;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x9AD8;&#x3055;&#x3092;&#x8FD4;&#x3059;&#x3002;&#x6587;&#x66F8;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306F;&#xFF19;&#xFF10;&#x5EA6;&#x56DE;&#x8EE2;&#x3057;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x3001;css&#x4E0A;&#x306F;&#x6A2A;&#x5E45;&#x306E;&#x3053;&#x3068;
	 * @param {boolean} [opt_useCache=true] true=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x3001;false=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3057;&#x306A;&#x3044;&#x3002;&#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x3067;true&#x306B;&#x306A;&#x308B;&#x306E;&#x3067;&#x3001;&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x4F7F;&#x308F;&#x305A;&#x8A08;&#x7B97;&#x3057;&#x76F4;&#x3059;&#x5834;&#x5408;&#x306B;&#x306F;&#x660E;&#x793A;&#x7684;&#x306B;false&#x3092;&#x6E21;&#x3059;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
	 * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x9AD8;&#x3055;
	 */
	height(opt_useCache) {
		return super.width(opt_useCache);
	}
	/**
	 * &#x6587;&#x66F8;&#x5185;&#x3059;&#x3079;&#x3066;&#x306E;&#x6587;&#x5B57;&#x304B;&#x3089;&#x3001;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x9664;&#x53BB;&#x3059;&#x308B;
	 * @param {string} className &#x9664;&#x53BB;&#x3059;&#x308B;&#x30AF;&#x30E9;&#x30B9;&#x540D;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	removeClassFromAllChar(className) {
		for (let paragraph of this.paragraphs()) {
			paragraph.removeClassFromAllChar(className);
		}
		return this;
	}
	/**
	 * &#x6E21;&#x3055;&#x308C;&#x305F;&#x6587;&#x5B57;&#x5217;&#x3092;&#x672C;&#x6587;&#x5185;&#x304B;&#x3089;&#x63A2;&#x3057;&#x3001;&#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x6587;&#x5B57;&#x5217;&#x306B;search-word&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;&#x3002;&#x3055;&#x3089;&#x306B;&#x3001;&#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x6587;&#x5B57;&#x5217;&#x306E;&#x5148;&#x982D;&#x6587;&#x5B57;&#x306B;search-label&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;
	 *  @param {string} str &#x691C;&#x7D22;&#x6587;&#x5B57;&#x5217;
	 *  @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	search(str) {
		for (let paragraph of this.paragraphs()) {
			paragraph.search(str);
		}
		return this;
	}
	/**
	 * &#x6587;&#x66F8;&#x5185;&#x8A9E;&#x53E5;&#x691C;&#x7D22;&#x3092;&#x59CB;&#x3081;&#x308B;&#x3002;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	startSearchMode() {
		this.searchInputElem().classList.add(&apos;active&apos;);
		this.searchInputElem().focus();
		this.searchInputElem().value = &apos;/&apos;;
		this.removeKeydownEventListener();
		if (!this._keyupOnSearchArg) {
			this._keyupOnSearchArg = this.onKeyupOnSearchMode.bind(this);
			this.searchInputElem().addEventListener(&apos;keyup&apos;,this._keyupOnSearchArg,false);
			this.searchInputElem().addEventListener(&apos;focusin&apos;,this.onFocusinOnSearchMode.bind(this));
			this.searchInputElem().addEventListener(&apos;focusout&apos;,this.onFocusoutOnSearchMode.bind(this));
		}
		return this;
	}
	/**
	 * &#x6587;&#x66F8;&#x5185;&#x8A9E;&#x53E5;&#x691C;&#x7D22;&#x3092;&#x5B8C;&#x5168;&#x306B;&#x7D42;&#x4E86;&#x3059;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	stopSearchMode() {
		this.addKeydownEventListener();
		this.searchInputElem().value = &apos;&apos;;
		this.searchInputElem().classList.remove(&apos;active&apos;);
		this.removeClassFromAllChar(&apos;search-label&apos;).removeClassFromAllChar(&apos;search-word&apos;);
		return this;
	}

	// selection

	/**
	 * &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306B;&#x3042;&#x308B;&#x6587;&#x5B57;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x914D;&#x5217;&#x3067;&#x8FD4;&#x3059;
	 * @param {boolean} [opt_bl] &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;&#x306A;&#x3089;true&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;
	 * @return {Char[]} &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x5185;&#x306B;&#x3042;&#x308B;&#x6587;&#x5B57;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;
	 */
	selectChars(opt_bl) {
		const ret = [];
		const selection = getSelection();
		if (this.selectText().length === 0) return ret; // rangeCount===0&#x3068;&#x3059;&#x308B;&#x3068;&#x3001;EOL&#x306E;&#x307F;&#x9078;&#x629E;&#x3055;&#x308C;&#x308B;&#x3053;&#x3068;&#x304C;&#x3042;&#x308B;
		const selRange = selection.getRangeAt(0);
		for (let char = this.firstChar(); char; char = char.nextChar()) {
			if (char.isInRange(selRange)) ret.push(char);
		}
		selRange.detach();
		if (opt_bl) selection.removeAllRanges(); // &#x9078;&#x629E;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
		return ret;
	}
	/**
	 * &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x5185;&#x306B;&#x3042;&#x308B;&#x6587;&#x5B57;&#x5217;&#x3092;&#x30ED;&#x30FC;&#x30AB;&#x30EB;&#x30B9;&#x30C8;&#x30EC;&#x30FC;&#x30B8;&#x306B;&#x4FDD;&#x5B58;&#x3059;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	copySelectText() {
		localStorage.clipBoard = this.selectText();
		return this;
	}
	// &#x30DA;&#x30FC;&#x30B9;&#x30C8;
	/**
	 * &#x30ED;&#x30FC;&#x30AB;&#x30EB;&#x30B9;&#x30C8;&#x30EC;&#x30FC;&#x30B8;&#x306B;&#x4FDD;&#x5B58;&#x3057;&#x305F;&#x6587;&#x5B57;&#x5217;&#x3092;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x304B;&#x3089;&#x633F;&#x5165;&#x3059;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	pasteText() {
		this.cursor().insert(localStorage.clipBoard);
		return this;
	}
	/**
	 * &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x5185;&#x306B;&#x3042;&#x308B;&#x6587;&#x5B57;&#x5217;&#x3092;&#x8FD4;&#x3059;
	 * @return {string} &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x5185;&#x306E;&#x6587;&#x5B57;&#x5217;
	 */
	selectText() {
		const selection = getSelection();
		let ret = &apos;&apos;;
		for (let i = 0,cnt = selection.rangeCount; i &lt; cnt; i++) {
			const selRange = selection.getRangeAt(i);
			ret += selRange.toString();
		}
		return ret;
	}

	// --DOM&#x64CD;&#x4F5C;&#x95A2;&#x4FC2;

	/**
	 * &#x5B50;&#x3092;&#x7A7A;&#x306B;&#x3057;&#x3001;&#x5165;&#x529B;&#x30E2;&#x30FC;&#x30C9;&#x3001;&#x8A9E;&#x53E5;&#x691C;&#x7D22;&#x30E2;&#x30FC;&#x30C9;&#x306F;&#x7D42;&#x4E86;&#x3059;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	empty() {
		this.emptyElem();
		this.emptyChild();
		this.removeKeydownEventListener();
		this.removeWheelEventListener();
		if (this.inputBuffer().isDisplay()) {
			this.inputBuffer().empty().hide();
		}
		this.stopSearchMode();
		return this;
	}
	/**
	 * &#x3053;&#x306E;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x672B;&#x5C3E;&#x306B;paragraph&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;
	 * @param {Paragraph} paragraph &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	append(paragraph) {
		this.elem().appendChild(paragraph.elem());
		paragraph.container(this);
		if (!this.hasParagraph()) {
			this.pushParagraph(paragraph);
			return this;
		}
		// paragraph
		this.lastChild().next(paragraph);
		paragraph.prev(this.lastChild());
		// row
		const lastRow = this.lastChild().lastChild();
		lastRow.next(paragraph.firstChild());
		paragraph.firstChild().prev(lastRow);
		// char
		const lastChar = lastRow.lastChild();
		lastChar.next(paragraph.firstChild().firstChild());
		paragraph.firstChild().firstChild().prev(lastChar);

		this.pushParagraph(paragraph);
		return this;
	}
	/**
	 * &#x6587;&#x66F8;&#x60C5;&#x5831;&#x3092;&#x8868;&#x793A;&#x3059;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	printInfo() {
		document.getElementById(&apos;str_pos&apos;).textContent = this.cursor().currentCharPos();
		document.getElementById(&apos;str_len&apos;).textContent = this.cursor().strLenOfRow();
		document.getElementById(&apos;row_pos&apos;).textContent = this.cursor().currentRowPos();
		document.getElementById(&apos;row_len&apos;).textContent = this.cursor().rowLenOnPage();
		document.getElementById(&apos;page_pos&apos;).textContent = this.cursor().currentPage();
		document.getElementById(&apos;page_len&apos;).textContent = this.countPage();
		return this;
	}

	// --&#x6587;&#x7AE0;&#x6574;&#x7406;

	/**
	 * &#x5404;&#x884C;&#x304C;&#x6307;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x3068;&#x7570;&#x306A;&#x308B;&#x6587;&#x5B57;&#x6570;&#x306A;&#x3089;&#x3001;&#x6307;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x306B;&#x5408;&#x308F;&#x305B;&#x3066;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8ABF;&#x7BC0;&#x3059;&#x308B;&#x3002;&#x6A19;&#x6E96;&#x4EE5;&#x5916;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x306E;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308C;&#x3070;&#x6587;&#x5B57;&#x6570;&#x306F;&#x8ABF;&#x6574;&#x3055;&#x308C;&#x308B;&#x3002;&#x307E;&#x305F;&#x3001;&#x7A7A;&#x6BB5;&#x843D;&#x4EE5;&#x5916;&#x306B;&#x7A7A;&#x884C;&#x304C;&#x3042;&#x308C;&#x3070;&#x524A;&#x9664;&#x3059;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	cordinate() {
		for (let paragraph of this.paragraphs()) {
			paragraph.cordinate();
		}
		return this;
	}
	/**
	 * &#x7981;&#x5247;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3046;&#x3002;&#x5404;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3078;&#x306E;&#x5909;&#x5316;&#x304C;&#x4F34;&#x3046;&#x305F;&#x3081;&#x3001;&#x5FC5;&#x305A;cordinate()&#x306E;&#x5F8C;&#x306B;&#x884C;&#x3046;&#x3053;&#x3068;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	checkKinsoku() {
		for (let paragraph of this.paragraphs()) {
			paragraph.checkKinsoku();
		}
		return this;
	}
	// &#x6539;&#x30DA;&#x30FC;&#x30B8;
	/**
	 * &#x30DA;&#x30FC;&#x30B8;&#x306E;&#x6700;&#x521D;&#x306E;&#x884C;&#x3068;&#x6700;&#x7D42;&#x884C;&#x306B;&#x76EE;&#x5370;&#x3068;&#x306A;&#x308B;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4E0E;&#x3048;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	breakPage() {
		const pageNum = this.rowLenOnPage();
		// page-break
		let cnt1 = 0;
		for (let paragraph of this.paragraphs()) {
			for (let row of paragraph.rows()) {
				if (cnt1 === 0 || cnt1 % pageNum === 0) { // &#xFF11;&#x884C;&#x76EE;&#x3068;pageNum&#x306E;&#x500D;&#x6570;&#x884C;&#x76EE;
					row.addClass(&apos;page-break&apos;);
				} else {
					row.removeClass(&apos;page-break&apos;);
				}
				cnt1++;
			}
		}
		// page-last-row
		let cnt2 = 0;
		const lastRow = this.countRow() -1;
		for (let paragraph of this.paragraphs()) {
			for (let row of paragraph.rows()) {
				if ((cnt2 + 1) % pageNum === 0 || cnt2 === lastRow) { // (pageNum&#x306E;&#x500D;&#x6570;-1)&#x884C;&#x76EE;&#x3068;&#x6700;&#x7D42;&#x884C;
					row.addClass(&apos;page-last-row&apos;);
				} else {
					row.removeClass(&apos;page-last-row&apos;);
				}
				cnt2++;
			}
		}
		return this;
	}
	/**
	 * &#x30E6;&#x30FC;&#x30B6;&#x30FC;&#x3078;&#x306E;&#x60C5;&#x5831;&#x3092;&#x8868;&#x793A;&#x3059;&#x308B;
	 * @param {string} str &#x8868;&#x793A;&#x3059;&#x308B;&#x60C5;&#x5831;
	 * @param {string} [opt_color=&apos;black&apos;] &#x9ED2;&#x6587;&#x5B57;&#x4EE5;&#x5916;&#x306E;&#x6587;&#x5B57;&#x8272;&#x3067;&#x8868;&#x793A;&#x3059;&#x308B;&#x5834;&#x5408;&#x306B;&#x8272;&#x540D;&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	userAlert(str,opt_color) {
		this.userAlertElem().textContent = str;
		if (opt_color) this.userAlertElem().style.color = opt_color;
		else this.userAlertElem().style.color = &apos;&apos;;
		return this;
	}

	// --&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x64CD;&#x4F5C;

	/**
	 * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x958B;&#x304F;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @param {number} fileId &#x958B;&#x304F;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;ID
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/ReadJsonFile.html
	 */
	readFile(fileId) {
		const file = this.fileList().findFile(fileId)[0];
		file.open();
		return this;
	}
	/**
	 * &#x73FE;&#x5728;&#x958B;&#x3044;&#x3066;&#x3044;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x4E0A;&#x66F8;&#x304D;&#x4FDD;&#x5B58;&#x3059;&#x308B;&#x3002;newFile()&#x3055;&#x308C;&#x3066;&#x521D;&#x3081;&#x3066;&#x306E;&#x4FDD;&#x5B58;&#x306A;&#x3089;&#x540D;&#x524D;&#x3092;&#x3064;&#x3051;&#x3066;&#x4FDD;&#x5B58;&#x3059;&#x308B;&#x3002;(&#x3068;&#x3082;&#x306B;&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/WriteJsonFile.html
	 */
	saveFile() {
		if (this.fileId() === -1) {
			this.saveAsFile(this.filename());
			return this;
		}
		this.userAlert(&apos;&#x4FDD;&#x5B58;&#x4E2D;&apos;);
		Util.post(&apos;/tategaki/WriteJsonFile&apos;,{
			user_id: this.userId(),
			file_id: this.fileId(),
			filename: this.filename(),
			json: this.data(),
			saved: Date.now()
		},function (json) {
			this.saved(json.strDate).userAlert(&apos;&#x4FDD;&#x5B58;&#x3057;&#x307E;&#x3057;&#x305F;&apos;);
			this.fileList().read();
		}.bind(this));
		return this;
	}
	/**
	 * &#x73FE;&#x5728;&#x958B;&#x3044;&#x3066;&#x3044;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x540D;&#x524D;&#x3092;&#x3064;&#x3051;&#x3066;&#x4FDD;&#x5B58;&#x3059;&#x308B;(&#x975E;&#x540C;&#x671F;&#x901A;&#x4FE1;)
	 * @param {string} filename &#x65B0;&#x3057;&#x3044;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x540D;&#x524D;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 * @see ../WEB-INF/classes/doc/FileMaker.html
	 * @see ../WEB-INF/classes/doc/WriteJsonFile.html
	 */
	saveAsFile(filename) {
		Util.post(&apos;/tategaki/FileMaker&apos;,{
			user_id: this.userId(),
			filename: filename,
			saved: Date.now()
		},function (data) {
			this.filename(data.filename).fileId(data.newFileId);
			const file = new File(data.newFileId,data.filename);
			this.fileList().append(file).chainFile();
			this.saveFile();
		}.bind(this));
		return this;
	}
	/**
	 * &#x65B0;&#x3057;&#x3044;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x958B;&#x304F;
	 * @param {string} filename &#x65B0;&#x3057;&#x3044;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	newFile(filename) {
		if (filename === undefined) filename = &apos;newfile&apos;;
		this.init({
			fileId: -1,
			filename: filename,
			data: {
				conf:{},
				text:[[[],[]]]
			}
		}); // &#x7A7A;&#x6BB5;&#x843D;&#x306E;&#x30C7;&#x30FC;&#x30BF;
		return this;
	}

	// --Display&#x95A2;&#x4FC2;

	/**
	 * &#x6587;&#x66F8;&#x3092;&#xFF11;&#x884C;&#x76EE;&#x306E;&#xFF11;&#x6587;&#x5B57;&#x76EE;&#x304B;&#x3089;&#x8868;&#x793A;&#x3059;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	resetDisplay() {
		this.addDisplay(0,0);
		return this;
	}
	// strPos: &apos;center&apos;,&apos;right&apos;
	/**
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x57FA;&#x6E96;&#x3068;&#x3057;&#x3066;&#x6587;&#x66F8;&#x3092;&#x8868;&#x793A;&#x3057;&#x76F4;&#x3059;
	 * @param {string} [opt_pos] &#x8868;&#x793A;&#x5F8C;&#x306E;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;&#x3002;&apos;center&apos;&#x3068;&apos;right&apos;&#x306B;&#x5BFE;&#x5FDC;&#x3002;
	 *     &#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;&#x306F;&#x73FE;&#x5728;&#x306E;&#x8868;&#x793A;&#x4F4D;&#x7F6E;&#x304B;&#x3089;&#x6700;&#x4F4E;&#x9650;&#x306E;&#x79FB;&#x52D5;&#x3067;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x304C;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;&#x3088;&#x3046;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	changeDisplay(opt_pos) {
		const cursorChar = this.cursorChar();
		const rowPos = this.computeDisplayRowPos(opt_pos);
		const charPos = cursorChar.row().computeDisplayCharPos();
		this.addDisplay(rowPos,charPos);
		return this;
	}
	/**
	 * firstRow&#x884C;&#x76EE;&#x4EE5;&#x964D;&#x3092;&#x8868;&#x793A;&#x3059;&#x308B;&#x3002;&#x6587;&#x5B57;&#x306F;firstChar&#x6587;&#x5B57;&#x76EE;&#x4EE5;&#x964D;&#x304C;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;
	 * @param {number} firstRow &#x8868;&#x793A;&#x3055;&#x308C;&#x308B;&#x6700;&#x521D;&#x306E;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @param {number} firstChar &#x8868;&#x793A;&#x3055;&#x308C;&#x308B;&#x6700;&#x521D;&#x306E;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addDisplay(firstRow,firstChar) {
		const dispWidth = this.width();
		const cache = {};
		let cnt = 0; // &#x7DCF;&#x884C;&#x6570;&#x3092;&#x30AB;&#x30A6;&#x30F3;&#x30C8;&#x3059;&#x308B;
		let sum = 0; // &#x8868;&#x793A;&#x884C;&#x306E;&#x5E45;&#x5408;&#x8A08;
		for (let paragraph of this.paragraphs()) {
			for (let row of paragraph.rows()) {
				if (cnt &lt; firstRow) {
					row.display(false);
					cnt++;
					continue;
				}
				// &#x884C;&#x306E;&#x5E45;&#x306F;&#x5B50;&#x306E;&#x6700;&#x5927;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x306B;&#x3088;&#x3063;&#x3066;&#x6C7A;&#x307E;&#x308B;&#x3068;&#x8003;&#x3048;&#x3001;&#x6700;&#x5927;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x3054;&#x3068;&#x306E;&#x884C;&#x5E45;&#x3092;&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3059;&#x308B;(&#x30EC;&#x30F3;&#x30C0;&#x30EA;&#x30F3;&#x30B0;&#x983B;&#x5EA6;&#x306E;&#x524A;&#x6E1B;)
				const maxFont = row.maxFont();
				if (cache[maxFont]) {
					const rowWidth = cache[maxFont];
					sum += rowWidth + 2; // 2&#x306F;&#x30DC;&#x30FC;&#x30C0;&#x30FC;&#x306E;&#x5E45;
				} else {
					cache[maxFont] = row.width();
					const rowWidth = cache[maxFont];
					sum += rowWidth + 2; // 2&#x306F;&#x30DC;&#x30FC;&#x30C0;&#x30FC;&#x306E;&#x5E45;
				}
				row.display((sum &lt; dispWidth),firstChar);
				cnt++;
			}
		}
		return this;
	}
	/**
	 * @private
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x57FA;&#x6E96;&#x306B;&#x3001;&#x6700;&#x521D;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;&#x3079;&#x304D;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @param {string} [opt_pos] &#x8868;&#x793A;&#x5F8C;&#x306E;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;&#x3002;&apos;center&apos;&#x306A;&#x3089;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x4E2D;&#x592E;&#x306B;&#x3059;&#x308B;&#x3002;&apos;right&apos;&#x306A;&#x3089;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x304C;&#x6700;&#x3082;&#x53F3;&#x306B;&#x306A;&#x308B;&#x3088;&#x3046;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;&#x3002;
	 *     &#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;&#x306F;&#x73FE;&#x5728;&#x306E;&#x8868;&#x793A;&#x4F4D;&#x7F6E;&#x304B;&#x3089;&#x6700;&#x4F4E;&#x9650;&#x306E;&#x79FB;&#x52D5;&#x3067;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x304C;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;&#x3088;&#x3046;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;
	 * @return {number} &#x8A08;&#x7B97;&#x3055;&#x308C;&#x305F;&#x6700;&#x521D;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x308B;&#x3079;&#x304D;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
	 */
	computeDisplayRowPos(opt_pos) {
		const currentFirst = this.firstDisplayRowPos();
		const cursorIndex = this.cursorRowPos();
		const currentEnd = this.lastDisplayRowPos();

		// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x4E2D;&#x592E;&#x306B;&#x3059;&#x308B;
		// HACK:&#x8A08;&#x7B97;&#x524D;&#x306E;display&#x306E;&#x6570;&#x3092;&#x57FA;&#x6E96;&#x306B;&#x3059;&#x308B;&#x306E;&#x3067;&#x3001;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x306E;&#x5927;&#x304D;&#x3055;&#x306A;&#x3069;&#x306B;&#x3088;&#x3063;&#x3066;&#x305A;&#x308C;&#x3082;&#x3042;&#x308A;&#x3046;&#x308B;
		if (opt_pos === &apos;center&apos;) {
			const harfRange = (currentEnd - currentFirst)/2;
			const ret = cursorIndex - harfRange;
			return ret &gt;= 0 ? ret : 0;
		} else if (opt_pos === &apos;right&apos;) {
			return cursorIndex;
		}

		if (cursorIndex &lt; currentFirst) {
			// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x524D;&#x306B;&#x3042;&#x308B;
			return cursorIndex;
		} else if (cursorIndex &gt; currentEnd) {
			// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x5F8C;&#x308D;&#x306B;&#x3042;&#x308B;
			return currentFirst + (cursorIndex - currentEnd);
		} else {
			// display&#x306B;&#x56F2;&#x307E;&#x308C;&#x305F;&#x90E8;&#x5206;&#x306B;display&#x3067;&#x306A;&#x3044;&#x884C;&#x304C;&#x3042;&#x308B;&#x5834;&#x5408;
			// &#x9014;&#x4E2D;&#x884C;&#x6570;&#x5909;&#x5316;
			return currentFirst;
		}
	}
	/**
	 * @private
	 * &#x73FE;&#x5728;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x884C;&#x306E;&#x6700;&#x521D;&#x306E;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x73FE;&#x5728;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x884C;&#x306E;&#x6700;&#x521D;&#x306E;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3002;&#x8868;&#x793A;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;-1
	 */
	firstDisplayRowPos() {
		let cnt = 0;
		for (let paragraph of this.paragraphs()) {
			for (let row of paragraph.rows()) {
				if (row.isDisplay())
					return cnt;
				cnt++;
			}
		}
		return -1;
	}
	/**
	 * @private
	 * &#x73FE;&#x5728;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x884C;&#x306E;&#x6700;&#x5F8C;&#x306E;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x73FE;&#x5728;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x884C;&#x306E;&#x6700;&#x5F8C;&#x306E;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3002;&#x8868;&#x793A;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;-1
	 */
	lastDisplayRowPos() {
		for (let row = this.lastRow(),cnt = this.countRow() -1; row; row = row.prev(),cnt--) {
			if (row.isDisplay()) return cnt;
		}
		return -1;
	}
	/**
	 * @private
	 * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x306E;&#x6587;&#x66F8;&#x5168;&#x4F53;&#x3067;&#x4F55;&#x884C;&#x76EE;&#x304B;&#x3092;&#x8FD4;&#x3059;
	 * @return {number} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x306E;&#x6587;&#x66F8;&#x5168;&#x4F53;&#x3067;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3002;&#x6587;&#x66F8;&#x5185;&#x306B;&#x6BB5;&#x843D;&#x304C;&#x306A;&#x3044;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;-1
	 */
	cursorRowPos() {
		const cursorRow = this.cursor().getChar().row();
		let cnt = 0;
		for (let paragraph of this.paragraphs()) {
			for (let row of paragraph.rows()) {
				if (row.is(cursorRow))
					return cnt;
				cnt++;
			}
		}
		return -1;
	}
	/**
	 * @private
	 * &#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x884C;&#x306E;&#x3046;&#x3061;&#x6700;&#x521D;&#x306E;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Row} &#x6700;&#x521D;&#x306E;&#x8868;&#x793A;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x8868;&#x793A;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	firstDisplayRow() {
		for (let paragraph of this.paragraphs()) {
			for (let row of paragraph.rows()) {
				if (row.isDisplay()) return row;
			}
		}
		return null;
	}
	/**
	 * @private
	 * &#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x884C;&#x306E;&#x3046;&#x3061;&#x6700;&#x5F8C;&#x306E;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3059;
	 * @return {Row} &#x6700;&#x5F8C;&#x306E;&#x8868;&#x793A;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x8868;&#x793A;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;null
	 */
	lastDisplayRow() {
		for (let row = this.lastRow(); row; row = row.prev()) {
			if (row.isDisplay()) return row;
		}
		return null;
	}

	/**
	 * &#x8868;&#x793A;&#x3092;&#x4E00;&#x884C;&#x5206;&#x53F3;&#x306B;&#x52D5;&#x304B;&#x3059;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	shiftRightDisplay() {
		const charPos = this.cursorRow().computeDisplayCharPos();
		const firstDisplay = this.firstDisplayRow();
		if (!firstDisplay.prev()) { return this; }
		firstDisplay.prev().display(true,charPos);
		this.lastDisplayRow().display(false);
		return this;
	}
	/**
	 * &#x8868;&#x793A;&#x3092;&#x4E00;&#x884C;&#x5206;&#x5DE6;&#x306B;&#x52D5;&#x304B;&#x3059;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	shiftLeftDisplay() {
		const charPos = this.cursorRow().computeDisplayCharPos();
		const lastDisplay = this.lastDisplayRow();
		if (!lastDisplay.next()) { return this; }
		lastDisplay.next().display(true,charPos);
		this.firstDisplayRow().display(false);
		return this;
	}

	// --&#x30A4;&#x30D9;&#x30F3;&#x30C8;

	// keydown
	/**
	 * &#x3053;&#x306E;&#x6587;&#x66F8;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306B;keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30EA;&#x30B9;&#x30CA;&#x30FC;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	addKeydownEventListener() {
		this.inputBuffer().removeKeydownEventListener()
			.convertContainer().removeKeydownEventListener();
		super.addKeydownEventListener();
		return this;
	}
	/**
	 * keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;
	 * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @param {number} keycode &#x62BC;&#x4E0B;&#x3055;&#x308C;&#x305F;&#x30AD;&#x30FC;&#x306E;&#x30AD;&#x30FC;&#x30B3;&#x30FC;&#x30C9;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	runKeydown(e,keycode) {
		this.userAlert(&apos;&apos;);
		if (e.ctrlKey) return this.runControlKeyDown(e,keycode);

		switch (keycode) {
			case 8:
				// backspace
				this.cursor().backSpace();
				break;
			case 13:
				// Enter
				this.cursor().lineBreak();
				break;
			case 32:
				// space
				this.cursor().insert(&apos;&#x3000;&apos;);
				break;
			case 37:
				// Left
				this.cursor().moveLeft(e.shiftKey);
				break;
			case 38:
				// Up
				this.cursor().movePrev(e.shiftKey);
				break;
			case 39:
				// Right
				this.cursor().moveRight(e.shiftKey);
				break;
			case 40:
				// Down
				this.cursor().moveNext(e.shiftKey);
				break;
			case 58: // firefox developer edition
			case 186: // chrome
				// :
				this.command().start();
				break;
			case 191:
				// /
				this.startSearchMode();
				break;
			default:
				this.inputBuffer().transfer(keycode,e.shiftKey);
				break;
		}
		return this;
	}
	/**
	 * @private
	 * &#x30B3;&#x30F3;&#x30C8;&#x30ED;&#x30FC;&#x30EB;&#x30AD;&#x30FC;&#x3092;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x305F;&#x5834;&#x5408;&#x306E;keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	runControlKeyDown(e,keycode) {
		switch (keycode) {
			case 67:
				// c
				this.copySelectText();
				break;
			case 18:
			case 70:
				// f
				this.fileList().showModal();
				break;
			case 72:
				// h
				this.cursor().moveLeft(e.shiftKey);
				break;
			case 73:
				// i
				this.fileList().openNextFile();
				break;
			case 74:
				// j
				this.cursor().moveNext(e.shiftKey);
				break;
			case 75:
				// k
				this.cursor().movePrev(e.shiftKey);
				break;
			case 76:
				// l
				this.cursor().moveRight(e.shiftKey);
				break;
			case 79:
				// o
				this.fileList().openPrevFile();
				break;
			case 83:
				// s
				this.saveFile();
				break;
			case 86:
				// v
				this.pasteText();
				break;
			case 188:
				// ,
				this.cursor().nextSearch();
				break;
			case 190:
				// .
				this.cursor().prevSearch();
				break;
			default:
				break;
		}
		return this;
	}

	// wheel
	/**
	 * &#x30DB;&#x30A4;&#x30FC;&#x30EB;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;(&#x8868;&#x793A;&#x3092;&#xFF14;&#x884C;&#x5206;&#x79FB;&#x52D5;&#x3059;&#x308B;)
	 * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 * @param {boolean} isUp &#x4E0A;&#x65B9;&#x5411;&#x306B;&#x30DB;&#x30A4;&#x30FC;&#x30EB;&#x304C;&#x52D5;&#x304B;&#x3055;&#x308C;&#x305F;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
	 * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
	 */
	runWheel(e,isUp) {
		const mvRowNum = 4; // &#x4E00;&#x5EA6;&#x306B;&#x52D5;&#x304B;&#x3059;&#x884C;&#x6570;
		if (isUp) {
			for (let i = 0; i &lt; mvRowNum; i++) { this.shiftRightDisplay(); }
		} else {
			for (let i = 0; i &lt; mvRowNum; i++) { this.shiftLeftDisplay(); }
		}
		return this;
	}

	// &#x8A9E;&#x53E5;&#x691C;&#x7D22;
	/**
	 * &#x8A9E;&#x53E5;&#x691C;&#x7D22;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306E;keyup&#x30A4;&#x30D9;&#x30F3;&#x30C8;
	 * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	 */
	onKeyupOnSearchMode(e) {
		let keycode;
		if (document.all) {
			// IE
			keycode = e.keyCode
		} else {
			// IE&#x4EE5;&#x5916;
			keycode = e.which;
		}
		if (keycode === 13) {
			// enter
			this.searchInputElem().blur(); // enter&#x3092;&#x62BC;&#x3057;&#x305F;&#x3060;&#x3051;&#x3067;&#x306F;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x304C;&#x5916;&#x308C;&#x306A;&#x3044;
			return;
		}

		// &#x4E2D;&#x8EAB;&#x304C;&#x7A7A;&#x306B;&#x306A;&#x308C;&#x3070;search&#x30E2;&#x30FC;&#x30C9;&#x3092;&#x5B8C;&#x5168;&#x306B;&#x7D42;&#x4E86;&#x3059;&#x308B;
		if (this.searchInputElem().value === &apos;&apos;) {
			this.searchInputElem().blur();
			this.stopSearchMode();
			return;
		}

		this.search(this.searchInputElem().value.slice(1));
	}
	/**
	 * &#x8A9E;&#x53E5;&#x691C;&#x7D22;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x304B;&#x3089;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x304C;&#x5916;&#x308C;&#x305F;&#x969B;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x5B9F;&#x884C;&#x5185;&#x5BB9;&#x3002;&#x6587;&#x66F8;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x672C;&#x4F53;&#x306B;keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x623B;&#x3059;
	 */
	onFocusoutOnSearchMode() {
		this.addKeydownEventListener();
	}
	/**
	 * &#x8A9E;&#x53E5;&#x691C;&#x7D22;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306B;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x304C;&#x3042;&#x305F;&#x3063;&#x305F;&#x969B;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x5B9F;&#x884C;&#x5185;&#x5BB9;&#x3002;&#x6587;&#x66F8;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x672C;&#x4F53;&#x306E;keydown&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x5916;&#x3059;
	 */
	onFocusinOnSearchMode() {
		this.removeKeydownEventListener();
	}

	// &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;input
	/**
	 * &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;input&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x306B;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;(&#x4E3B;&#x306B;&#x3001;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x304C;&#x3042;&#x305F;&#x3063;&#x305F;&#x969B;&#x3068;&#x5916;&#x308C;&#x305F;&#x969B;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;)&#x3002;&#x4E0E;&#x3048;&#x3063;&#x3071;&#x306A;&#x3057;&#x3002;&#x5B9F;&#x884C;&#x5185;&#x5BB9;&#x3082;&#x3053;&#x3053;&#x3067;&#x5B9A;&#x7FA9;
	 */
	addFileTitleEvent() {
		this.titleElem().addEventListener(&apos;focusin&apos;,function (e) {
			if (this.inputBuffer().isDisplay) { this.inputBuffer().empty().hide(); }
			this.removeKeydownEventListener();
		}.bind(this),false);
		this.titleElem().addEventListener(&apos;focusout&apos;,function (e) {
			if (this.titleElem().value === &apos;&apos;) {
				this.userAlert(&apos;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x304C;&#x5165;&#x529B;&#x3055;&#x308C;&#x3066;&#x3044;&#x307E;&#x305B;&#x3093;&apos;,&apos;red&apos;);
				this.titleElem().value = this.titleElem().dataset.filename;
			}
			this.addKeydownEventListener();
		}.bind(this),false);
	}

	// selection
	/**
	 * &#x30DE;&#x30A6;&#x30B9;&#x3067;&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x5909;&#x66F4;&#x3057;&#x305F;&#x969B;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4E0E;&#x3048;&#x308B;&#x3002;&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x5B57;&#x306E;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x5F53;&#x3066;&#x308B;
	 */
	addSelectEvent() {
		this.elem().addEventListener(&apos;mouseup&apos;,function (e) {
			const selChars = this.selectChars();
			// &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306E;&#x76F4;&#x5F8C;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x5F53;&#x3066;&#x308B;
			if (selChars.length &gt; 0) {
				const lastCharOnSelect = selChars[selChars.length -1];
				const newCursor = lastCharOnSelect.hasNextSibling() ? lastCharOnSelect.next() : lastCharOnSelect;
				newCursor.addCursor().setPosMemory();
			}
		}.bind(this),false);
	}
}

</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.8)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
