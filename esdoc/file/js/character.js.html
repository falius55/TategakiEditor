<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">js/character.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/abstract.js~AbstractHierarchy.html">AbstractHierarchy</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/character.js~Char.html">Char</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/character.js~EOL.html">EOL</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/character.js~Paragraph.html">Paragraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/character.js~Row.html">Row</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/container.js~Displayer.html">Displayer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/container.js~SearchMode.html">SearchMode</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/container.js~SelectRange.html">SelectRange</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/container.js~SentenceContainer.html">SentenceContainer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/filelist.js~Directory.html">Directory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/filelist.js~File.html">File</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/filelist.js~FileList.html">FileList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/input.js~ConvertContainer.html">ConvertContainer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/input.js~ConvertView.html">ConvertView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/input.js~InputBuffer.html">InputBuffer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/input.js~InputChar.html">InputChar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/other-classes.js~CommandLine.html">CommandLine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/other-classes.js~Cursor.html">Cursor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/other-classes.js~Menu.html">Menu</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/undo-redo.js~BoldDoMemory.html">BoldDoMemory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/undo-redo.js~ColorDoMemory.html">ColorDoMemory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/undo-redo.js~DeleteDoMemory.html">DeleteDoMemory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/undo-redo.js~DoManager.html">DoManager</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/undo-redo.js~DoMemory.html">DoMemory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/undo-redo.js~FontSizeDoMemory.html">FontSizeDoMemory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/undo-redo.js~ItalicDoMemory.html">ItalicDoMemory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/undo-redo.js~LineBreakDoMemory.html">LineBreakDoMemory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/undo-redo.js~PrintDoMemory.html">PrintDoMemory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ElemCreator">ElemCreator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-KeyTable">KeyTable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Util">Util</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">js/character.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;;
/* global AbstractHierarchy, ElemCreator, Util */

/**
 * &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class Char extends AbstractHierarchy {
    //{{{
    /**
     * @param {object} data &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&lt;br&gt;
     * &lt;pre&gt;
     * &lt;code&gt;
     *  // &#x4F8B;
     *		{
     *			&quot;char&quot;:&quot;&#x3042;&quot;,
     *			&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
     *			&quot;fontSize&quot;: &quot;auto&quot;
     *		}
     *	&lt;/code&gt;
     *	&lt;/pre&gt;
     */
    constructor(data) {
        // data&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306B;char&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;EOL&#x304B;&#x3089;&#x306E;&#x547C;&#x3073;&#x51FA;&#x3057;&#x3067;&#x3001;data&#x306B;&#x306F;&#x30A8;&#x30EC;&#x30E1;&#x30F3;&#x30C8;&#x304C;&#x5165;&#x3063;&#x3066;&#x3044;&#x308B;
        super(data.char ? ElemCreator.createCharElement(data) : data);
        if (!(&apos;fontSize&apos; in data)) {
            this._fontSize = data.fontSize;
        }
    }

    // --&#x53C2;&#x7167;&#x53D6;&#x5F97;

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x3067;&#x3042;&#x308B;Row&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;newRow&#x306B;&#x8A2D;&#x5B9A;&#x3057;&#x307E;&#x3059;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @param {Row} [opt_newRow] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Char Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
     */
    row(opt_newRow) {
        return this.parent(opt_newRow);
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    paragraph() {
        return this.row().paragraph();
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    sentenceContainer() {
        return this.paragraph().container();
    }

    /**
     * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @return {Cursor} &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x6301;&#x3064;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    cursor() {
        return this.row().paragraph().container().cursor();
    }

    // Cursor&#x7528;
    /**
     * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x3068;&#x3057;&#x3066;&#x81EA;&#x8EAB;&#x304C;&#x4E0D;&#x9069;&#x306A;&#x3089;&#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;Char&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;&#x5177;&#x4F53;&#x7684;&#x306B;&#x306F;&#x3001;&#x81EA;&#x8EAB;&#x304C;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306A;&#x3089;&#x305D;&#x306E;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x3068;&#x306A;&#x308A;&#x307E;&#x3059;
     * @return {Char} &#x81EA;&#x8EAB;&#x3082;&#x542B;&#x3081;&#x305F;&#x81EA;&#x8EAB;&#x4EE5;&#x964D;&#x3067;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x3068;&#x3057;&#x3066;&#x9069;&#x3057;&#x305F;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    slideNextCursor() {
        // &#x6BB5;&#x843D;&#x6700;&#x5F8C;&#x306E;EOL&#x4EE5;&#x5916;&#x306E;EOL&#x306B;&#x306F;&#x6B62;&#x307E;&#x3089;&#x306A;&#x3044;
        // &#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306A;&#x3089;&#x305D;&#x306E;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x306B;&#x5909;&#x66F4;&#x3059;&#x308B;
        if (this.isEOL() &amp;&amp; this.row().hasNextSibling()) {
            return this.next();
        }

        return this;
    }

    /**
     * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x3068;&#x3057;&#x3066;&#x81EA;&#x8EAB;&#x304C;&#x4E0D;&#x9069;&#x306A;&#x3089;&#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306E;Char&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;&#x5177;&#x4F53;&#x7684;&#x306B;&#x306F;&#x3001;&#x81EA;&#x8EAB;&#x304C;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306A;&#x3089;&#x305D;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x3068;&#x306A;&#x308A;&#x307E;&#x3059;
     * @return {Char} &#x81EA;&#x8EAB;&#x3082;&#x542B;&#x3081;&#x305F;&#x81EA;&#x8EAB;&#x4EE5;&#x524D;&#x3067;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x6587;&#x5B57;&#x3068;&#x3057;&#x3066;&#x9069;&#x3057;&#x305F;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    slidePrevCursor() {
        // &#x6BB5;&#x843D;&#x6700;&#x5F8C;&#x306E;EOL&#x4EE5;&#x5916;&#x306E;EOL&#x306B;&#x306F;&#x6B62;&#x307E;&#x3089;&#x306A;&#x3044;
        // &#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306A;&#x3089;&#x305D;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x5909;&#x66F4;&#x3059;&#x308B;
        if (this.isEOL() &amp;&amp; this.row().hasNextSibling()) {
            return this.prev();
        }

        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;Char&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x304B;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x5F8C;&#x304B;&#x306B;&#x95A2;&#x308F;&#x3089;&#x305A;&#x3001;EOL&#x306F;&#x5B8C;&#x5168;&#x6392;&#x9664;&#x3057;&#x3066;&#x6587;&#x5B57;&#x306E;&#x307F;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;Char&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;null
     */
    nextChar() {
        if (this.next() &amp;&amp; this.next().isEOL()) {
            return this.next().nextChar();
        }

        return this.next();
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;Char&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;&#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x304B;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x5F8C;&#x304B;&#x306B;&#x95A2;&#x308F;&#x3089;&#x305A;&#x3001;EOL&#x306F;&#x5B8C;&#x5168;&#x6392;&#x9664;&#x3057;&#x3066;&#x6587;&#x5B57;&#x306E;&#x307F;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x524D;&#x306E;Char&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3051;&#x308C;&#x3070;null
     */
    prevChar() {
        if (this.prev() &amp;&amp; this.prev().isEOL()) {
            return this.prev().prevChar();
        }

        return this.prev();
    }

    /**
     * &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;EOL&#x306F;&#x542B;&#x307F;&#x307E;&#x305B;&#x3093;
     * @return {Char} &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x306A;&#x3051;&#x308C;&#x3070;null
     */
    nextCharOnParagraph() {
        if (this.hasNextCharOnParagraph()) {
            return this.nextChar();
        }

        return null;
    }

    /**
     * &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;EOL&#x306F;&#x542B;&#x307F;&#x307E;&#x305B;&#x3093;
     * @return {Char} &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x306A;&#x3051;&#x308C;&#x3070;null
     */
    prevCharOnParagraph() {
        if (this.hasPrevCharOnParagraph()) {
            return this.prevChar();
        }

        return null;
    }

    // --&#x5224;&#x5B9A;

    /**
     * &#x81EA;&#x8EAB;&#x304C;EOL&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x30AA;&#x30FC;&#x30D0;&#x30FC;&#x30E9;&#x30A4;&#x30C9;&#x3055;&#x308C;&#x306A;&#x3044;&#x9650;&#x308A;&#x5E38;&#x306B;false
     */
    isEOL() {
        return false;
    }

    /**
     * &#x81EA;&#x8EAB;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x305F;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x81EA;&#x8EAB;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    hasCursor() {
        return this.hasClass(&apos;cursor&apos;);
    }

    /**
     * &#x81EA;&#x8EAB;&#x304C;&#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    isDisplay() {
        return this.hasClass(&apos;display&apos;);
    }

    /**
     * &#x81EA;&#x8EAB;&#x304C;&#x540C;&#x4E00;&#x884C;&#x5185;&#x3067;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;EOL&#x306F;&#x542B;&#x307F;&#x307E;&#x305B;&#x3093;(&#x6B21;&#x306E;&#x6587;&#x5B57;&#x304C;EOL&#x306A;&#x3089;false,&#x81EA;&#x8EAB;&#x304C;EOL&#x306E;&#x5834;&#x5408;&#x3082;false)
     * @return {boolean} &#x540C;&#x4E00;&#x884C;&#x5185;&#x3067;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;true&#x3001;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x306A;&#x3089;false&#x3002;
     */
    hasNextSibling() {
        return !(this._isEOL || this.next().isEOL());
    }

    /**
     * &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x6B21;&#x306E;Char&#x304C;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x6B21;&#x306E;Char&#x304C;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    hasNextCharOnParagraph() {
        return this.nextChar() &amp;&amp; this.nextChar().paragraph() === this.paragraph();
    }

    /**
     * &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x524D;&#x306E;Char&#x304C;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x524D;&#x306E;Char&#x304C;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    hasPrevCharOnParagraph() {
        return this.prevChar() &amp;&amp; this.prevChar().paragraph() === this.paragraph();
    }

    /**
     * &#x3053;&#x306E;&#x8981;&#x7D20;&#x304C;range&#x306E;&#x4E2D;&#x306B;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @param {Range} range &#x5224;&#x5B9A;&#x306E;&#x57FA;&#x6E96;&#x3068;&#x306A;&#x308B;&#x7BC4;&#x56F2;&#x3092;&#x8868;&#x3059;Range
     * @return {boolean} &#x3053;&#x306E;&#x8981;&#x7D20;&#x304C;range&#x306E;&#x4E2D;&#x306B;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    isInRange(range) {
        const charRange = document.createRange();
        // &#x73FE;&#x5728;&#x306E;&#x8981;&#x7D20;&#x3092;&#x56F2;&#x3080;&#x7BC4;&#x56F2;&#x3092;charRange&#x3068;&#x3057;&#x3066;&#x8A2D;&#x5B9A;&#x3002;selectNodeContents&#x3092;selectNode&#x306B;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x3092;&#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x30CE;&#x30FC;&#x30C9;&#x3067;&#x306F;&#x306A;&#x304F;span&#x8981;&#x7D20;&#x306B;&#x3059;&#x308B;&#x3068;&#x3001;&#x9078;&#x629E;&#x4E2D;&#x6700;&#x521D;&#x3068;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x304C;&#x53CD;&#x5FDC;&#x3057;&#x306A;&#x3044;&#x3053;&#x3068;&#x304C;&#x3042;&#x308B;
        charRange.selectNodeContents(this.elem().childNodes.item(0));
        // &#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x304C;&#x540C;&#x3058;&#x304B;select&#x306E;&#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x3088;&#x308A;&#x6587;&#x5B57;&#x306E;&#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x304C;&#x5F8C;&#x308D;&#x306B;&#x3042;&#x308A;&#x3001;
        // &#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x304C;&#x540C;&#x3058;&#x304B;select&#x306E;&#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x3088;&#x308A;&#x6587;&#x5B57;&#x306E;&#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x304C;&#x524D;&#x306B;&#x3042;&#x308B;
        if (charRange.compareBoundaryPoints(Range.START_TO_START,range) &gt;= 0 &amp;&amp;
            charRange.compareBoundaryPoints(Range.END_TO_END,range) &lt;= 0) {
                charRange.detach();
                return true;
            }

        charRange.detach();
        return false;
    }

    // --Status

    /**
     * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3059;
     * @return {object} &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
     */
    data() {
        const data = {};
        data.char = this.text();
        data.decolation = this.classArray();
        data.fontSize = this.fontSize() + &apos;&apos;;
        return data;
    }

    /**
     * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306B;&#x304B;&#x304B;&#x3063;&#x3066;&#x3044;&#x308B;&#x88C5;&#x98FE;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x914D;&#x5217;&#x306B;&#x3057;&#x3066;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {string[]} &#x3053;&#x306E;&#x6587;&#x5B57;&#x306B;&#x304B;&#x304B;&#x3063;&#x3066;&#x3044;&#x308B;&#x88C5;&#x98FE;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3002;&#x6587;&#x5B57;&#x88C5;&#x98FE;&#x304C;&#x304B;&#x304B;&#x3063;&#x3066;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;&#x7A7A;&#x306E;&#x914D;&#x5217;
     */
    classArray() {
        return this.className().match(/decolation-\S+/g) || [];
    }

    // --Style

    /**
     * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x5F53;&#x3066;&#x307E;&#x3059;
     * @param {boolean} [opt_bShift] &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    addCursor(opt_bShift) {
        this.cursor().addCursor(this,opt_bShift);
        return this;
    }

    /**
     * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x3092;&#x5909;&#x66F4;&#x3057;&#x307E;&#x3059;&#x3002;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @param {number string} [opt_fontSize] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;(&#x6570;&#x5024;&#x4EE5;&#x5916;&#x3067;&#x306F;&apos;auto&apos;&#x304C;&#x6E21;&#x305B;&#x308B;)
     * @return {Char number string} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3002;
     *     &#x73FE;&#x5728;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x304C;&#x6570;&#x5024;&#x3067;&#x8A2D;&#x5B9A;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;&#x6587;&#x5B57;&#x5217;&#x306E;&apos;auto&apos;
     */
    fontSize(opt_fontSize) {
        if (opt_fontSize) {
            this._fontSize = opt_fontSize;
            this._elem.dataset.fontSize = opt_fontSize;
            // &#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x304C;&#x5909;&#x66F4;&#x3055;&#x308C;&#x308B;&#x3068;&#x884C;&#x306E;&#x5E45;&#x304C;&#x5909;&#x308F;&#x308B;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x3042;&#x308B;&#x305F;&#x3081;&#x3001;&#x8A08;&#x7B97;&#x3057;&#x76F4;&#x3057;&#x3066;&#x304A;&#x304F;
            this.row().width(false);
            return this;
        }

        if (this._fontSize === undefined) {
            return &apos;auto&apos;;
        }

        if (this._fontSize === &apos;auto&apos;) {
            return this._fontSize;
        }
        return parseInt(this._fontSize);
    }

    /**
     * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306B;&#x6587;&#x5B57;&#x8272;&#x3092;&#x8A2D;&#x5B9A;&#x3057;&#x307E;&#x3059;&#x3002;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;&#x6587;&#x5B57;&#x8272;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @param {string boolean} [opt_color] &#x6587;&#x5B57;&#x5217;&#x306A;&#x3089;&#x305D;&#x306E;&#x8272;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;false&#x3092;&#x6E21;&#x305B;&#x3070;&#x6587;&#x5B57;&#x8272;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
     * @return {Char string} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;&#x6587;&#x5B57;&#x8272;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;&#x3002;&#x6587;&#x5B57;&#x8272;&#x304C;&#x8A2D;&#x5B9A;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;&apos;black&apos;)
     */
    color(opt_color) {
        if (opt_color) {
            this._addColor(opt_color);
            return this;
        }

        if (opt_color === false) {
            this._removeColor();
            return this;
        }

        if (opt_color === undefined) {
            const color = this.className().match(/decolation-color-(\S+)/);
            return color ? color[1] : &apos;black&apos;;
        }
    }

    /**
     * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x592A;&#x5B57;&#x3092;&#x8A2D;&#x5B9A;&#x3001;&#x89E3;&#x9664;&#x3057;&#x307E;&#x3059;
     *     &#x307E;&#x305F;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x3053;&#x306E;&#x6587;&#x5B57;&#x304C;&#x592A;&#x5B57;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @param {boolean} [opt_bl] true&#x306A;&#x3089;&#x592A;&#x5B57;&#x306B;&#x3059;&#x308B;&#x3001;false&#x306A;&#x3089;&#x592A;&#x5B57;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
     * @return {Char boolean} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x592A;&#x5B57;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x306E;&#x771F;&#x507D;&#x5024;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
     */
    bold(opt_bl) {
        if (opt_bl === undefined) {
            return this.hasClass(&apos;decolation-font-bold&apos;);
        }

        if (opt_bl) {
            this.addClass(&apos;decolation-font-bold&apos;);
        } else {
            this.removeClass(&apos;decolation-font-bold&apos;);
        }
        return this;
    }

    /**
     * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x659C;&#x4F53;&#x3092;&#x8A2D;&#x5B9A;&#x3001;&#x89E3;&#x9664;&#x3057;&#x307E;&#x3059;
     *     &#x307E;&#x305F;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x3053;&#x306E;&#x6587;&#x5B57;&#x304C;&#x659C;&#x4F53;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @param {boolean} [opt_bl] true&#x306A;&#x3089;&#x659C;&#x4F53;&#x306B;&#x3059;&#x308B;&#x3001;false&#x306A;&#x3089;&#x659C;&#x4F53;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x659C;&#x4F53;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x306E;&#x771F;&#x507D;&#x5024;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
     */
    italic(opt_bl) {
        if (opt_bl === undefined) {
            return this.hasClass(&apos;decolation-font-italic&apos;);
        }

        if (opt_bl) {
            this.addClass(&apos;decolation-font-italic&apos;);
        } else {
            this.removeClass(&apos;decolation-font-italic&apos;);
        }
        return this;
    }

    /**
     * &#x6587;&#x5B57;&#x8272;&#x3092;&#x8A2D;&#x5B9A;&#x3057;&#x307E;&#x3059;
     * @param {string} color &#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x6587;&#x5B57;&#x8272;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    _addColor(color) {
        // &#x540C;&#x4E00;&#x7A2E;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x3059;&#x3067;&#x306B;&#x6301;&#x3063;&#x3066;&#x3044;&#x305F;&#x3089;&#x5916;&#x3059;
        this.removeColor();
        if (color === &apos;decolation-color-black&apos;) {
            return; // &#x30D6;&#x30E9;&#x30C3;&#x30AF;&#x306A;&#x3089;&#x5916;&#x3057;&#x3066;&#x7D42;&#x308F;&#x308A;
        }
        this.addClass(&apos;decolation-color-&apos;+ color);
        return this;
    }

    /**
     * &#x6587;&#x5B57;&#x8272;&#x3092;&#x89E3;&#x9664;&#x3057;&#x307E;&#x3059;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    _removeColor() {
        const regexp = new RegExp(&apos;decolation-color-\\S+&apos;);
        const rmClass = this.className().match(regexp);
        if (rmClass) {
            this.removeClass(rmClass[0]);
        }
        return this;
    }

    /**
     * &#x3053;&#x306E;&#x6587;&#x5B57;&#x304B;&#x3089;&#x59CB;&#x307E;&#x308B;&#x6587;&#x5B57;&#x5217;&#x304C;str&#x3068;&#x5408;&#x81F4;&#x3059;&#x308B;&#x306A;&#x3089;&#x3001;&#x305D;&#x306E;&#x6587;&#x5B57;&#x5217;&#x306E;Char&#x306B;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3057;&#x307E;&#x3059;
     * @param {string} str &#x5224;&#x5B9A;&#x3059;&#x308B;&#x6587;&#x5B57;&#x5217;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    markSearchPhrase(str) {
        // &#xFF11;&#x6587;&#x5B57;&#x305A;&#x3064;&#x6BD4;&#x8F03;&#x3057;&#x3001;&#x6E21;&#x3055;&#x308C;&#x305F;&#x6587;&#x5B57;&#x5217;&#x306E;&#x9577;&#x3055;&#x5206;&#x306E;&#x30EB;&#x30FC;&#x30D7;&#x3092;&#x7D42;&#x3048;&#x308B;&#x307E;&#x3067;&#x306B;&#x7570;&#x306A;&#x308B;&#x6587;&#x5B57;&#x304C;&#x73FE;&#x308C;&#x308B;&#x304B;&#x6BB5;&#x843D;&#x306B;&#x6B8B;&#x308A;&#x306E;&#x6587;&#x5B57;&#x304C;&#x306A;&#x304F;&#x306A;&#x308C;&#x3070;return
        // &#x6700;&#x521D;&#x306E;&#x30EB;&#x30FC;&#x30D7;&#x3092;&#x7121;&#x4E8B;&#x306B;&#x7D42;&#x3048;&#x308C;&#x3070;&#x3053;&#x306E;&#x6587;&#x5B57;&#x304B;&#x3089;&#x59CB;&#x307E;&#x308B;&#x6587;&#x5B57;&#x5217;&#x306F;str&#x306B;&#x5408;&#x81F4;&#x3057;&#x3066;&#x3044;&#x308B;&#x3068;&#x3044;&#x3046;&#x3053;&#x3068;&#x306A;&#x306E;&#x3067;&#x3001;&#x305D;&#x308C;&#x305E;&#x308C;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;

        // &#x5408;&#x81F4;&#x3057;&#x3066;&#x3044;&#x308B;&#x304B;&#x306E;&#x5224;&#x5B9A;
        // &#x5408;&#x81F4;&#x3057;&#x306A;&#x3044;&#x6587;&#x5B57;&#x304C;&#x73FE;&#x308C;&#x305F;&#x304B;&#x3001;&#x6587;&#x5B57;&#x5217;&#x3092;&#x6BD4;&#x8F03;&#x3057;&#x7D42;&#x3048;&#x308B;&#x524D;&#x306B;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x9054;&#x3057;&#x305F;&#x3089;return
        for (let i = 0, len = str.length, char = this;
            i &lt; len; i++, char = char.nextCharOnParagraph()) {
                if (!char || str.charAt(i) !== char.text()) {
                    return this;
                }
            }

        // &#x30AF;&#x30E9;&#x30B9;&#x306E;&#x4ED8;&#x4E0E;
        this.addClass(&apos;search-label&apos;);
        for (let i = 0, len = str.length, char = this;
            i &lt; len; char = char.nextChar(),i++) {
                char.addClass(&apos;search-word&apos;);
            }
        return this;
    }

    // --DOM&#x64CD;&#x4F5C;&#x95A2;&#x4FC2;

    /**
     * char&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x524D;&#x306B;&#x633F;&#x5165;&#x3057;&#x307E;&#x3059;
     * @param {Char} char &#x633F;&#x5165;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    before(char) {
        // DOM
        // this.elem().before(char.elem()); // before(),after()&#x306F;&#x307E;&#x3060;&#x30B5;&#x30DD;&#x30FC;&#x30C8;&#x3055;&#x308C;&#x305A;
        this.row().elem().insertBefore(char.elem(),this.elem());

        // &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
        // oldPrev - char - this

        // char
        const oldPrev = this.prev();
        if (oldPrev) {
            this.prev().next(char);
        }
        char.prev(oldPrev);
        char.next(this);
        this.prev(char);
        // parent
        char.row(this.row());
        const pos = this.index();
        this.row().insertChar(pos,char);
        return this;
    }

    /**
     * char&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x5F8C;&#x306B;&#x633F;&#x5165;&#x3057;&#x307E;&#x3059;
     * @param {Char} char &#x633F;&#x5165;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    after(char) {
        if (this.isEOL()) {
            throw new Error(&apos;couldn\&apos;t after from EOL&apos;);
        }

        // DOM
        if (this.hasNextSibling()) {
            this.row().elem().insertBefore(char.elem(),this.next().elem());
        } else {
            this.row().elem().appendChild(char.elem());
        }

        // &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
        // this - char - oldNextChar

        // char
        const oldNextChar = this.next();
        this.next(char);
        char.prev(this);
        char.next(oldNextChar);
        if (oldNextChar) {
            oldNextChar.prev(char);
        }
        // parent
        char.row(this.row());
        const pos = this.index() + 1;
        this.row().insertChar(pos,char);
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3057;&#x307E;&#x3059;&#x3002;&#x6587;&#x66F8;&#x6574;&#x5F62;&#x306F;&#x884C;&#x3044;&#x307E;&#x305B;&#x3093;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    remove() {
        // &#x8981;&#x7D20;&#x3068;&#x53C2;&#x7167;&#x306E;&#x524A;&#x9664;
        if (this.isEOL()) {
            throw new Error(&apos;counldn\&apos;t remove EOL&apos;);
        }
        const row = this.row();
        row.elem().removeChild(this.elem());

        // oldPrev - this - oldNext &#x2192;&#x3000;oldPrev - oldNext
        const oldPrev = this.prev();
        const oldNext = this.next();
        if (oldPrev) {
            oldPrev.next(oldNext);
        }
        if (oldNext) {
            oldNext.prev(oldPrev);
        }
        // &#x53E4;&#x3044;&#x89AA;&#x306E;&#x914D;&#x5217;&#x304B;&#x3089;&#x524A;&#x9664;
        row.deleteChar(this);
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3057;&#x3001;&#x6587;&#x66F8;&#x6574;&#x5F62;&#x3092;&#x884C;&#x3044;&#x307E;&#x3059;(&#x7A7A;&#x884C;&#x304C;&#x3067;&#x304D;&#x305F;&#x3089;&#x305D;&#x306E;&#x884C;&#x3082;&#x524A;&#x9664;&#x3057;&#x3001;&#x6587;&#x5B57;&#x6570;&#x8ABF;&#x6574;&#x3084;&#x7981;&#x5247;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3044;&#x307E;&#x3059;)
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    delete() {
        const row = this.row();
        const paragraph = row.paragraph();
        this.remove();

        // &#x6BB5;&#x843D;&#x5148;&#x982D;&#x4EE5;&#x5916;&#x306E;&#x884C;&#x3067;&#x3001;&#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;&#x3057;&#x305F;&#x7D50;&#x679C;&#x884C;&#x304C;&#x7A7A;&#x306B;&#x306A;&#x3063;&#x305F;&#x5834;&#x5408;&#x3001;&#x305D;&#x306E;&#x884C;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;
        if (!row.isFirst() &amp;&amp; row.isEmpty()) {
            if (row.lastChild().hasCursor()) {
                row.prev().EOL().addCursor().setPosMemory(); // &#x524A;&#x9664;&#x884C;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308C;&#x3070;&#x3001;&#x305D;&#x306E;&#x524D;&#x306E;&#x884C;&#x306E;EOL&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;
            }
            row.remove();
        }

        paragraph.cordinate().checkKinsoku();
        return this;
    }

    /**
     * &#x81EA;&#x5206;&#x81EA;&#x8EAB;&#x3092;newChar&#x3068;&#x5165;&#x308C;&#x66FF;&#x3048;&#x307E;&#x3059;
     * @param {Char} newChar &#x81EA;&#x8EAB;&#x3068;&#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    replace(newChar) {
        newChar.prev(this.prev());
        newChar.next(this.next());
        if (this.prev()) { this.prev().next(newChar); }
        if (this.next()) { this.next().prev(newChar); }
        this.prev(null);
        this.next(null);
        this.row().replaceChild(this,newChar);
        this.row(null);
        return this;
    }

    /**
     * &#x524D;&#x306E;&#x884C;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;&#x3002;&#x305D;&#x306E;&#x7D50;&#x679C;&#x7A7A;&#x884C;&#x304C;&#x3067;&#x304D;&#x305F;&#x3089;&#x524A;&#x9664;&#x3057;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x305D;&#x306E;&#x884C;&#x306B;&#x3042;&#x308C;&#x3070;&#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;EOL&#x306B;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;
     *     &#x6BB5;&#x843D;&#x306F;&#x307E;&#x305F;&#x304C;&#x305A;&#x3001;&#x79FB;&#x52D5;&#x524D;&#x306E;&#x81EA;&#x8EAB;&#x304C;&#x6BB5;&#x843D;&#x6700;&#x521D;&#x306E;&#x6587;&#x5B57;&#x3067;&#x3042;&#x308C;&#x3070;&#x4F55;&#x3082;&#x3057;&#x307E;&#x305B;&#x3093;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    moveLastBefore() {
        if (this.isEOL() || !this.isFirst()) { return this; } // &#x5404;&#x884C;&#x6700;&#x521D;&#x306E;&#x6587;&#x5B57;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;
        if (this.row().isFirst()) {
            return this; // &#x6BB5;&#x843D;&#x306F;&#x307E;&#x305F;&#x304C;&#x306A;&#x3044;
        }

        const oldRow = this.row();
        // delete()&#x5185;&#x3067;cordinate()&#x3092;&#x4F7F;&#x3044;&#x3001;cordinate()&#x5185;&#x3067;moveLastBefore()&#x3092;&#x4F7F;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;&#x3053;&#x3053;&#x3067;delete()&#x3092;&#x4F7F;&#x3046;&#x3068;&#x7121;&#x9650;&#x518D;&#x5E30;&#x306E;&#x6050;&#x308C;&#x3042;&#x308A;
        this.remove();
        oldRow.prev().append(this);

        // &#x79FB;&#x52D5;&#x3057;&#x305F;&#x7D50;&#x679C;&#x3001;&#x7A7A;&#x884C;&#x304C;&#x3067;&#x304D;&#x305F;&#x3089;&#x524A;&#x9664;&#x3059;&#x308B;
        if (oldRow.isEmpty()) {
            if (oldRow.hasCursor()) {
                this.next().addCursor(); // &#x524A;&#x9664;&#x884C;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x79FB;&#x52D5;&#x3059;&#x308B;
            }
            oldRow.remove();
        }
        this.setPosMemory();
        return this;
    }

    /**
     * &#x6B21;&#x306E;&#x884C;&#x306E;&#x6700;&#x521D;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;&#x3002;&#x6B21;&#x306E;&#x884C;&#x304C;&#x540C;&#x3058;&#x6BB5;&#x843D;&#x306B;&#x306A;&#x3051;&#x308C;&#x3070;&#x65B0;&#x3057;&#x304F;&#x884C;&#x3092;&#x4F5C;&#x308A;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x6B21;&#x306E;EOL&#x306B;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    moveFirstAfter() {
        if (this.isEOL() || !this.isLast()) {
            return this; // &#x5404;&#x884C;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x5B57;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;
        }

        const oldRow = this.row();
        // &#x6B21;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x65B0;&#x3057;&#x304F;&#x4F5C;&#x308B;(&#x6BB5;&#x843D;&#x306F;&#x307E;&#x305F;&#x304C;&#x306A;&#x3044;)
        if (oldRow.isLast()) {
            const newRow = Row.createEmptyRow();
            oldRow.after(newRow);
            if (oldRow.EOL().hasCursor()) {
                newRow.EOL().addCursor(); // &#x6BB5;&#x843D;&#x6700;&#x5F8C;&#x306E;EOL&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308C;&#x3070;&#x52D5;&#x304B;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x79FB;&#x52D5;&#x3059;&#x308B;
            }
        }

        this.remove();
        oldRow.next().prepend(this.display(true)); // display&#x3057;&#x3066;&#x304A;&#x304B;&#x306A;&#x3051;&#x308C;&#x3070;&#x3001;changeDisplay()&#x3067;&#x306E;&#x8A08;&#x7B97;&#x306B;&#x72C2;&#x3044;&#x304C;&#x751F;&#x3058;&#x308B;

        this.setPosMemory(); // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x4ED8;&#x4E0E;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x6587;&#x5B57;&#x306F;&#x5909;&#x308F;&#x3089;&#x306A;&#x3044;&#x304C;&#x3001;&#x305D;&#x306E;&#x6587;&#x5B57;&#x306E;&#x4F4D;&#x7F6E;&#x304C;&#x5909;&#x308F;&#x308B;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x3042;&#x308B;&#x305F;&#x3081;posMemory&#x3092;&#x4ED8;&#x3051;&#x66FF;&#x3048;&#x308B;
        return this;
    }

    // --Display&#x95A2;&#x4FC2;
    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x8868;&#x793A;&#x975E;&#x8868;&#x793A;&#x3092;&#x5207;&#x308A;&#x66FF;&#x3048;&#x307E;&#x3059;
     * @param {boolean} bDisplay true&#x306A;&#x3089;&#x8868;&#x793A;&#x3001;false&#x306A;&#x3089;&#x975E;&#x8868;&#x793A;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    display(bDisplay) {
        if (bDisplay) {
            this._elem.classList.add(&apos;display&apos;);
        } else {
            this._elem.classList.remove(&apos;display&apos;);
        }
        return this;
    }

    // Utility

    /**
     * &#x73FE;&#x5728;&#x306E;&#x30E1;&#x30CB;&#x30E5;&#x30FC;&#x30D0;&#x30FC;&#x306E;&#x72B6;&#x614B;&#x306B;&#x5373;&#x3057;&#x3066;c&#x3092;&#x5185;&#x5BB9;&#x306B;&#x6301;&#x3064;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3059;&#x3002;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3092;&#x6301;&#x3064;&#x65E2;&#x5B58;&#x306E;Char&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306B;&#x306F;&#x5F71;&#x97FF;&#x3057;&#x307E;&#x305B;&#x3093;
     * @param {string} c &#x4F5C;&#x6210;&#x3059;&#x308B;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x8868;&#x3059;&#x6587;&#x5B57;(&#xFF11;&#x6587;&#x5B57;)
     * @return {object} &#x6587;&#x5B57;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
     */
    createData(c) {
        // Menu&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x3084;&#x3059;&#x304F;&#x3059;&#x308B;&#x305F;&#x3081;&#x3001;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x30E1;&#x30BD;&#x30C3;&#x30C9;&#x3068;&#x3057;&#x3066;&#x5B9A;&#x7FA9;
        const ret = {};
        ret.char = c;
        const menu = this.paragraph().container().menu();
        ret.decolation = menu.charDecolations();
        ret.fontSize = menu.fontSizeInput();
        return ret;
    }

    /**
     * &#x6587;&#x5B57;&#x88C5;&#x98FE;&#x306E;&#x306A;&#x3044;&#x6587;&#x5B57;&#x306E;&#x6587;&#x5B57;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @param {string} c &#x4F5C;&#x6210;&#x3059;&#x308B;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x8868;&#x3059;&#x6587;&#x5B57;(&#xFF11;&#x6587;&#x5B57;)
     * @return {object} &#x6587;&#x5B57;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
     */
    static createPlainCharData(c) {
        const ret = {};
        ret.char = c;
        ret.decolation = [];
        ret.fontSize = &apos;auto&apos;;
        return ret;
    }

    // -- other

    /**
     * &#x3053;&#x306E;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3068;&#x3057;&#x3066;&#x8A18;&#x61B6;&#x3057;&#x307E;&#x3059;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    setPosMemory() {
        const index = this.index();
        this.cursor().setPosMemory(index);
        return this;
    }

    /**
     * &#x81EA;&#x5206;&#x3092;&#x542B;&#x3081;&#x3066;&#x3001;&#x81EA;&#x5206;&#x4EE5;&#x964D;&#x3067;&#x540C;&#x3058;&#x6BB5;&#x843D;&#x5185;&#x306E;Char&#x5168;&#x3066;&#x306B;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3044;&#x307E;&#x3059;(EOL&#x306F;&#x542B;&#x307E;&#x306A;&#x3044;)
     * @param {function} func &#x51E6;&#x7406;&#x5185;&#x5BB9;&#x304C;&#x5B9A;&#x7FA9;&#x3055;&#x308C;&#x305F;&#x95A2;&#x6570;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    afterEach(func) {
        const index = this.index();
        let cnt = 0;
        for (let char of this.row().chars()) {
            if (cnt &gt;= index) {
                func(char);
            }
            cnt++;
        }
        return this;
    }
}//}}}


/**
 * &#x884C;&#x306E;&#x672B;&#x7AEF;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class EOL extends Char {
    //{{{
    // Row&#x3068;&#x3068;&#x3082;&#x306B;&#x8981;&#x7D20;&#x3092;&#x4F5C;&#x3063;&#x3066;&#x3057;&#x307E;&#x3046;&#x305F;&#x3081;&#x3001;&#x8981;&#x7D20;&#x3092;&#x5F15;&#x6570;&#x306B;&#x53D6;&#x308B;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
    /**
     * @param {Element} elem &#x81EA;&#x8EAB;&#x306E;DOM&#x8981;&#x7D20;
     */
    constructor(elem) {
        super(elem); // &#x6700;&#x521D;&#x306B;&#x30B9;&#x30FC;&#x30D1;&#x30FC;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x30B3;&#x30F3;&#x30B9;&#x30C8;&#x30E9;&#x30AF;&#x30BF;&#x3092;&#x547C;&#x3070;&#x306A;&#x3051;&#x308C;&#x3070;&#x30A8;&#x30E9;&#x30FC;
    }

    /**
     * &#x81EA;&#x8EAB;&#x304C;EOL&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x5E38;&#x306B;true
     */
    isEOL() {
        return true;
    }

    // -- Status

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {number} &#x81EA;&#x8EAB;&#x306F;&#x89AA;&#x306E;&#x914D;&#x5217;&#x306B;&#x5165;&#x3063;&#x3066;&#x3044;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x89AA;&#x306E;&#x914D;&#x5217;&#x306E;&#x9577;&#x3055;&#x3068;&#x540C;&#x3058;&#x6570;&#x5024;&#x3092;&#x8FD4;&#x3059;
     */
    index() {
        return this.row().childLength();
    }

    // --DOM&#x64CD;&#x4F5C;

    /**
     * row&#x3092;&#x89AA;&#x3068;&#x3057;&#x3066;&#x7D10;&#x4ED8;&#x3051;&#x307E;&#x3059;
     * @param {Row} row &#x89AA;&#x3068;&#x306A;&#x308B;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {EOL} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    appended(row) {
        // EOL&#x306F;&#x5404;&#x884C;&#x4E00;&#x6587;&#x5B57;&#x76EE;&#x3067;&#x3042;&#x308B;&#x306E;&#x3068;Dom&#x8981;&#x7D20;&#x304C;&#x5148;&#x306B;&#x4F5C;&#x3089;&#x308C;&#x308B;&#x305F;&#x3081;Row&#x306E;append()&#x304C;&#x5229;&#x7528;&#x3067;&#x304D;&#x306A;&#x3044;
        // EOL&#x304C;appended&#x3055;&#x308C;&#x308B;&#x306E;&#x306F;&#x307E;&#x3060;row&#x304C;&#x6587;&#x66F8;&#x5185;&#x306B;&#x7D44;&#x307F;&#x8FBC;&#x307E;&#x308C;&#x308B;&#x524D;&#x306A;&#x306E;&#x3067;&#x3001;next&#x3068;prev&#x306E;&#x64CD;&#x4F5C;&#x306F;&#x4E0D;&#x8981;
        row.elem().appendChild(this.elem());
        this.row(row);
        return this;
    }
}//}}}


/**
 * &#x884C;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class Row extends AbstractHierarchy {
    //{{{
    /**
     * @param {object} data &#x884C;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&lt;br&gt;
     * &#x4F8B;
     * &lt;pre&gt;
     * &lt;code&gt;
     *	// &#x5404;&#x6587;&#x5B57;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
     *	[
     *		{	 // &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
     *			&quot;char&quot;:&quot;&#x3042;&quot;,
     *			&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
     *			&quot;fontSize&quot;:&quot;auto&quot;
     *		},
     *		{
     *			&quot;char&quot;:&quot;&#x3044;&quot;,
     *			&quot;decolation&quot;:null
     *			&quot;fontSize&quot;:&quot;18&quot;
     *		}
     *	]
     *	&lt;/code&gt;
     *	&lt;/pre&gt;
     */
    constructor(data) {
        // &#x914D;&#x5217;&#x304C;&#x6E21;&#x3055;&#x308C;&#x305F;&#x3089;&#x65B0;&#x3057;&#x304F;&#x8981;&#x7D20;&#x3092;&#x4F5C;&#x308A;&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;&#x8981;&#x7D20;&#x304C;&#x6E21;&#x3055;&#x308C;&#x305F;&#x3068;&#x3057;&#x3066;&#x305D;&#x308C;&#x3092;&#x5143;&#x306B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x4F5C;&#x308B;
        if (Array.isArray(data)) {
            super(ElemCreator.createRowElement(data));
        } else {
            // InputBuffer&#x306E;&#x5834;&#x5408;
            super(data);
            data = [];
        }
        this._EOL = new EOL(this._elem.lastElementChild);
        this._EOL.appended(this);
        if (!Array.isArray(data)) {
            return;
        }
        for (let charData of data) {
            const char = new Char(charData);
            this.append(char);
        }

        this.addClickEventListener();
    }

    // --&#x53C2;&#x7167;&#x53D6;&#x5F97;

    /**
     * &#x81EA;&#x8EAB;&#x306E;EOL&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {EOL} &#x81EA;&#x8EAB;&#x306E;EOL&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    EOL() {
        return this._EOL;
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    container() {
        return this.paragraph().container();
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x306E;&#x6BB5;&#x843D;&#x3092;&#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;&#x89AA;&#x6BB5;&#x843D;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @param {Paragraph} [opt_newParagraph] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x89AA;&#x6BB5;&#x843D;
     * @return {Row Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
     */
    paragraph(opt_newParagraph) {
        return this.parent(opt_newParagraph);
    }

    /**
     * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x6301;&#x3064;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @return {Char} &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x6301;&#x3064;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    cursorChar() {
        return this.paragraph().container().cursor().getChar();
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x6700;&#x521D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x7B2C;&#x4E00;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x305D;&#x308C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x81EA;&#x8EAB;&#x306E;EOL&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    firstChild() {
        // &#x7A7A;&#x884C;&#x3067;&#x306F;EOL&#x304C;&#x9078;&#x629E;&#x3055;&#x308C;&#x308B;&#x305F;&#x3081;&#x3001;firstChar()&#x3067;&#x306F;&#x306A;&#x304F;firstChild()
        // Row&#x3067;&#x306F;EOL&#x304C;&#x7D61;&#x3080;&#x305F;&#x3081;&#x30AA;&#x30FC;&#x30D0;&#x30FC;&#x30E9;&#x30A4;&#x30C9;&#x3059;&#x308B;
        if (this.hasChar()) {
            return this.chars()[0];
        } else {
            return this.EOL();
        }
    }
    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x6700;&#x5F8C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3067;&#x3042;&#x308B;EOL&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;EOL&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    lastChild() {
        return this.EOL();
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {Char} &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3002;&#x7A7A;&#x884C;&#x3067;&#x3042;&#x308C;&#x3070;null
     */
    lastChar() {
        return super.lastChild();
    }

    /**
     * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x5B50;&#x3067;&#x3042;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;&#x3002;EOL&#x306F;&#x542B;&#x307E;&#x308C;&#x307E;&#x305B;&#x3093;
     * @param {number} [opt_index] &#x53D6;&#x5F97;&#x3059;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
     * @return {Char Char[]} &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;&#x3002;&#x7BC4;&#x56F2;&#x5916;&#x306E;&#x6570;&#x5024;&#x306A;&#x3089;undefined)&#x3001;
     *     &#x3042;&#x308B;&#x3044;&#x306F;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;&#x3002;&#x5B50;&#x304C;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;&#x7A7A;&#x306E;&#x914D;&#x5217;)
     */
    chars(opt_index) { // EOL&#x306F;&#x542B;&#x307E;&#x308C;&#x306A;&#x3044;
        return super.children(opt_index);
    }

    /**
     * EOL&#x3092;&#x542B;&#x3080;&#x3001;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x5B50;&#x3067;&#x3042;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x53D6;&#x5F97;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @param {number} [opt_index] &#x53D6;&#x5F97;&#x3059;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
     * @return {Char} &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;&#x3002;&#x7BC4;&#x56F2;&#x5916;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306A;&#x3089;EOL)&#x3001;
     *     &#x3042;&#x308B;&#x3044;&#x306F;EOL&#x3092;&#x542B;&#x3080;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;&#x3002;&#x5B50;&#x304C;&#x3044;&#x306A;&#x3051;&#x308C;&#x3070;&#x8981;&#x7D20;&#x304C;EOL&#x306E;&#x307F;&#x3067;&#x3042;&#x308B;&#x914D;&#x5217;)
     */
    children(opt_index) { // EOL&#x3092;&#x542B;&#x3080;
        if (opt_index === undefined) {
            const ret = super.children(); // push()&#x306E;&#x623B;&#x308A;&#x5024;&#x306F;lenght&#x30D7;&#x30ED;&#x30D1;&#x30C6;&#x30A3;&#x306E;&#x5024;&#x306A;&#x306E;&#x3067;&#x3001;&#x4E00;&#x65E6;&#x5909;&#x6570;&#x306B;&#x5165;&#x308C;&#x308B;&#x5FC5;&#x8981;&#x3042;&#x308A;
            ret.push(this.EOL());
            return ret;
        }
        return super.children(opt_index) || this.EOL();
    }

    // --&#x5224;&#x5B9A;

    /**
     * &#x5185;&#x90E8;&#x306B;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x5185;&#x90E8;&#x306B;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308C;&#x3070;true&#x3001;EOL&#x306E;&#x307F;&#x306E;&#x7A7A;&#x884C;&#x306A;&#x3089;false
     */
    hasChar() {
        return super.hasChild();
    }

    /**
     * &#x884C;&#x5185;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x884C;&#x5185;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    hasCursor() {
        for (let char of this.children()) {
            if (char.hasCursor()) {
                return true;
            }
        }
        return false;
    }

    /**
     * &#x3053;&#x306E;&#x8981;&#x7D20;&#x304C;&#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x53EF;&#x8996;&#x5316;&#x3055;&#x308C;&#x3066;&#x3044;&#x305F;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    isDisplay() {
        return this.hasClass(&apos;display&apos;);
    }

    /**
     * obj&#x304C;&#x884C;&#x5185;&#x306B;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @param {Char} obj &#x5224;&#x5B9A;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Char} obj&#x304C;&#x884C;&#x5185;&#x306B;&#x3042;&#x308B;Char&#x304A;&#x3088;&#x3073;EOL&#x306E;&#x3044;&#x305A;&#x308C;&#x304B;&#x306B;&#x4E00;&#x81F4;&#x3059;&#x308B;&#x3068;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    contains(obj) {
        if (!(obj instanceof Char)) {
            return false;
        }

        for (let char of this.children()) {
            if (char.is(obj)) {
                return true;
            }
        }

        return false;
    }

    /**
     * &#x30DA;&#x30FC;&#x30B8;&#x5185;&#x3067;&#x6700;&#x521D;&#x306E;&#x884C;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x30DA;&#x30FC;&#x30B8;&#x5185;&#x3067;&#x6700;&#x521D;&#x306E;&#x884C;&#x3067;&#x3042;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    isPageBreak() {
        return this.hasClass(&apos;page-break&apos;);
    }

    /**
     * &#x30DA;&#x30FC;&#x30B8;&#x5185;&#x3067;&#x6700;&#x7D42;&#x884C;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x30DA;&#x30FC;&#x30B8;&#x5185;&#x3067;&#x6700;&#x7D42;&#x884C;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    isPageLast() {
        return this.hasClass(&apos;page-last-row&apos;);
    }

    // --&#x53C2;&#x7167;&#x64CD;&#x4F5C;

    /**
     * char&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x52A0;&#x3048;&#x307E;&#x3059;
     * @param {Char} char &#x5B50;&#x306B;&#x52A0;&#x3048;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    pushChar(char) {
        return this.pushChild(char);
    }

    /**
     * char&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x4F4D;&#x7F6E;&#x306B;&#x52A0;&#x3048;&#x307E;&#x3059;
     * @param {number} pos &#x52A0;&#x3048;&#x308B;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
     * @param {Char} char &#x52A0;&#x3048;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    insertChar(pos,char) {
        return this.insertChild(pos,char);
    }

    /**
     * char&#x3092;&#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x304B;&#x3089;&#x524A;&#x9664;&#x3057;&#x307E;&#x3059;
     * @param {Char} char &#x524A;&#x9664;&#x3059;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    deleteChar(char) {
        return this.deleteChild(char);
    }

    // --Status

    /**
     * &#x3053;&#x306E;&#x884C;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3059;
     * @return {object[]} &#x3053;&#x306E;&#x884C;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
     */
    data() {
        const data = [];
        for (let char of this.chars()) {
            data.push(char.data());
        }
        return data;
    }

    /**
     * &#x3053;&#x306E;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;EOL&#x306F;&#x542B;&#x307F;&#x307E;&#x305B;&#x3093;
     * @return {number} &#x3053;&#x306E;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3002;&#x7A7A;&#x884C;&#x306A;&#x3089;&#xFF10;
     */
    charLen() {
        return super.childLength();
    }

    /**
     * &#x3053;&#x306E;&#x884C;&#x306E;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x6587;&#x5B57;&#x306E;&#x3046;&#x3061;&#x3001;&#x6700;&#x3082;&#x5927;&#x304D;&#x3044;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;&apos;auto&apos;&#x306F;18&#x3068;&#x3057;&#x3066;&#x8A08;&#x7B97;&#x3057;&#x307E;&#x3059;
     * @return {number} &#x6700;&#x5927;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x6570;
     */
    maxFont() {
        let max = 0; // &#x7A7A;&#x884C;&#x3067;&#x306F;&#xFF10;&#x306B;&#x306A;&#x308B;
        for (let char of this.chars()) {
            max = Math.max(max, char.fontSize() === &apos;auto&apos; ? 18 : char.fontSize());
        }
        return max;
    }

    // --Style

    /**
     * &#x3053;&#x306E;&#x884C;&#x306E;&#x6A2A;&#x5E45;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;&#x884C;&#x306F;&#xFF19;&#xFF10;&#x5EA6;&#x56DE;&#x8EE2;&#x3057;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x3001;&#x3053;&#x3053;&#x3067;&#x3044;&#x3046;&#x5E45;&#x306F;css&#x4E0A;&#x306E;&#x9AD8;&#x3055;&#x3092;&#x8868;&#x3057;&#x307E;&#x3059;
     * @param {boolean} [opt_useCache=true] true=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x3001;false=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3057;&#x306A;&#x3044;&#x3002;
     *     &#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x3067;true&#x306B;&#x306A;&#x308B;&#x306E;&#x3067;&#x3001;&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x4F7F;&#x308F;&#x305A;&#x8A08;&#x7B97;&#x3057;&#x76F4;&#x3059;&#x5834;&#x5408;&#x306B;&#x306F;&#x660E;&#x793A;&#x7684;&#x306B;false&#x3092;&#x6E21;&#x3059;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
     * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x5E45;
     */
    width(opt_useCache) {
        return super.height(opt_useCache);
    }

    /**
     * &#x3053;&#x306E;&#x884C;&#x306E;&#x9AD8;&#x3055;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;&#x884C;&#x306F;&#xFF19;&#xFF10;&#x5EA6;&#x56DE;&#x8EE2;&#x3057;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x3001;&#x3053;&#x3053;&#x3067;&#x3044;&#x3046;&#x9AD8;&#x3055;&#x306F;css&#x4E0A;&#x306E;&#x5E45;&#x3092;&#x8868;&#x3057;&#x307E;&#x3059;
     * @param {boolean} [opt_useCache=true] true=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3059;&#x308B;&#x3001;false=&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x5229;&#x7528;&#x3057;&#x306A;&#x3044;&#x3002;
     *     &#x7701;&#x7565;&#x3059;&#x308B;&#x3068;&#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x3067;true&#x306B;&#x306A;&#x308B;&#x306E;&#x3067;&#x3001;&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x3092;&#x4F7F;&#x308F;&#x305A;&#x8A08;&#x7B97;&#x3057;&#x76F4;&#x3059;&#x5834;&#x5408;&#x306B;&#x306F;&#x660E;&#x793A;&#x7684;&#x306B;false&#x3092;&#x6E21;&#x3059;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
     * @return {number} &#x81EA;&#x8EAB;&#x306E;&#x9AD8;&#x3055;
     */
    height(opt_useCache) {
        return super.width(opt_useCache);
    }

    // --DOM&#x64CD;&#x4F5C;&#x95A2;&#x4FC2;

    /**
     * &#x5B50;&#x3092;&#x7A7A;&#x306B;&#x3057;&#x3066;&#x53C2;&#x7167;&#x3092;&#x6574;&#x3048;&#x307E;&#x3059;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    empty() {
        // emptyElem()&#x306B;&#x52A0;&#x3048;&#x3001;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x53C2;&#x7167;&#x3082;&#x5207;&#x308A;&#x96E2;&#x3059;
        this.emptyElem();
        const prevRow = this.prev();

        if (prevRow) {
            this.EOL().prev(prevRow.lastChild());
            prevRow.lastChild().next(this.EOL());
        } else {
            this.EOL().prev(null);
        }
        this.emptyChild();
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x521D;&#x306B;char&#x3092;&#x633F;&#x5165;&#x3057;&#x307E;&#x3059;
     * @param {Char} char &#x633F;&#x5165;&#x3059;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    prepend(char) {
        this.firstChild().before(char);
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x5F8C;(EOL&#x306E;&#x76F4;&#x524D;)&#x306B;char&#x3092;&#x633F;&#x5165;&#x3057;&#x307E;&#x3059;
     * @param {Char} char &#x633F;&#x5165;&#x3059;&#x308B;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    append(char) {
        this.EOL().before(char);
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x524D;&#x306B;row&#x3092;&#x633F;&#x5165;&#x3057;&#x307E;&#x3059;
     * @param {Row} row &#x633F;&#x5165;&#x3059;&#x308B;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    before(row) {
        // DOM
        this.paragraph().elem().insertBefore(row.elem(),this.elem());

        // &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
        // oldPrev - row - this

        // row
        const oldPrev = this.prev();
        if (oldPrev !== null) {
            oldPrev.next(row);
        }
        row.prev(oldPrev);
        row.next(this);
        this.prev(row);
        // char
        if (oldPrev) {
            oldPrev.lastChild().next(row.firstChild());
            row.firstChild().prev(oldPrev.lastChild());
        }
        row.lastChild().next(this.firstChild());
        this.firstChild().prev(row.lastChild());
        // parent
        row.paragraph(this.paragraph());
        const pos = this.index();
        this.paragraph().insertRow(pos,row);
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x5F8C;&#x306B;row&#x3092;&#x633F;&#x5165;&#x3057;&#x307E;&#x3059;
     * @param {Row} row &#x633F;&#x5165;&#x3059;&#x308B;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    after(row) {
        // DOM
        if (this.hasNextSibling()) {
            this.paragraph().elem().insertBefore(row.elem(),this.next().elem());
        } else {
            this.paragraph().elem().appendChild(row.elem());
        }

        // &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
        // this - row - oldNext

        // row
        const oldNext = this.next();
        this.next(row);
        row.prev(this);
        row.next(oldNext);
        if (oldNext !== null) {
            oldNext.prev(row);
        }
        // char
        this.lastChild().next(row.firstChild());
        row.firstChild().prev(this.lastChild());
        if (oldNext !== null) {
            row.lastChild().next(oldNext.firstChild());
            oldNext.firstChild().prev(row.lastChild());
        }
        // parent
        row.paragraph(this.paragraph());
        const pos = this.index() + 1;
        this.paragraph().insertRow(pos,row);
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3057;&#x307E;&#x3059;&#x3002;&#x6587;&#x66F8;&#x6574;&#x5F62;&#x306F;&#x884C;&#x308F;&#x308C;&#x307E;&#x305B;&#x3093;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    remove() {
        // &#x6BB5;&#x843D;&#x306B;&#x81EA;&#x5206;&#x3057;&#x304B;&#x884C;&#x304C;&#x306A;&#x3044;&#x5834;&#x5408;&#x3001;&#x6BB5;&#x843D;&#x3054;&#x3068;&#x524A;&#x9664;&#x3059;&#x308B;
        if (this.isOnlyChild()) {
            this.paragraph().remove();
            return this;
        }

        this.paragraph().elem().removeChild(this.elem());
        // oldPrev - this - oldNext &#x2192;&#x3000;oldPrev - oldNext
        // row
        const oldPrevRow = this.prev();
        const oldNextRow = this.next();
        if (oldPrevRow) {
            oldPrevRow.next(oldNextRow);
        }
        if (oldNextRow) {
            oldNextRow.prev(oldPrevRow);
        }
        // char
        const oldPrevChar = oldPrevRow &amp;&amp; oldPrevRow.lastChild();
        const oldNextChar = oldNextRow &amp;&amp; oldNextRow.firstChild();
        if (oldPrevChar) {
            oldPrevChar.next(oldNextChar);
        }
        if (oldNextChar) {
            oldNextChar.prev(oldPrevChar);
        }

        this.paragraph().deleteRow(this);

        this.next(null);
        this.prev(null);
        this.firstChild().prev(null);
        this.lastChild().next(null);
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3057;&#x3001;&#x6587;&#x66F8;&#x6574;&#x5F62;&#x3092;&#x884C;&#x3044;&#x307E;&#x3059;(&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x524D;&#x306E;&#x884C;&#x3001;&#x524D;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x6B21;&#x306E;&#x884C;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;)
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    delete() {
        // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x52D5;&#x304B;&#x3057;&#x305F;&#x304F;&#x306A;&#x3051;&#x308C;&#x3070;remove()&#x3092;&#x4F7F;&#x3046;
        const oldPrevRow = this.prev();
        const oldNextRow = this.next();

        this.remove();

        // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x524A;&#x9664;&#x884C;&#x306B;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x3001;&#x305D;&#x306E;&#x524D;&#x306E;&#x884C;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;
        if (this.hasCursor()) {
            if (oldPrevRow) {
                this.cursor().moveRow(oldPrevRow);
            } else {
                this.cursor().moveRow(oldNextRow);
            }
        }
        return this;
    }

    /**
     * &#x524D;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x7D42;&#x884C;&#x3068;&#x3057;&#x3066;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;&#x3002;&#x5404;&#x6BB5;&#x843D;&#x6700;&#x521D;&#x306E;&#x884C;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;&#x3067;&#x3059;&#x3002;&#x81EA;&#x8EAB;&#x304C;&#x7A7A;&#x884C;&#x3067;&#x3042;&#x308C;&#x3070;&#x524A;&#x9664;&#x3055;&#x308C;&#x307E;&#x3059;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    moveLastBefore() {
        if (!this.isFirst()) { // &#x5404;&#x6BB5;&#x843D;&#x6700;&#x521D;&#x306E;&#x884C;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;
            return this;
        }
        if (this.paragraph().isFirst()) {
            return this; // &#x6587;&#x7AE0;&#x5148;&#x982D;&#x3067;&#x306F;&#x7121;&#x52B9;
        }

        const prevParagraph = this.paragraph().prev();

        // &#x7A7A;&#x884C;&#x3092;&#x79FB;&#x52D5;&#x3057;&#x3088;&#x3046;&#x3068;&#x3057;&#x305F;&#x6642;&#x306E;&#x51E6;&#x7406;
        if (this.isEmpty()) {
            // &#x524D;&#x306E;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x52D5;&#x305B;&#x305A;&#x524A;&#x9664;&#x3059;&#x308B;
            // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x524D;&#x306E;&#x884C;&#x306E;EOL&#x306B;&#x79FB;&#x52D5;
            this.remove();
            if (this.hasCursor()) {
                prevParagraph.lastChild().EOL().addCursor().setPosMemory();
            }
            return this;
        }

        this.remove(); // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306F;&#x3044;&#x3058;&#x308B;&#x5FC5;&#x8981;&#x306A;&#x3057;
        prevParagraph.append(this);
        return this;
    }

    /**
     * &#x6B21;&#x306E;Row&#x306E;&#x7B2C;&#x4E00;&#x6587;&#x5B57;&#x3092;&#x3001;&#x81EA;&#x3089;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;&#x3002;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;&#x3068;&#x306A;&#x308A;&#x307E;&#x3059;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    bringChar() {
        if (this.isLast()) {
            return this;
        }
        this.next().firstChild().moveLastBefore();
        return this;
    }

    /**
     * &#x6B21;&#x306E;Row&#x306E;&#x6700;&#x521D;&#x306E;num&#x6587;&#x5B57;&#x3092;&#x3001;&#x81EA;&#x3089;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;&#x3002;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x306E;&#x307F;&#x6709;&#x52B9;&#x3068;&#x306A;&#x308A;&#x307E;&#x3059;&#x3002;&#x307E;&#x305F;&#x3001;&#x6587;&#x5B57;&#x540C;&#x58EB;&#x306E;&#x9806;&#x756A;&#x306B;&#x5909;&#x5316;&#x306F;&#x3042;&#x308A;&#x307E;&#x305B;&#x3093;
     * @param {number} num &#x79FB;&#x52D5;&#x3059;&#x308B;&#x6587;&#x5B57;&#x6570;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    bringChars(num) {
        for (let i = 0; i &lt; num; i++) {
            this.bringChar();
        }
        return this;
    }

    /**
     * &#x81EA;&#x5206;&#x306E;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x5B57;&#x3092;&#x3001;&#x6B21;&#x306E;&#x884C;&#x306E;&#x6700;&#x521D;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;&#x3002;&#x6B21;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x65B0;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x307E;&#x3059;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    takeChar() {
        if (!this.hasChar()) { // lastChar()&#x3067;null&#x304C;&#x53D6;&#x5F97;&#x3055;&#x308C;&#x308B;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x3042;&#x308B;&#x305F;&#x3081;
            return this;
        }
        this.lastChar().moveFirstAfter(); // lastChild()&#x3067;&#x306F;&#x6BCE;&#x56DE;EOL&#x304C;&#x53D6;&#x5F97;&#x3055;&#x308C;&#x308B;&#x306E;&#x3067;lastChar()
        return this;
    }

    /**
     * &#x81EA;&#x5206;&#x306E;&#x6700;&#x5F8C;&#x306E;num&#x6587;&#x5B57;&#x3092;&#x3001;&#x6B21;&#x306E;&#x884C;&#x306E;&#x6700;&#x521D;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;&#x3002;&#x6B21;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x65B0;&#x3057;&#x304F;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x307E;&#x3059;
     * @param {number} num &#x79FB;&#x52D5;&#x3059;&#x308B;&#x6587;&#x5B57;&#x6570;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    takeChars(num) {
        for (let i = 0; i &lt; num; i++) {
            this.takeChar();
        }
        return this;
    }

    /**
     * &#x5F15;&#x6570;&#x306E;&#x6587;&#x5B57;&#x5217;&#x304B;&#x3089;&#x4F5C;&#x6210;&#x3055;&#x308C;&#x305F;&#x88C5;&#x98FE;&#x306E;&#x306A;&#x3044;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x81EA;&#x3089;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x8FFD;&#x52A0;&#x3057;&#x307E;&#x3059;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    createPlainContent(str) {
        for (let c of str) {
            this.append(new Char(Char.createPlainCharData(c)));
        }
        return this;
    }

    // --&#x6587;&#x7AE0;&#x6574;&#x7406;

    /**
     * &#x6307;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x3068;&#x7570;&#x306A;&#x308B;&#x6587;&#x5B57;&#x6570;&#x306A;&#x3089;&#x3001;&#x6307;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x306B;&#x5408;&#x308F;&#x305B;&#x3066;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8ABF;&#x7BC0;&#x3057;&#x307E;&#x3059;&#x3002;
     *     &#x6A19;&#x6E96;&#x4EE5;&#x5916;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x306E;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308C;&#x3070;&#x6587;&#x5B57;&#x6570;&#x306F;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x306B;&#x5408;&#x308F;&#x305B;&#x3066;&#x8ABF;&#x6574;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;
     *     &#x307E;&#x305F;&#x3001;&#x81EA;&#x8EAB;&#x304C;&#x7A7A;&#x6BB5;&#x843D;&#x4EE5;&#x5916;&#x3067;&#x306E;&#x7A7A;&#x884C;&#x3067;&#x3042;&#x308C;&#x3070;&#x524A;&#x9664;&#x3057;&#x307E;&#x3059;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    cordinate() {
        if (this.index() &gt; 0 &amp;&amp; this.isEmpty()) {
            return this.delete(); // &#x7A7A;&#x6BB5;&#x843D;&#x4EE5;&#x5916;&#x3067;&#x306E;&#x7A7A;&#x884C;&#x306F;&#x524A;&#x9664;&#x3059;&#x308B;
        }

        const confLen = this.container().strLenOnRow();
        const len = this.charLen();
        if (len &lt; confLen) {
            this.bringChars(confLen - len);
        }

        // &#x591A;&#x3059;&#x304E;&#x308B;&#x6587;&#x5B57;&#x6570;&#x306F;&#x6E1B;&#x3089;&#x3059;
        // &#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x306E;&#x7570;&#x306A;&#x308B;&#x6587;&#x5B57;&#x304C;&#x6DF7;&#x3056;&#x3063;&#x3066;&#x3044;&#x308B;&#x5834;&#x5408;&#x3001;&#x4ED6;&#x306E;&#x884C;&#x3068;&#x9AD8;&#x3055;&#x304C;&#x7570;&#x306A;&#x3063;&#x3066;&#x3057;&#x307E;&#x3046;&#x305F;&#x3081;&#x3001;&#x305D;&#x306E;&#x884C;&#x306E;&#x6587;&#x5B57;&#x3092;&#x5909;&#x3048;&#x308B;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
        const maxSize = confLen * 18; // &#x6A19;&#x6E96;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#xD7;&#x6587;&#x5B57;&#x6570;&#x306E;&#x6570;&#x5024;&#x304C;&#x57FA;&#x6E96;
        let sum = 0;
        for (let array of this.chars().entries()) {
            const char = array[1];
            sum += char.fontSize() === &apos;auto&apos; ? 18 : char.fontSize();
            if (sum &gt; maxSize) {
                const index = array[0];
                this.takeChars(this.charLen() - index);
                return this;
            }
        }
        return this;
    }

    /**
     * &#x884C;&#x5185;&#x306E;&#x7981;&#x5247;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3044;&#x307E;&#x3059;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    checkKinsoku() {
        if (this.isEmpty()) { return this; }
        // &#x884C;&#x982D;&#x306B;&#x3042;&#x308B;&#x3079;&#x304D;&#x3067;&#x306F;&#x306A;&#x3044;&#x3082;&#x306E;
        for (let firstText = this.firstChild().text();
            !this.isFirst() &amp;&amp; /[&#x300D;&#x300F;&#xFF09;&#x3002;&#x3001;&#xFF1F;]/.test(firstText); firstText = this.firstChild().text()) {
                this.firstChild().moveLastBefore();
            }
        // &#x884C;&#x672B;&#x306B;&#x3042;&#x308B;&#x3079;&#x304D;&#x3067;&#x306F;&#x306A;&#x3044;&#x3082;&#x306E;
        for (let lastText = this.lastChar().text();
            !this.isLast() &amp;&amp; /[&#x300C;&#x300E;&#xFF08;]/.test(lastText); lastText = this.lastChar().text()) {
                this.lastChar().moveFirstAfter();
            }
        return this;
    }

    // --Display&#x95A2;&#x4FC2;

    /**
     * &#x81EA;&#x8EAB;&#x3068;&#x5B50;&#x306E;Char&#x3092;&#x8868;&#x793A;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x975E;&#x8868;&#x793A;&#x306B;&#x3057;&#x307E;&#x3059;&#x3002;&#x5185;&#x90E8;&#x306E;&#x6587;&#x5B57;&#x306F;first&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x3067;&#x81EA;&#x8EAB;&#x306B;&#x53CE;&#x307E;&#x308B;&#x6587;&#x5B57;&#x3092;&#x8868;&#x793A;&#x3057;&#x3001;&#x305D;&#x308C;&#x4EE5;&#x5916;&#x306E;&#x6587;&#x5B57;&#x306F;&#x975E;&#x8868;&#x793A;&#x306B;&#x3057;&#x307E;&#x3059;
     * @param {boolean} bDisplay true&#x3067;&#x3042;&#x308C;&#x3070;&#x81EA;&#x8EAB;&#x3092;&#x8868;&#x793A;&#x3057;&#x3001;false&#x3067;&#x975E;&#x8868;&#x793A;&#x306B;&#x3059;&#x308B;
     * @param {number} first &#x81EA;&#x8EAB;&#x5185;&#x90E8;&#x306E;Char&#x3092;&#x4F55;&#x6587;&#x5B57;&#x76EE;&#x304B;&#x3089;&#x8868;&#x793A;&#x3059;&#x308B;&#x304B;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;(&#xFF10;&#x59CB;&#x307E;&#x308A;)
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    display(bDisplay,first) {
        if (!bDisplay) {
            this.elem().classList.remove(&apos;display&apos;);
            return this;
        }

        this.elem().classList.add(&apos;display&apos;);
        const dispHeight = this.height();
        let heightSum = 0;
        for (let array of this.chars().entries()) {
            const index = array[0];
            const char = array[1];
            if (index &lt; first) {
                char.display(false);
                continue;
            }
            const fontHeight = char.fontSize(); // size&#x306E;&#x53D6;&#x5F97;&#x306F;DOM&#x306B;&#x30A2;&#x30AF;&#x30BB;&#x30B9;&#x305B;&#x305A;&#x306B;&#x884C;&#x3063;&#x3066;&#x3044;&#x308B;&#x305F;&#x3081;&#x3001;&#x3053;&#x3053;&#x3067;&#x306F;&#x30EC;&#x30F3;&#x30C0;&#x30EA;&#x30F3;&#x30B0;&#x306F;&#x767A;&#x751F;&#x3057;&#x306A;&#x3044;
            heightSum += fontHeight === &apos;auto&apos; ? 18 : fontHeight;
            char.display(index &gt;= first &amp;&amp; heightSum &lt; dispHeight); // true&#x306B;&#x306A;&#x308C;&#x3070;&#x8868;&#x793A;&#x3001;false&#x306B;&#x306A;&#x308C;&#x3070;&#x975E;&#x8868;&#x793A;
        }
        return this;
    }

    /**
     * &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x57FA;&#x6E96;&#x306B;&#x3057;&#x3066;&#x3001;&#x6587;&#x5B57;&#x3092;&#x4F55;&#x6587;&#x5B57;&#x76EE;&#x304B;&#x3089;&#x8868;&#x793A;&#x3059;&#x3079;&#x304D;&#x304B;&#x306E;&#x8A08;&#x7B97;&#x7D50;&#x679C;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {number} &#x6587;&#x5B57;&#x306E;&#x8868;&#x793A;&#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
     */
    computeDisplayCharPos() {
        const cursorIndex = this.cursorChar().index();
        const currentFirst = this.firstDisplayCharPos();
        const currentEnd = this.lastDisplayCharPos();
        // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x524D;&#x306B;&#x3042;&#x308B;
        if (cursorIndex &lt;= currentFirst) {
            return cursorIndex;
        }
        // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x5F8C;&#x308D;&#x306B;&#x3042;&#x308B;
        if ( cursorIndex &gt; currentEnd) {
            return currentFirst + (cursorIndex - currentEnd);
        }
        return currentFirst;
    }

    /**
     * &#x3053;&#x306E;&#x884C;&#x304C;&#x4F55;&#x6587;&#x5B57;&#x76EE;&#x304B;&#x3089;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {number} EOL&#x542B;&#x3081;&#x6700;&#x521D;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x305F;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3002;&#x6587;&#x5B57;&#x304C;&#x5168;&#x3066;&#x975E;&#x8868;&#x793A;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308C;&#x3070;-1
     */
    firstDisplayCharPos() {
        for (let char of this.children()) {
            if (char.isDisplay()) {
                return char.index();
            }
        }
        return -1; // display&#x304C;&#x3072;&#x3068;&#x3064;&#x3082;&#x306A;&#x3044;(EOL&#x306F;&#x5E38;&#x306B;display&#x306A;&#x306E;&#x3067;&#x3001;&#x3053;&#x3053;&#x307E;&#x3067;&#x6765;&#x305F;&#x3089;&#x7570;&#x5E38;)
    }

    /**
     * &#x3053;&#x306E;&#x884C;&#x304C;&#x4F55;&#x6587;&#x5B57;&#x76EE;&#x307E;&#x3067;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {number} EOL&#x542B;&#x3081;&#x6700;&#x5F8C;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x305F;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3002;&#x6587;&#x5B57;&#x304C;&#x5168;&#x3066;&#x975E;&#x8868;&#x793A;&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308C;&#x3070;-1
     */
    lastDisplayCharPos() {
        if (!this.hasChar) {
            return 0;
        }
        for (let i = this.charLen()-1,char; (char = this.chars(i)); i--) {
            if (char.isDisplay()) {
                return char.next().isEOL() ? i + 1 : i; // &#x3059;&#x3079;&#x3066;&#x306E;&#x6587;&#x5B57;&#x304C;display&#x3057;&#x3066;&#x3044;&#x308C;&#x3070;EOL&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
            }
        }
        return -1;
    }

    // --&#x30A4;&#x30D9;&#x30F3;&#x30C8;

    /**
     * &#x884C;&#x306E;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x5B9F;&#x884C;&#x5185;&#x5BB9;&#x3067;&#x3059;&#x3002;&#x884C;&#x3092;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3059;&#x308B;&#x3068;&#x6700;&#x3082;&#x8FD1;&#x3044;&#x6587;&#x5B57;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x5F53;&#x305F;&#x308A;&#x307E;&#x3059;
     * @param {Event} e &#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
     */
    runClick(e) {
        if (this.container().inputBuffer().isDisplay()) {
            return;
        }

        const clickX = e.pageX;
        const clickY = e.pageY;
        let min = Number.MAX_VALUE;
        let closestChar;

        for (let char of this.children()) {
            const distance = char.computeDistanceFromPoint(clickX,clickY);
            if (distance &lt; min) {
                min = distance;
                closestChar = char;
            }
        }
        closestChar.slidePrevCursor().addCursor().setPosMemory();
    }

    // --&#x9759;&#x7684;&#x30E1;&#x30BD;&#x30C3;&#x30C9;

    /**
     * &#x7A7A;&#x884C;&#x306E;Row&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x65B0;&#x305F;&#x306B;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3059;
     * @return {Row} &#x4F5C;&#x6210;&#x3055;&#x308C;&#x305F;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    static createEmptyRow() {
        return new Row([]);
    }

    // -- other

    /**
     * &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x3067;&#x81EA;&#x5206;&#x4EE5;&#x964D;&#x306E;&#x884C;&#x306B;&#x51E6;&#x7406;&#x3092;&#x884C;&#x3044;&#x307E;&#x3059;&#x3002;
     *     &#x51E6;&#x7406;&#x4E2D;&#x306B;&#x540C;&#x4E00;&#x6BB5;&#x843D;&#x306E;&#x884C;&#x3067;&#x306A;&#x304F;&#x306A;&#x3063;&#x305F;&#x306A;&#x3069;&#x3057;&#x3066;&#x3082;&#x5F71;&#x97FF;&#x305B;&#x305A;&#x3001;&#x5B9F;&#x884C;&#x6642;&#x6642;&#x70B9;&#x3067;&#x51E6;&#x7406;&#x5BFE;&#x8C61;&#x3067;&#x3042;&#x3063;&#x305F;&#x884C;&#x3059;&#x3079;&#x3066;&#x304C;&#x51E6;&#x7406;&#x3055;&#x308C;&#x307E;&#x3059;&#x306E;&#x3067;&#x6CE8;&#x610F;&#x3057;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;
     * @param {function} func &#x51E6;&#x7406;&#x304C;&#x5B9A;&#x7FA9;&#x3055;&#x308C;&#x305F;&#x95A2;&#x6570;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
     * @return {Row} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    afterEach(func) {
        const index = this.index();
        let cnt = 0;
        for (let row of this.paragraph().rows()) {
            if (cnt &gt;= index) {
                func(row);
            }
            cnt++;
        }
        return this;
    }
}//}}}


/**
 * &#x6BB5;&#x843D;&#x3092;&#x8868;&#x3059;&#x30AF;&#x30E9;&#x30B9;
 */
export class Paragraph extends AbstractHierarchy {
    //{{{
    /**
     * @param {object} data &#x6BB5;&#x843D;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&lt;br&gt;
     * &#x4F8B;
     * &lt;pre&gt;
     * &lt;code&gt;
     *  // &#x6BB5;&#x843D;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x3068;&#x5404;&#x6587;&#x5B57;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x914D;&#x5217;&#x306E;&#x5165;&#x3063;&#x305F;&#x914D;&#x5217;
     *	[
     *		[&quot;decolation-textalign-center&quot;],		 // &#x6BB5;&#x843D;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x304C;&#x6587;&#x5B57;&#x5217;&#x306E;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
     *		[												 // &#x5404;&#x6587;&#x5B57;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
     *			{											 // &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
     *				&quot;char&quot;:&quot;&#x3042;&quot;,
     *				&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
     *				&quot;fontSize&quot;:&quot;auto&quot;
     *			},
     *			{
     *				&quot;char&quot;:&quot;&#x3044;&quot;,
     *				&quot;decolation&quot;:[]
     *				&quot;fontSize&quot;:&quot;30&quot;
     *			}
     *			]
     *	]
     *	&lt;/code&gt;
     *	&lt;/pre&gt;
     */
    constructor(data) {
        super(ElemCreator.createParagraphElement(data));
        const strLen = 40;
        const spArray = Util.splitArray(data[1],strLen); // data[1]&#x304C;&#x7A7A;&#x914D;&#x5217;&#x306A;&#x3089;&#x3001;spArray&#x306B;&#x3082;&#x7A7A;&#x914D;&#x5217;&#x304C;&#x5165;&#x308B;
        for (let charArray of spArray) {
            this.append(new Row(charArray));
        }
        // data[1]&#x304C;&#x7A7A;&#x914D;&#x5217; = &#x7A7A;&#x6BB5;&#x843D;(&#x7A7A;&#x884C;)&#x306E;&#x5834;&#x5408;&#x306F;&#x4E0A;&#x8A18;for&#x6587;&#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x5225;&#x306B;&#x7A7A;&#x884C;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x3066;&#x9023;&#x7D50;&#x3059;&#x308B;
        if (spArray.length === 0) {
            this.append(Row.createEmptyRow());
        }
    }

    // --&#x53C2;&#x7167;&#x53D6;&#x5F97;

    /**
     * &#x89AA;&#x306E;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x3092;&#x8A2D;&#x5B9A;&#x3001;&#x307E;&#x305F;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @param {SentenceContainer} [opt_newContainer] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;&#x81EA;&#x8EAB;&#x306E;&#x5C5E;&#x3059;&#x308B;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Paragraph SentenceContainer} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x81EA;&#x8EAB;&#x306E;&#x89AA;&#x306E;&#x6587;&#x7AE0;&#x30B3;&#x30F3;&#x30C6;&#x30CA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    container(opt_newContainer) {
        return this.parent(opt_newContainer);
    }

    /**
     * &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @param {number} [opt_index] &#x53D6;&#x5F97;&#x3059;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
     * @return {Row Row[]} &#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x884C;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5B50;&#x306E;&#x914D;&#x5217;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
     */
    rows(opt_index) {
        return this.children(opt_index);
    }

    // --&#x5224;&#x5B9A;

    /**
     * &#x81EA;&#x8EAB;&#x304C;&#x5185;&#x90E8;&#x306B;&#x884C;&#x3092;&#x6301;&#x3063;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x81EA;&#x8EAB;&#x304C;&#x5B50;&#x3092;&#x6301;&#x3063;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    hasRow() {
        return this.hasChild();
    }

    /**
     * &#x81EA;&#x8EAB;&#x304C;&#x7A7A;&#x6BB5;&#x843D;&#x3067;&#x3042;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;&#x3002;
     *     &#x7A7A;&#x884C;&#x304C;&#x3072;&#x3068;&#x3064;&#x3060;&#x3051;&#x3042;&#x3063;&#x3066;&#x3082;true&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;(&#x7A7A;&#x884C;&#x306F;&#x7A7A;&#x6BB5;&#x843D;&#x306B;&#x3057;&#x304B;&#x5B58;&#x5728;&#x3057;&#x306A;&#x3044;&#x306E;&#x304C;&#x6B63;&#x5E38;&#x3067;&#x3042;&#x308B;&#x305F;&#x3081;)
     * @return {boolean} &#x5185;&#x90E8;&#x306B;&#x884C;&#x304C;&#x5B58;&#x5728;&#x3057;&#x306A;&#x3044;&#x304B;&#x3001;&#x7A7A;&#x884C;&#x304C;&#x4E00;&#x3064;&#x3060;&#x3051;&#x306A;&#x3089;true
     */
    isEmpty() {
        return !this.hasChild() || this.firstChild().isEmpty();
    }

    /**
     * &#x6BB5;&#x843D;&#x5185;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @return {boolean} &#x6BB5;&#x843D;&#x5185;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    hasCursor() {
        for (let row of this.rows()) {
            if (row.hasCursor()) {
                return true;
            }
        }
        return false;
    }

    /**
     * &#x5F15;&#x6570;&#x3067;&#x6E21;&#x3055;&#x308C;&#x305F;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x6BB5;&#x843D;&#x5185;&#x306B;&#x3042;&#x308B;&#x884C;&#x304B;&#x6587;&#x5B57;&#x306E;&#x3044;&#x305A;&#x308C;&#x304B;&#x306B;&#x4E00;&#x81F4;&#x3059;&#x308B;&#x304B;&#x3069;&#x3046;&#x304B;&#x3092;&#x8FD4;&#x3057;&#x307E;&#x3059;
     * @param {AbstractHierarchy} obj &#x5224;&#x5B9A;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {boolean} &#x5F15;&#x6570;&#x3067;&#x6E21;&#x3055;&#x308C;&#x305F;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x6BB5;&#x843D;&#x5185;&#x306B;&#x3042;&#x308B;&#x884C;&#x304B;&#x6587;&#x5B57;&#x306E;&#x3044;&#x305A;&#x308C;&#x304B;&#x306B;&#x4E00;&#x81F4;&#x3059;&#x308B;&#x3068;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false
     */
    contains(obj) {
        for (let row of this.rows()) {
            if (row.is(obj)) {
                return true;
            }
            if (row.contains(obj)) {
                return true;
            }
        }
        return false;
    }

    // --&#x53C2;&#x7167;&#x64CD;&#x4F5C;

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6700;&#x5F8C;&#x306B;row&#x3092;&#x52A0;&#x3048;&#x307E;&#x3059;
     * @param {Row} row &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x52A0;&#x3048;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    pushRow(row) {
        return this.pushChild(row);
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x306E;&#x6307;&#x5B9A;&#x3055;&#x308C;&#x305F;&#x4F4D;&#x7F6E;&#x306B;row&#x3092;&#x633F;&#x5165;&#x3057;&#x307E;&#x3059;
     * @param {number} pos row&#x3092;&#x633F;&#x5165;&#x3059;&#x308B;&#x4F4D;&#x7F6E;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;
     * @param {Row} row &#x633F;&#x5165;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    insertRow(pos, row) {
        return this.insertChild(pos,row);
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x5B50;&#x304B;&#x3089;row&#x3092;&#x524A;&#x9664;&#x3057;&#x307E;&#x3059;
     * @param {Row} row &#x524A;&#x9664;&#x3059;&#x308B;&#x5B50;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    deleteRow(row) {
        return this.deleteChild(row);
    }

    // --Status

    /**
     * &#x3053;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3059;
     * @return {object[]} &#x3053;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x72B6;&#x614B;&#x3092;&#x8868;&#x3059;&#x898F;&#x5B9A;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
     */
    data() {
        const data = [];
        data[0] = this.classArray();
        const charArray = [];
        for (let row of this.rows()) {
            for (let char of row.chars()) {
                charArray.push(char.data());
            }
        }
        data[1] = charArray;
        return data;
    }

    /**
     * &#x3053;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x88C5;&#x98FE;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x6587;&#x5B57;&#x5217;&#x306E;&#x914D;&#x5217;&#x306B;&#x3057;&#x307E;&#x3059;
     * @return {string[]} &#x88C5;&#x98FE;&#x95A2;&#x4FC2;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3002;&#x306A;&#x3051;&#x308C;&#x3070;&#x7A7A;&#x306E;&#x914D;&#x5217;
     */
    classArray() {
        return this.elem().className.match(/decolation-\S+/g) || [];
    }

    /**
     * &#x6BB5;&#x843D;&#x5185;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3092;&#x6570;&#x3048;&#x307E;&#x3059;
     * @return {number} &#x6BB5;&#x843D;&#x5185;&#x306E;&#x6587;&#x5B57;&#x6570;
     */
    countChar() {
        let cnt = 0;
        for (let row of this.rows()) {
            cnt += row.charLen();
        }
        return cnt;
    }

    // --Style

    /**
     * &#x6BB5;&#x843D;&#x306B;text-align&#x3092;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x7701;&#x7565;&#x3067;&#x73FE;&#x5728;&#x306E;text-align&#x306E;&#x72B6;&#x614B;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
     * @param {string boolean} [opt_align] &#x65B0;&#x305F;&#x306B;&#x8A2D;&#x5B9A;&#x3059;&#x308B;&apos;left&apos;,&apos;center&apos;,&apos;right&apos;&#x306E;&#x6587;&#x5B57;&#x5217;&#x3002;
     *     &apos;left&apos;&#x3042;&#x308B;&#x3044;&#x306F;false&#x306A;&#x3089;align&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
     * @return {Paragraph string} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;(&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3057;&#x305F;&#x5834;&#x5408;)&#x3001;
     *     &#x3042;&#x308B;&#x3044;&#x306F;&#x73FE;&#x5728;&#x306E;text-align&#x306E;&#x72B6;&#x614B;(&#x5F15;&#x6570;&#x3092;&#x7701;&#x7565;&#x3057;&#x305F;&#x5834;&#x5408;)
     */
    align(opt_align) {
        if (opt_align === undefined) {
            const align = this.className().match(/decolation-textalign-(\S+)/);
            return align ? align[1] : &apos;left&apos;;
        }

        const oldAlign = this.className().match(/decolation-textalign-\S+/);
        if (oldAlign) {
            this.removeClass(oldAlign[0]);
        }

        if (opt_align &amp;&amp; opt_align !== &apos;left&apos;) {
            this.addClass(&apos;decolation-textalign-&apos;+ opt_align);
        }
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x3059;&#x3079;&#x3066;&#x306E;Char&#x304B;&#x3089;&#x6307;&#x5B9A;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x9664;&#x53BB;&#x3057;&#x307E;&#x3059;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    removeClassFromAllChar(className) {
        for (let row of this.rows()) {
            row.removeClassFromAllChild(className);
        }
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x6587;&#x5B57;&#x306B;str&#x3068;&#x5408;&#x81F4;&#x3059;&#x308B;&#x6587;&#x5B57;&#x5217;&#x304C;&#x3042;&#x308C;&#x3070;search-label&#x30AF;&#x30E9;&#x30B9;&#x3068;search-word&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3057;&#x307E;&#x3059;
     * @param {string} str &#x5224;&#x5B9A;&#x3059;&#x308B;&#x6587;&#x5B57;&#x5217;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    search(str) {
        this.removeClassFromAllChar(&apos;search-label&apos;);
        this.removeClassFromAllChar(&apos;search-word&apos;);
        for (let row of this.rows()) {
            for (let char of row.chars()) {
                char.markSearchPhrase(str);
            }
        }
        return this;
    }

    // --DOM&#x64CD;&#x4F5C;&#x95A2;&#x4FC2;

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x6700;&#x5F8C;&#x306B;row&#x3092;&#x8FFD;&#x52A0;&#x3057;&#x307E;&#x3059;
     * @param {Row} row &#x8FFD;&#x52A0;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    append(row) {
        this.elem().appendChild(row.elem());
        row.paragraph(this);
        const nextParagraph = this.next();
        // row&#x306E;&#x5F8C;&#x5074;&#x63A5;&#x7D9A;
        if (nextParagraph) {
            // row
            const nextRow = nextParagraph.firstChild();
            nextRow.prev(row);
            row.next(nextRow);
            // char
            nextRow.firstChild().prev(row.lastChild());
            row.lastChild().next(nextRow.firstChild());
        }

        // row&#x306E;&#x524D;&#x5074;&#x63A5;&#x7D9A;
        // &#x81EA;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x7D42;&#x884C;&#x3000;&#x2192;&#x3000;&#x524D;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x7D42;&#x884C;&#x3000;&#x2192;&#x3000;null
        const oldLastRow = this.hasRow() ?
            this.lastChild() : (this.prev() ? this.prev().lastChild() : null);

        this.pushRow(row);
        if (oldLastRow === null) {
            // &#x4E00;&#x884C;&#x3082;&#x5B58;&#x5728;&#x3057;&#x306A;&#x3044;&#x72B6;&#x614B;&#x304B;&#x3089;&#x306E;append
            return this;
        }
        // row
        oldLastRow.next(row);
        row.prev(oldLastRow);
        // char
        oldLastRow.lastChild().next(row.firstChild());
        row.firstChild().prev(oldLastRow.lastChild());

        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x306E;&#x76F4;&#x5F8C;&#x306B;paragraph&#x3092;&#x633F;&#x5165;&#x3057;&#x307E;&#x3059;
     * @param {Paragraph} paragraph &#x633F;&#x5165;&#x3059;&#x308B;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    after(paragraph) {
        // DOM
        if (this.hasNextSibling()) {
            this.container().elem().insertBefore(paragraph.elem(),this.next().elem());
        } else {
            this.container().elem().appendChild(paragraph.elem());
        }

        // &#x30DD;&#x30A4;&#x30F3;&#x30BF;&#x8ABF;&#x6574;
        // this - paragraph - oldNext

        // paragraph
        const oldNext = this.next();
        this.next(paragraph);
        paragraph.prev(this);
        paragraph.next(oldNext);
        if (oldNext) {
            oldNext.prev(paragraph);
        }
        // row
        this.lastChild().next(paragraph.firstChild());
        paragraph.firstChild().prev(this.lastChild());
        if (oldNext) {
            paragraph.lastChild().next(oldNext.firstChild());
            oldNext.firstChild().prev(paragraph.lastChild());
        }
        // char
        this.lastChild().lastChild().next(paragraph.firstChild().firstChild());
        paragraph.firstChild().firstChild().prev(this.lastChild().lastChild());
        if (oldNext) {
            paragraph.lastChild().lastChild().next(oldNext.firstChild().firstChild());
            oldNext.firstChild().firstChild().prev(paragraph.lastChild().lastChild());
        }
        // parent
        paragraph.container(this.container());
        const pos = this.index() + 1;
        this.container().insertParagraph(pos,paragraph);
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3057;&#x307E;&#x3059;&#x3002;&#x6587;&#x66F8;&#x6574;&#x5F62;&#x306F;&#x884C;&#x308F;&#x308C;&#x307E;&#x305B;&#x3093;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    remove() {
        this.container().elem().removeChild(this.elem());
        // oldPrev - this - oldNext &#x2192;&#x3000;oldPrev - oldNext

        // paragraph
        // oldPrevParagraph - oldNextParagraph
        const oldPrevParagraph = this.prev();
        const oldNextParagraph = this.next();
        if (oldPrevParagraph) {
            oldPrevParagraph.next(oldNextParagraph);
        }
        if (oldNextParagraph) {
            oldNextParagraph.prev(oldPrevParagraph);
        }

        // row
        // oldPrevParagraph.lastChild() - oldNextParagraph.firstChild();
        // oldPrevRow - oldNextRow
        const oldPrevRow = oldPrevParagraph &amp;&amp; oldPrevParagraph.lastChild();
        const oldNextRow = oldNextParagraph &amp;&amp; oldNextParagraph.firstChild();
        if (oldPrevRow) {
            oldPrevRow.next(oldNextRow);
        }
        if (oldNextRow) {
            oldNextRow.prev(oldPrevRow);
        }

        // char
        // oldPrevRow.lastChild() - oldNextRow.lastChild();
        // oldPrevChar - oldNextChar
        const oldPrevChar = oldPrevRow &amp;&amp; oldPrevRow.lastChild();
        const oldNextChar = oldNextRow &amp;&amp; oldNextRow.firstChild();
        if (oldPrevChar) {
            oldPrevChar.next(oldNextChar);
        }
        if (oldNextChar) {
            oldNextChar.prev(oldPrevChar);
        }

        this.container().deleteParagraph(this);
        if (this.prev(null).firstChild()) {
            if (this.firstChild().prev(null).firstChild()) {
                this.firstChild().firstChild().prev(null);
            }
        }
        if (this.next(null).lastChild()) {
            if (this.lastChild().next(null).lastChild()) {
                this.lastChild().lastChild().next(null);
            }
        }
        return this;
    }

    /**
     * &#x81EA;&#x8EAB;&#x3092;&#x524A;&#x9664;&#x3057;&#x3001;&#x6587;&#x66F8;&#x3092;&#x6574;&#x5F62;&#x3057;&#x307E;&#x3059;(&#x5185;&#x90E8;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308C;&#x3070;&#x76F4;&#x524D;&#x306E;&#x884C;&#x306B;&#x5E73;&#x884C;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;&#x3002;&#x76F4;&#x524D;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x76F4;&#x5F8C;&#x306E;&#x884C;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x307E;&#x3059;)
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    delete() {
        const oldPrevRow = this.prev() &amp;&amp; this.prev().lastChild();
        const oldNextRow = this.next() &amp;&amp; this.next().firstChild();

        this.remove();

        if (this.hasCursor()) {
            if (oldPrevRow) {
                this.cursor().moveRow(oldPrevRow);
            } else { // &#x76F4;&#x524D;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x76F4;&#x5F8C;
                this.cursor().moveRow(oldNextRow);
            }
        }
        return this;
    }

    /**
     * &#x6E21;&#x3055;&#x308C;&#x305F;&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x3092;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x3066;&#x3001;&#x6BB5;&#x843D;&#x3092;&#xFF12;&#x3064;&#x306B;&#x5206;&#x3051;&#x307E;&#x3059;
     * @param {Char} char &#x6BB5;&#x843D;&#x5206;&#x5272;&#x306E;&#x57FA;&#x6E96;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    divide(char) {
        /*
         *
         * &#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x3001;&#x57FA;&#x6E96;&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x3092;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;
         *  &#x57FA;&#x6E96;&#x6587;&#x5B57;&#x306E;&#x5C5E;&#x3057;&#x3066;&#x3044;&#x305F;&#x884C;&#x4EE5;&#x964D;&#x306E;&#x540C;&#x6BB5;&#x843D;&#x306E;&#x884C;&#x3092;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3002;
         *  &#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x3092;&#x57FA;&#x6E96;&#x6587;&#x5B57;&#x306E;&#x3042;&#x3063;&#x305F;&#x6BB5;&#x843D;&#x306E;&#x76F4;&#x5F8C;&#x306B;&#x633F;&#x5165;&#x3059;&#x308B;&#x3002;cordinate()&#x3067;&#x6587;&#x5B57;&#x306E;&#x8ABF;&#x6574;&#x3092;&#x884C;&#x3046;
         *
         *  &#x6BB5;&#x843D;&#x5148;&#x982D;&#x304B;&#x3089;:&#x4E00;&#x884C;&#x76EE;&#x306E;&#x6587;&#x5B57;&#x304C;&#x4E38;&#x3005;&#x65B0;&#x3057;&#x3044;&#x884C;&#x306B;&#x79FB;&#x3063;&#x3066;&#x6B21;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x4E00;&#x884C;&#x76EE;&#x3068;&#x306A;&#x308B;&#x3002;
         *               &#x4E8C;&#x884C;&#x76EE;&#x4EE5;&#x964D;&#x306F;&#x884C;&#x3054;&#x3068;&#x6B21;&#x306E;&#x6BB5;&#x843D;&#x3078;
         *               &#x2192;&#x3000;&#x57FA;&#x6E96;&#x6587;&#x5B57;&#x306E;&#x3042;&#x3063;&#x305F;&#x884C;&#x306F;&#x7A7A;&#x884C;&#x3068;&#x306A;&#x308A;&#x3082;&#x3068;&#x3082;&#x3068;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x552F;&#x4E00;&#x306E;&#x884C;&#x3068;&#x306A;&#x308B;&#x305F;&#x3081;&#x3001;
         *                   &#x3042;&#x305F;&#x304B;&#x3082;&#x7A7A;&#x6BB5;&#x843D;&#x304C;&#x57FA;&#x6E96;&#x884C;&#x306E;&#x524D;&#x306B;&#x633F;&#x5165;&#x3055;&#x308C;&#x305F;&#x3088;&#x3046;&#x306B;&#x306A;&#x308B;
         *  &#x884C;&#x982D;&#x304B;&#x3089;:&#x57FA;&#x6E96;&#x884C;&#x306E;&#x6587;&#x5B57;&#x304C;&#x307E;&#x308B;&#x307E;&#x308B;&#x65B0;&#x3057;&#x3044;&#x884C;&#x306B;&#x79FB;&#x3063;&#x3066;&#x6B21;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x4E00;&#x884C;&#x76EE;&#x306B;&#x306A;&#x308B;&#x3002;
         *           &#x57FA;&#x6E96;&#x884C;&#x4EE5;&#x964D;&#x306E;&#x884C;&#x306F;&#x884C;&#x3054;&#x3068;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x308B;&#x3002;
         *           &#x2192;&#x3000;&#x57FA;&#x6E96;&#x884C;&#x4EE5;&#x964D;&#x304C;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x308A;&#x3001;&#x305D;&#x308C;&#x4EE5;&#x524D;&#x306E;&#x884C;&#x306F;&#x3082;&#x3068;&#x3082;&#x3068;&#x306E;&#x6BB5;&#x843D;&#x306B;&#x6B8B;&#x308B;&#x305F;&#x3081;&#x3001;&#x6BB5;&#x843D;&#x304C;&#xFF12;&#x3064;&#x306B;&#x5225;&#x308C;&#x308B;&#x3002;
         *           &#x3053;&#x306E;&#x6642;&#x70B9;&#x3067;&#x306F;&#x3001;&#x3082;&#x3068;&#x3082;&#x3068;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x7A7A;&#x884C;&#x304C;&#x6B8B;&#x3063;&#x3066;&#x3044;&#x308B;&#x72B6;&#x614B;&#x306A;&#x306E;&#x3067;&#x3001;cordinate()&#x3067;&#x5BFE;&#x5FDC;&#x3059;&#x308B;
         *  &#x884C;&#x306E;&#x9014;&#x4E2D;&#x304B;&#x3089;:&#x57FA;&#x6E96;&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x306E;&#x540C;&#x3058;&#x884C;&#x306E;&#x6587;&#x5B57;&#x304C;&#x65B0;&#x3057;&#x3044;&#x884C;&#x306B;&#x79FB;&#x3063;&#x3066;&#x6B21;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x4E00;&#x884C;&#x76EE;&#x306B;&#x306A;&#x308B;&#x3002;
         *               &#x305D;&#x308C;&#x4EE5;&#x964D;&#x306F;&#x884C;&#x3054;&#x3068;&#x6B21;&#x306E;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x308B;&#x3002;
         *               &#x2192;&#x3000;&#x57FA;&#x6E96;&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x304C;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x306A;&#x308B;&#x3002;&#x3053;&#x306E;&#x6642;&#x70B9;&#x3067;&#x306F;&#x4E00;&#x884C;&#x76EE;&#x306E;&#x6587;&#x5B57;&#x6570;&#x304C;&#x304A;&#x304B;&#x3057;&#x3044;&#x306E;&#x3067;&#x3001;cordinate()&#x3067;&#x8ABF;&#x6574;&#x3059;&#x308B;
         *  &#x6BB5;&#x843D;&#x6700;&#x5F8C;&#x306E;EOL&#x304B;&#x3089;: &#x57FA;&#x6E96;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x304C;&#x540C;&#x4E00;&#x884C;&#x306E;&#x4ED6;&#x306E;&#x6587;&#x5B57;&#x3088;&#x308A;&#x5927;&#x304D;&#x3044;&#x305F;&#x3081;&#x3001;afterEach()&#x304C;&#x4E00;&#x5EA6;&#x3082;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x306A;&#x3044;&#x3002;
         *                     &#x6B21;&#x306E;&#x884C;&#x3082;&#x5B58;&#x5728;&#x3057;&#x306A;&#x3044;&#x306E;&#x3067;nextRow&#x304C;&#x5B58;&#x5728;&#x305B;&#x305A;&#x3001;nextRow.afterEach()&#x306F;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x306A;&#x3044;&#x3002;
         *                     &#x305F;&#x3060;&#x3057;&#x3001;&#x65B0;&#x3057;&#x3044;&#x884C;&#x306F;newParagraph&#x3092;&#x4F5C;&#x6210;&#x3057;&#x305F;&#x6642;&#x70B9;&#x3067;&#x5B58;&#x5728;&#x3057;&#x3066;&#x3044;&#x308B;&#x3002;
         *                     &#x2192;&#x3000;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x304C;&#x4ECA;&#x3044;&#x308B;&#x6BB5;&#x843D;&#x306E;&#x5F8C;&#x308D;&#x306B;&#x8FFD;&#x52A0;&#x3055;&#x308C;&#x308B;&#x3060;&#x3051;
         */
        if (!this.contains(char)) {
            return this;
        }
        const paragraph = char.row().paragraph();
        // &#x4F5C;&#x6210;&#x6642;&#x70B9;&#x3067;&#x7A7A;&#x884C;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x308B; &#x6BB5;&#x843D;&#x306B;&#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x30A2;&#x30E9;&#x30A4;&#x30F3;&#x304C;&#x4ED8;&#x4E0E;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x3001;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x3082;&#x540C;&#x69D8;&#x306B;&#x3059;&#x308B;
        const newParagraph = Paragraph.createEmptyParagraph().align(paragraph.align());
        const nextRow = char.row().hasNextSibling() ? char.row().next() : null; // &#x3053;&#x306E;&#x884C;&#x4EE5;&#x964D;&#x3092;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x52D5;
        // &#x4E00;&#x884C;&#x76EE;
        // &#x57FA;&#x6E96;&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x3092;&#x65B0;&#x3057;&#x3044;&#x884C;&#x306B;&#x79FB;&#x3057;&#x3001;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x633F;&#x5165;&#x3059;&#x308B;
        // &#x5143;&#x3005;&#x306E;&#x884C;&#x306F;&#x7A7A;&#x306B;&#x306A;&#x3063;&#x3066;&#x3082;&#x305D;&#x306E;&#x307E;&#x307E;
        const newRow = newParagraph.firstChild();
        char.afterEach(function (c) {
            c.remove();
            newRow.append(c);
        });

        // &#x4E8C;&#x884C;&#x76EE;&#x4EE5;&#x964D;
        // &#x884C;&#x3054;&#x3068;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x52D5;
        if (nextRow) {
            nextRow.afterEach(function (row) {
                row.remove();
                newParagraph.append(row);
            });
        }

        this.after(newParagraph);
        paragraph.cordinate().checkKinsoku();
        newParagraph.cordinate().checkKinsoku();
        return this;
    }

    // --&#x6587;&#x7AE0;&#x6574;&#x7406;

    /**
     * &#x5185;&#x90E8;&#x884C;&#x304C;&#x6307;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x3068;&#x7570;&#x306A;&#x308B;&#x6587;&#x5B57;&#x6570;&#x306A;&#x3089;&#x3001;&#x6307;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x306B;&#x5408;&#x308F;&#x305B;&#x3066;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8ABF;&#x7BC0;&#x3057;&#x307E;&#x3059;&#x3002;
     *     &#x6A19;&#x6E96;&#x4EE5;&#x5916;&#x306E;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x306E;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308C;&#x3070;&#x6587;&#x5B57;&#x6570;&#x306F;&#x305D;&#x306E;&#x30B5;&#x30A4;&#x30BA;&#x306B;&#x5408;&#x308F;&#x305B;&#x3066;&#x8ABF;&#x6574;&#x3055;&#x308C;&#x307E;&#x3059;&#x3002;
     *     &#x307E;&#x305F;&#x3001;&#x81EA;&#x8EAB;&#x304C;&#x7A7A;&#x6BB5;&#x843D;&#x3067;&#x306F;&#x306A;&#x304F;&#x5185;&#x90E8;&#x306B;&#x7A7A;&#x884C;&#x304C;&#x3042;&#x308C;&#x3070;&#x524A;&#x9664;&#x3057;&#x307E;&#x3059;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    cordinate() {
        // &#x30A8;&#x30E9;&#x30FC;&#x539F;&#x56E0;&#x307E;&#x3068;&#x3081;
        // &#x3053;&#x3053;&#x3067;&#x4E00;&#x65E6;rows()&#x306E;&#x5185;&#x5BB9;&#x304C;&#x4FDD;&#x5B58;&#x3055;&#x308C;&#x3001;&#x305D;&#x3053;&#x304B;&#x3089;&#x4E00;&#x3064;&#x4E00;&#x3064;row&#x3092;&#x53D6;&#x308A;&#x51FA;&#x3059;(rows()&#x306F;&#x30B3;&#x30D4;&#x30FC;&#x3055;&#x308C;&#x305F;&#x914D;&#x5217;&#x304C;&#x8FD4;&#x3055;&#x308C;&#x308B;)
        // row.cordinate()&#x5185;&#x306E;bringChar()&#x306B;&#x3088;&#x3063;&#x3066;&#x3001;&#x6700;&#x7D42;&#x884C;&#x304C;&#x524A;&#x9664;&#x3055;&#x308C;&#x308B;&#x3053;&#x3068;&#x304C;&#x3042;&#x308B;
        // &#x524A;&#x9664;&#x3055;&#x308C;&#x305F;&#x6700;&#x7D42;&#x884C;&#x3067;&#x3082;&#x3001;&#x5148;&#x306B;&#x4FDD;&#x5B58;&#x3055;&#x308C;&#x3066;&#x3044;&#x305F;&#x305F;&#x3081;row.cordinate()&#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B;
        // &#x524A;&#x9664;&#x884C;&#x306E;&#x53C2;&#x7167;&#x306F;&#x4FDD;&#x6301;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;cordinate()&#x306F;&#x30A8;&#x30E9;&#x30FC;&#x304C;&#x8D77;&#x304D;&#x305A;&#x306B;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B;
        // &#x305F;&#x3060;&#x3057;remove()&#x3055;&#x308C;&#x305F;&#x6642;&#x306B;parent&#x306B;null&#x304C;&#x4EE3;&#x5165;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;&#x5185;&#x90E8;&#x3067;paragraph().container()&#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x308B;&#x3068;&#x304D;&#x306B;NullPointer
        for (let row of this.rows()) {
            if (!row.paragraph()) {
                continue; // cordinate()&#x5185;&#x3067;&#x884C;&#x304C;&#x524A;&#x9664;&#x3055;&#x308C;&#x305F;&#x5834;&#x5408;&#x306E;&#x5BFE;&#x7B56;
            }
            row.cordinate();
        }
        return this;
    }

    /**
     * &#x6BB5;&#x843D;&#x5185;&#x306B;&#x7981;&#x5247;&#x51E6;&#x7406;&#x3092;&#x65BD;&#x3057;&#x307E;&#x3059;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    checkKinsoku() {
        for (let row of this.rows()) {
            if (!row.paragraph()) {
                continue;
            }
            row.checkKinsoku();
        }
        return this;
    }

    /**
     * &#x5185;&#x90E8;&#x306B;&#x3042;&#x308B;&#x3059;&#x3079;&#x3066;&#x306E;&#x884C;&#x306E;&#x8868;&#x793A;&#x975E;&#x8868;&#x793A;&#x3092;&#x5207;&#x308A;&#x66FF;&#x3048;&#x307E;&#x3059;
     * @param {boolean} bDisplay &#x8868;&#x793A;&#x3059;&#x308B;&#x306A;&#x3089;true&#x3001;&#x305D;&#x3046;&#x3067;&#x306A;&#x3051;&#x308C;&#x3070;false&#x3092;&#x6307;&#x5B9A;&#x3059;&#x308B;
     * @return {Paragraph} &#x81EA;&#x8EAB;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    display(bDisplay) {
        for (let row of this.rows()) {
            row.display(bDisplay);
        }
        return this;
    }

    /**
     * &#x7A7A;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x65B0;&#x305F;&#x306B;&#x4F5C;&#x6210;&#x3057;&#x307E;&#x3059;
     * @return {Paragraph} &#x7A7A;&#x6BB5;&#x843D;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;
     */
    static createEmptyParagraph() {
        const arg = [];
        arg[0] = [];
        arg[1] = [];
        return new Paragraph(arg);
    }
}//}}}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
