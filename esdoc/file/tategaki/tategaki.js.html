<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">tategaki/tategaki.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~Char.html">Char</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~CommandLine.html">CommandLine</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~ConvertContainer.html">ConvertContainer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~ConvertView.html">ConvertView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~Cursor.html">Cursor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~Directory.html">Directory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~EOL.html">EOL</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~File.html">File</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~FileList.html">FileList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~InputBuffer.html">InputBuffer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~InputChar.html">InputChar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~Menu.html">Menu</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~Paragraph.html">Paragraph</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~Row.html">Row</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~Sentence.html">Sentence</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/tategaki/object.js~SentenceContainer.html">SentenceContainer</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">tategaki/tategaki.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">console.log(&apos;tategaki.js&apos;);
/*
 * &#x5B9F;&#x88C5;&#x76EE;&#x6A19;
 * &#x30A2;&#x30F3;&#x30C9;&#x30A5;
 */
$(function() {
	// // ===================================================================
	// // 		&#x30AF;&#x30ED;&#x30FC;&#x30B8;&#x30E3;(label:closer)
	// // ===================================================================
	// // &#x5DFB;&#x304D;&#x4E0A;&#x3052;&#x304C;&#x8D77;&#x3053;&#x3089;&#x306A;&#x3044;&#x305F;&#x3081;&#x3001;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x5148;&#x982D;&#x306B;&#x8A18;&#x8FF0;&#x3059;&#x308B;
	//
	// // file_list&#x306E;&#x4E2D;&#x306B;&#x5165;&#x308C;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x884C;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// const createFileElement = (function () {
	// 	&apos;use strict&apos;;
	// 	/*
	// 	 * &#x4F5C;&#x6210;&#x4F8B;
	// 	 * &lt;li&gt;
	// 	 * &lt;a class=&quot;file&quot;
	// 	 * data-type=&quot;file&quot;
	// 	 * href=&quot;#&quot;
	// 	 * data-file-id=&quot;1&quot;
	// 	 * data-file-name=&quot;filename&quot;
	// 	 * &gt;
	// 	 * filename
	// 	 * &lt;/a&gt;
	// 	 * &lt;/li&gt;
	// 	 */
	// 	const eFileTemplate = document.createElement(&apos;li&apos;);
	// 	const eFileLinkTemplate = document.createElement(&apos;a&apos;);
	// 	eFileLinkTemplate.classList.add(&apos;file&apos;);
	// 	eFileLinkTemplate.dataset.type = &apos;file&apos;;
	// 	eFileLinkTemplate.href = &apos;#&apos;;
	//
	// 	return function (id,filename) {
	// 		const eFile = eFileTemplate.cloneNode(true);
	// 		const eFileLink = eFileLinkTemplate.cloneNode(true);
	// 		eFileLink.dataset.fileId = id;
	// 		eFileLink.dataset.fileName = filename;
	// 		eFileLink.textContent = filename;
	// 		eFile.appendChild(eFileLink);
	// 		return eFile;
	// 	}
	// })();
	//
	// // file_list&#x306E;&#x4E2D;&#x306B;&#x5165;&#x308C;&#x308B;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x884C;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// const createDirectoryElement = (function () {
	// 	&apos;use strict&apos;;
	// 	/*
	// 	 * &#x4F5C;&#x6210;&#x4F8B;
	// 	 * &lt;li&gt;
	// 	 * 	&lt;a class=&quot;directory&quot;
	// 	 * 	data-type=&quot;directory&quot;
	// 	 * 	data-toggle=&quot;collapse&quot;
	// 	 * 	data-directory-id=&quot;1&quot;
	// 	 * 	data-directory-name=&quot;filename.directoryname&quot;
	// 	 * 	href=&quot;#directory1&quot;
	// 	 * 	&gt;
	// 	 *		&lt;span
	// 	 *		class=&quot;glyphicon glyphicon-folder-close&quot;
	// 	 *		aria-hidden=&quot;true&quot;&gt;
	// 	 *		&lt;/span&gt;
	// 	 *		filename.directoryname
	// 	 *		&lt;/a&gt;
	// 	 *
	// 	 *		&lt;div class=&quot;collapse&quot; id=&quot;directory1&quot;&gt;
	// 	 *			&lt;div class=&quot;well&quot;&gt;
	// 	 *				&lt;ul&gt;
	// 	 *					&lt;li&gt;filename&lt;/li&gt;
	// 	 *					&lt;li&gt;filename&lt;/li&gt;
	// 	 *					&lt;li&gt;filename&lt;/li&gt;
	// 	 *				&lt;/ul&gt;
	// 	 *			&lt;/div&gt;
	// 	 *		&lt;/div&gt;
	// 	 *	&lt;/li&gt;
	// 	 */
	// 	const eDirectoryTemplete = document.createElement(&apos;li&apos;);
	// 	const eDirLinkTemplete = document.createElement(&apos;a&apos;);
	// 	eDirLinkTemplete.classList.add(&apos;directory&apos;);
	// 	eDirLinkTemplete.dataset.type = &apos;directory&apos;;
	// 	eDirLinkTemplete.dataset.toggle = &apos;collapse&apos;;
	// 	eDirLinkTemplete.innerHTML = &apos;&lt;span class=&quot;glyphicon glyphicon-folder-close&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&apos;; // &#x30D5;&#x30A9;&#x30EB;&#x30C0;&#x30A2;&#x30A4;&#x30B3;&#x30F3;
	//
	// 	return function (id,innerData) {
	// 		const eDirectory = eDirectoryTemplete.cloneNode(true);
	// 		const eDirLink = eDirLinkTemplete.cloneNode(true);
	// 		const directoryname = innerData.directoryname;
	// 		eDirLink.dataset.directoryId = id;
	// 		eDirLink.dataset.directoryName = directoryname;
	// 		eDirLink.href = &apos;#directory&apos; + id;
	// 		eDirLink.insertAdjacentHTML(&apos;beforeend&apos;,directoryname);
	//
	// 		eDirectory.appendChild(eDirLink);
	// 		eDirectory.appendChild(createDirCollapseElement(id,innerData)); // &#x30B3;&#x30E9;&#x30D7;&#x30B9;&#x3082;&#x52A0;&#x3048;&#x308B;
	// 		return eDirectory;
	// 	}
	// })();
	//
	// // &#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x884C;&#x306E;&#x4E2D;&#x306B;&#x5165;&#x308C;&#x308B;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x5185;&#x3092;&#x8868;&#x3059;&#x30B3;&#x30E9;&#x30D7;&#x30B9;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// const createDirCollapseElement = (function () {
	// 	&apos;use strict&apos;;
	// 	/*
	// 	 * &#x4F5C;&#x6210;&#x4F8B;
	// 	 *		&lt;div class=&quot;collapse&quot; id=&quot;directory1&quot;&gt;
	// 	 *			&lt;div class=&quot;well&quot;&gt;
	// 	 *				&lt;ul&gt;
	// 	 *					&lt;li&gt;filename&lt;/li&gt;
	// 	 *					&lt;li&gt;filename&lt;/li&gt;
	// 	 *					&lt;li&gt;filename&lt;/li&gt;
	// 	 *				&lt;/ul&gt;
	// 	 *			&lt;/div&gt;
	// 	 *		&lt;/div&gt;
	// 	 */
	// 	const eCollapseTemplate = document.createElement(&apos;div&apos;);
	// 	const eInnerUlTemplate = document.createElement(&apos;ul&apos;);
	// 	const eWellTemplate = document.createElement(&apos;div&apos;);
	// 	eCollapseTemplate.classList.add(&apos;collapse&apos;);
	// 	eWellTemplate.classList.add(&apos;well&apos;);
	//
	// 	return function (id,innerData) {
	// 		&apos;use strict&apos;;
	// 		const eCollapse = eCollapseTemplate.cloneNode(true);
	// 		const eInnerUl = eInnerUlTemplate.cloneNode(true);
	// 		const eWell = eWellTemplate.cloneNode(true);
	// 		eCollapse.id = &apos;directory&apos; + id;
	//
	// 		// &#x30B3;&#x30E9;&#x30D7;&#x30B9;&#x5185;&#x306B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x3092;&#x52A0;&#x3048;&#x308B;
	// 		setFileListFromObject(innerData, eInnerUl);
	//
	// 		eCollapse.appendChild(eWell);
	// 		eWell.appendChild(eInnerUl);
	// 		return eCollapse;
	// 	}
	// })();
	//
	// // ===================================================================
	// // 		&#x30E6;&#x30FC;&#x30B6;&#x30FC;&#x64CD;&#x4F5C;(label:user)
	// // ===================================================================
	//
	// // --------------------- key event listener ---------------------------
	//
	// // &#x30AD;&#x30FC;&#x64CD;&#x4F5C;
	// function getKeyCode(e) {
	// 	&apos;use strict&apos;;
	// 	let keycode;
	// 	if (document.all) {
	// 		// IE
	// 		keycode = e.keyCode
	// 	} else {
	// 		// IE&#x4EE5;&#x5916;
	// 		keycode = e.which;
	// 	}
	//
	// 	return keycode;
	// }
	//
	// // &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x3092;&#x9078;&#x3093;&#x3067;&#x3044;&#x308B;&#x3068;&#x304D;&#x306A;&#x3089;true
	// function isConvertMode() {
	// 	&apos;use strict&apos;;
	// 	return $(&apos;.convert-view&apos;)[0] ? true : false;
	// }
	// // inputbuffer&#x3078;&#x306E;&#x5165;&#x529B;&#x4E2D;&#x306A;&#x3089;true
	// function isInputMode() {
	// 	&apos;use strict&apos;;
	// 	return $(&apos;#input_buffer&apos;).text() !== &apos;&apos; ? true : false;
	// }
	//
	// function keydownOnDoc(e) {
	// 	&apos;use strict&apos;;
	// 	userAlert(&apos;&apos;);
	// 	const keycode = getKeyCode(e);
	//	
	// 	if (keycode === 123) { return; } // F12&#x306E;&#x307F;&#x30D6;&#x30E9;&#x30A6;&#x30B6;&#x30B7;&#x30E7;&#x30FC;&#x30C8;&#x30AB;&#x30C3;&#x30C8;&#x30AD;&#x30FC;
	//	
	// 	const $inputBuffer = $(&apos;#input_buffer&apos;);
	// 	if (isConvertMode()) {
	// 		// keydownOnConvertView(e,keycode);
	// 	} else if (isInputMode()) {
	// 		// keydownOnInputBuffer(e,keycode);
	// 	} else {
	// 		// &#x975E;&#x5165;&#x529B;(&#x901A;&#x5E38;)&#x72B6;&#x614B;
	//	
	// 		if (e.ctrlKey) {
	// 			// ctrl&#x30AD;&#x30FC;&#x3092;&#x4F7F;&#x3063;&#x305F;&#x30B7;&#x30E7;&#x30FC;&#x30C8;&#x30AB;&#x30C3;&#x30C8;&#x30AD;&#x30FC;
	// 			keydownWithCTRL(e,keycode);
	// 		} else {
	// 			keydownOnContainer(e,keycode);
	// 		}
	//	
	// 	}
	//	
	// 	console.log(keycode);
	// 	// &#x30C7;&#x30D5;&#x30A9;&#x30EB;&#x30C8;&#x306E;&#x52D5;&#x4F5C;&#x3092;&#x7121;&#x52B9;&#x5316;&#x3059;&#x308B;
	// 	e.preventDefault();
	// }
	//
	// function keydownOnConvertView(e,keycode) {
	// 	&apos;use strict&apos;;
	// 	return;
	//
	// 	switch (keycode) {
	// 		case 8:
	// 			// backspace
	// 			backSpaceOnConvert();
	// 			break;
	// 		case 13:
	// 			// Enter
	// 			// inputBuffer&#x306E;&#x6587;&#x5B57;&#x3092;&#x633F;&#x5165;
	// 			const $inputBuffer = $(&apos;#input_buffer&apos;);
	// 			$(&apos;.convert-view&apos;).remove();
	// 			insertStringFromCursor($inputBuffer.text());
	// 			$inputBuffer.empty().hide(); // inputBuffer&#x3092;&#x7A7A;&#x306B;&#x3057;&#x3066;&#x96A0;&#x3059;
	// 			break;
	// 		case 32:
	// 		case 37:
	// 			// space
	// 			// Left
	// 			// &#x5019;&#x88DC;&#x306E;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;
	// 			shiftLeftSelectKanjiFocus();
	// 			break;
	// 		case 38:
	// 			// Up
	// 			if (e.shiftKey) {
	// 				// shift &amp; Up
	// 				shiftUpOnConvert();
	// 			} else {
	// 				// Up &#x306E;&#x307F;
	// 				upOnConvert();
	// 			}
	// 			break;
	// 		case 39:
	// 			// Right
	// 			shiftRightSelectKanjiFocus();
	// 			break;
	// 		case 40:
	// 			// Down
	// 			if (e.shiftKey) {
	// 				// shift + Down
	// 				shiftDownOnConvert();
	// 			} else {
	// 				// Down &#x306E;&#x307F;
	// 				downOnConvert();
	// 			}
	// 			break;
	// 		case 118:
	// 			// F7
	// 			changeKatakanaAtConvert();
	// 			break;
	// 		default:
	// 			break;
	// 	}
	// }
	//
	// function keydownOnInputBuffer(e,keycode) {
	// 	&apos;use strict&apos;;
	// 	return;
	// 	const $inputBuffer = $(&apos;#input_buffer&apos;);
	//
	// 	switch (keycode) {
	// 		case 8:
	// 			// backspace
	// 			// input_buffer&#x306E;&#x6700;&#x5F8C;&#x306E;&#xFF11;&#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;
	// 			// $inputBuffer.children(&apos;.EOL&apos;).prev().remove();
	// 			// moveInput();
	// 			// input_buffer&#x306E;&#x6587;&#x5B57;&#x304C;&#x306A;&#x304F;&#x306A;&#x308C;&#x3070;input_buffer&#x3092;&#x7A7A;&#x306B;&#x3057;&#x3066;&#x96A0;&#x3059;
	// 			// if ($inputBuffer.children(&apos;.char&apos;).first().hasClass(&apos;EOL&apos;)) {
	// 			// 	$inputBuffer.empty().hide(); // inputBuffer&#x3092;&#x7A7A;&#x306B;&#x3057;&#x3066;&#x96A0;&#x3059;
	// 			// }
	// 			break;
	// 		case 13:
	// 			// Enter
	// 			// inputBuffer&#x306E;&#x6587;&#x5B57;&#x3092;&#x633F;&#x5165;
	// 			console.log(&apos;push enter&apos;);
	// 			// insertStringFromCursor($inputBuffer.text());
	// 			// $inputBuffer.empty().hide(); // inputBuffer&#x3092;&#x7A7A;&#x306B;&#x3057;&#x3066;&#x96A0;&#x3059;
	// 			break;
	// 		case 32:
	// 			// space
	// 			// comKanjiForFullString($inputBuffer.text());
	// 			break;
	// 		case 118:
	// 			// F7
	// 			changeKatakanaAll();
	// 			break;
	// 		default:
	// 			// inputBuffer&#x306E;&#x66F4;&#x65B0;
	// 			// updateInputBuffer(keycode,e.shiftKey);
	// 			break;
	// 	}
	// }
	//
	// function keydownWithCTRL(e,keycode) {
	// 	&apos;use strict&apos;;
	//
	// 	switch (keycode) {
	// 		case 18:
	// 		case 70:
	// 			// f
	// 			readyFileModal();
	// 			$(&apos;#file_list_modal&apos;).modal();
	// 			break;
	// 		case 66:
	// 			// b
	// 		case 68:
	// 			// d
	// 			backSpaceOnContainer();
	// 			checkText();
	// 			break;
	// 		case 190:
	// 			// .
	// 			findPrev();
	// 			break;
	// 		case 79:
	// 			// o
	// 			comOpenPrevFile();
	// 			break;
	// 		case 188:
	// 			// ,
	// 			findNext();
	// 			break;
	// 		case 73:
	// 			// i
	// 			comOpenNextFile();
	// 			break;
	// 		case 72:
	// 			// h
	// 			readySelection();
	// 			gCursor.shiftLeft();
	// 			extendSelection(e.shiftKey);
	// 			break;
	// 		case 74:
	// 			// j
	// 			readySelection();
	// 			gCursor.next();
	// 			extendSelection(e.shiftKey);
	// 			break;
	// 		case 75:
	// 			// k
	// 			readySelection();
	// 			gCursor.prev();
	// 			extendSelection(e.shiftKey);
	// 			break;
	// 		case 76:
	// 			// l
	// 			readySelection();
	// 			gCursor.shiftRight();
	// 			extendSelection(e.shiftKey);
	// 			break;
	// 		case 78:
	// 			// n
	// 			break;
	// 		case 83:
	// 			// s
	// 			comSaveJsonFile();
	// 			break;
	// 		case 67:
	// 			// c
	// 			copySelectText();
	// 			break;
	// 		case 86:
	// 			// v
	// 			pasteFromCursor();
	// 			break;
	// 		default:
	// 			break;
	// 	}
	// }
	//
	// function checkText() {
	// 	checkKinsoku();
	// 	// changeDisplayRow(false);
	// 	addPageBreak();
	// 	// printDocInfo();
	// }
	//
	// function keydownOnContainer(e,keycode) {
	// 	&apos;use strict&apos;;
	//
	// 	switch (keycode) {
	// 		case 8:
	// 			// backspace
	// 			backSpaceOnContainer();
	// 			checkText();
	// 			break;
	// 		case 13:
	// 			// Enter
	// 			lineBreak();
	// 			checkText();
	// 			break;
	// 		case 32:
	// 			// space
	// 			insertStringFromCursor(&apos;&#x3000;&apos;);
	// 			break;
	// 		case 37:
	// 			// Left
	// 			readySelection();
	// 			gCursor.shiftLeft();
	// 			extendSelection(e.shiftKey);
	// 			break;
	// 		case 38:
	// 			// Up
	// 			readySelection();
	// 			gCursor.prev();
	// 			extendSelection(e.shiftKey);
	// 			break;
	// 		case 39:
	// 			// Right
	// 			readySelection();
	// 			gCursor.shiftRight();
	// 			extendSelection(e.shiftKey);
	// 			break;
	// 		case 40:
	// 			// Down
	// 			readySelection();
	// 			gCursor.next();
	// 			extendSelection(e.shiftKey);
	// 			break;
	// 		case 58: // firefox developer edition
	// 		case 186: // chrome
	// 			// :
	// 			startCommandMode();
	// 			break;
	// 		case 191:
	// 			// /
	// 			startFindMode();
	// 			break;
	// 		default:
	// 			// buffer&#x306E;&#x66F4;&#x65B0;
	// 			updateInputBuffer(keycode,e.shiftKey);
	// 			break;
	// 	}
	// }
	//
	// // -------------------------------- keydown function -----------------------------------------
	//
	// // &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x6642;&#x306B;&#x30D0;&#x30C3;&#x30AF;&#x30B9;&#x30DA;&#x30FC;&#x30B9;
	// function backSpaceOnConvert() {
	// 	&apos;use strict&apos;;
	// 	const $inputBuffer = $(&apos;#input_buffer&apos;);
	// 	const $activeConvertView = $(&apos;.convert-view.active&apos;);
	// 	const currentSelectKana = $activeConvertView.children(&apos;.row&apos;).last().text();
	//
	// 	if (currentSelectKana.length &gt;= 2) {
	// 		// &#x73FE;&#x5728;&#x9078;&#x629E;&#x4E2D;&#x306E;&#x6587;&#x7BC0;&#x304C;&#xFF12;&#x6587;&#x5B57;&#x4EE5;&#x4E0A;
	// 		// &#x73FE;&#x5728;&#x9078;&#x629E;&#x4E2D;&#x306E;&#x6587;&#x7BC0;&#x304B;&#x3089;&#xFF11;&#x6587;&#x5B57;&#x524A;&#x3063;&#x3066;&#x3001;&#x305D;&#x306E;&#x6587;&#x7BC0;&#x3060;&#x3051;&#x518D;&#x5909;&#x63DB;
	// 		comKanjiForOnePhrase(
	// 				currentSelectKana.substring(0,currentSelectKana.length-1) // &#xFF11;&#x6587;&#x5B57;&#x524A;&#x9664;
	// 				,$(&apos;.convert-view.active&apos;)
	// 				);
	//
	// 	} else {
	// 		// &#x73FE;&#x5728;&#x9078;&#x629E;&#x4E2D;&#x306E;&#x6587;&#x7BC0;&#x304C;&#x3072;&#x3089;&#x304C;&#x306A;&#x3067;&#xFF11;&#x6587;&#x5B57;&#x306E;&#x307F;
	// 		// &#x73FE;&#x5728;&#x306E;&#x6587;&#x7BC0;&#x3092;&#x524A;&#x9664;&#x3057;&#x3001;&#x9078;&#x629E;&#x3092;&#x6B21;&#x306E;&#x6587;&#x7BC0;&#x306B;&#x79FB;&#x3059;
	//
	// 		if ($inputBuffer.children(&apos;.char&apos;).not(&apos;.EOL&apos;).length === 1) {
	// 			// &#x3053;&#x308C;&#x3092;&#x524A;&#x9664;&#x3059;&#x308C;&#x3070;input_buffer&#x304C;&#x7A7A;&#x306B;&#x306A;&#x308B;&#x5834;&#x5408;
	// 			// EOL&#x542B;&#x3081;&#x3066;&#xFF12;&#x6587;&#x5B57;
	// 			$(&apos;#convert_container&apos;).empty();
	// 			$inputBuffer.empty().hide(); // inputBuffer&#x3092;&#x7A7A;&#x306B;&#x3057;&#x3066;&#x96A0;&#x3059;
	// 			return;
	// 		}
	//
	// 		// &#x524A;&#x9664;&#x5F8C;&#x306E;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x79FB;&#x52D5;&#x5148;
	// 		let $newActiveConvertView = $activeConvertView.next(&apos;.convert-view&apos;);
	// 		let newPhraseNum = $newActiveConvertView.children(&apos;.phrase-num&apos;).text();
	// 		// &#x73FE;&#x5728;&#x9078;&#x629E;&#x4E2D;&#x306E;&#x6587;&#x7BC0;&#x304C;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x7BC0;&#x306A;&#x3089;&#x4E00;&#x3064;&#x524D;&#x306B;&#x623B;&#x308B;
	// 		// &#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x304B;&#x3063;&#x305F;&#x5834;&#x5408;&#x306F;&#x4E0B;&#x306E;selectPhrase&#x306E;&#x30BB;&#x30EC;&#x30AF;&#x30BF;&#x304C;&#x30A8;&#x30E9;&#x30FC;(newPhraseNum&#x304C;&#x7A7A;&#x306B;&#x306A;&#x308B;)
	// 		if (!($newActiveConvertView[0])) {
	// 			$newActiveConvertView = $activeConvertView.prev(&apos;.convert-view&apos;);
	// 			newPhraseNum = $newActiveConvertView.children(&apos;.phrase-num&apos;).text();
	// 		} 
	//
	// 		// convert-view
	// 		$(&apos;.convert-view.active&apos;).remove();
	// 		$newActiveConvertView.addClass(&apos;active&apos;);
	// 		$newActiveConvertView.children(&apos;.row&apos;).first().addClass(&apos;select&apos;);
	//
	// 		// input_buffer &gt; select-phrase
	// 		$(&apos;#input_buffer &gt; .char.select-phrase&apos;).remove();
	// 		$(&apos;#input_buffer &gt; .char[data-phrase-num=&apos;+ newPhraseNum + &apos;]&apos;).addClass(&apos;select-phrase&apos;);
	//
	// 		resetPhraseNum();
	//
	// 	}
	//
	// }
	//
	// // &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x4E2D;&#x306B;&lt;Up&gt;&#x30AD;&#x30FC;
	// // &#x9078;&#x629E;&#x6587;&#x7BC0;&#x3092;&#x4E00;&#x3064;&#x4E0A;&#x306B;&#x5909;&#x66F4;
	// function upOnConvert() {
	// 	&apos;use strict&apos;;
	// 	// &#x9078;&#x629E;&#x6587;&#x7BC0;&#x306E;&#x5909;&#x66F4;
	// 	const $oldSelectConvertView = $(&apos;.convert-view.active&apos;);
	// 	let $newSelectConvertView = $oldSelectConvertView.prev(&apos;.convert-view&apos;);
	// 	let newPhraseNum = $newSelectConvertView.children(&apos;.phrase-num&apos;).text();
	//
	// 	// &#x6700;&#x521D;&#x306B;&#x9054;&#x3057;&#x3066;&#x3044;&#x305F;&#x3089;&#x6700;&#x5F8C;&#x306B;&#x623B;&#x308B;
	// 	if (!($newSelectConvertView[0])) {
	// 		$newSelectConvertView = $(&apos;.convert-view&apos;).last();
	// 		newPhraseNum = $newSelectConvertView.children(&apos;.phrase-num&apos;).text();
	// 	} 
	//
	// 	// &#x8868;&#x793A;convert-view&#x306E;&#x5909;&#x66F4;
	// 	$oldSelectConvertView.removeClass(&apos;active&apos;);
	// 	$newSelectConvertView.addClass(&apos;active&apos;);
	//
	// 	// coanvert-view&#x4E0B;&#x306E;select&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x4ED8;&#x3051;&#x66FF;&#x3048;
	// 	$(&apos;.convert-view &gt; .row.select&apos;).removeClass(&apos;select&apos;);
	// 	$newSelectConvertView.children(&apos;.row&apos;).first().addClass(&apos;select&apos;);
	//
	// 	// input_buffer&#x306E;select-phrase&#x306E;&#x5909;&#x66F4;
	// 	$(&apos;#input_buffer &gt; .char.select-phrase&apos;).removeClass(&apos;select-phrase&apos;);
	// 	$(&apos;#input_buffer &gt; .char[data-phrase-num=&apos;+ newPhraseNum + &apos;]&apos;).addClass(&apos;select-phrase&apos;);
	// }
	//
	// // &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x4E2D;&#x306B;&lt;Down&gt;
	// // &#x9078;&#x629E;&#x6587;&#x7BC0;&#x3092;&#x6B21;&#x306E;&#x6587;&#x7BC0;&#x306B;&#x5909;&#x66F4;
	// function downOnConvert() {
	// 	&apos;use strict&apos;;
	// 	// &#x9078;&#x629E;&#x6587;&#x7BC0;&#x306E;&#x5909;&#x66F4;
	// 	const $oldSelectConvertView = $(&apos;.convert-view.active&apos;);
	// 	let $newSelectConvertView = $oldSelectConvertView.next(&apos;.convert-view&apos;);
	// 	let newPhraseNum = $newSelectConvertView.children(&apos;.phrase-num&apos;).text();
	//
	// 	// &#x6700;&#x5F8C;&#x306B;&#x9054;&#x3057;&#x3066;&#x3044;&#x305F;&#x3089;&#x6700;&#x521D;&#x306B;&#x623B;&#x308B;
	// 	if (!($newSelectConvertView[0])) {
	// 		$newSelectConvertView = $(&apos;.convert-view&apos;).first();
	// 		newPhraseNum = $newSelectConvertView.children(&apos;.phrase-num&apos;).text();
	// 	} 
	//
	// 	// convert-view
	// 	$oldSelectConvertView.removeClass(&apos;active&apos;);
	// 	$newSelectConvertView.addClass(&apos;active&apos;);
	// 	$(&apos;.convert-view.active &gt; .row.select&apos;).removeClass(&apos;select&apos;);
	// 	$newSelectConvertView.children(&apos;.row&apos;).first().addClass(&apos;select&apos;);
	//
	// 	// input_buffer&#x306E;select-phrase
	// 	$(&apos;#input_buffer &gt; .char.select-phrase&apos;).removeClass(&apos;select-phrase&apos;);
	// 	$(&apos;#input_buffer &gt; .char[data-phrase-num=&apos;+ newPhraseNum + &apos;]&apos;).addClass(&apos;select-phrase&apos;);
	// }
	//
	// // &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x4E2D;&#x306B;Shift+&lt;Up&gt;
	// // &#x6587;&#x7BC0;&#x533A;&#x5207;&#x308A;&#x3092;&#x4E00;&#x3064;&#x524D;&#x306B;&#x305A;&#x3089;&#x3059;
	// function shiftUpOnConvert() {
	// 	&apos;use strict&apos;;
	// 	const $firstConvertView = $(&apos;.convert-view.active&apos;);
	// 	const $secondConvertView = $firstConvertView.next(&apos;.convert-view&apos;);
	// 	const firstKana = $firstConvertView.children(&apos;.row&apos;).last().text();
	//
	// 	if (firstKana.length &lt; 2) return; // &#x9078;&#x629E;&#x4E2D;&#x306E;&#x6587;&#x7BC0;&#x304C;&#xFF11;&#x6587;&#x5B57;&#x3057;&#x304B;&#x306A;&#x3044;&#x3068;&#x304D;&#x306F;&#x4F55;&#x3082;&#x3057;&#x306A;&#x3044;
	//
	// 	if (!($secondConvertView[0])) {
	// 		// &#x6700;&#x5F8C;&#x306E;&#x6587;&#x7BC0;&#x306E;&#x5834;&#x5408;
	// 		// &#x5206;&#x96E2;
	// 		const newStr = firstKana.substring(0,firstKana.length-1) +
	// 			&apos;,&apos; +
	// 			firstKana.substring(firstKana.length-1,firstKana.length);
	//
	// 		comKanjiForSplit(newStr,$firstConvertView);
	// 		return;
	// 	}
	//
	// 	const secondKana = $secondConvertView.children(&apos;.row&apos;).last().text();
	//
	// 	// &#x524D;&#x534A;&#x6587;&#x7BC0;&#x306E;&#x6700;&#x5F8C;&#x306E;&#x6587;&#x5B57;&#x3092;&#x3001;&#x5F8C;&#x534A;&#x6587;&#x7BC0;&#x306E;&#x6700;&#x521D;&#x306B;&#x79FB;&#x52D5;
	// 	const newStr = firstKana.substring(0,firstKana.length-1) +
	// 		&apos;,&apos; +
	// 		firstKana.substring(firstKana.length-1,firstKana.length) +
	// 		secondKana;
	//
	// 	comKanjiForChangePhrase(newStr,$firstConvertView,$secondConvertView);
	// }
	//
	// // &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x4E2D;&#x306B;Shift+&lt;Down&gt;
	// // &#x6587;&#x7BC0;&#x533A;&#x5207;&#x308A;&#x306E;&#x5909;&#x66F4;
	// function shiftDownOnConvert() {
	// 	&apos;use strict&apos;;
	// 	const $firstConvertView = $(&apos;.convert-view.active&apos;);
	// 	const $secondConvertView = $firstConvertView.next(&apos;.convert-view&apos;);
	// 	const firstKana = $firstConvertView.children(&apos;.row&apos;).last().text();
	// 	const secondKana = $secondConvertView.children(&apos;.row&apos;).last().text();
	//
	// 	if (!($secondConvertView[0])) return; // &#x6700;&#x5F8C;&#x306E;&#x6587;&#x7BC0;&#x3092;&#x9078;&#x629E;&#x3057;&#x3066;&#x3044;&#x305F;&#x3089;&#x4F55;&#x3082;&#x3057;&#x306A;&#x3044;
	//
	// 	if (secondKana.length &lt; 2) {
	// 		//&#x4E8C;&#x756A;&#x76EE;&#x306E;&#x6587;&#x5B57;&#x5217;&#x304C;&#xFF11;&#x6587;&#x5B57;&#x3057;&#x304B;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#xFF12;&#x3064;&#x3092;&#x7D71;&#x5408;&#x3059;&#x308B;
	// 		const newStr = firstKana + secondKana + &apos;,&apos;;
	// 		comKanjiForFusion(newStr,$firstConvertView,$secondConvertView);
	// 		return;
	// 	}
	//
	// 	// &#x5F8C;&#x534A;&#x306E;&#xFF11;&#x6587;&#x5B57;&#x3092;&#x524D;&#x534A;&#x306B;&#x79FB;&#x3059;
	// 	const newStr = firstKana + secondKana.charAt(0) + &apos;,&apos; + secondKana.substring(1);
	// 	comKanjiForChangePhrase(newStr,$firstConvertView,$secondConvertView);
	// }
	//
	// // &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x306E;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x3092;&#x5DE6;&#x306B;&#x30B7;&#x30D5;&#x30C8;&#x3055;&#x305B;&#x308B;
	// function shiftLeftSelectKanjiFocus() {
	// 	&apos;use strict&apos;;
	// 	const $oldSelect = $(&apos;.convert-view.active &gt; .row.select&apos;);
	// 	const $newSelect = $oldSelect.next(&apos;.row&apos;);
	//
	// 	shiftSelectKanjiFocus($oldSelect, $newSelect);
	// }
	//
	// // &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x4E00;&#x89A7;&#x306E;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x3092;&#x53F3;&#x306B;&#x30B7;&#x30D5;&#x30C8;&#x3055;&#x305B;&#x308B;
	// function shiftRightSelectKanjiFocus() {
	// 	&apos;use strict&apos;;
	// 	const $oldSelect = $(&apos;.convert-view.active &gt; .row.select&apos;);
	// 	const $newSelect = $oldSelect.prev(&apos;.row&apos;);
	//
	// 	shiftSelectKanjiFocus($oldSelect, $newSelect);
	// }
	//
	// // convert-view&#x306E;select&#x3092;$oldSelect&#x304B;&#x3089;$newSelect&#x306B;&#x52D5;&#x304B;&#x3059;
	// function shiftSelectKanjiFocus($oldSelect, $newSelect) {
	// 	&apos;use strict&apos;;
	// 	if (!($newSelect[0])) return;
	//
	// 	// select&#x30AF;&#x30E9;&#x30B9;
	// 	$oldSelect.removeClass(&apos;select&apos;);
	// 	$newSelect.addClass(&apos;select&apos;);
	//
	// 	// inputBuffer&#x306E;&#x6587;&#x5B57;&#x3092;&#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;
	// 	const phraseNum = $newSelect.siblings(&apos;.phrase-num&apos;).text();
	// 	const selectKanji = $newSelect.text();
	// 	insertPhraseToInputBuffer(phraseNum,selectKanji);
	//
	// 	// selectphrase&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x4ED8;&#x3051;&#x66FF;&#x3048;
	// 	$(&apos;#input_buffer .select-phrase&apos;).removeClass(&apos;select-phrase&apos;);
	// 	$(&apos;#input_buffer &gt; .char[data-phrase-num=&apos;+ phraseNum +&apos;]&apos;).addClass(&apos;select-phrase&apos;);
	//
	// 	resizeInputBuffer();
	// }
	//
	// // -------------------------------- wheel event ---------------------------------
	//
	// function wheelEvent(e,delta,deltaX,deltaY) {
	// 	&apos;use strict&apos;;
	// 	// &#x30DE;&#x30A6;&#x30B9;&#x30DB;&#x30A4;&#x30FC;&#x30EB;&#x3092;&#x52D5;&#x304B;&#x3059;&#x3068;&#x3001;&#x30DA;&#x30FC;&#x30B8;&#x304C;&#x5DE6;&#x53F3;&#x306B;&#x52D5;&#x304F;
	// 	const mvRowNum = 4; // &#x4E00;&#x5EA6;&#x306B;&#x52D5;&#x304B;&#x3059;&#x884C;&#x6570;
	//
	// 	if (delta &gt; 0) {
	// 		// &#x30DB;&#x30A4;&#x30FC;&#x30EB;&#x3092;&#x4E0A;&#x306B;&#x52D5;&#x304B;&#x3059;
	// 		for (let i = 0; i &lt; mvRowNum; i++) {
	// 			shiftRightDisplay();
	// 		}
	// 	} else {
	// 		// &#x30DB;&#x30A4;&#x30FC;&#x30EB;&#x3092;&#x4E0B;&#x306B;&#x52D5;&#x304B;&#x3059;
	// 		for (let i = 0; i &lt; mvRowNum; i++) {
	// 			shiftLeftDisplay();
	// 		}
	// 	}
	//
	// 	// printDocInfo();
	// }
	// function shiftRightDisplay() {
	// 	&apos;use strict&apos;;
	// 	const $nextRow = $(&apos;.row.display&apos;).first().prevObj(&apos;#sentence_container .row&apos;);
	// 	if (!$nextRow[0]) { return; }
	// 	$nextRow.addClass(&apos;display&apos;);
	// 	$(&apos;.row.display&apos;).last().removeClass(&apos;display&apos;);
	// 	if (!($(&apos;.cursor-row&apos;).hasClass(&apos;display&apos;))) { gCursor.shiftRight(); }
	// }
	// function shiftLeftDisplay() {
	// 	&apos;use strict&apos;;
	// 	const $nextRow = $(&apos;.row.display&apos;).last().nextObj(&apos;#sentence_container .row&apos;);
	// 	if (!$nextRow[0]) { return; }
	// 	$nextRow.addClass(&apos;display&apos;);
	// 	$(&apos;.row.display&apos;).first().removeClass(&apos;display&apos;);
	// 	if (!($(&apos;.cursor-row&apos;).hasClass(&apos;display&apos;))) { gCursor.shiftLeft(); }
	// }
	//
	// // ------------------------------- command mode ---------------------------------------
	//
	// function runCommand() {
	// 	&apos;use strict&apos;;
	// 	const $command = $(&apos;#command&apos;);
	//
	// 	let command = $command.val().split(&apos; &apos;);
	// 	// &#x534A;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3067;&#x533A;&#x5207;&#x3089;&#x308C;&#x3066;&#x3044;&#x306A;&#x3044;&#x3088;&#x3046;&#x306A;&#x3089;&#x3001;&#x5168;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x306E;&#x533A;&#x5207;&#x308A;&#x3067;&#x3082;&#x53EF;
	// 	if (command.length &lt; 2) command = $command.val().split(&apos;&#x3000;&apos;);
	//
	// 	switch (command[0]) {
	// 		case &apos;:w&apos;:
	// 		case &apos;:save&apos;:
	// 		case &apos;:s&apos;:
	// 		case &apos;: &#xFF57;&apos;:
	// 		case &apos;:&#x3055;&#x30F4;&#x3047;&apos;:
	// 		case &apos;:&#xFF53;&apos;:
	//		
	// 				 if (command[1]) {
	// 					 comSaveAs(command[1]);
	// 				 } else {
	// 					 comSaveJsonFile();
	// 				 }
	//		
	// 				 break;
	// 		case &apos;:e&apos;:
	// 		case &apos;:o&apos;:
	// 		case &apos;:open&apos;:
	// 		case &apos;:&#x3048;&apos;:
	// 		case &apos;:&#x304A;&apos;:
	// 		case &apos;:&#x304A;&#x307A;&#xFF4E;&apos;:
	//		
	// 				 if (command[1]) {
	// 					 comOpenFile(command[1]);
	// 				 } else {
	// 					 defaultNewFile();
	// 				 }
	//		
	// 				 break;
	// 		case &apos;:jumpr&apos;:
	// 		case &apos;:jumprow&apos;:
	// 		case &apos;:jr&apos;:
	// 		case &apos;:&#x3058;&#x3085;&#xFF4D;&#xFF50;&#xFF52;&apos;:
	// 		case &apos;:&#x3058;&#x3085;&#xFF4D;&#xFF50;&#x308D;&#xFF57;&apos;:
	// 		case &apos;:&#xFF4A;&#xFF52;&apos;:
	// 				 if (command[1]) gCursor.jumpForRow(command[1]);
	// 				 break;
	// 		case &apos;:jumpp&apos;:
	// 		case &apos;:jumppage&apos;:
	// 		case &apos;:jp&apos;:
	// 		case &apos;:&#x3058;&#x3085;&#xFF4D;&#x3063;&#xFF50;&apos;:
	// 		case &apos;:&#x3058;&#x3085;&#xFF4D;&#x3063;&#x3071;&#x3052;&apos;:
	// 		case &apos;:&#xFF4A;&#xFF50;&apos;:
	// 				 if (command[1]) gCursor.jumpForPage(command[1]);
	// 				 break;
	// 		case &apos;:new&apos;:
	// 		case &apos;:n&apos;:
	// 		case &apos;:&#x306D;&#xFF57;&apos;:
	// 		case &apos;:&#xFF4E;&apos;:
	//		
	// 				 if (command[1]) {
	// 					 newFile(command[1]);
	// 				 } else {
	// 					 defaultNewFile();
	// 				 }
	//		
	// 				 break;
	// 		case &apos;:delete&apos;:
	// 		case &apos;:del&apos;:
	// 		case &apos;:d&apos;:
	// 		case &apos;:&#x3067;&#x3047;&#x3066;&apos;:
	// 		case &apos;:&#x3067;&#xFF4C;&apos;:
	// 		case &apos;:&#xFF44;&apos;:
	//		
	// 				 if (command[1]) {
	// 					 comDeleteFileFromFileName(command[1]);
	// 				 } else {
	// 					 defaultDeleteFile();
	// 				 }
	//		
	// 				 break;
	// 		case &apos;:next&apos;:
	// 		case &apos;:&#x306D;&#xFF58;&#xFF54;&apos;:
	// 				 // &#x6B21;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x958B;&#x304F;
	// 				 comOpenNextFile();
	// 				 break;
	// 		case &apos;:prev&apos;:
	// 		case &apos;:&#xFF50;&#x308C;&#xFF56;&apos;:
	// 				 // &#x524D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x958B;&#x304F;
	// 				 comOpenPrevFile();
	// 				 break;
	// 		case &apos;:title&apos;:
	// 		case &apos;:name&apos;:
	// 		case &apos;:t&apos;:
	// 		case &apos;:&#x3061;&#xFF54;&#x3047;&apos;:
	// 		case &apos;:&#x306A;&#x3081;&apos;:
	// 		case &apos;:&#xFF54;&apos;:
	//		
	// 				 if (command[1]) {
	// 					 setFileTitle(command[1]);
	// 				 }
	//		
	// 				 break;
	// 		case &apos;:mv&apos;:
	// 		case &apos;:&#xFF4D;&#xFF56;&apos;:
	// 				 comMoveFile(command[1],command[2]);
	// 				 break;
	// 		case &apos;:mkdir&apos;:
	// 		case &apos;:&#xFF4D;&#xFF4B;&#x3062;&#xFF52;&apos;:
	// 				 if (command[1]) {
	// 					 comMakeDirectory(command[1]);
	// 				 }
	// 				 break;
	// 		case &apos;:deldir&apos;:
	// 		case &apos;:&#x3067;&#xFF4C;&#x3062;&#xFF52;&apos;:
	// 				 if (command[1]) {
	// 					 comDeleteDirectoryFromName(command[1],false);
	// 				 }
	// 				 break;
	// 		case &apos;:noh&apos;:
	// 		case &apos;:&#x306E;&#xFF48;&apos;:
	// 				 endFindMode();
	// 				 break;
	// 		case &apos;::&apos;:
	// 				 insertStringFromCursor(&apos;:&apos;);
	// 				 break;
	// 		case &apos;:;&apos;:
	// 				 insertStringFromCursor(&apos;;&apos;);
	// 				 break;
	// 		case &apos;:/&apos;:
	// 				  insertStringFromCursor(&apos;/&apos;);
	// 				  break;
	// 		case &apos;:i&apos;:
	// 				 insertStringFromCursor(command[1]);
	// 				 break;
	// 		case &apos;:italic&apos;:
	// 				 toggleFont(&apos;italic&apos;);
	// 				 break;
	// 		case &apos;:bold&apos;:
	// 				 toggleFont(&apos;bold&apos;);
	// 				 break;
	// 		default:
	// 				 break;
	// 	}
	//
	// }
	//
	// function startCommandMode() {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;startCommandMode&apos;);
	// 	const $command = $(&apos;#command&apos;).addClass(&apos;active&apos;);
	//
	// 	document.removeEventListener(&apos;keydown&apos;,keydownOnDoc,false);
	// 	// &#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x3092;&#x5F53;&#x3066;&#x3066;&#x304B;&#x3089;value&#x3092;&#x30BB;&#x30C3;&#x30C8;&#x3059;&#x308B;&#x3053;&#x3068;&#x3067;&#x672B;&#x5C3E;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x79FB;&#x52D5;&#x3055;&#x308C;&#x308B;
	// 	$command.focus();
	// 	$command.val(&apos;:&apos;);
	//
	// 	$(&apos;body&apos;).on(&apos;keyup&apos;,&apos;#command&apos;,keyupOnCommand);
	// 	$(&apos;body&apos;).on(&apos;blur&apos;,&apos;#command&apos;,endCommandMode);
	// }
	//
	// function keyupOnCommand(e) {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;keyup on #command&apos;);
	// 	const $command = $(this);
	// 	const keycode = getKeyCode(e);
	//
	// 	if (keycode == 13) {
	// 		// enter
	// 		runCommand();
	// 		endCommandMode();
	// 		e.stopPropagation(); // &#x89AA;&#x8981;&#x7D20;&#x3078;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x4F1D;&#x64AD;(&#x30D0;&#x30D6;&#x30EA;&#x30F3;&#x30B0;)&#x3092;&#x6B62;&#x3081;&#x308B;&#x3002;&#x305D;&#x3046;&#x3057;&#x306A;&#x3051;&#x308C;&#x3070;&#x5148;&#x306B;addeventlistener&#x3092;&#x3057;&#x3066;&#x3057;&#x307E;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;document&#x306B;&#x307E;&#x3067;&#x30A8;&#x30F3;&#x30BF;&#x30FC;&#x30AD;&#x30FC;&#x304C;&#x6E21;&#x3063;&#x3066;&#x3057;&#x307E;&#x3044;&#x6539;&#x884C;&#x3055;&#x308C;&#x3066;&#x3057;&#x307E;&#x3046;&#x3002;
	// 	} else if (keycode == 27 || $command.val() == &apos;&apos;) {
	// 		// Esc
	// 		// &#x3042;&#x308B;&#x3044;&#x306F;&#x5168;&#x6587;&#x5B57;&#x524A;&#x9664;
	// 		endCommandMode();
	// 		e.stopPropagation();
	// 	} else {
	// 		// :e&#x306A;&#x3069;&#x306E;&#x5F8C;&#x306B;&#x9014;&#x4E2D;&#x307E;&#x3067;&#x5F15;&#x6570;&#x3092;&#x6253;&#x3066;&#x3070;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x691C;&#x7D22;&#x30C0;&#x30A4;&#x30A2;&#x30ED;&#x30B0;&#x304C;&#x51FA;&#x308B;&#x3088;&#x3046;&#x306B;&#x3059;&#x308B;
	// 		let command = $command.val().split(&apos; &apos;);
	// 		if (command.length &lt; 2) command = $command.val().split(&apos;&#x3000;&apos;); // &#x5168;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3082;&#x533A;&#x5207;&#x308A;&#x3068;&#x3057;&#x3066;&#x6709;&#x52B9;&#x3002;&#x305F;&#x3060;&#x3057;&#x3001;&#x534A;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3068;&#x306E;&#x6DF7;&#x5728;&#x306F;&#x73FE;&#x72B6;&#x4E0D;&#x53EF;
	//
	// 		switch (command[0]) {
	// 			case &apos;:e&apos;:
	// 			case &apos;:o&apos;:
	// 			case &apos;:open&apos;:
	// 			case &apos;:mv&apos;:
	// 			case &apos;:delete&apos;:
	// 			case &apos;:del&apos;:
	// 			case &apos;:d&apos;:
	// 			case &apos;:&#x3048;&apos;:
	// 			case &apos;:&#x304A;&apos;:
	// 			case &apos;:&#x304A;&#x307A;&#xFF4E;&apos;:
	// 			case &apos;:&#xFF4D;&#xFF56;&apos;:
	// 			case &apos;:&#x3067;&#x3047;&#x3066;&apos;:
	// 			case &apos;:&#x3067;&#xFF4C;&apos;:
	// 			case &apos;:&#xFF44;&apos;:
	//
	// 					 if (keycode !== 8 &amp;&amp; command[1] &amp;&amp; !($(&apos;body&apos;).hasClass(&apos;modal-open&apos;))) {
	// 						 // &#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x30A6;&#x30A3;&#x30F3;&#x30C9;&#x30A6;&#x3092;&#x8868;&#x793A;&#x3059;&#x308B;
	// 						 dispFileModalOnCommand();
	// 						 comSearchFile(command[1]);
	// 					 } else if (keycode === 8 &amp;&amp; !(command[1])) {
	// 						 // BS&#x3092;&#x62BC;&#x3057;&#x305F;&#x7D50;&#x679C;&#x3001;&#x5F15;&#x6570;&#x304C;&#x306A;&#x304F;&#x306A;&#x3063;&#x305F;
	// 						 // &#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x30A6;&#x30A3;&#x30F3;&#x30C9;&#x30A6;&#x3092;&#x975E;&#x8868;&#x793A;&#x306B;&#x3059;&#x308B;
	// 						 comHideFileModaOnCommand();
	// 					 } else if (command[1] &amp;&amp; command[2]) {
	// 						 // &#x5F15;&#x6570;&#x3075;&#x305F;&#x3064;&#x76EE;
	// 						 comSearchFile(command[2]);
	// 					 } else if (command[1]) {
	// 						 // &#x5F15;&#x6570;&#x3072;&#x3068;&#x3064;
	// 						 comSearchFile(command[1]);
	// 					 }
	//
	// 					 break;
	// 			default:
	// 					 break;
	// 		}
	//
	// 	}
	// 	e.preventDefault();
	// }
	//
	// function dispFileModalOnCommand() {
	// 	&apos;use strict&apos;;
	// 	$(&apos;#file_list_modal&apos;).addClass(&apos;command-modal&apos;).modal();
	// 	$(&apos;.modal-backdrop.fade.in&apos;).addClass(&apos;none_modal-backdrop&apos;); // &#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x30A6;&#x30A3;&#x30F3;&#x30C9;&#x30A6;&#x8868;&#x793A;&#x6642;&#x306E;&#x534A;&#x900F;&#x660E;&#x80CC;&#x666F;&#x3092;&#x898B;&#x3048;&#x306A;&#x304F;&#x3059;&#x308B;
	// }
	//
	// function comHideFileModaOnCommand() {
	// 	&apos;use strict&apos;;
	// 	if ($(&apos;body&apos;).hasClass(&apos;modal-open&apos;)) {
	// 		// &#x3042;&#x3089;&#x304B;&#x3058;&#x3081;bootstrap&#x3088;&#x308A;&#x5148;&#x56DE;&#x308A;&#x3057;&#x3066;style&#x9069;&#x7528;&#x3067;&#x975E;&#x8868;&#x793A;&#x306B;&#x3057;&#x3066;&#x304A;&#x304B;&#x306A;&#x3051;&#x308C;&#x3070;&#x3001;&#x6D88;&#x3048;&#x308B;&#x524D;&#x306B;&#x4E00;&#x77AC;&#x4E2D;&#x592E;&#x8868;&#x793A;&#x306B;&#x306A;&#x3063;&#x3066;&#x3057;&#x307E;&#x3046;
	// 		$(&apos;#file_list_modal&apos;)
	// 			.attr(&apos;style&apos;,&apos;display: none;&apos;)
	// 			.removeClass(&apos;command-modal&apos;)
	// 			.modal(&apos;hide&apos;);
	// 	}
	// 	// comFileList(getUserId());
	// 	container.fileList().read();
	// }
	//
	// function endCommandMode() {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;endCommandMode&apos;);
	// 	const $body = $(&apos;body&apos;);
	// 	const $command = $(&apos;#command&apos;).removeClass(&apos;active&apos;);
	//
	// 	$body.off(&apos;keyup&apos;,&apos;#command&apos;,keyupOnCommand);
	// 	$body.off(&apos;blur&apos;,&apos;#command&apos;,endCommandMode);
	// 	document.addEventListener(&apos;keydown&apos;,keydownOnDoc,false);
	// 	comHideFileModaOnCommand();
	// }
	//
	// // ---------------------------- find mode ----------------------------------
	//
	// /*
	//  * &#x5B57;&#x53E5;&#x691C;&#x7D22;
	//  * &#x300C;/&#x300D;&#x3067;&#x5B57;&#x53E5;&#x691C;&#x7D22;&#x30E2;&#x30FC;&#x30C9;&#x306B;&#x5165;&#x308B;
	//  * find()&#x306B;&#x6587;&#x5B57;&#x5217;&#x3092;&#x6E21;&#x3059;&#x3068;&#x3001;&#x6E21;&#x3055;&#x308C;&#x305F;&#x6587;&#x5B57;&#x5217;&#x3092;&#x672C;&#x6587;&#x5185;&#x304B;&#x3089;&#x63A2;&#x3057;&#x3001;&#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x6587;&#x5B57;&#x5217;&#x306B;find-word&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;
	//  * &#x3055;&#x3089;&#x306B;&#x3001;&#x898B;&#x3064;&#x304B;&#x3063;&#x305F;&#x6587;&#x5B57;&#x5217;&#x306E;&#x5148;&#x982D;&#x6587;&#x5B57;&#x306B;find-label&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;
	//  */
	// // &#x5B57;&#x53E5;&#x691C;&#x7D22;&#x3092;&#x958B;&#x59CB;&#x3059;&#x308B;
	// function startFindMode() {
	// 	&apos;use strict&apos;;
	// 	const $find = $(&apos;#search&apos;).addClass(&apos;active&apos;);
	// 	// &#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x3092;&#x5F53;&#x3066;&#x3066;&#x304B;&#x3089;value&#x3092;&#x30BB;&#x30C3;&#x30C8;&#x3059;&#x308B;&#x3053;&#x3068;&#x3067;&#x672B;&#x5C3E;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x79FB;&#x52D5;&#x3055;&#x308C;&#x308B;
	// 	$find.focus();
	// 	$find.val(&apos;/&apos;);
	//
	// 	document.removeEventListener(&apos;keydown&apos;,keydownOnDoc,false);
	//
	// 	$(&apos;body&apos;).on(&apos;keyup&apos;,&apos;#find&apos;,function(e) {
	//
	// 		// &#x30A8;&#x30F3;&#x30BF;&#x30FC;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x308C;&#x3070;&#x30D5;&#x30A9;&#x30FC;&#x30AB;&#x30B9;&#x3092;draft&#x306B;&#x623B;&#x3059;(&#x4ED8;&#x4E0E;&#x3055;&#x308C;&#x305F;&#x30AF;&#x30E9;&#x30B9;&#x306F;&#x9664;&#x53BB;&#x3057;&#x306A;&#x3044;)
	// 		if (e.keyCode == 13) {
	// 			// enter
	// 			$find.blur();
	// 			document.addEventListener(&apos;keydown&apos;,keydownOnDoc,false);
	// 			return;
	// 		}
	//
	// 		// $find&#x306E;&#x4E2D;&#x8EAB;&#x304C;&#x7A7A;&#x306B;&#x306A;&#x308C;&#x3070;find&#x30E2;&#x30FC;&#x30C9;&#x3092;&#x5B8C;&#x5168;&#x306B;&#x7D42;&#x4E86;&#x3059;&#x308B;
	// 		if ($find.val() == &apos;&apos;) {
	// 			$find.blur();
	// 			document.addEventListener(&apos;keydown&apos;,keydownOnDoc,false);
	// 			endFindMode();
	// 			return;
	// 		}
	//
	// 		find($find.val().substring(1));
	// 	});
	//
	// 	$(&apos;body&apos;).on(&apos;blur&apos;,&apos;#search&apos;,function(e) {
	// 		document.addEventListener(&apos;keydown&apos;,keydownOnDoc,false);
	// 	});
	// 	$(&apos;body&apos;).on(&apos;focus&apos;,&apos;#search&apos;,function(e) {
	// 		document.removeEventListener(&apos;keydown&apos;,keydownOnDoc,false);
	// 	});
	// }
	//
	// // &#x5B57;&#x53E5;&#x691C;&#x7D22;&#x3092;&#x5B8C;&#x5168;&#x306B;&#x7D42;&#x4E86;&#x3059;&#x308B;
	// function endFindMode() {
	// 	&apos;use strict&apos;;
	// 	$(&apos;#search&apos;).removeClass(&apos;active&apos;).val(&apos;&apos;);
	// 	$(&apos;.search-label&apos;).removeClass(&apos;search-label&apos;);
	// 	$(&apos;.search-word&apos;).removeClass(&apos;search-word&apos;);
	// }
	//
	// function find(word) {
	// 	// &#x691C;&#x7D22;&#x5B57;&#x53E5;&#x306B;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;
	// 	&apos;use strict&apos;;
	// 	const eSentence = document.getElementById(&apos;sentence_container&apos;);
	//
	// 	// reset
	// 	const eOldLabel = eSentence.getElementsByClassName(&apos;search-label&apos;);
	// 	const eOldWord = eSentence.getElementsByClassName(&apos;search-word&apos;);
	// 	while (eOldLabel[0]) { // &#x30AF;&#x30E9;&#x30B9;&#x3092;remove&#x3059;&#x308B;&#x3068;eOldLabel&#x304B;&#x3089;&#x305D;&#x306E;&#x8981;&#x7D20;&#x304C;&#x306A;&#x304F;&#x306A;&#x3063;&#x3066;&#x8A70;&#x3081;&#x3089;&#x308C;&#x308B;
	// 		eOldLabel[0].classList.remove(&apos;search-label&apos;);
	// 	}
	// 	while (eOldWord[0]) {
	// 		eOldWord[0].classList.remove(&apos;search-word&apos;);
	// 	}
	// 	console.log(&apos;removed&apos;);
	// 	if (word === &apos;&apos;) return; // &#x691C;&#x7D22;&#x6587;&#x5B57;&#x304C;&#x306A;&#x304F;&#x306A;&#x3063;&#x305F;&#x5834;&#x5408;&#x306F;&#x3001;&#x3059;&#x3079;&#x3066;&#x306E;&#x6587;&#x5B57;&#x304B;&#x3089;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x9664;&#x53BB;&#x3059;&#x308B;&#x306E;&#x307F;
	//
	// 	const eChars = eSentence.getElementsByClassName(&apos;char&apos;);
	// 	const indexArr = findIndex(word);
	// 	const wordLen = word.length;
	// 	for(let index of indexArr) {
	// 		// &#x5148;&#x982D;&#x6587;&#x5B57;&#x306B;find-label
	// 		eChars[index].classList.add(&apos;search-label&apos;);
	// 		for (let word_i = 0;word_i &lt; wordLen;word_i++) {
	// 			// &#x8A72;&#x5F53;&#x6587;&#x5B57;&#x5168;&#x3066;&#x306B;find-word
	// 			eChars[index + word_i].classList.add(&apos;search-word&apos;);
	// 		}
	// 	}
	//
	// 	// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x306E;&#x6B21;&#x306B;&#x4F4D;&#x7F6E;&#x3059;&#x308B;&#x691C;&#x7D22;&#x8A9E;&#x53E5;&#x306E;&#x982D;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;
	// 	if (!eSentence.getElementsByClassName(&apos;cursor&apos;)[0].classList.contains(&apos;search-label&apos;)) findNext();
	// }
	//
	// function findIndex(word) {
	// 	&apos;use strict&apos;;
	// 	/*
	// 	 * &#x5B57;&#x53E5;&#x691C;&#x7D22;
	// 	 * 1&#x6587;&#x5B57;&#x76EE;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x914D;&#x5217;&#x3092;&#x8FD4;&#x3059;
	// 	 * &#x691C;&#x7D22;&#x5B57;&#x53E5;&#x3092;1&#x6587;&#x5B57;&#x305A;&#x3064;&#x78BA;&#x8A8D;
	// 	 * &#x691C;&#x7D22;&#x5B57;&#x53E5;&#x306E;1&#x6587;&#x5B57;&#x76EE;&#x3068;&#x3001;&#x914D;&#x5217;&#x306B;&#x6B8B;&#x3063;&#x3066;&#x3044;&#x308B;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;char&#x306E;&#x6587;&#x5B57;&#x3092;&#x6BD4;&#x8F03;&#x3057;&#x3001;&#x7570;&#x306A;&#x308C;&#x3070;&#x914D;&#x5217;&#x304B;&#x3089;&#x9664;&#x5916;&#x3059;&#x308B;
	// 	 * &#x691C;&#x7D22;&#x5B57;&#x53E5;&#x306E;2&#x6587;&#x5B57;&#x76EE;&#x3068;&#x3001;&#x914D;&#x5217;&#x306B;&#x6B8B;&#x3063;&#x3066;&#x3044;&#x308B;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;char&#x306E;&#x6B21;&#x306E;char&#x306E;&#x6587;&#x5B57;&#x3092;&#x6BD4;&#x8F03;&#x3057;&#x3001;&#x7570;&#x306A;&#x308C;&#x3070;&#x914D;&#x5217;&#x304B;&#x3089;&#x9664;&#x5916;&#x3059;&#x308B;
	// 	 * &#x691C;&#x7D22;&#x5B57;&#x53E5;&#x306E;3&#x6587;&#x5B57;&#x76EE;&#x3068;&#x3001;&#x914D;&#x5217;&#x306B;&#x6B8B;&#x3063;&#x3066;&#x3044;&#x308B;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;char&#x304B;&#x3089;&#xFF12;&#x3064;&#x5F8C;&#x306E;char&#x306E;&#x6587;&#x5B57;&#x3092;&#x6BD4;&#x8F03;&#x3057;&#x3001;&#x7570;&#x306A;&#x308C;&#x3070;&#x914D;&#x5217;&#x304B;&#x3089;&#x9664;&#x5916;&#x3059;&#x308B;
	// 	 * &#x691C;&#x7D22;&#x5B57;&#x53E5;&#x306E;&#x3059;&#x3079;&#x3066;&#x306E;&#x6587;&#x5B57;&#x306B;&#x5BFE;&#x3057;&#x3066;&#x4EE5;&#x4E0A;&#x3092;&#x7E70;&#x308A;&#x8FD4;&#x3057;&#x3066;&#x3044;&#x304D;&#x3001;&#x6700;&#x7D42;&#x7684;&#x306B;&#x914D;&#x5217;&#x8981;&#x7D20;&#x3068;&#x3057;&#x3066;&#x6B8B;&#x3063;&#x3066;&#x3044;&#x308B;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x304C;&#x3001;&#x691C;&#x7D22;&#x6587;&#x5B57;&#x5217;&#x306E;&#xFF11;&#x6587;&#x5B57;&#x76EE;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3068;&#x306A;&#x308B;
	// 	 */
	// 	const eChars = document.getElementById(&apos;sentence_container&apos;).getElementsByClassName(&apos;char&apos;);
	// 	const indexArr = [];
	//
	// 	// &#x3044;&#x3063;&#x305F;&#x3093;&#x3001;&#x3059;&#x3079;&#x3066;&#x306E;&#x6587;&#x5B57;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x914D;&#x5217;&#x306B;&#x5165;&#x308C;&#x308B;
	// 	for (let i = 0,len = eChars.length;i &lt; len;i++) {
	// 		indexArr[i] = i;
	// 	}
	//
	// 	for (let search_i = 0,wordLen = word.length;search_i &lt; wordLen;search_i++) {
	// 		const searchChar = word.charAt(search_i);
	// 		// &#x914D;&#x5217;&#x304B;&#x3089;&#x3001;&#x6761;&#x4EF6;&#x306B;&#x5408;&#x308F;&#x306A;&#x3044;&#x8981;&#x7D20;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x9664;&#x5916;&#x3059;&#x308B;
	// 		for (let index_i = 0;index_i &lt; indexArr.length;index_i++) { // length&#x306F;&#x5909;&#x52D5;&#x3059;&#x308B;&#x305F;&#x3081;&#x3001;&#x30AD;&#x30E3;&#x30C3;&#x30B7;&#x30E5;&#x4E0D;&#x53EF;
	// 			if (eChars[indexArr[index_i]+search_i].textContent != searchChar) {
	// 				indexArr.splice(index_i,1); // index_i&#x756A;&#x76EE;&#x304B;&#x3089;&#x8981;&#x7D20;&#x3092;&#x4E00;&#x3064;&#x524A;&#x9664;&#x3059;&#x308B;
	// 				index_i--; // &#x8981;&#x7D20;&#x3092;&#x524A;&#x9664;&#x3057;&#x3066;&#x914D;&#x5217;&#x304C;&#x8A70;&#x3081;&#x3089;&#x308C;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;&#x518D;&#x3073;&#x540C;&#x3058;&#x6DFB;&#x5B57;&#x306E;&#x8981;&#x7D20;&#x3092;&#x78BA;&#x8A8D;&#x3059;&#x308B;
	// 			}
	// 		}
	// 	}
	// 	return indexArr;
	// }
	//
	// // &#x6B21;&#x306E;&#x691C;&#x7D22;&#x8A9E;&#x53E5;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x5F53;&#x3066;&#x308B;
	// function findNext() {
	// 	&apos;use strict&apos;;
	// 	const $oldCursor = $(&apos;.cursor&apos;);
	// 	const $newCursor = $oldCursor.nextObj(&apos;#sentence_container .search-label,.cursor&apos;,true);
	//
	// 	if (!$newCursor[0]) return;
	//
	// 	$newCursor.addCursor(true);
	// 	gCursor.repositionCharNum();
	// }
	//
	// // &#x524D;&#x306E;&#x691C;&#x7D22;&#x8A9E;&#x53E5;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x623B;&#x3059;
	// function findPrev() {
	// 	&apos;use strict&apos;;
	// 	const $oldCursor = $(&apos;.cursor&apos;);
	// 	const $newCursor = $oldCursor.prevObj(&apos;#sentence_container .search-label,.cursor&apos;,true);
	//
	// 	if (!$newCursor[0]) return;
	//
	// 	$newCursor.addCursor(true);
	// 	gCursor.repositionCharNum();
	// }
	//
	// // -------------------------------- for user utility ---------------------------------------
	// function userAlert(str) {
	// 	&apos;use strict&apos;;
	// 	$(&apos;#user_info&apos;).text(str);
	// }
	//
	// // ===================================================================
	// // 		&#x6587;&#x7AE0;&#x64CD;&#x4F5C;(label:string)
	// // ===================================================================
	//
	// // ------------------------------  insert string ------------------------
	//
	// function printString(strArray) {
	// 	&apos;use strict&apos;;
	// 	// &#x914D;&#x5217;&#x3092;&#x5F15;&#x6570;&#x306B;&#x3057;&#x3066;&#x3001;&#x5404;&#x6587;&#x5B57;&#x5217;&#x3092;&#x672C;&#x6587;&#x8868;&#x793A;
	// 	// &#x914D;&#x5217;&#x306B;&#x5165;&#x3063;&#x3066;&#x3044;&#x308B;&#x5404;&#x6587;&#x5B57;&#x5217;&#x3092;&#x305D;&#x308C;&#x305E;&#x308C;&#x6BB5;&#x843D;&#x3068;&#x3057;&#x3066;&#x633F;&#x5165;&#x3059;&#x308B;
	// 	const strLen = getStringLenOfRow();
	// 	let html = &apos;&apos;;
	//
	// 	// &#x6BB5;&#x843D;&#x306E;html&#x6587;&#x5B57;&#x5217;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x3066;&#x9023;&#x7D50;
	// 	for (let str of strArray) {
	// 		html += createParagraphHtml(str);
	// 	}
	//
	// 	// &#x30C7;&#x30FC;&#x30BF;&#x306B;&#xFF11;&#x6587;&#x5B57;&#x3082;&#x306A;&#x3051;&#x308C;&#x3070;&#x4E0A;&#x8A18;for&#x6587;&#x306B;&#x5165;&#x308C;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x7A7A;&#x884C;&#x3092;&#x5225;&#x306B;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// 	if ($(&apos;#sentence_container &gt; .paragraph&apos;).length === 0) {
	// 		html += createParagraphHtml(&apos;&apos;);
	// 	}
	//
	// 	// innerHTML&#x3067;&#x753B;&#x9762;&#x5185;&#x306B;&#x633F;&#x5165;&#x3059;&#x308B;
	// 	document.getElementById(&apos;sentence_container&apos;).innerHTML = html;
	// }
	//
	// function appendParagraph(str) {
	// 	&apos;use strict&apos;;
	// 	$(&apos;#sentence_container&apos;).append(createParagraphHtml(str));
	// }
	//
	// function appendParagraphFromObj(paraObjArr) {
	// 	// &#x6C7A;&#x307E;&#x3063;&#x305F;&#x5F62;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x5F15;&#x6570;&#x306B;&#x3001;&#x672C;&#x6587;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x3066;&#x753B;&#x9762;&#x306B;&#x8868;&#x793A;&#x3059;&#x308B;
	// 	&apos;use strict&apos;;
	// 	let html = &apos;&apos;;
	// 	for (let paraObj of paraObjArr) {
	// 		html += createParagraphHtmlFromObj(paraObj);
	// 	}
	// 	document.getElementById(&apos;sentence_container&apos;).innerHTML = html;
	// 	checkKinsoku(); // &#x7981;&#x5247;&#x51E6;&#x7406;
	// }
	//
	// function insertStringFromCursor(str) {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;ins string from cursor&apos;);
	// 	const $cursor = $(&apos;.cursor&apos;);
	// 	const $cursorRow = $(&apos;#sentence_container .cursor-row&apos;)
	//
	// 		for (let char of str) {
	// 			const $character = $(createCharHtml(char));
	// 			$cursor.before($character);
	// 		}
	// 	cordinateStringNumber($cursorRow,getStringLenOfRow());
	// 	gCursor.repositionCharNum();
	// 	checkKinsoku();
	// 	// changeDisplayRow(false);
	// 	// resetDisplayChar();
	// 	// changeDisplayChar();
	// 	addPageBreak();
	// 	printDocInfo();
	// }
	//
	// function insertStringToInputBuffer(str) {
	// 	&apos;use strict&apos;;
	// 	const $inputBuffer = $(&apos;#input_buffer&apos;);
	// 	$inputBuffer.empty();
	//
	// 	for (let char of str) {
	// 		$inputBuffer.append(
	// 				$(createCharHtml(char)
	// 					).attr(&apos;data-phrase-num&apos;,-1));
	// 	}
	//
	// 	$inputBuffer.append($(&apos;&lt;span class=&quot;char EOL&quot;&gt;&lt;/span&gt;&apos;));
	// 	$inputBuffer.show();
	//
	// 	moveInput();
	//
	// 	return $inputBuffer;
	// }
	//
	// // inputBuffer&#x306E;&#x66F4;&#x65B0;
	// function updateInputBuffer(keycode,isShift) {
	// 	&apos;use strict&apos;;
	// 	const inputStr = $(&apos;#input_buffer&apos;).text(); //&#x3082;&#x3068;&#x3082;&#x3068;&#x306E;&#x6587;&#x5B57;&#x5217;
	// 	let newInputStr;
	//
	// 	if (isShift) {
	// 		newInputStr = inputStr + key_table.shift_key[keycode];
	// 	} else {
	// 		newInputStr = key_table.getString(inputStr,keycode); //keycode&#x3092;&#x52A0;&#x3048;&#x305F;&#x65B0;&#x3057;&#x3044;&#x6587;&#x5B57;&#x5217;
	// 	}
	//
	// 	if (newInputStr === undefined || newInputStr.indexOf(&apos;undefined&apos;) !== -1) {
	// 		// &#x672A;&#x5B9A;&#x7FA9;&#x6587;&#x5B57;(alt,ctrl,tab&#x306A;&#x3069;)&#x306F;return
	// 		return;
	// 	}
	//
	// 	insertStringToInputBuffer(newInputStr);
	// }
	//
	// function insertPhraseToInputBuffer(phNum,str) {
	// 	&apos;use strict&apos;;
	// 	// &#x6587;&#x7BC0;&#x756A;&#x53F7;phNum&#x3092;&#x3001;str&#x3067;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;
	// 	// &#x65B0;&#x3057;&#x3044;&#x6587;&#x5B57;&#x96C6;&#x5408;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x8FD4;&#x3059;
	// 	const $selectPhrases = $(&apos;#input_buffer &gt; .char[data-phrase-num=&apos;+ phNum +&apos;]&apos;);
	// 	const $insertPosChar = $selectPhrases.first();
	//
	// 	for (let char of str) {
	// 		const $character = $(createCharHtml(char));
	// 		$insertPosChar.before($character);
	// 		$character.attr(&apos;data-phrase-num&apos;,-10);
	// 	}
	// 	$selectPhrases.remove();
	//
	// 	return $(&apos;#input_buffer &gt; .char[data-phrase-num=&quot;-10&quot;]&apos;).attr(&apos;data-phrase-num&apos;,phNum);
	// }
	//
	// // --------------------------------------- create string html ------------------------------------
	//
	// // &#x6587;&#x5B57;&#x5217;&#x3092;&#x5F15;&#x6570;&#x306B;&#x3057;&#x3066;&#x3001;&#x6BB5;&#x843D;&#x306E;html&#x6587;&#x5B57;&#x5217;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// function createParagraphHtml(str) {
	// 	&apos;use strict&apos;;
	// 	let html = &apos;&lt;div class=&quot;paragraph&quot;&gt;&apos;
	//
	// 		// strLen&#x6587;&#x5B57;&#x3054;&#x3068;&#x306B;&#x533A;&#x5207;&#x3063;&#x3066;&#x5404;&#x884C;&#x3068;&#x3057;&#x3066;&#x9023;&#x7D50;&#x3059;&#x308B;
	// 		const strLen = getStringLenOfRow();
	// 	for (let pos = 0,len = str.length; pos &lt;= len; pos += strLen) { // &#x7A7A;&#x6587;&#x5B57;&#x304C;&#x6E21;&#x3055;&#x308C;&#x308B;&#x3053;&#x3068;&#x3082;&#x3042;&#x308B;&#x306E;&#x3067;&#x3001;pox&lt;=len&#x3068;=&#x304C;&#x3064;&#x3044;&#x3066;&#x3044;&#x308B;
	// 		if(str.length &lt; pos + strLen){
	// 			// &#x6B8B;&#x3063;&#x305F;&#x6587;&#x5B57;&#x304C;&#x4E00;&#x884C;&#x3067;&#x53CE;&#x307E;&#x308B;
	// 			const outputStr = str.slice(pos);
	// 			html += createRowHtml(outputStr);
	// 		} else {
	// 			// &#x6B8B;&#x308A;&#x6587;&#x5B57;&#x304C;&#x4E00;&#x884C;&#x3067;&#x53CE;&#x307E;&#x3089;&#x306A;&#x3044;
	// 			const	outputStr = str.substring(pos, pos+strLen);
	// 			html += createRowHtml(outputStr);
	// 		}
	// 	}
	//
	// 	html += &apos;&lt;/div&gt;&apos;
	//
	// 		return html;
	// }
	//
	// // &#x6587;&#x5B57;&#x5217;&#x3092;&#x5F15;&#x6570;&#x306B;&#x3057;&#x3066;&#x884C;&#x306E;html&#x6587;&#x5B57;&#x5217;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// function createRowHtml(str) {
	// 	&apos;use strict&apos;;
	// 	if (str == null) return;
	//
	// 	let html = &apos;&lt;div class=&quot;row&quot;&gt;&apos;
	//
	// 		for (let char of str) {
	// 			html += createCharHtml(char);
	// 		}
	//
	// 	html += &apos;&lt;span class=&quot;char EOL display&quot;&gt;&lt;/span&gt;&lt;/div&gt;&apos;;
	//
	// 	return html;
	// }
	//
	// function createCharHtml(char) {
	// 	&apos;use strict&apos;;
	// 	// string&#x3092;&#x5F15;&#x6570;&#x306B;&#x3057;&#x3066;&#x3001;&#x6587;&#x5B57;&#x306E;html&#x6587;&#x5B57;&#x5217;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// 	// &#x5F15;&#x6570;&#x306E;&#x6587;&#x5B57;&#x5217;&#x304C;&#xFF12;&#x6587;&#x5B57;&#x4EE5;&#x4E0A;&#x306E;&#x5834;&#x5408;&#x306F;&#x3001;&#x6700;&#x521D;&#x306E;&#xFF11;&#x6587;&#x5B57;&#x306E;&#x307F;&#x304C;&#x6709;&#x52B9;
	// 	// &#x30AF;&#x30E9;&#x30B9;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;&#x306B;&#x306F;&#x3001;&#x6700;&#x521D;&#x306B;&#x534A;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3092;&#x5165;&#x308C;&#x308B;&#x3053;&#x3068;
	// 	if (char.length &gt; 1) { char = char.charAt(0); }
	// 	const classArr = getConfDecoChar();
	// 	let html = &apos;&lt;span class=&quot;char display&apos;;
	//
	// 	for (let className of classArr) {
	// 		html += &apos; &apos; + className;
	// 	}
	//
	// 	// &#x7279;&#x6B8A;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x4ED8;&#x4E0E;
	// 	if (/[&#x3002;&#x3001;,\.]/.test(char))
	// 		html += &apos; vertical-dot&apos;;
	// 	else if (/[&#x300C;&#x300E;]/.test(char))
	// 		html += &apos; vertical-before-kagi-bracket&apos;;
	// 	else if (/[&#x300D;&#x300F;]/.test(char))
	// 		html += &apos; vertical-after-kagi-bracket&apos;;
	// 	else if (/[&#xFF08;\[&lt;\{&#x3010;\(&#xFF3B;&#x3008;]/.test(char))
	// 		html += &apos; vertical-before-bracket&apos;;
	// 	else if (/[\)\]&gt;\}&#x3011;&#xFF09;&#xFF3D;&#x3009;]/.test(char))
	// 		html += &apos; vertical-after-bracket&apos;;
	// 	else if (/[-&#x30FC;&#x2015;&#x301C;]/.test(char))
	// 		html += &apos; character-line&apos;;
	// 	else if (/[a-z]/.test(char))
	// 		html += &apos; alphabet&apos;;
	// 	else if (/[&#xFF11;-&#xFF19;]/.test(char))
	// 		html += &apos; number&apos;;
	// 	else if (/[&#x3063;&#x3083;&#x3085;&#x3087;&#x3041;&#x3043;&#x3045;&#x3047;&#x3049;&#x30A1;&#x30A3;&#x30A5;&#x30A7;&#x30A9;&#x30C3;&#x30E3;&#x30E5;&#x30E7;]/.test(char))
	// 		html += &apos; yoin&apos;;
	//
	// 	html += &apos;&quot; data-font-size=&quot;auto&quot;&gt;&apos;;
	// 	html += char;
	// 	html += &apos;&lt;/span&gt;&apos;;
	// 	return html;
	// }
	//
	// function createParagraphHtmlFromObj(paraObj) {
	// 	&apos;use strict&apos;;
	// 	// &#x6C7A;&#x307E;&#x3063;&#x305F;&#x5F62;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x5F15;&#x6570;&#x306B;&#x3057;&#x3066;&#x3001;paragraph&#x306E;html&#x6587;&#x5B57;&#x5217;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// 	/*
	// 	 * 			[
	// 	 * 				[&quot;decolation-textalign-center&quot;],		 // &#x6BB5;&#x843D;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x304C;&#x6587;&#x5B57;&#x5217;&#x306E;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
	// 	 * 				[												 // &#x5404;&#x6587;&#x5B57;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
	// 	 * 					{											 // &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	// 	 * 						&quot;char&quot;:&quot;&#x3042;&quot;,
	// 	 * 						&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	// 	 * 					},
	// 	 * 					{
	// 	 * 						&quot;char&quot;:&quot;&#x3044;&quot;,
	// 	 * 						&quot;decolation&quot;:null
	// 	 * 					}
	// 	 * 					]
	// 	 * 			]
	// 	 */
	// 	let html = &apos;&lt;div class=&quot;paragraph&quot;&apos;;
	//
	// 	// &#x6BB5;&#x843D;&#x305D;&#x306E;&#x3082;&#x306E;&#x306B;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;
	// 	for (let className of paraObj[0]) {
	// 		html += &apos; &apos; + className;
	// 	}
	// 	html += &apos;&gt;&apos;;
	//
	// 	// &#x6587;&#x5B57;&#x306E;&#x914D;&#x5217;&#x3092;strLen&#x500B;&#x305A;&#x3064;&#x306E;&#x914D;&#x5217;&#x306B;&#x5206;&#x3051;&#x3001;&#x305D;&#x308C;&#x305E;&#x308C;&#x3067;&#x884C;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x3066;&#x9023;&#x7D50;&#x3059;&#x308B;
	// 	const strLen = getStringLenOfRow();
	// 	const objArray = splitArray(paraObj[1],strLen); // paraObj[1]&#x304C;&#x7A7A;&#x914D;&#x5217;&#x306A;&#x3089;&#x3001;objArray&#x306B;&#x3082;&#x7A7A;&#x914D;&#x5217;&#x304C;&#x5165;&#x308B;
	// 	for (let charArray of objArray) {
	// 		html += createRowHtmlFromObj(charArray);
	// 	}
	// 	// paraObj[1]&#x304C;&#x7A7A;&#x914D;&#x5217; = &#x7A7A;&#x6BB5;&#x843D;(&#x7A7A;&#x884C;)&#x306E;&#x5834;&#x5408;&#x306F;&#x4E0A;&#x8A18;for&#x6587;&#x304C;&#x5B9F;&#x884C;&#x3055;&#x308C;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x5225;&#x306B;&#x7A7A;&#x884C;&#x3092;&#x4F5C;&#x6210;&#x3057;&#x3066;&#x9023;&#x7D50;&#x3059;&#x308B;
	// 	if (objArray.length === 0) {
	// 		html += createRowHtmlFromObj([]); // createRow~&#x306B;&#x7A7A;&#x914D;&#x5217;&#x3092;&#x6E21;&#x305B;&#x3070;&#x7A7A;&#x884C;&#x304C;&#x4F5C;&#x3089;&#x308C;&#x308B;
	// 	}
	//
	// 	html += &apos;&lt;/div&gt;&apos;;
	// 	return html;
	// }
	//
	// function createRowHtmlFromObj(objArray) {
	// 	&apos;use strict&apos;;
	// 	// &#x6C7A;&#x307E;&#x3063;&#x305F;&#x5F62;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x5F15;&#x6570;&#x306B;&#x3057;&#x3066;&#x3001;row&#x306E;html&#x6587;&#x5B57;&#x5217;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// 	/*
	// 	 * 				[												 // &#x5404;&#x6587;&#x5B57;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x914D;&#x5217;&#x3067;&#x683C;&#x7D0D;&#x3055;&#x308C;&#x308B;
	// 	 * 					{											 // &#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	// 	 * 						&quot;char&quot;:&quot;&#x3042;&quot;,
	// 	 * 						&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	// 	 * 					},
	// 	 * 					{
	// 	 * 						&quot;char&quot;:&quot;&#x3044;&quot;,
	// 	 * 						&quot;decolation&quot;:null
	// 	 * 					}
	// 	 * 					]
	// 	 */
	// 	let html = &apos;&lt;div class=&quot;row&quot;&gt;&apos;;
	//
	// 	for (let charObj of objArray) {
	// 		html += createCharHtmlFromObj(charObj);
	// 	}
	// 	html += &apos;&lt;span class=&quot;char EOL display&quot;&gt;&lt;/span&gt;&lt;/div&gt;&apos;
	// 		return html;
	// }
	//
	// function createCharHtmlFromObj(obj) {
	// 	&apos;use strict&apos;;
	// 	// &#x6C7A;&#x307E;&#x3063;&#x305F;&#x5F62;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x5F15;&#x6570;&#x306B;&#x3057;&#x3066;&#x3001;char&#x306E;html&#x6587;&#x5B57;&#x5217;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// 	// &#x30AF;&#x30E9;&#x30B9;&#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B;&#x306B;&#x306F;&#x3001;&#x6700;&#x521D;&#x306B;&#x534A;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3092;&#x5165;&#x308C;&#x308B;&#x3053;&#x3068;
	// 	/*
	// 	 *		&#x6587;&#x5B57;&#x3092;&#x8868;&#x3059;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	// 	 *		{
	// 	 *			&quot;char&quot;:&quot;&#x3042;&quot;,
	// 	 *			&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	// 	 *		}
	// 	 */
	// 	const char = obj[&apos;char&apos;];
	// 	const classArr = obj[&apos;decolation&apos;];
	// 	let html = &apos;&lt;span class=&quot;char&apos;;
	//
	// 	for (let className of classArr) {
	// 		html += &apos; &apos; + className;
	// 	}
	//
	// 	// &#x6587;&#x5B57;&#x306E;&#x7A2E;&#x985E;&#x306B;&#x5FDC;&#x3058;&#x3066;&#x4ED8;&#x4E0E;&#x3059;&#x308B;&#x30AF;&#x30E9;&#x30B9;
	// 	if (/[&#x3002;&#x3001;,.,]/.test(char))
	// 		html += &apos; vertical-dot&apos;;
	// 	else if (/[&#x300C;&#x300E;]/.test(char))
	// 		html += &apos; vertical-before-kagi-bracket&apos;;
	// 	else if (/[&#x300D;&#x300F;]/.test(char))
	// 		html += &apos; vertical-after-kagi-bracket&apos;;
	// 	else if (/[&#xFF08;\[&lt;\{&#x3010;\(&#xFF3B;&#x3008;]/.test(char))
	// 		html += &apos; vertical-before-bracket&apos;;
	// 	else if (/[\)\]&gt;\}&#x3011;&#xFF09;&#xFF3D;&#x3009;]/.test(char))
	// 		html += &apos; vertical-after-bracket&apos;;
	// 	else if (/[-&#x30FC;&#x2015;&#x301C;]/.test(char))
	// 		html += &apos; character-line&apos;;
	// 	else if (/[a-z]/.test(char))
	// 		html += &apos; alphabet&apos;;
	// 	else if (/[&#xFF11;-&#xFF19;]/.test(char))
	// 		html += &apos; number&apos;;
	// 	else if (/[&#x3063;&#x3083;&#x3085;&#x3087;&#x3041;&#x3043;&#x3045;&#x3047;&#x3049;&#x30A1;&#x30A3;&#x30A5;&#x30A7;&#x30A9;&#x30C3;&#x30E3;&#x30E5;&#x30E7;]/.test(char))
	// 		html += &apos; yoin&apos;;
	//
	// 	html += &apos;&quot; data-font-size=&quot;&apos;;
	// 	html += obj.fontSize || &apos;auto&apos;;
	// 	html += &apos;&quot;&gt;&apos;;
	// 	html += char;
	// 	html += &apos;&lt;/span&gt;&apos;;
	//
	// 	return html;
	// }
	//
	// // ----------------------------------- get json text data on draft --------------------------------
	//
	// function makeJsonDataForSave() {
	// 	&apos;use strict&apos;;
	// 	// &#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x60C5;&#x5831;&#x3092;Json&#x3067;&#x8868;&#x3059;
	// 	const data = {};
	// 	data.conf = {};
	// 	data.text = textToObj();
	// 	return JSON.stringify(data);
	// }
	//
	// // &#x672C;&#x6587;&#x306B;&#x95A2;&#x3059;&#x308B;&#x60C5;&#x5831;&#x3092;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3067;&#x8868;&#x3059;
	// function textToObj() {
	// 	&apos;use strict&apos;;
	// 	/*
	// 	 * example
	// 	 * array[paragraph[{charObj},{charobj}],paragraph[{charObj}]]
	// 	 * data = {
	// 	 * &quot;conf&quot;:{},
	// 	 * &quot;text&quot;:[ // textToObj()
	// 	 * 				[ // makeParagraphArray()
	// 	 * 				[], // splitParagraphClass()
	// 	 * 				[ // charArray
	// 	 * 					{ // Characterdata();
	// 	 * 						&quot;char&quot;:&quot;&#x3042;&quot;,
	// 	 * 						&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	// 	 * 					},
	// 	 * 					{
	// 	 * 						&quot;char&quot;:&quot;&#x3044;&quot;,
	// 	 * 						&quot;decolation&quot;:null
	// 	 * 					}
	// 	 * 					]
	// 	 * 				], // makeParagraphArray()
	// 	 * 				[
	// 	 * 				[],
	// 	 * 				[
	// 	 * 					{
	// 	 * 						&quot;char&quot;:&quot;&#x3046;&quot;,
	// 	 * 						&quot;decolation&quot;:null
	// 	 * 					}
	// 	 * 				]
	// 	 * 				],
	// 	 * 				[]		// &#x6BB5;&#x843D;&#x914D;&#x5217;&#x304C;&#x7A7A;&#x3000;&#xFF1D;&#x3000;&#x7A7A;&#x884C;
	// 	 * 			] // textToObj()
	// 	 * 			}
	// 	 */
	// 	const $paragraphs = $(&apos;#sentence_container &gt; .paragraph&apos;);
	// 	const paragraphArrays = [];
	//
	// 	for (let i = 0,len = $paragraphs.length; i &lt; len; i++) {
	// 		paragraphArrays[i] = makeParagraphArray($paragraphs.eq(i));
	// 	}
	//
	// 	return paragraphArrays;
	// }
	//
	// // &#x3072;&#x3068;&#x3064;&#x306E;&#x6BB5;&#x843D;&#x306B;&#x95A2;&#x3059;&#x308B;&#x60C5;&#x5831;&#x3092;&#x914D;&#x5217;&#x3067;&#x8868;&#x3059;
	// function makeParagraphArray($paragraph) {
	// 	&apos;use strict&apos;;
	// 	/*
	// 	 * 				[ // makeParagraphArray()
	// 	 * 				[], // splitParagraphClass()
	// 	 * 				[ // charArray
	// 	 * 					{ // Characterdata();
	// 	 * 						&quot;char&quot;:&quot;&#x3042;&quot;,
	// 	 * 						&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	// 	 * 					},
	// 	 * 					{
	// 	 * 						&quot;char&quot;:&quot;&#x3044;&quot;,
	// 	 * 						&quot;decolation&quot;:[]
	// 	 * 					}
	// 	 * 				]
	// 	 * 				] // makeParagraphArray()
	// 	 */
	// 	const paraArr = [];
	//
	// 	// &#x6BB5;&#x843D;&#x306B;&#x76F4;&#x63A5;&#x4ED8;&#x4E0E;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x914D;&#x5217;&#x5316;&#x3059;&#x308B;
	// 	paraArr[0] = splitParagraphClass($paragraph);
	//
	// 	const charArray = [];
	// 	const $chars = $paragraph.find(&apos;.char&apos;).not(&apos;.EOL&apos;);
	// 	for (let i = 0,len = $chars.length; i &lt; len; i++) {
	// 		charArray[i] = new CharacterData($chars.eq(i));
	// 	}
	//
	// 	paraArr[1] = charArray;
	//
	// 	return paraArr;
	// }
	//
	// // &#x6BB5;&#x843D;&#x306B;&#x4ED8;&#x4E0E;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;&#x88C5;&#x98FE;&#x7528;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x6587;&#x5B57;&#x5217;&#x306E;&#x914D;&#x5217;&#x306B;&#x3059;&#x308B;
	// // [&quot;decolation-textalign-center&quot;]
	// function splitParagraphClass($paragraph) {
	// 	&apos;use strict&apos;;
	// 	const arr = $paragraph.attr(&apos;class&apos;).match(/decolation-\S+/g) || [];
	// 	return arr;
	// }
	//
	// function CharacterData($character) {
	// 	&apos;use strict&apos;;
	// 	// &#x6587;&#x5B57;&#x60C5;&#x5831;&#x3092;&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x5316;&#x3059;&#x308B;
	// 	/*
	// 	 *	{ // Characterdata();
	// 	 *		&quot;char&quot;:&quot;&#x3042;&quot;,
	// 	 *		&quot;decolation&quot;:[&quot;decolation-color-blue&quot;]
	// 	 *	}
	// 	 */
	// 	const classArray = $character.attr(&apos;class&apos;).match(/decolation-\S+/g) || [];
	// 	this[&apos;char&apos;] = $character.text();
	// 	this[&apos;decolation&apos;] = classArray;
	// 	this[&apos;fontSize&apos;] = $character[0].dataset.fontSize || null;
	// }
	//
	// // --------------------------------------- convert kanji -------------------------------------------
	//
	// function comKanjiForFullString(str) {
	// 	&apos;use strict&apos;;
	// 	// &#x6F22;&#x5B57;&#x5909;&#x63DB;
	// 	// &#x521D;&#x5909;&#x63DB;&#x6642;
	// 	console.log(&apos;comKanji&#x306B;&#x6E21;&#x3057;&#x305F;&#x6587;&#x5B57;&#x5217;:&apos; + str);
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/KanjiProxy&apos;,
	// 		data : {
	// 			sentence: str
	// 		},
	// 		dataType : &apos;json&apos;,
	// 	}).done(function (json) {
	// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 		// Google&#x65E5;&#x672C;&#x8A9E;&#x5165;&#x529B;&#x306E;webAPI&#x304B;&#x3089;&#x3001;json&#x5F62;&#x5F0F;&#x3067;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x304C;&#x6E21;&#x3055;&#x308C;&#x308B;
	// 		// json[0][0]; // &#x3072;&#x3089;&#x304C;&#x306A;
	// 		// json[0][1][0]; // &#x5909;&#x63DB;&#x5019;&#x88DC;&#xFF11;&#x3064;&#x76EE;
	// 		console.log(&apos;&#x521D;&#x5909;&#x63DB;:&apos;);
	//
	// 		// convert-view&#x7FA4;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// 		buildConvertViews(json);
	//
	// 		// input_buffer&#x306E;&#x5404;&#x6587;&#x5B57;&#x306B;&#x3001;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;&#x5272;&#x308A;&#x632F;&#x308B;
	// 		setPhraseNumToCharOnInputBuffer(json);
	//
	// 		// input_buffer&#x306E;&#x6587;&#x5B57;&#x3092;&#x3001;&#x5909;&#x63DB;&#x7B2C;&#x4E00;&#x5019;&#x88DC;&#x3067;&#x3059;&#x3079;&#x3066;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;
	// 		for (let i = 0,len = json.length; i &lt; len; i++) {
	// 			insertPhraseToInputBuffer(i,json[i][1][0]); // &#x7B2C;&#x4E00;&#x5019;&#x88DC;&#x306E;&#x6F22;&#x5B57;&#x3067;inputBuffer&#x306E;&#x6587;&#x5B57;&#x5217;&#x3092;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;
	// 		}
	// 		// selectphrase&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x8A2D;&#x5B9A;&#x3059;&#x308B;
	// 		$(&apos;#input_buffer&apos;).children(&apos;.char[data-phrase-num=&quot;0&quot;]&apos;).addClass(&apos;select-phrase&apos;);
	// 		// inputBuffer&#x306E;&#x9AD8;&#x3055;&#x8ABF;&#x6574;
	// 		resizeInputBuffer();
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comKanjiForFullString&apos;);
	// 	});
	// }
	//
	// // input_buffer&#x306E;&#x5404;&#x6587;&#x5B57;&#x306B;&#x3001;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;&#x5272;&#x308A;&#x632F;&#x308B;
	// function setPhraseNumToCharOnInputBuffer(json) {
	// 	&apos;use strict&apos;;
	// 	const eChars = document.getElementById(&apos;input_buffer&apos;).getElementsByClassName(&apos;char&apos;);
	//
	// 	// &#x5404;&#x6587;&#x7BC0;&#x30EB;&#x30FC;&#x30D7;
	// 	// pos: &#x5404;&#x6587;&#x7BC0;&#x306E;&#xFF11;&#x6587;&#x5B57;&#x76EE;&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x4FDD;&#x6301;
	// 	for (let i = 0,pos = 0,len = json.length; i &lt; len; i++) {
	// 		const hiragana = json[i][0];
	// 		const hiraLen = hiragana.length;
	//
	// 		// &#x540C;&#x4E00;&#x6587;&#x7BC0;&#x30EB;&#x30FC;&#x30D7;
	// 		// &#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;&#x3064;&#x3051;&#x308B;(&#x540C;&#x3058;&#x6587;&#x7BC0;&#x306B;&#x306F;&#x540C;&#x3058;&#x756A;&#x53F7;)
	// 		for (let j = pos; j &lt; (pos + hiraLen); j++) {
	// 			eChars[j].dataset.phraseNum = i;
	// 		}
	//
	// 		pos += hiraLen;
	//
	// 	}
	//
	// }
	//
	// // convert-view&#x7FA4;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// function buildConvertViews(json) {
	// 	&apos;use strict&apos;;
	// 	const $convertContainer = $(&apos;#convert_container&apos;);
	//
	// 	// &#x5404;&#x6587;&#x7BC0;&#x30EB;&#x30FC;&#x30D7;
	// 	for (let i = 0,len = json.length; i &lt; len; i++) {
	// 		// &#x5909;&#x63DB;&#x5019;&#x88DC;&#x8868;&#x793A;
	// 		// convertview&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// 		const $convertView = createConvertView(i,json[i]);
	// 		$convertContainer.append($convertView);
	// 	}
	//
	// 	// &#x6700;&#x521D;&#x306E;convertView&#x306B;active&#x3092;&#x4ED8;&#x4E0E;
	// 	const $convertViews = $convertContainer.children(&apos;.convert-view&apos;);
	// 	const $activeView = $convertViews.first().addClass(&apos;active&apos;);
	//
	// 	$activeView.children(&apos;.row&apos;).first().addClass(&apos;select&apos;);
	//
	// 	repositionConvertView();
	// }
	//
	// function comKanjiForChangePhrase(str,$firstConvertView,$secondConvertView) {
	// 	&apos;use strict&apos;;
	// 	// &#x6F22;&#x5B57;&#x5909;&#x63DB;
	// 	// &#x6587;&#x7BC0;&#x7DCF;&#x6570;&#x306B;&#x5909;&#x5316;&#x306A;&#x3057;(&#x6587;&#x7BC0;&#x306E;&#x533A;&#x5207;&#x308A;&#x76EE;&#x306E;&#x307F;&#x5909;&#x66F4;)
	// 	console.log(&apos;comKanji&#x306B;&#x6E21;&#x3057;&#x305F;&#x6587;&#x5B57;&#x5217;:&apos; + str);
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/KanjiProxy&apos;,
	// 		data : {
	// 			sentence: str
	// 		},
	// 		dataType : &apos;json&apos;,
	// 		context: {
	// 			$firstConvertView: $firstConvertView,
	// 			$secondConvertView: $secondConvertView,
	// 		},
	// 	}).done(function (json) {
	// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 		// Google&#x65E5;&#x672C;&#x8A9E;&#x5165;&#x529B;&#x306E;webAPI&#x304B;&#x3089;&#x3001;json&#x5F62;&#x5F0F;&#x3067;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x304C;&#x6E21;&#x3055;&#x308C;&#x308B;
	// 		// json[0][0]; // &#x3072;&#x3089;&#x304C;&#x306A;
	// 		// json[0][1][0]; // &#x5909;&#x63DB;&#x5019;&#x88DC;&#xFF11;&#x3064;&#x76EE;
	// 		console.log(&apos;&#x6587;&#x7BC0;&#x7DCF;&#x6570;&#x306B;&#x5909;&#x5316;&#x306A;&#x3057;:&apos;);
	// 		const firstPhraseNum = this.$firstConvertView.children(&apos;.phrase-num&apos;).text();
	// 		const secondPhraseNum = this.$secondConvertView.children(&apos;.phrase-num&apos;).text();
	//
	// 		// convert-view
	// 		const $newFirstConvertView = createConvertView(firstPhraseNum,json[0]).addClass(&apos;active&apos;);
	// 		const $newSecondConvertView = createConvertView(secondPhraseNum,json[1]);
	// 		this.$firstConvertView.before($newFirstConvertView);
	// 		this.$secondConvertView.before($newSecondConvertView);
	// 		this.$firstConvertView.remove();
	// 		this.$secondConvertView.remove();
	//
	// 		$newFirstConvertView.children(&apos;.row&apos;).first().addClass(&apos;select&apos;);
	// 		repositionConvertView();
	//
	// 		// input_buffer
	// 		// &#x7B2C;&#x4E00;&#x5019;&#x88DC;&#x306E;&#x6587;&#x5B57;&#x3067;inputBuffer&#x306E;&#x8A72;&#x5F53;&#x6587;&#x5B57;&#x3092;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;
	// 		insertPhraseToInputBuffer(firstPhraseNum,json[0][1][0]);
	// 		insertPhraseToInputBuffer(secondPhraseNum,json[1][1][0]);
	//
	// 		// selectphrase&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x4ED8;&#x3051;&#x66FF;&#x3048;
	// 		$(&apos;#input_buffer &gt; .char[data-phrase-num=&apos;+ firstPhraseNum +&apos;]&apos;).addClass(&apos;select-phrase&apos;);
	// 		// &#x6700;&#x5F8C;&#x306B;inputBuffer&#x306E;&#x9AD8;&#x3055;&#x8ABF;&#x6574;
	// 		resizeInputBuffer();
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 		&apos;use strict&apos;;
	// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comKanji&apos;);
	// 	});
	// }
	//
	// function comKanjiForFusion(str,$firstConvertView,$secondConvertView) {
	// 	&apos;use strict&apos;;
	// 	// &#x6F22;&#x5B57;&#x5909;&#x63DB;
	// 	// &#x7D71;&#x5408;&#x6642;
	// 	// $firstconvertview&#x3068;$secondconvertview&#x3092;&#x4E00;&#x3064;&#x306B;&#x3059;&#x308B;
	// 	// &#x9078;&#x629E;&#x4E2D;&#x306E;&#x6587;&#x7BC0;&#x306E;&#x6B21;&#x306E;&#x6587;&#x7BC0;&#x304C;&#x4E00;&#x6587;&#x5B57;&#x306E;&#x5834;&#x5408;&#x306B;Shift+Down
	// 	console.log(&apos;comKanji&#x306B;&#x6E21;&#x3057;&#x305F;&#x6587;&#x5B57;&#x5217;:&apos; + str);
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/KanjiProxy&apos;,
	// 		data : {
	// 			sentence: str
	// 		},
	// 		dataType : &apos;json&apos;,
	// 		context: {
	// 			$firstConvertView: $firstConvertView,
	// 			$secondConvertView: $secondConvertView,
	// 		},
	// 	}).done(function (json) {
	// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 		// Google&#x65E5;&#x672C;&#x8A9E;&#x5165;&#x529B;&#x306E;webAPI&#x304B;&#x3089;&#x3001;json&#x5F62;&#x5F0F;&#x3067;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x304C;&#x6E21;&#x3055;&#x308C;&#x308B;
	// 		// json[0][0]; // &#x3072;&#x3089;&#x304C;&#x306A;
	// 		// json[0][1][0]; // &#x5909;&#x63DB;&#x5019;&#x88DC;&#xFF11;&#x3064;&#x76EE;
	// 		console.log(&apos;&#x7D71;&#x5408;:&apos;);
	// 		const firstPhraseNum = this.$firstConvertView.children(&apos;.phrase-num&apos;).text();
	//
	// 		// convert-view
	// 		const $newConvertView = createConvertView(firstPhraseNum,json[0]).addClass(&apos;active&apos;);
	// 		this.$firstConvertView.before($newConvertView);
	// 		this.$firstConvertView.remove();
	// 		this.$secondConvertView.remove();
	// 		repositionConvertView();
	//
	// 		// input_buffer
	// 		// &#x7B2C;&#x4E00;&#x5019;&#x88DC;&#x306E;&#x6587;&#x5B57;&#x3067;inputBuffer&#x306E;&#x8A72;&#x5F53;&#x6587;&#x5B57;&#x3092;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;
	// 		$newConvertView.children(&apos;.row&apos;).first().addClass(&apos;select&apos;);
	// 		insertPhraseToInputBuffer(firstPhraseNum,json[0][1][0]);
	// 		const secondPhraseNum = this.$secondConvertView.children(&apos;.phrase-num&apos;).text();
	// 		$(&apos;#input_buffer &gt; .char[data-phrase-num=&apos;+ secondPhraseNum +&apos;]&apos;).remove();
	// 		// selectphrase&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x4ED8;&#x3051;&#x66FF;&#x3048;
	// 		$(&apos;#input_buffer &gt; .char[data-phrase-num=&apos;+ firstPhraseNum +&apos;]&apos;).addClass(&apos;select-phrase&apos;);
	// 		resetPhraseNum();
	// 		// inputBuffer&#x306E;&#x9AD8;&#x3055;&#x8ABF;&#x6574;
	// 		resizeInputBuffer();
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comKanji&apos;);
	// 	});
	// }
	//
	// function comKanjiForSplit(str,$firstConvertView) {
	// 	&apos;use strict&apos;;
	// 	// &#x6F22;&#x5B57;&#x5909;&#x63DB;
	// 	// &#x5206;&#x96E2;&#x6642;
	// 	// &#x6700;&#x5F8C;&#x306E;&#x6587;&#x7BC0;&#x304B;&#x3089;shift+Up
	// 	console.log(&apos;comKanji&#x306B;&#x6E21;&#x3057;&#x305F;&#x6587;&#x5B57;&#x5217;:&apos; + str);
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/KanjiProxy&apos;,
	// 		data : {
	// 			sentence: str
	// 		},
	// 		dataType : &apos;json&apos;,
	// 		context: {
	// 			$firstConvertView: $firstConvertView,
	// 		}
	// 	}).done(function (json) {
	// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 		// Google&#x65E5;&#x672C;&#x8A9E;&#x5165;&#x529B;&#x306E;webAPI&#x304B;&#x3089;&#x3001;json&#x5F62;&#x5F0F;&#x3067;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x304C;&#x6E21;&#x3055;&#x308C;&#x308B;
	// 		// json[0][0]; // &#x3072;&#x3089;&#x304C;&#x306A;
	// 		// json[0][1][0]; // &#x5909;&#x63DB;&#x5019;&#x88DC;&#xFF11;&#x3064;&#x76EE;
	// 		console.log(&apos;&#x5206;&#x96E2;:&apos;);
	// 		const firstPhraseNum = this.$firstConvertView.children(&apos;.phrase-num&apos;).text();
	// 		const secondPhraseNum = $(&apos;.convert-view&apos;).length; // &#x672A;&#x4F7F;&#x7528;&#x306E;&#x6570;&#x5B57;&#x3092;&#x53D6;&#x5F97;
	//
	// 		// convert-view
	// 		const $newFirstConvertView = createConvertView(firstPhraseNum,json[0]).addClass(&apos;active&apos;);
	// 		const $newSecondConvertView = createConvertView(secondPhraseNum,json[1]);
	// 		this.$firstConvertView.before($newFirstConvertView);
	// 		this.$firstConvertView.before($newSecondConvertView);
	// 		this.$firstConvertView.remove();
	// 		repositionConvertView();
	//
	// 		// input_buffer
	// 		// first phrase
	// 		// &#x7B2C;&#x4E00;&#x5019;&#x88DC;&#x306E;&#x6587;&#x5B57;&#x3067;inputBuffer&#x306E;&#x8A72;&#x5F53;&#x6587;&#x5B57;&#x3092;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;
	// 		$newFirstConvertView.children(&apos;.row&apos;).first().addClass(&apos;select&apos;);
	// 		const $newBufferChars = insertPhraseToInputBuffer(firstPhraseNum,json[0][1][0]);
	// 		$newBufferChars.addClass(&apos;select-phrase&apos;);
	// 		// second phrase
	// 		const secondFirstStr = json[1][1][0];
	// 		const $insertPosChar = $(&apos;#input_buffer &gt; .char[data-phrase-num=&apos;+ firstPhraseNum + &apos;]&apos;).last();
	// 		for (let i = secondFirstStr.length -1; i &gt;= 0; i--) {
	// 			const $character = $(createCharHtml(secondFirstStr.charAt(i))).attr(&apos;data-phrase-num&apos;,secondPhraseNum);
	// 			$insertPosChar.after($character);
	// 		}
	//
	// 		// selectphrase&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x4ED8;&#x3051;&#x66FF;&#x3048;
	// 		resetPhraseNum();
	// 		// &#x6700;&#x5F8C;&#x306B;inputBuffer&#x306E;&#x9AD8;&#x3055;&#x8ABF;&#x6574;
	// 		resizeInputBuffer();
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comKanji&apos;);
	// 	});
	// }
	//
	// function comKanjiForOnePhrase(str,$firstConvertView) {
	// 	&apos;use strict&apos;;
	// 	// &#x6F22;&#x5B57;&#x5909;&#x63DB;
	// 	// &#x4E00;&#x6587;&#x7BC0;&#x306E;&#x307F;&#x5909;&#x63DB;
	// 	// &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x4E2D;&#x306B;BackSpace&#x3092;&#x62BC;&#x3059;&#x306A;&#x3069;&#x3057;&#x3066;&#x3001;&#x4E00;&#x6587;&#x7BC0;&#x306E;&#x307F;&#x518D;&#x5909;&#x63DB;&#x304C;&#x5FC5;&#x8981;&#x306B;&#x306A;&#x3063;&#x305F;&#x5834;&#x5408;
	// 	console.log(&apos;comKanji&#x306B;&#x6E21;&#x3057;&#x305F;&#x6587;&#x5B57;&#x5217;:&apos; + str + &apos;,&apos;);
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/KanjiProxy&apos;,
	// 		data : {
	// 			sentence: str+&apos;,&apos; // &#x6587;&#x7BC0;&#x3092;&#x533A;&#x5207;&#x3089;&#x308C;&#x306A;&#x3044;&#x3088;&#x3046;&#x3001;,&#x3092;&#x672B;&#x5C3E;&#x306B;&#x8FFD;&#x52A0;
	// 		},
	// 		dataType : &apos;json&apos;,
	// 		context: {
	// 			$firstConvertView: $firstConvertView,
	// 		}
	// 	}).done(function (json) {
	// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 		// Google&#x65E5;&#x672C;&#x8A9E;&#x5165;&#x529B;&#x306E;webAPI&#x304B;&#x3089;&#x3001;json&#x5F62;&#x5F0F;&#x3067;&#x5909;&#x63DB;&#x5019;&#x88DC;&#x304C;&#x6E21;&#x3055;&#x308C;&#x308B;
	// 		// json[0][0]; // &#x3072;&#x3089;&#x304C;&#x306A;
	// 		// json[0][1][0]; // &#x5909;&#x63DB;&#x5019;&#x88DC;&#xFF11;&#x3064;&#x76EE;
	// 		console.log(&apos;&#x4E00;&#x6587;&#x7BC0;&#x306E;&#x307F;&#x5909;&#x63DB;:&apos;);
	//
	// 		// convert-view
	// 		const firstPhraseNum = this.$firstConvertView.children(&apos;.phrase-num&apos;).text();
	// 		const $newConvertView = createConvertView(firstPhraseNum,json[0]).addClass(&apos;active&apos;);
	// 		this.$firstConvertView.before($newConvertView);
	// 		this.$firstConvertView.remove();
	// 		// &#x7B2C;&#x4E00;&#x5019;&#x88DC;&#x306E;&#x6587;&#x5B57;&#x3067;inputBuffer&#x306E;&#x8A72;&#x5F53;&#x6587;&#x5B57;&#x3092;&#x7F6E;&#x304D;&#x63DB;&#x3048;&#x308B;
	// 		$newConvertView.children(&apos;.row&apos;).first().addClass(&apos;select&apos;);
	// 		repositionConvertView();
	//
	// 		// input_buffer
	// 		const $newBufferChars = insertPhraseToInputBuffer(firstPhraseNum,json[0][1][0]);
	// 		// selectphrase&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x4ED8;&#x3051;&#x66FF;&#x3048;
	// 		$newBufferChars.addClass(&apos;select-phrase&apos;);
	// 		// &#x6700;&#x5F8C;&#x306B;inputBuffer&#x306E;&#x9AD8;&#x3055;&#x8ABF;&#x6574;
	// 		resizeInputBuffer();
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comKanji&apos;);
	// 	});
	// }
	//
	// // convertview&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// function createConvertView(phNum,jsonArray) {
	// 	&apos;use strict&apos;;
	// 	// jsonArray&#x306F;&#x3072;&#x3089;&#x304C;&#x306A;&#x3068;&#x6F22;&#x5B57;&#x914D;&#x5217;&#x304C;&#x5165;&#x308B;&#x3088;&#x3046;&#x306B;&#x3001;json[i]&#x306E;&#x5F62;&#x3067;&#x6E21;&#x3059;
	// 	let html = &apos;&lt;div class=&quot;convert-view&quot;&gt;&apos;
	//
	// 		if (jsonArray[1] != null) {
	//
	// 			for (let i = 0,len = jsonArray[1].length; i &lt; len; i++) {
	// 				html += createRowHtml(jsonArray[1][i]);
	// 			}
	//
	// 		} else {
	// 			console.log(&apos;no convert data&apos;);
	// 		}
	//
	// 	// &#x6700;&#x5F8C;&#x306F;&#x3072;&#x3089;&#x304C;&#x306A;
	// 	html += createRowHtml(jsonArray[0]);
	//
	// 	// &#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;&#x793A;&#x3059;&#x6570;&#x5B57;&#x3092;&#x30EA;&#x30B9;&#x30C8;&#x306B;&#x8868;&#x793A;&#x3059;&#x308B;
	// 	// phrase_num&#x306F;&#x30AF;&#x30E9;&#x30B9;&#x3068;&#x3001;inputBuffer&#x6587;&#x5B57;&#x304C;&#x6301;&#x3064;&#x5C5E;&#x6027;&#x3068;&#x3067;&#x4E8C;&#x7A2E;&#x985E;&#x3042;&#x308B;&#x304B;&#x3089;&#x6CE8;&#x610F;
	// 	html += &apos;&lt;div class=&quot;phrase-num&quot;&gt;&apos;;
	// 	html += phNum;
	// 	html += &apos;&lt;/div&gt;&lt;/div&gt;&apos;;
	//
	// 	return $(html);
	// }
	//
	// // inputBuffer&#x306E;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;&#x632F;&#x308A;&#x76F4;&#x3059;
	// function resetPhraseNum() {
	// 	&apos;use strict&apos;;
	// 	let $iterCharacter = $(&apos;#input_buffer &gt; .char&apos;).first();
	// 	let $convertView = $(&apos;.convert-view&apos;).first();
	// 	let newNum = 0;
	// 	let tempPhraseNum = $iterCharacter.attr(&apos;data-phrase-num&apos;); // &#x51E6;&#x7406;&#x3057;&#x3066;&#x3044;&#x308B;&#x6587;&#x5B57;&#x306E;&#x53E4;&#x3044;&#x6587;&#x7BC0;&#x756A;&#x53F7;&#x3092;&#x4FDD;&#x6301;&#x3059;&#x308B;
	//
	// 	$convertView.children(&apos;.phrase-num&apos;).text(newNum);
	// 	while (!($iterCharacter.hasClass(&apos;EOL&apos;))) {
	//
	// 		if (tempPhraseNum !== $iterCharacter.attr(&apos;data-phrase-num&apos;)) {
	// 			// &#x7570;&#x306A;&#x308B;&#x6587;&#x7BC0;
	// 			tempPhraseNum = $iterCharacter.attr(&apos;data-phrase-num&apos;);
	// 			newNum++;
	// 			// convert-view
	// 			$convertView = $convertView.next(&apos;.convert-view&apos;);
	// 			$convertView.children(&apos;.phrase-num&apos;).text(newNum);
	// 		}
	//
	// 		// &#x540C;&#x3058;&#x6587;&#x7BC0;
	// 		$iterCharacter.attr(&apos;data-phrase-num&apos;,newNum);
	// 		$iterCharacter = $iterCharacter.next(&apos;.char&apos;);
	// 	}
	// }
	//
	// // ------------------------------------ convert katakana --------------------------------------
	//
	// // &#x3072;&#x3089;&#x304C;&#x306A;&#x5165;&#x529B;&#x4E2D;&#x306E;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x5909;&#x63DB;
	// // inputbuffer&#x306E;&#x6587;&#x5B57;&#x3092;&#x3059;&#x3079;&#x3066;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x5909;&#x3048;&#x308B;
	// function changeKatakanaAll() {
	// 	&apos;use strict&apos;;
	// 	let str = $(&apos;#input_buffer&apos;).text();
	// 	insertStringToInputBuffer(getKatakana(str))
	// 		.children(&apos;.char&apos;).not(&apos;.EOL&apos;)
	// 		.addClass(&apos;select-phrase&apos;);
	// }
	//
	// // &#x6F22;&#x5B57;&#x5909;&#x63DB;&#x4E2D;&#x306E;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x5909;&#x63DB;
	// // &#x9078;&#x629E;&#x4E2D;&#x306E;&#x6587;&#x7BC0;&#x306E;&#x307F;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x5909;&#x3048;&#x308B;
	// function changeKatakanaAtConvert() {
	// 	&apos;use strict&apos;;
	// 	const phraseNum = $(&apos;#input_buffer &gt; .select-phrase&apos;).attr(&apos;data-phrase-num&apos;);
	// 	const str = getKatakana($(&apos;.convert-view.active &gt; .row&apos;).last().text());
	// 	insertPhraseToInputBuffer(phraseNum,str).addClass(&apos;select-phrase&apos;);
	// 	resizeInputBuffer();
	// }
	//
	// // str&#x3092;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x3057;&#x3066;&#x8FD4;&#x3059;
	// // &#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x5909;&#x63DB;&#x3067;&#x304D;&#x306A;&#x3044;&#x6587;&#x5B57;&#x306F;&#x305D;&#x306E;&#x307E;&#x307E;
	// function getKatakana(str) {
	// 	&apos;use strict&apos;;
	// 	let rtnKatakana = &apos;&apos;;
	// 	for (let char of str) {
	// 		const cKatakana = key_table.katakana[char];
	//
	// 		if (cKatakana) {
	// 			rtnKatakana += cKatakana;
	// 		} else {
	// 			// &#x5909;&#x63DB;&#x3067;&#x304D;&#x306A;&#x3051;&#x308C;&#x3070;&#x5143;&#x306E;&#x6587;&#x5B57;&#x3092;&#x305D;&#x306E;&#x307E;&#x307E;&#x9023;&#x7D50;
	// 			rtnKatakana += char;
	// 		}
	//
	// 	}
	//
	// 	return rtnKatakana;
	// }
	//
	// // ------------------------------ direct draft html -------------------------------------------
	// // lineBreak
	// // deleteCharacter
	//
	// // &#x6539;&#x884C;
	// function lineBreak() {
	// 	&apos;use strict&apos;;
	// 	const $cursor = $(&apos;.cursor&apos;);
	// 	const $prevChar = $cursor.prev(); //&#x79FB;&#x52D5;&#x3057;&#x306A;&#x3044;&#x6587;&#x5B57;&#x306E;&#x6700;&#x5F8C;
	// 	const $cursorRow = $(&apos;.cursor-row&apos;);
	//
	// 	// &#x884C;&#x9014;&#x4E2D;&#x3067;&#x306E;&#x6539;&#x884C;
	// 	if ($prevChar[0]) {
	// 		let $nextRow = $cursorRow.nextAll(&apos;.row&apos;).first(); //&#x6539;&#x884C;&#x524D;&#x306E;&#x6B21;&#x306E;&#x884C;
	//
	// 		// paragraph
	// 		if (!($nextRow[0])) {
	// 			// &#x6B21;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x65B0;&#x3057;&#x304F;&#x4F5C;&#x308B;
	// 			$nextRow = $(createRowHtml(&apos;&apos;));
	// 			$cursorRow.after($nextRow);
	// 			reDisplay();
	// 		}
	// 		// $nextRow&#x4EE5;&#x964D;&#x3092;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x3068;&#x3059;&#x308B;
	// 		devideParagraph($nextRow);
	//
	// 		// char&#x79FB;&#x52D5;
	// 		const $insertPosChar = $nextRow.children(&apos;.char&apos;).first(); //&#x633F;&#x5165;&#x5148;&#x306E;&#x5148;&#x982D;&#x6587;&#x5B57;
	// 		let $moveChar = $cursor; // &#x79FB;&#x52D5;&#x6587;&#x5B57;
	// 		// $nextRow&#x306E;&#x5148;&#x982D;&#x306B;&#x3042;&#x308B;$insertPosChar&#x306B;&#x3001;$prevChar&#x4EE5;&#x964D;&#x306E;&#x6587;&#x5B57;&#x3092;&#x633F;&#x5165;&#x3057;&#x3066;&#x3044;&#x304F;
	// 		while ($moveChar[0] &amp;&amp; !($moveChar.hasClass(&apos;EOL&apos;))) { // EOL&#x306F;&#x79FB;&#x52D5;&#x3057;&#x306A;&#x3044;
	// 			$moveChar.remove();
	// 			$insertPosChar.before($moveChar);
	// 			$moveChar = $prevChar.nextAll(&apos;.char&apos;).first();
	// 		}
	//
	// 		if ($cursor.hasClass(&apos;EOL&apos;)) { // EOL&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x308B;&#x3068;&#x3001;EOL&#x304C;&#x52D5;&#x304B;&#x306A;&#x3044;&#x305F;&#x3081;&#x306B;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x6B21;&#x306E;&#x884C;&#x306B;&#x884C;&#x304B;&#x306A;&#x3044;&#x306E;&#x3067;&#x5F37;&#x5236;&#x7684;&#x306B;&#x52D5;&#x304B;&#x3059;&#x5FC5;&#x8981;&#x3042;&#x308A;
	// 			// = &#x6BB5;&#x843D;&#x672B;&#x3067;&#x306E;&#x6539;&#x884C;
	// 			$nextRow.children(&apos;.char&apos;).first().addCursor();
	// 		}
	// 		// &#x79FB;&#x52D5;&#x6587;&#x5B57;&#x5217;&#x3092;&#x6B21;&#x306E;&#x884C;&#x306B;&#x5165;&#x308C;&#x305F;&#x7D50;&#x679C;&#x898F;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8D85;&#x3048;&#x305F;&#x5834;&#x5408;&#x306E;&#x305F;&#x3081;&#x306B;&#x3001;&#x6B21;&#x306E;&#x884C;&#x3092;&#x6587;&#x5B57;&#x6570;&#x8ABF;&#x6574;
	// 		cordinateStringNumber($nextRow,getStringLenOfRow());
	//
	// 		gCursor.repositionCharNum();
	//
	// 		return;
	// 	}
	//
	// 	if (!$prevChar[0]) {
	// 		// &#x884C;&#x982D;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3067;&#x6539;&#x884C;
	//
	// 		if (($cursorRow.prev())[0]) {
	// 			// &#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x3067;&#x306E;&#x884C;&#x982D;&#x6539;&#x884C;&#x3067;&#x306F;&#x3001;&#x6BB5;&#x843D;&#x3092;&#xFF12;&#x3064;&#x306B;&#x5206;&#x3051;&#x308B;
	// 			devideParagraph($cursorRow);
	// 		} else {
	// 			// &#x6BB5;&#x843D;&#x6700;&#x521D;&#x3067;&#x306E;&#x6539;&#x884C;&#x3067;&#x306F;&#x3001;&#x305D;&#x306E;&#x524D;&#x306E;&#x3068;&#x3053;&#x308D;&#x306B;&#x7A7A;&#x884C;&#x633F;&#x5165;
	// 			const $baseParagraph = $cursorRow.closest(&apos;.paragraph&apos;);
	// 			$baseParagraph.before($(createParagraphHtml(&apos;&apos;)));
	// 			reDisplay();
	// 		}
	//
	// 		return;
	// 	}
	//
	// }
	//
	// // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x524D;&#x306B;&#x4F4D;&#x7F6E;&#x3059;&#x308B;&#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;
	// function backSpaceOnContainer() {
	// 	&apos;use strict&apos;;
	// 	// $delChar: &#x524A;&#x9664;&#x6587;&#x5B57;
	// 	// $rowofdelchar: &#x524A;&#x9664;&#x6587;&#x5B57;&#x306E;&#x3042;&#x308B;&#x884C;
	// 	// &#x884C;&#x9014;&#x4E2D;&#x3067;&#x306E;BS: cursor&#x306E;&#x524D;&#x306E;&#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;
	// 	// &#x884C;&#x982D;&#x304B;&#x3089;&#x306E;BS&#xFF1A; &#x524D;&#x306E;&#x884C;&#x306E;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;&#x6587;&#x5B57;&#x306B;&#x3059;&#x308B;
	// 	// &#x7B2C;&#x4E8C;&#x6BB5;&#x843D;&#x4EE5;&#x964D;&#x306E;&#x6BB5;&#x843D;&#x5148;&#x982D;&#x3067;&#x306E;BS&#xFF1A;&#x524D;&#x306E;&#x6BB5;&#x843D;&#x3068;&#x73FE;&#x5728;&#x306E;&#x6BB5;&#x843D;&#x3092;&#x3064;&#x306A;&#x3052;&#x308B;
	// 	// &#x7A7A;&#x6BB5;&#x843D;&#x3067;&#x306E;BS&#xFF1A;&#x305D;&#x306E;&#x6BB5;&#x843D;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;
	// 	// &#x6587;&#x7AE0;&#x5148;&#x982D;&#x304B;&#x3089;&#x306E;BS&#xFF1A;&#x4F55;&#x3082;&#x3057;&#x306A;&#x3044;
	// 	const $delChar = $(&apos;.cursor&apos;).prev();
	//
	// 	// &#x884C;&#x306E;&#x9014;&#x4E2D;&#x3067;&#x306E;BS
	// 	if ($delChar[0]) { return deleteCharacter($delChar); }
	//
	// 	// &#x884C;&#x982D;&#x304B;&#x3089;&#x306E;BS
	// 	const $rowOfDelChar = $(&apos;.cursor-row&apos;);
	// 	let $preRow = $rowOfDelChar.prevAll(&apos;.row&apos;).first();
	//
	// 	// &#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;&#x884C;&#x982D;&#x304B;&#x3089;&#x306E;BS
	// 	if($preRow[0]) {
	// 		$delChar = $preRow.children(&apos;.EOL&apos;).prev(); // &#x524D;&#x306E;&#x884C;&#x306E;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;&#x6587;&#x5B57;&#x306B;
	// 		return deleteCharacter($delChar);
	// 	}
	//
	// 	// &#x4EE5;&#x4E0B;(&#x6BB5;&#x843D;&#x5148;&#x982D;&#x304B;&#x3089;&#x306E;BS)&#x306F;&#x6587;&#x5B57;&#x306E;&#x524A;&#x9664;&#x3092;&#x4F34;&#x308F;&#x306A;&#x3044;
	// 	// &#x7A7A;&#x6BB5;&#x843D;&#x3067;&#x306E;BS
	// 	// &#x7B2C;&#x4E8C;&#x6BB5;&#x843D;&#x4EE5;&#x964D;&#x306E;&#x6BB5;&#x843D;&#x5148;&#x982D;&#x3067;&#x306E;BS
	// 	// &#x6587;&#x7AE0;&#x5148;&#x982D;&#x3067;&#x306E;BS
	// 	// &#x6BB5;&#x843D;&#x5148;&#x982D;&#x3067;&#x306E;BS
	// 	const $paragraphOfDelChar = $rowOfDelChar.closest(&apos;.paragraph&apos;);
	// 	const $preParagraph = $paragraphOfDelChar.prevAll(&apos;.paragraph&apos;).first();
	//
	// 	$preRow = $preParagraph.children(&apos;.row&apos;).last();
	//
	// 	if ($preParagraph[0]) {
	// 		// &#x7B2C;&#x4E8C;&#x6BB5;&#x843D;&#x4EE5;&#x964D;&#x306E;&#x6BB5;&#x843D;
	//
	// 		const $firstRowOfDelChar = $paragraphOfDelChar.children(&apos;.row&apos;).first();
	// 		if ($firstRowOfDelChar.children(&apos;.char&apos;).first().hasClass(&apos;EOL&apos;)) {
	// 			// &#x7A7A;&#x6BB5;&#x843D;&#x3067;&#x306E;BS
	// 			$paragraphOfDelChar.remove(); // &#x6BB5;&#x843D;&#x524A;&#x9664;
	// 			// cursor&#x306E;&#x8ABF;&#x6574;
	// 			$preRow.children(&apos;.char&apos;).last().addCursor(false); // &#x524D;&#x306E;&#x884C;&#x306E;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;
	// 			reDisplay();
	// 			gCursor.repositionCharNum();
	// 			return &apos;&apos;;
	// 		}
	//
	// 		// &#x7B2C;&#x4E8C;&#x6BB5;&#x843D;&#x4EE5;&#x964D;&#x306E;&#x6BB5;&#x843D;&#x5148;&#x982D;&#x3067;&#x306E;BS
	// 		// &#x6BB5;&#x843D;&#x3092;&#x3064;&#x306A;&#x3052;&#x308B;
	// 		uniteParagraph($preParagraph,$paragraphOfDelChar);
	// 		reDisplay();
	// 		gCursor.repositionCharNum();
	// 		return &apos;&apos;;
	// 	}
	//
	// 	// &#x6587;&#x7AE0;&#x5148;&#x982D;&#x3067;&#x306E;BS
	// 	return null;
	// }
	//
	// function deleteCharacter($delChar) {
	// 	&apos;use strict&apos;;
	// 	const $rowOfDelChar = $delChar.closest(&apos;.row&apos;);
	//
	// 	backChar($rowOfDelChar); // &#x6B21;&#x306E;&#x884C;&#x304B;&#x3089;&#xFF11;&#x6587;&#x5B57;&#x6301;&#x3063;&#x3066;&#x304F;&#x308B;
	// 	$delChar.remove();
	//
	// 	if ($rowOfDelChar.children(&apos;.char&apos;).first().hasClass(&apos;EOL&apos;) &amp;&amp; ($rowOfDelChar.prev())[0]) {
	// 		// &#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;&#x5F8C;&#x3001;&#x524A;&#x9664;&#x6587;&#x5B57;&#x306E;&#x3042;&#x3063;&#x305F;&#x884C;&#x304C;&#x7A7A;&#x884C;&#x3067;&#x3001;&#x304B;&#x3064;&#x305D;&#x306E;&#x524D;&#x306E;&#x884C;&#x304C;&#x5B58;&#x5728;&#x3059;&#x308B; = &#x8907;&#x6570;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x7D42;&#x884C;&#x304C;&#xFF11;&#x6587;&#x5B57;&#x3057;&#x304B;&#x306A;&#x304F;&#x3001;&#x305D;&#x306E;&#x6587;&#x5B57;&#x3092;&#x524A;&#x9664;&#x3057;&#x305F;&#x5834;&#x5408;&#x7A7A;&#x3068;&#x306A;&#x308B;&#x306E;&#x3067;&#x3001;&#x524A;&#x9664;&#x6587;&#x5B57;&#x306E;&#x3042;&#x3063;&#x305F;&#x884C;&#x3092;&#x524A;&#x9664;&#x3057;&#x3001;&#x305D;&#x306E;&#x524D;&#x306E;&#x884C;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;
	// 		// &#x5148;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x8ABF;&#x6574;($rowOfDelChar&#x524A;&#x9664;&#x524D;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x53D6;&#x5F97;)
	// 		$rowOfDelChar.prev().children(&apos;.char&apos;).last().addCursor(false);
	// 		// &#x884C;&#x306E;&#x524A;&#x9664;
	// 		$rowOfDelChar.remove();
	// 		reDisplay();
	// 	}
	// 	gCursor.repositionCharNum();
	// 	return $delChar.text();
	// }
	//
	// // $row&#x4EE5;&#x964D;&#x3092;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x3068;&#x3057;&#x3066;&#x3001;&#x6BB5;&#x843D;&#x3092;&#xFF12;&#x3064;&#x306B;&#x5206;&#x3051;&#x308B;
	// function devideParagraph($row) {
	// 	&apos;use strict&apos;;
	// 	const $newParagraph = $(&apos;&lt;div&gt;&apos;).addClass(&apos;paragraph&apos;);
	// 	const $baseParagraph = $row.closest(&apos;.paragraph&apos;);
	// 	$baseParagraph.after($newParagraph);
	//
	// 	let $nextRow;
	// 	while ($row[0]) {
	// 		// $row&#x3092;&#x65B0;&#x3057;&#x3044;&#x6BB5;&#x843D;&#x306B;&#x79FB;&#x52D5;&#x3057;&#x3066;&#x3044;&#x304F;
	// 		$nextRow = $row.next(); // $row&#x3092;&#x79FB;&#x52D5;&#x3059;&#x308B;&#x3068;&#x6B21;&#x306E;&#x79FB;&#x52D5;&#x5BFE;&#x8C61;&#x9078;&#x629E;&#x306B;&#x306F;&#x4F7F;&#x3048;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x6B21;&#x306E;&#x884C;&#x3092;&#x4FDD;&#x6301;&#x3057;&#x3066;&#x304A;&#x304F;
	// 		$row.remove();
	// 		$newParagraph.append($row);
	// 		$row = $nextRow;
	// 	}
	//
	// 	return $newParagraph;
	// }
	//
	// // &#x96A3;&#x63A5;&#x3059;&#x308B;&#xFF12;&#x3064;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x7D71;&#x5408;
	// // baseParagraph&#x306B;anotherParagraph&#x3092;&#x5438;&#x53CE;&#x3057;&#x3066;&#x7D71;&#x5408;&#x3059;&#x308B;
	// function uniteParagraph($baseParagraph,$anotherParagraph) {
	// 	&apos;use strict&apos;;
	// 	const $preRow = $baseParagraph.children(&apos;.row&apos;).last(); // baseparagraph&#x306E;&#x6700;&#x7D42;&#x884C;&#x3092;&#x3042;&#x3089;&#x304B;&#x3058;&#x3081;&#x4FDD;&#x6301;&#x3057;&#x3066;&#x304A;&#x304F;
	// 	let $mvRow = $anotherParagraph.children(&apos;.row&apos;).first();
	//
	// 	while ($mvRow[0]) {
	// 		// $anotherparagraph&#x306E;&#x884C;&#x3092;$baseparagraph&#x306B;&#x79FB;&#x52D5;
	// 		$mvRow.remove();
	// 		$baseParagraph.append($mvRow);
	// 		$mvRow = $anotherParagraph.children(&apos;.row&apos;).first();
	// 	}
	// 	$anotherParagraph.remove();
	//
	// 	// baseParagraph&#x306E;&#x3082;&#x3068;&#x3082;&#x3068;&#x306E;&#x6700;&#x7D42;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;&#x304C;&#x898F;&#x5B9A;&#x6570;&#x306B;&#x306A;&#x308B;&#x3088;&#x3046;&#x3001;&#x305D;&#x306E;&#x6B21;&#x306E;&#x884C;&#x304B;&#x3089;&#x6587;&#x5B57;&#x3092;&#x6301;&#x3063;&#x3066;&#x304D;&#x3066;&#x57CB;&#x3081;&#x308B;
	// 	const cnt = getStringLenOfRow() - ($preRow.children(&apos;.char&apos;).length -1); // length&#x3067;&#x306F;EOL&#x3082;&#x542B;&#x307E;&#x308C;&#x308B;&#x306E;&#x3067;-1
	// 	for (let i = 0; i &lt; cnt; i++) {
	// 		backChar($preRow);
	// 	}
	// }
	//
	// // ------------------------------------- string cordinator --------------------------------------
	//
	// // &#x5165;&#x529B;&#x306A;&#x3069;&#x306E;&#x7D50;&#x679C;&#x898F;&#x5B9A;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8D85;&#x3048;&#x305F;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;&#x3092;&#x8ABF;&#x6574;&#x3059;&#x308B;
	// function cordinateStringNumber($row,strLen) {
	// 	&apos;use strict&apos;;
	// 	// &#x8D85;&#x3048;&#x305F;&#x5206;&#x3092;&#x6B21;&#x306E;&#x884C;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;
	// 	// &#x540C;&#x4E00;&#x6BB5;&#x843D;&#x5185;&#x3067;&#x5B8C;&#x7D50;
	// 	// $row: &#x8ABF;&#x6574;&#x884C;
	// 	// strLen: &#xFF11;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;
	// 	if ($row.children().length &lt;= (strLen +1)) return; //&#x8ABF;&#x6574;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;&#x304C;&#x898F;&#x5B9A;&#x5024;&#x4EE5;&#x4E0B;&#x306A;&#x3089;&#x8ABF;&#x6574;&#x306E;&#x5FC5;&#x8981;&#x306A;&#x3057;(EOL&#x542B;&#x3081;&#x308B;&#x3068;31&#x500B;)
	//
	// 	let $nextRow = $row.nextAll(&apos;.row&apos;).first();
	//
	// 	if (!($nextRow[0])) {
	// 		// &#x6B21;&#x306E;&#x884C;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x65B0;&#x3057;&#x304F;&#x4F5C;&#x308B;
	// 		$nextRow = $(createRowHtml(&apos;&apos;));
	// 		$row.after($nextRow);
	// 		reDisplay();
	// 	}
	//
	// 	const $prevChar = $row.children(&apos;.char&apos;).eq(strLen -1); //&#x79FB;&#x52D5;&#x3057;&#x306A;&#x3044;&#x6587;&#x5B57;&#x306E;&#x6700;&#x5F8C;
	// 	const $insertPosChar = $nextRow.children(&apos;.char&apos;).first(); //&#x633F;&#x5165;&#x5148;&#x306E;&#x6700;&#x521D;&#x306E;&#x6587;&#x5B57;
	// 	let $moveChar = $prevChar.nextAll(&apos;.char&apos;).first(); // &#x79FB;&#x52D5;&#x6587;&#x5B57;
	// 	while ($moveChar[0] &amp;&amp; !($moveChar.hasClass(&apos;EOL&apos;))) { // EOL&#x306F;&#x79FB;&#x52D5;&#x3057;&#x306A;&#x3044;
	// 		$moveChar.remove();
	// 		$insertPosChar.before($moveChar);
	// 		$moveChar = $prevChar.nextAll(&apos;.char&apos;).first();
	// 	}
	//
	// 	// &#x79FB;&#x52D5;&#x5148;&#x306E;&#x884C;&#x304C;strlen&#x6587;&#x5B57;&#x3092;&#x8D85;&#x3048;&#x3066;&#x3044;&#x308B;&#x6642;&#x306E;&#x305F;&#x3081;&#x306B;&#x518D;&#x5E30;
	// 	cordinateStringNumber($nextRow,strLen);
	//
	// 	// cursor&#x304C;&#x8ABF;&#x6574;&#x884C;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x3042;&#x308C;&#x3070;&#x52D5;&#x3044;&#x3066;&#x304F;&#x308C;&#x306A;&#x3044;&#x306E;&#x3067;&#x3001;&#x5F37;&#x5236;&#x7684;&#x306B;&#x52D5;&#x304B;&#x3059;
	// 	if ($prevChar.nextAll(&apos;.char&apos;).first().hasClass(&apos;cursor&apos;)) {
	// 		$insertPosChar.addCursor();
	// 		gCursor.repositionCharNum();
	// 	}
	// 	gCursor.addCursorRow();
	// }
	//
	// // $bringRow&#x306E;&#x6B21;&#x306E;&#x884C;&#x306E;&#x6700;&#x521D;&#x306E;&#x6587;&#x5B57;&#x3092;&#x3001;$bringRow&#x306E;&#x6700;&#x5F8C;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;
	// function backChar($bringRow) {
	// 	&apos;use strict&apos;;
	// 	const $nextRow = $bringRow.nextAll(&apos;.row&apos;).first();
	//
	// 	if (!($nextRow[0])) return;
	//
	// 	const $backChar = $nextRow.children(&apos;.char&apos;).first();
	//
	// 	if ($backChar.next().hasClass(&apos;EOL&apos;)) {
	// 		// &#x524A;&#x9664;&#x3059;&#x308B;&#x3068;&#x7A7A;&#x884C;&#x304C;&#x3067;&#x304D;&#x308B;&#x5834;&#x5408;
	// 		$bringRow.children(&apos;.EOL&apos;).before($backChar);
	// 		$nextRow.remove();
	// 		return;
	// 	}
	//
	// 	$backChar.remove();
	// 	$bringRow.children(&apos;.EOL&apos;).before($backChar);
	// 	backChar($nextRow);
	// }
	//
	// // &#x7981;&#x5247;&#x51E6;&#x7406;
	// function checkKinsoku() {
	// 	&apos;use strict&apos;;
	// 	const $dots = $(&apos;#sentence_container .char.vertical-dot&apos;).add(&apos;#sentence_container .char.vertical-after-bracket&apos;);
	//
	// 	if ($dots[0]) {
	// 		let $self;
	// 		let $selfRow;
	// 		let $prevRow;
	// 		$dots.each(function () {
	// 			$self = $(this);
	//
	// 			if (!($self.prev()[0])) {
	// 				// &#x884C;&#x982D;
	// 				$selfRow = $self.closest(&apos;.row&apos;);
	// 				$prevRow = $selfRow.prev(&apos;.row&apos;);	
	// 				if ($prevRow[0]) {
	// 					// &#x6BB5;&#x843D;&#x306E;&#x6700;&#x521D;&#x3067;&#x306F;&#x306A;&#x3044;
	// 					backChar($prevRow);
	// 				}
	// 			}
	//
	// 		});
	// 	}
	// }
	//
	// // --------------------------- text decolation -----------------------------------
	//
	// // &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306E;&#x6587;&#x5B57;&#x306B;&#x6587;&#x5B57;&#x8272;&#x3092;&#x9069;&#x7528;&#x3059;&#x308B;
	// function setColorOnSelect(color) {
	// 	&apos;use strict&apos;;
	// 	switch (color) {
	// 		case &apos;black&apos;:
	// 			removeClassOnSelect(&apos;decolation-color&apos;);
	// 			break;
	// 		case &apos;red&apos;:
	// 			addDecolationClassOnSelect(&apos;decolation-color-red&apos;);
	// 			break;
	// 		case &apos;blue&apos;:
	// 			addDecolationClassOnSelect(&apos;decolation-color-blue&apos;);
	// 			break;
	// 		default:
	// 			break;
	// 	}
	// }
	//
	// // &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306E;&#x6587;&#x5B57;&#x304B;&#x3089;&#x6587;&#x5B57;&#x8272;&#x3092;&#x5916;&#x3059;
	// function removeColorOnSelect() {
	// 	&apos;use strict&apos;;
	// 	removeClassOnSelect(&apos;decolation-color&apos;);
	// }
	//
	// // &#x6587;&#x5B57;&#x8272;&#x30DC;&#x30BF;&#x30F3;&#x306B;&#x8272;&#x3092;&#x4ED8;&#x3051;&#x308B;
	// function setColor(color) {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;set color:&apos;+ color);
	// 	$(&apos;#color_btn&apos;).removeClassByRegExp(/select-\S+/).addClass(&apos;select-&apos;+ color);
	// }
	//
	// // &#x6587;&#x5B57;&#x88C5;&#x98FE;&#x30DC;&#x30BF;&#x30F3;(bold,italic)&#x306E;active&#x3092;&#x30C8;&#x30B0;&#x30EB;&#x3059;&#x308B;
	// function toggleFont(font) {
	// 	&apos;use strict&apos;;
	// 	const elem = document.getElementById(&apos;btn-&apos;+ font);
	// 	elem.classList.toggle(&apos;active&apos;);
	// }
	//
	// // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x3042;&#x308B;&#x6BB5;&#x843D;&#x306B;text-align&#x3092;&#x9069;&#x7528;&#x3059;&#x308B;
	// function setAlignCursorParagraph(align) {
	// 	&apos;use strict&apos;;
	// 	$(&apos;#sentence_container&apos;).children(&apos;.paragraph&apos;).has(&apos;.cursor-row&apos;).removeClassByRegExp(/decolation-textalign-\S+/).addClass(&apos;decolation-textalign-&apos;+ align);
	// }
	//
	// // &#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x30DC;&#x30C3;&#x30AF;&#x30B9;&#x306B;&#x5165;&#x529B;&#x3067;&#x304D;&#x308B;&#x3088;&#x3046;&#x306B;
	// document.getElementById(&apos;input_text_size&apos;).addEventListener(&apos;focus&apos;,function (e) {
	// 	document.removeEventListener(&apos;keydown&apos;,keydownOnDoc);
	// },false);
	// document.getElementById(&apos;input_text_size&apos;).addEventListener(&apos;blur&apos;,function (e) {
	// 	document.addEventListener(&apos;keydown&apos;,keydownOnDoc);
	// },false);
	//
	// // palette&#x304B;&#x3089;&#x30D5;&#x30A9;&#x30F3;&#x30C8;&#x30B5;&#x30A4;&#x30BA;&#x304C;&#x5909;&#x66F4;&#x3055;&#x308C;&#x305F;
	// addFontSizeEvnet(14);
	// addFontSizeEvnet(30);
	// addFontSizeEvnet(8);
	// function addFontSizeEvnet(fontSize) {
	// 	const eLink = document.getElementById(&apos;select-font-&apos; + fontSize);
	// 	eLink.addEventListener(&apos;click&apos;,function (e) {
	// 		document.getElementById(&apos;input_text_size&apos;).value = fontSize;
	// 		changeFontSizeOnSelect(fontSize);
	// 	},false);
	// };
	//
	// function changeFontSizeOnSelect(size) {
	// 	&apos;use strict&apos;;
	// 	const eSelectChars = findSelectElem(false);
	//
	// 	for (let eChar of eSelectChars) {
	// 		eChar.dataset.fontSize = size;
	// 	}
	// }
	//
	// // ------------ copy and paste --------------------
	//
	// // &#x9078;&#x629E;&#x4E2D;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x3092;&#x30B9;&#x30C8;&#x30EC;&#x30FC;&#x30B8;&#x306B;&#x4FDD;&#x5B58;&#x3059;&#x308B;
	// function copySelectText() {
	// 	localStorage.clipBoard = selectText();
	// }
	//
	// // &#x9078;&#x629E;&#x3057;&#x3066;&#x3044;&#x308B;&#x90E8;&#x5206;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x3092;&#x8FD4;&#x3059;
	// // &#x8907;&#x6570;&#x3042;&#x308C;&#x3070;&#x3059;&#x3079;&#x3066;&#x9023;&#x7D50;&#x3059;&#x308B;
	// function selectText() {
	// 	&apos;use strict&apos;;
	// 	const selection = getSelection();
	// 	let ret = &apos;&apos;;
	// 	for (let i = 0,cnt = selection.rangeCount; i &lt; cnt; i++) {
	// 		const selRange = selection.getRangeAt(i);
	// 		ret += selRange.toString();
	// 	}
	// 	return ret;
	// }
	//
	// // &#x30DA;&#x30FC;&#x30B9;&#x30C8;
	// function pasteFromCursor() {
	// 	&apos;use strict&apos;;
	// 	insertStringFromCursor(localStorage.clipBoard);
	// }
	// //
	// // -----------------------   string getter ------------------------
	// // &#x6587;&#x7AE0;&#x30B2;&#x30C3;&#x30BF;&#x30FC;(label:strgetter)
	//
	// // &#x6587;&#x66F8;&#x5185;&#x306E;&#x884C;&#x6570;
	// function getRowLen() {
	// 	&apos;use strict&apos;;
	// 	const $rows = $(&apos;#sentence_container &gt; .paragraph &gt; .row&apos;);
	// 	return $rows.length;
	// }
	//
	// // &#x73FE;&#x5728;&#x30DA;&#x30FC;&#x30B8;&#x306E;&#x884C;&#x6570;
	// function getRowLenOnCursorPage() {
	// 	&apos;use strict&apos;;
	// 	let $row = $(&apos;.cursor-row&apos;);
	// 	let cnt = getCurrentRowOnPage(); // &#x73FE;&#x5728;&#x884C;&#x3092;&#x52A0;&#x3048;&#x308B;
	//
	// 	// &#x5F8C;&#x308D;&#x306B;&#x6570;&#x3048;&#x308B;
	// 	while ($row[0] &amp;&amp; !($row.hasClass(&apos;page-last-row&apos;))) {
	// 		cnt++;
	// 		$row = $row.nextObj(&apos;#sentence_container .row&apos;);
	// 	}
	// 	return cnt;
	// }
	//
	// // &#x6587;&#x66F8;&#x5185;&#x3067;&#x306E;&#x73FE;&#x5728;&#x884C;
	// function getCurrentRowPos() {
	// 	&apos;use strict&apos;;
	// 	const rowNum = $(&apos;.paragraph &gt; .row&apos;).index($(&apos;.cursor&apos;).closest(&apos;.row&apos;)) +1;
	// 	return rowNum;
	// }
	//
	// // &#x73FE;&#x5728;&#x30DA;&#x30FC;&#x30B8;&#x5185;&#x3067;&#x4F55;&#x884C;&#x76EE;&#x306B;&#x3044;&#x308B;&#x304B;
	// function getCurrentRowOnPage() {
	// 	&apos;use strict&apos;;
	// 	let $row = $(&apos;.cursor-row&apos;);
	// 	let cnt = 1; // page-break&#x884C;&#x306E;&#x5206;
	//
	// 	// &#x524D;&#x306B;&#x3055;&#x304B;&#x306E;&#x307C;&#x3063;&#x3066;&#x6570;&#x3048;&#x308B;
	// 	while ($row[0] &amp;&amp; !($row.hasClass(&apos;page-break&apos;))) {
	// 		cnt++;
	// 		$row = $row.prevObj(&apos;#sentence_container .row&apos;);
	// 	}
	// 	return cnt;
	// }
	//
	// // &#x73FE;&#x5728;&#x6587;&#x5B57;&#x4F4D;&#x7F6E;
	// function getCurrentStringPosOnRow() {
	// 	&apos;use strict&apos;;
	// 	const $cursor = $(&apos;.cursor&apos;);
	// 	const strNum = $(&apos;.cursor-row&apos;).children(&apos;.char&apos;).index($cursor);
	// 	return strNum;
	// }
	//
	// // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x306E;&#x5168;&#x6587;&#x5B57;&#x6570;
	// function getStringLenOfCursorRow() {
	// 	&apos;use strict&apos;;
	// 	const strLen = $(&apos;.cursor-row &gt; .char&apos;).length;
	// 	return strLen - 1; // EOL&#x306E;&#x5206;&#x3092;&#x9664;&#x304F;
	// }
	//
	// // &#x73FE;&#x5728;&#x30DA;&#x30FC;&#x30B8;
	// function getCurrentPagePos() {
	// 	&apos;use strict&apos;;
	// 	// page-break&#x3092;&#x6301;&#x3064;&#x884C;&#x3092;&#x63A2;&#x3057;&#x3066;&#x6BB5;&#x843D;&#x3092;&#x3055;&#x304B;&#x306E;&#x307C;&#x308A;&#x3001;&#x305D;&#x306E;&#x6BB5;&#x843D;&#x306B;&#x8907;&#x6570;&#x306E;page-break&#x304C;&#x3042;&#x308C;&#x3070;cursor&#x884C;&#x307E;&#x305F;&#x306F;&#x305D;&#x306E;&#x6BB5;&#x843D;&#x306E;&#x6700;&#x5F8C;&#x306E;&#x884C;&#x304B;&#x3089;&#x884C;&#x3092;&#x9061;&#x308B;&#x3053;&#x3068;&#x3067;page-break&#x3092;&#x63A2;&#x3057;&#x3066;&#x3044;&#x308B;
	// 	let $currentParagraph = $(&apos;.cursor-row&apos;).closest(&apos;.paragraph&apos;);
	// 	let $currentPage;
	//
	// 	while (!($currentPage = $currentParagraph.children(&apos;.row.page-break&apos;))[0]) {
	// 		$currentParagraph = $currentParagraph.prev(&apos;.paragraph&apos;);
	// 	}
	// 	if ($currentPage.length &gt; 1) {
	//
	// 		if (!($currentParagraph.children(&apos;.cursor-row&apos;))[0]) {
	// 			const $row = $(&apos;.cursor-row&apos;);
	// 			while (!($row.hasClass(&apos;page-break&apos;))) {
	// 				$row = $row.prev(&apos;.row&apos;);
	// 				$currentPage = $row;
	// 			}
	// 		} else {
	// 			$currentPage = $currentParagraph.children(&apos;.page-break&apos;).last();
	// 		}
	//
	// 	}
	// 	return $(&apos;.page-break&apos;).index($currentPage) + 1;
	// }
	//
	// // &#x6587;&#x66F8;&#x5185;&#x306E;&#x5168;&#x30DA;&#x30FC;&#x30B8;&#x6570;
	// function getPageLen() {
	// 	&apos;use strict&apos;;
	// 	return $(&apos;.page-break&apos;).length;
	// }
	//
	// // 1&#x30DA;&#x30FC;&#x30B8;&#x306E;&#x884C;&#x6570;
	// function getRowLenOnPage() {
	// 	&apos;use strict&apos;;
	// 	return 40;
	// }
	//
	// // 1&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;
	// function getStringLenOfRow() {
	// 	&apos;use strict&apos;;
	// 	return 40;
	// }
	//
	// // &#x73FE;&#x5728;active&#x306B;&#x306A;&#x3063;&#x3066;&#x3044;&#x308B;&#x6587;&#x5B57;&#x88C5;&#x98FE;&#x30DC;&#x30BF;&#x30F3;&#x3092;&#x914D;&#x5217;&#x306B;&#x3059;&#x308B;
	// function getConfDecoChar() {
	// 	&apos;use strict&apos;;
	// 	const rtnArr = [];
	// 	const color = document.getElementById(&apos;color_btn&apos;).className.match(/select-(\S+)/);
	//
	// 	if (color) {
	// 		rtnArr.push(&apos;decolation-color-&apos; + color[1]);
	// 	}
	// 	if (document.getElementById(&apos;btn-bold&apos;).classList.contains(&apos;active&apos;)) rtnArr.push(&apos;decolation-font-bold&apos;);
	// 	if (document.getElementById(&apos;btn-italic&apos;).classList.contains(&apos;active&apos;)) rtnArr.push(&apos;decolation-font-italic&apos;);
	// 	return rtnArr;
	// }
	//
	// // ===================================================================
	// // 		&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x64CD;&#x4F5C;(label:cursor)
	// // ===================================================================
	//
	// // &#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3057;&#x305F;&#x884C;&#x306E;&#x3046;&#x3061;&#x6700;&#x3082;&#x8FD1;&#x3044;&#x6587;&#x5B57;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x5F53;&#x305F;&#x308B;
	// function moveCursorToClickPos(e) {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;moveCursorToClickPos&apos;);
	// 	if ($(&apos;#input_buffer&apos;).text() !== &apos;&apos;) { return; }
	// 	getCharOnRowClick($(this),e).addCursor();
	// 	gCursor.repositionCharNum();
	// }
	//
	// // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x3042;&#x308B;&#x6587;&#x5B57;&#x304C;&#x4F55;&#x6587;&#x5B57;&#x76EE;&#x304B;&#x3092;&#x8A18;&#x61B6;&#x3059;&#x308B;&#x8981;&#x7D20;&#x7FA4;&#x3092;&#x4F5C;&#x6210;&#x3059;&#x308B;
	// // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x5DE6;&#x53F3;&#x306B;&#x52D5;&#x304B;&#x3059;&#x3068;&#x304D;&#x306B;&#x5229;&#x7528;&#x3059;&#x308B;
	// function setCursorLine() {
	// 	&apos;use strict&apos;;
	// 	const $CursorLine = $(&apos;#cursor_line&apos;);
	//
	// 	for (let i = 0,len = getStringLenOfRow(); i &lt; len; i++) {
	// 		const $numberOfChar = $(&apos;&lt;span&gt;&apos;).addClass(&apos;char-pos&apos;);
	// 		$CursorLine.append($numberOfChar);
	// 	}
	// }
	//
	// // &#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x7B87;&#x6240;&#x306B;&#x3082;&#x3063;&#x3068;&#x3082;&#x8FD1;&#x3044;.char&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x8FD4;&#x3059;
	// function getCharOnRowClick($row,rowEo) {
	// 	&apos;use strict&apos;;
	// 	// @param $row .row&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#xFF4A;
	// 	// @param rowEo &#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;
	// 	const $chars = $row.children(&apos;.char&apos;);
	// 	const clickPos = {
	// 		x: rowEo.pageX,
	// 		y: rowEo.pageY
	// 	};
	//
	// 	let $resultObj = $chars.first(&apos;.char&apos;);
	// 	for (let i = 0,min = Number.MAX_VALUE,$char; ($char = $chars.eq(i))[0]; i++) {
	// 		const distance = $char.computeDistanceP2O(clickPos);
	// 		if (distance &lt; min) {
	// 			min = distance;
	// 			$resultObj = $char;
	// 		}
	// 	}
	// 	return $resultObj;
	// }
	//
	// // &#xFF12;&#x3064;&#x306E;&#x8981;&#x7D20;&#x306E;&#x4E2D;&#x5FC3;&#x70B9;&#x540C;&#x58EB;&#x306E;&#x8DDD;&#x96E2;&#x3092;&#x6C42;&#x3081;&#x308B;
	// function computeDistanceBetweenObj($a,$b) {
	// 	&apos;use strict&apos;;
	// 	const aCenterPos = computeCenterPoint($a);
	// 	const bCenterPos = computeCenterPoint($b);
	// 	return computeDistanceP2P(aCenterPos.x,aCenterPos.y,bCenterPos.x,bCenterPos.y);
	// }
	//
	// // &#x3042;&#x308B;&#x70B9;&#x3068;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x4E2D;&#x5FC3;&#x70B9;&#x306E;&#x8DDD;&#x96E2;&#x3092;&#x6C42;&#x3081;&#x308B;
	// function computeDistanceP2O(po,$obj) {
	// 	&apos;use strict&apos;;
	// 	// ex: po = {x:10,y:10}
	// 	const objPos = computeCenterPoint($obj);
	// 	return computeDistanceP2P(po.x,po.y,objPos.x,objPos.y);
	// }
	//
	// // &#xFF12;&#x70B9;&#x9593;&#x306E;&#x8DDD;&#x96E2;&#x3092;&#x6C42;&#x3081;&#x308B;
	// function computeDistanceP2P(x1,y1,x2,y2) {
	// 	&apos;use strict&apos;;
	// 	// &#xFF12;&#x4E57;&#x3092;&#x4F7F;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;&#x623B;&#x308A;&#x5024;&#x306F;&#x5FC5;&#x305A;&#x6B63;&#x306E;&#x6570;&#x306B;&#x306A;&#x308B;
	// 	// &#x221A;{(b.x - a.x)^2+ (b.y - a.y)^2}
	// 	return Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));
	// }
	//
	// // &#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x4E2D;&#x5FC3;&#x70B9;&#x306E;&#x5EA7;&#x6A19;&#x3092;&#x6C42;&#x3081;&#x308B;
	// function computeCenterPoint($obj) {
	// 	&apos;use strict&apos;;
	// 	const objPos = getPosObj($obj);
	// 	const objWidth = parseInt($obj.css(&apos;width&apos;));
	// 	const objHeight = parseInt($obj.css(&apos;height&apos;));
	// 	return {
	// 		x: objPos.x + objWidth/2,
	// 		y: objPos.y + objHeight/2
	// 	}
	// }
	//
	// // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x8FD4;&#x3059;
	// function getCursorPos() {
	// 	&apos;use strict&apos;;
	// 	return $(&apos;.cursor&apos;).getPosObj();
	// }
	//
	// // window&#x4E0A;&#x306E;&#x7D76;&#x5BFE;&#x5EA7;&#x6A19;
	// function getPosObj($obj) {
	// 	&apos;use strict&apos;;
	// 	const offset = $obj.offset();
	// 	const x = offset.left;
	// 	const y = offset.top;
	// 	return {
	// 		&apos;x&apos; : x,
	// 		&apos;y&apos; : y
	// 	}
	// }
	//
	// const gCursor = {
	// 	init: function () {
	// 		&apos;use strict&apos;;
	// 		// $(&apos;.char&apos;).first().addClass(&apos;cursor&apos;);
	// 		// $(&apos;#cursor_line &gt; .char-pos&apos;).first().addClass(&apos;cursor-pos-memory&apos;);
	// 		// this.addCursorRow();
	// 		// resetDisplayChar();
	// 	},
	// 	addCursorRow : function () {
	// 		&apos;use strict&apos;;
	// 		const $oldCursorRow = $(&apos;.paragraph &gt; .row.cursor-row&apos;);
	// 		if ($oldCursorRow[0]) {
	// 			$oldCursorRow.removeClass(&apos;cursor-row&apos;);
	// 		}
	// 		$(&apos;.cursor&apos;).closest(&apos;.row&apos;).addClass(&apos;cursor-row&apos;);
	// 	},
	// 	// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;
	// 	next : function() {
	// 		&apos;use strict&apos;;
	// 		const $prev = $(&apos;.cursor&apos;);
	// 		let $next = $prev.nextObj(&apos;#sentence_container .char&apos;);
	// 		if ($next.hasClass(&apos;EOL&apos;) &amp;&amp; $next.closest(&apos;.row&apos;).next(&apos;.row&apos;)[0]) { $next = $next.nextObj(&apos;#sentence_container .char&apos;); } // &#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306B;&#x306F;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x6B62;&#x3081;&#x306A;&#x3044;
	// 		if (!($next[0])) {
	// 			// &#x6587;&#x7AE0;&#x306E;&#x6700;&#x5F8C;&#x306B;&#x9054;&#x3057;&#x3066;&#x3044;&#x305F;&#x3089;&#x3001;&#x4F55;&#x3082;&#x3057;&#x306A;&#x3044;
	// 			return;
	// 		}
	// 		$next.addCursor(false);
	// 		// mark&#x3057;&#x305F;&#x307E;&#x307E;&#x5225;&#x306E;&#x884C;&#x306B;&#x79FB;&#x308A;&#x3001;&#x305D;&#x306E;&#x307E;&#x307E;&#x4E0A;&#x4E0B;&#x30AD;&#x30FC;&#x3092;&#x62BC;&#x3057;&#x3066;mark&#x3092;&#x52D5;&#x304B;&#x3059;&#x3053;&#x3068;&#x3082;&#x3042;&#x308B;&#x306E;&#x3067;&#x3001;mark&#x3092;&#xFF11;&#x6587;&#x5B57;&#x305A;&#x3064;&#x52D5;&#x304B;&#x3059;&#x306E;&#x3067;&#x306F;&#x671F;&#x5F85;&#x901A;&#x308A;&#x306E;&#x52D5;&#x304D;&#x3092;&#x3057;&#x3066;&#x304F;&#x308C;&#x306A;&#x3044;
	// 		this.repositionCharNum();
	// 	},
	// 	// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x524D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;
	// 	prev : function () {
	// 		&apos;use strict&apos;;
	// 		const $prev = $(&apos;.cursor&apos;);
	// 		let $next = $prev.prevObj(&apos;#sentence_container .char&apos;);
	// 		if ($next.hasClass(&apos;EOL&apos;) &amp;&amp; $next.closest(&apos;.row&apos;).next(&apos;.row&apos;)[0]) { $next = $next.prevObj(&apos;#sentence_container .char&apos;); } // &#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306B;&#x306F;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x6B62;&#x3081;&#x306A;&#x3044;
	// 		if (!($next[0])) {
	// 			return;
	// 		}
	// 		$next.addCursor(false);
	// 		this.repositionCharNum();
	// 	},
	// 	// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x524D;&#x306E;&#x884C;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;
	// 	shiftRight: function () {
	// 		&apos;use strict&apos;;
	// 		const $prev = $(&apos;.cursor&apos;);
	// 		const memoryPos = $(&apos;#cursor_line&apos;).children(&apos;.char-pos&apos;).index($(&apos;.cursor-pos-memory&apos;));
	// 		let $next = $(&apos;#sentence_container .cursor-row&apos;).prevObj(&apos;#sentence_container .row&apos;).children(&apos;.char&apos;).eq(memoryPos);
	//
	// 		if (!($next[0])) {
	// 			// &#x53F3;&#x306E;&#x884C;&#x306E;&#x6587;&#x5B57;&#x6570;&#x304C;&#x73FE;&#x5728;&#x6587;&#x5B57;&#x3088;&#x308A;&#x5C0F;&#x3055;&#x3044;
	// 			$next = $(&apos;#sentence_container div.cursor-row&apos;).prevObj(&apos;#sentence_container .row&apos;).children(&apos;.char&apos;).last();
	// 		}
	// 		if (!($next[0])) { return; }
	//
	// 		if ($next.hasClass(&apos;EOL&apos;) &amp;&amp; $next.closest(&apos;.row&apos;).next(&apos;.row&apos;)[0]) { $next = $next.prev(&apos;.char&apos;); } // &#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306B;&#x306F;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x6B62;&#x3081;&#x306A;&#x3044;
	// 		$next.addCursor(false);
	// 	},
	// 	// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x6B21;&#x306E;&#x884C;&#x306B;&#x79FB;&#x52D5;&#x3059;&#x308B;
	// 	shiftLeft: function () {
	// 		&apos;use strict&apos;;
	// 		const $prev = $(&apos;.cursor&apos;);
	// 		const memoryPos = $(&apos;#cursor_line&apos;).children(&apos;.char-pos&apos;).index($(&apos;.cursor-pos-memory&apos;));
	// 		let $next = $prev.closest(&apos;div.row&apos;).nextObj(&apos;#sentence_container .row&apos;).children(&apos;.char&apos;).eq(memoryPos);
	//
	// 		if (!($next[0])) {
	// 			$next = $prev.closest(&apos;.row&apos;).nextObj(&apos;#sentence_container .row&apos;).children(&apos;.char&apos;).last();
	// 		}
	// 		if (!($next[0])) { return; }
	//
	// 		if ($next.hasClass(&apos;EOL&apos;) &amp;&amp; $next.closest(&apos;.row&apos;).next(&apos;.row&apos;)[0]) { $next = $next.prev(&apos;.char&apos;); } // &#x6BB5;&#x843D;&#x9014;&#x4E2D;&#x306E;EOL&#x306B;&#x306F;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x6B62;&#x3081;&#x306A;&#x3044;
	// 		$next.addCursor(false);
	// 	},
	// 	// charNum&#x306E;&#x4F4D;&#x7F6E;&#x3092;&#x518D;&#x8ABF;&#x6574;
	// 	repositionCharNum: function () {
	// 		&apos;use strict&apos;;
	// 		const cursorPos = $(&apos;.cursor&apos;).closest(&apos;.row&apos;).children().index($(&apos;.cursor&apos;));
	// 		$(&apos;.cursor-pos-memory&apos;).removeClass(&apos;cursor-pos-memory&apos;);
	// 		$(&apos;#cursor_line &gt; .char-pos&apos;).eq(cursorPos).addClass(&apos;cursor-pos-memory&apos;);
	// 		// cursor-row&#x306E; &#x8ABF;&#x6574;
	// 		this.addCursorRow();
	// 	},
	// 	// &#x6307;&#x5B9A;&#x884C;&#x306B;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3059;&#x308B;&#x3002;&#x753B;&#x9762;&#x4E2D;&#x592E;&#x306B;&#x6307;&#x5B9A;&#x884C;&#x53CA;&#x3073;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x6765;&#x308B;&#x3088;&#x3046;&#x306B;&#x8ABF;&#x6574;
	// 	jumpForRow: function (rowNum) {
	// 		&apos;use strict&apos;;
	// 		const $targetRow = $(&apos;#sentence_container .row&apos;).eq(rowNum-1);
	// 		if (!$targetRow[0]) { return; }
	// 		// cursor
	// 		$targetRow.children(&apos;.char&apos;).first().addCursor(true);
	// 		this.repositionCharNum();
	// 	},
	// 	// &#x6307;&#x5B9A;&#x30DA;&#x30FC;&#x30B8;&#x306B;&#x30B8;&#x30E3;&#x30F3;&#x30D7;&#x3059;&#x308B;&#x3002;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306F;&#xFF11;&#x884C;&#x76EE;
	// 	jumpForPage: function (pageNum) {
	// 		&apos;use strict&apos;;
	// 		const $targetRow = $(&apos;#sentence_container .row&apos;).eq(firstDispNum);
	// 		if (!$targetRow[0]) { return; }
	// 		// cursor
	// 		$targetRow.children(&apos;.char&apos;).first().addCursor(false);
	// 		this.repositionCharNum();
	// 		// display
	// 		const firstDispNum = $(&apos;#sentence_container .row&apos;).index($(&apos;#sentence_container .page-break&apos;).eq(pageNum-1));
	// 		addDisplayRow(firstDispNum,firstDispNum+getDisplayRowLen());
	// 	}
	// };
	//
	// // =====================================================================
	// // 		&#x8868;&#x793A;&#x64CD;&#x4F5C;(label:display)
	// // =====================================================================
	//
	// // ----------------------------- display row --------------------------
	//
	// function reDisplay() {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;reDisplay&apos;);
	// 	const firstDispNum = $(&apos;#sentence_container .row&apos;).index($(&apos;#sentence_container .row.display&apos;).first());
	// 	addDisplayRow(firstDispNum,firstDispNum+getDisplayRowLen()); // &#x9014;&#x4E2D;&#x884C;&#x6570;&#x5909;&#x5316;
	// }
	//
	// // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x79FB;&#x52D5;&#x3057;&#x305F;&#x6642;&#x306E;&#x3001;&#x8868;&#x793A;&#x9818;&#x57DF;&#x306E;&#x8ABF;&#x6574;
	// function changeDisplayRow(opt_bl) {
	// 	&apos;use strict&apos;;
	// 	// opt_bl: true&#x306A;&#x3089;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x753B;&#x9762;&#x4E2D;&#x592E;&#x306B;&#x914D;&#x7F6E;&#x3059;&#x308B;
	// 	console.time(&apos;changeDisplayRow()&apos;);
	// 	const $cursor = $(&apos;#sentence_container .cursor&apos;);
	// 	const $cursorRow = $cursor.closest(&apos;.row&apos;);
	//
	//
	// 	if ($cursorRow.hasClass(&apos;display&apos;)) {
	// 		console.log(&apos;cursorRow has dispaly-row&apos;);
	// 		return;
	// 	}
	//
	// 	$cursorRow.addClass(&apos;display&apos;);
	// 	if ($(&apos;.row.display&apos;).length &lt;= getDisplayRowLen()) return;
	// 	const $nextRow = $cursorRow.nextObj(&apos;#sentence_container .row&apos;);
	// 	const $prevRow = $cursorRow.prevObj(&apos;#sentence_container .row&apos;);
	// 	let first;
	// 	if ($nextRow.hasClass(&apos;display&apos;)) {
	// 		// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x4E00;&#x884C;&#x524D;&#x306B;&#x306F;&#x307F;&#x51FA;&#x3057;&#x305F;
	// 		$(&apos;.row.display&apos;).last().removeClass(&apos;display&apos;);
	//
	// 	} else if ($prevRow.hasClass(&apos;display&apos;)) {
	// 		// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x4E00;&#x884C;&#x5F8C;&#x306B;&#x306F;&#x307F;&#x51FA;&#x3057;&#x305F;
	// 		$(&apos;.row.display&apos;).first().removeClass(&apos;display&apos;);
	//
	// 	} else if (opt_bl) {
	// 		// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x4E8C;&#x884C;&#x4EE5;&#x4E0A;&#x306F;&#x307F;&#x51FA;&#x3057;&#x3001;&#x304B;&#x3064;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x4E2D;&#x592E;&#x914D;&#x7F6E;&#x3059;&#x308B;
	// 		const $rows = $(&apos;#sentence_container .row&apos;);
	// 		const cursorRowPos = $rows.index($(&apos;.cursor-row&apos;));
	// 		first = cursorRowPos - getDisplayRowLen()/2;
	// 		first = first&gt;=0 ? first : 0;
	// 		addDisplayRow(first, (first + getDisplayRowLen()));
	//
	// 	} else {
	// 		// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x4E8C;&#x884C;&#x4EE5;&#x4E0A;&#x306F;&#x307F;&#x51FA;&#x3057;&#x305F;
	// 		const currentFirst = $(&apos;.row&apos;).index($(&apos;.row.display&apos;).first());
	// 		const cursorIndex = $(&apos;.row&apos;).index($cursorRow);
	// 		const currentEnd = $(&apos;.row&apos;).index($(&apos;.row.display&apos;).last());
	// 		first = 0;
	//
	// 		if (cursorIndex &lt; currentFirst) {
	// 			// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x524D;&#x306B;&#x3042;&#x308B;
	// 			first = cursorIndex;
	// 		} else if (cursorIndex &gt; currentEnd) {
	// 			// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x5F8C;&#x308D;&#x306B;&#x3042;&#x308B;
	// 			first = currentFirst + (cursorIndex - currentEnd);
	// 		} else {
	// 			// display&#x306B;&#x56F2;&#x307E;&#x308C;&#x305F;&#x90E8;&#x5206;&#x306B;display&#x3067;&#x306A;&#x3044;&#x884C;&#x304C;&#x3042;&#x308B;&#x5834;&#x5408;
	// 			// &#x9014;&#x4E2D;&#x884C;&#x6570;&#x5909;&#x5316;
	// 			first = currentFirst;
	// 		}
	//
	// 		addDisplayRow(first,(first + getDisplayRowLen()));
	// 	}
	//
	// 	console.timeEnd(&apos;changeDisplayRow()&apos;);
	// }
	//
	// // first&#x884C;&#x76EE;&#x304B;&#x3089;last&#x884C;&#x76EE;&#x307E;&#x3067;&#x8868;&#x793A;&#x3055;&#x305B;&#x308B;
	// function addDisplayRow(first,last) {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;addDisplayRow(&apos;+ first + &apos;,&apos;+ last +&apos;)&apos;);
	// 			first = Math.floor(first);
	// 			last = Math.floor(last);
	// 			const eOldDisplayRows = document.querySelectorAll(&apos;.row.display&apos;);
	//
	// 			while (eOldDisplayRows.length &gt; 0) {
	// 				eOldDisplayRows.item(0).classList.remove(&apos;display&apos;);
	// 			}
	//
	// 			const eRows = document.getElementById(&apos;sentence_container&apos;).getElementsByClassName(&apos;row&apos;);
	// 			const rowLen = eRows.length;
	// 			if (last &gt; rowLen) {
	// 				last = rowLen;
	// 				first = last - getDisplayRowLen();
	// 				if (first &lt; 0) first = 0;
	// 			}
	//
	// 			console.log(getDisplayRowLen());
	// 			for (let i = first; i &lt; last; i++) {
	// 				const eRow = eRows[i];
	// 				eRow.classList.add(&apos;display&apos;);
	// 			}
	// 			console.timeEnd(&apos;addDisplayRow()&apos;);
	// 			}
	//
	// // ----------------------------------------- display char ------------------------------------
	//
	// // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x8868;&#x793A;&#x6587;&#x5B57;&#x5916;&#x306B;&#x306F;&#x307F;&#x51FA;&#x305F;&#x6642;&#x3001;&#x8868;&#x793A;&#x4F4D;&#x7F6E;&#x3092;&#x518D;&#x8A08;&#x7B97;&#x3057;&#x3066;&#x8868;&#x793A;&#x3059;&#x308B;
	// function changeDisplayChar() {
	// 	&apos;use strict&apos;;
	// 	console.time(&apos;changeDisplayChar()&apos;);
	// 	const eCursor = document.getElementById(&apos;sentence_container&apos;).getElementsByClassName(&apos;cursor&apos;)[0];
	// 	if (eCursor.classList.contains(&apos;display&apos;)) {
	// 		console.log(&apos;cursor has display&apos;);
	// 		return;
	// 	}
	// 	if (eCursor.classList.contains(&apos;EOL&apos;) &amp;&amp; eCursor.previousElementSibling) { eCursor = eCursor.previousElementSibling; }
	//
	// 	const eCursorRow = eCursor.parentNode;
	// 	const eChars = eCursorRow.children;
	// 	const eDispChars = eCursorRow.querySelectorAll(&apos;.char.display&apos;);
	// 	const currentFirst = index(eDispChars[0],eChars);
	// 	const cursorIndex = index(eCursor,eChars);
	// 	const currentEnd = index(eDispChars[eDispChars.length-2] ? eDispChars[eDispChars.length-2] : eDispChars[eDispChars.length-1],eChars); // EOL&#x306F;&#x5E38;&#x306B;display&#x306A;&#x306E;&#x3067;&#x3001;EOL&#x4EE5;&#x5916;&#x306E;char&#x304C;&#x3042;&#x308B;&#x884C;&#x3067;&#x306F;EOL&#x306E;&#x524D;&#x306E;char&#x3092;&#x6700;&#x5F8C;&#x306E;display&#x3068;&#x3057;&#x3066;index&#x3092;&#x898B;&#x308B;
	// 	let first;
	//
	// 	if (cursorIndex &lt; currentFirst) {
	// 		// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x524D;&#x306B;&#x3042;&#x308B;
	// 		first = cursorIndex;
	// 		console.log(&apos;cursor is forward&apos;);
	// 	} else if (currentEnd &gt; 0 &amp;&amp; cursorIndex &gt; currentEnd) {
	// 		// &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x5F8C;&#x308D;&#x306B;&#x3042;&#x308B;
	// 		first = currentFirst + (cursorIndex - currentEnd);
	// 		console.log(&apos;cursor is backward&apos;);
	// 	} else {
	// 		// display&#x306B;&#x56F2;&#x307E;&#x308C;&#x305F;&#x90E8;&#x5206;&#x306B;display&#x3067;&#x306A;&#x3044;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308A;&#x3001;&#x304B;&#x3064;&#x305D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x3042;&#x305F;&#x3063;&#x3066;&#x3044;&#x308B;
	// 		// &#x3042;&#x308B;&#x3044;&#x306F;display&#x304C;&#x4E00;&#x3064;&#x3082;&#x306A;&#x3044;(currentFirst == -1 &amp;&amp; currentEnd == -1)
	// 		// resetDisplayChar();
	// 		// changeDisplayChar();
	// 		console.log(&apos;cursor is etc&apos;);
	// 		return;
	// 	}
	//
	// 	addDisplayChar(first);
	// 	console.timeEnd(&apos;changeDisplayChar()&apos;);
	// }
	//
	// function resetDisplayChar() {
	// 	&apos;use strict&apos;;
	// 	console.time(&apos;resetDisplayChar()&apos;);
	// 	addDisplayChar(0);
	// 	console.log(&apos;resetDisplayChar&apos;);
	// 	console.timeEnd(&apos;resetDisplayChar()&apos;);
	// }
	//
	// function dispCharAll() {
	// 	&apos;use strict&apos;;
	// 	const eChars = document.getElementsByClassName(&apos;char&apos;);
	//
	// 	for (let i = 0,eChar; eChar = eChars[i]; i++) {
	// 		if (!eChar.classList.contains(&apos;display&apos;)) { eChar.classList.add(&apos;display&apos;); }
	// 	}
	// }
	// // &#x753B;&#x9762;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x308B;row&#x306E;first&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x306B;display&#x3092;&#x4ED8;&#x4E0E;&#x3057;&#x3066;&#x8868;&#x793A;&#x3059;&#x308B;
	// function addDisplayChar(first) {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;char first:&apos;+ first);
	// 	const eDisplayRows = document.querySelectorAll(&apos;#sentence_container .row.display&apos;);
	// 	let addArr = [];
	// 	let removeArr = [];
	//
	// 	for (let i = 0,eDispRow; eDispRow = eDisplayRows[i];i++) {
	// 		const result = dispCharOfRow(first,eDispRow);
	// 		addArr = addArr.concat(result.add);
	// 		removeArr = removeArr.concat(result.remove);
	// 	}
	// 	for (let elem of addArr) {
	// 		elem.classList.add(&apos;display&apos;);
	// 	}
	// 	for (let elem of removeArr) {
	// 		elem.classList.remove(&apos;display&apos;);
	// 	}
	// }
	//
	// // row&#x306E;first&#x6587;&#x5B57;&#x76EE;&#x4EE5;&#x964D;&#x306E;&#x5404;&#x6587;&#x5B57;&#x3092;row&#x306E;&#x9AD8;&#x3055;&#x306B;&#x53CE;&#x307E;&#x308B;&#x3060;&#x3051;displaychar&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;&#x3068;&#x3057;&#x3066;&#x3001;row&#x5185;&#x306E;char&#x3059;&#x3079;&#x3066;&#x306B;&#x3064;&#x3044;&#x3066;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;&#x8981;&#x7D20;&#x3068;&#x9664;&#x53BB;&#x3059;&#x308B;&#x8981;&#x7D20;&#x306E;&#x914D;&#x5217;&#x3092;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3067;&#x8FD4;&#x3059;
	// function dispCharOfRow(first,row) {
	// 	&apos;use strict&apos;;
	// 	// &#x3053;&#x306E;&#x95A2;&#x6570;&#x5185;&#x3067;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x76F4;&#x63A5;&#x3044;&#x3058;&#x3063;&#x3066;&#x3057;&#x307E;&#x3046;&#x3068;&#x3001;&#x8907;&#x6570;&#x884C;&#x306B;&#x5BFE;&#x3057;&#x3066;&#x5B9F;&#x884C;&#x3057;&#x305F;&#x5834;&#x5408;&#x306B;&#x305D;&#x306E;&#x90FD;&#x5EA6;&#x63CF;&#x753B;&#x8A08;&#x7B97;&#x304C;&#x8D77;&#x3053;&#x3063;&#x3066;&#x3057;&#x307E;&#x3044;&#x6642;&#x9593;&#x304C;&#x304B;&#x304B;&#x308B;&#x305F;&#x3081;&#x3001;&#x3044;&#x3063;&#x305F;&#x3093;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x306E;&#x307F;&#x3092;&#x8ABF;&#x67FB;&#x3057;&#x3066;&#x95A2;&#x6570;&#x5916;&#x3067;&#x4E00;&#x6C17;&#x306B;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x5909;&#x66F4;&#x3092;&#x884C;&#x3046;&#x5F62;&#x306B;&#x3057;&#x3066;&#x3044;&#x308B;
	// 	console.time(&apos;dispCharOfRow()&apos;);
	//
	// 	const eRow = row.nodeName &amp;&amp; row.nodeType===1 ? row : row[0];
	// 	const eChars = eRow.children;
	// 	const addArr = [];
	// 	const removeArr = [];
	// 	// first&#x6587;&#x5B57;&#x4EE5;&#x524D;&#x306E;&#x6587;&#x5B57;&#x3067;display&#x3092;&#x6301;&#x3064;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308C;&#x3070;&#x9664;&#x53BB;&#x30EA;&#x30B9;&#x30C8;&#x306B;&#x52A0;&#x3048;&#x308B;
	// 	for (let i = 0; i &lt; first; i++) {
	// 		const eChar = eChars[i];
	// 		if (!eChar) { return {
	// 			add: addArr,
	// 			remove: removeArr
	// 		}; } // &#x884C;&#x5185;&#x6587;&#x5B57;&#x6570;&#x304C;first&#x6587;&#x5B57;&#x306A;&#x3044;&#x5834;&#x5408;&#x306F;EOL&#x4EE5;&#x5916;&#x306E;display&#x3092;&#x3059;&#x3079;&#x3066;&#x5916;&#x3057;&#x3066;&#x7D42;&#x308F;&#x308A;
	// 		if (eChar.classList.contains(&apos;display&apos;) &amp;&amp; !eChar.classList.contains(&apos;EOL&apos;)) {
	// 			removeArr.push(eChar);
	// 		}
	// 	}
	//
	// 	// first&#x6587;&#x5B57;&#x4EE5;&#x964D;&#x306E;&#x6587;&#x5B57;&#x3067;row&#x306E;&#x9AD8;&#x3055;&#x306B;&#x53CE;&#x307E;&#x308B;&#x6587;&#x5B57;&#x306E;&#x3046;&#x3061;&#x3001;display&#x3092;&#x6301;&#x305F;&#x306A;&#x3044;&#x6587;&#x5B57;&#x3092;&#x8FFD;&#x52A0;&#x30EA;&#x30B9;&#x30C8;&#x306B;&#x52A0;&#x3048;&#x308B;
	// 	// &#x307E;&#x305F;&#x3001;row&#x306B;&#x53CE;&#x307E;&#x3089;&#x306A;&#x3044;&#x6587;&#x5B57;&#x3067;display&#x3092;&#x6301;&#x3064;&#x6587;&#x5B57;&#x304C;&#x3042;&#x308C;&#x3070;&#x9664;&#x53BB;&#x30EA;&#x30B9;&#x30C8;&#x306B;&#x52A0;&#x3048;&#x308B;
	// 	// EOL&#x306F;&#x5E38;&#x306B;display&#x3092;&#x6301;&#x3064;&#x3088;&#x3046;&#x306B;&#x3059;&#x308B;(&#x305D;&#x3046;&#x3057;&#x306A;&#x3051;&#x308C;&#x3070;&#x3001;&#x7A7A;&#x884C;&#x3067;&#x4E00;&#x3064;&#x3082;display&#x304C;&#x306A;&#x3044;&#x72B6;&#x614B;&#x3068;&#x306A;&#x308A;&#x8868;&#x793A;&#x8981;&#x7D20;&#x304C;&#x4E00;&#x5207;&#x306A;&#x304F;&#x306A;&#x3063;&#x3066;&#x3057;&#x307E;&#x3046;&#x306E;&#x3067;&#x3001;height&#x304C;auto&#x3067;&#x3042;&#x308B;row&#x306F;&#x6F70;&#x308C;&#x305F;&#x72B6;&#x614B;&#x306B;&#x306A;&#x3063;&#x3066;&#x3057;&#x307E;&#x3046;)
	// 	const dispHeight = parseInt((eRow.currentStyle || document.defaultView.getComputedStyle(eRow,null)).width);
	// 	let fontHeight = 0;
	// 	let htcnt = 0;
	// 	for (let i = first,eChar; eChar = eChars[i]; i++) {
	// 		if (eChar.classList.contains(&apos;EOL&apos;)) {
	// 			continue;
	// 		}
	// 		fontHeight = eChar.dataset.fontSize === &apos;auto&apos; ? 18 : parseInt(eChar.dataset.fontSize)+2;
	// 		htcnt += fontHeight;
	// 		if (htcnt &lt; dispHeight) {
	// 			if (!(eChar.classList.contains(&apos;display&apos;))) {
	// 				addArr.push(eChar);
	// 			}
	// 		} else {
	// 			if (eChar.classList.contains(&apos;display&apos;)) {
	// 				removeArr.push(eChar);
	// 			}
	// 		}
	// 	}
	//
	// 	console.timeEnd(&apos;dispCharOfRow()&apos;);
	// 	return {
	// 		add: addArr,
	// 		remove: removeArr
	// 	};
	// }
	// $(&apos;body&apos;).on(&apos;click&apos;,&apos;.char&apos;,function (e) {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;char:&apos; + $(this).css(&apos;height&apos;));
	// });
	// $(&apos;body&apos;).on(&apos;click&apos;,&apos;.row&apos;,function (e) {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;row:&apos; + $(this).css(&apos;height&apos;));
	// });
	//
	// // &#x8868;&#x793A;&#x3059;&#x308B;&#x884C;&#x6570;
	// function getDisplayRowLen() {
	// 	&apos;use strict&apos;;
	// 	const dispWidth = parseInt($(&apos;#sentence_container&apos;).css(&apos;height&apos;));
	// 	const rowBorderWidth = 2;
	// 	let rowWidth = parseInt($(&apos;.paragraph &gt; .row&apos;).css(&apos;height&apos;));
	// 	console.log(&apos;tategaki rowWidgh:&apos;+ rowWidth + &apos;,&apos;+ $(&apos;.paragraph &gt; .row&apos;).hasClass(&apos;display&apos;));
	// 	if (dispWidth &lt;= 0) { return 0; }
	// 	rowWidth += rowBorderWidth;
	// 	const dispLen = Math.floor(dispWidth / rowWidth);
	// 	return dispLen -1; // &#x4E00;&#x884C;&#x3060;&#x3051;&#x4F59;&#x88D5;&#x3092;&#x3082;&#x305F;&#x305B;&#x308B;
	// }
	//
	// // ----------------------------------------- element position ---------------------------------------
	//
	// // inputBuffer&#x306E;&#x4F4D;&#x7F6E;&#x3092;&#x8ABF;&#x6574;&#x3059;&#x308B;
	// function moveInput() {
	// 	&apos;use strict&apos;;
	// 	const cursorPosObj = getCursorPos();
	// 	const x = cursorPosObj.x;
	// 	const y = cursorPosObj.y;
	// 	const $inputBuffer = $(&apos;#input_buffer&apos;);
	//
	// 	$inputBuffer.css(&apos;top&apos;,y).css(&apos;left&apos;,x);
	// 	resizeInputBuffer();
	// }
	//
	// // inputBuffer&#x306E;&#x9AD8;&#x3055;&#x8ABF;&#x6574;
	// function resizeInputBuffer() {
	// 	&apos;use strict&apos;;
	// 	const $inputBuffer = $(&apos;#input_buffer&apos;);
	// 	const $character = $inputBuffer.children(&apos;.char&apos;).first();
	// 	// border&#x306F;&#x4E0A;&#x4E0B;&#x5408;&#x308F;&#x305B;&#x3066;&#xFF12;&#x3064;&#x3042;&#x308B;
	// 	const height = $character.outerHeight() * ($inputBuffer.children(&apos;.char&apos;).length-1) + 5;
	//
	// 	$inputBuffer.css(&apos;height&apos;,height);
	// }
	//
	// // convertview&#x306E;&#x4F4D;&#x7F6E;&#x3092;&#x8ABF;&#x6574;
	// function repositionConvertView() {
	// 	&apos;use strict&apos;;
	// 	const eConvertContainer = document.getElementById(&apos;convert_container&apos;);
	// 	const cursorPosObj = getCursorPos();
	// 	const x = cursorPosObj.x;
	// 	const y = cursorPosObj.y;
	// 	eConvertContainer.style.top = y + &apos;px&apos;;
	// 	eConvertContainer.style.left = (x - parseInt((eConvertContainer.currentStyle || document.defaultView.getComputedStyle(eConvertContainer,null)).width)) + &apos;px&apos;;
	// }
	//
	// // -------------------------------------- page infomation --------------------------------------------
	//
	// // &#x6539;&#x30DA;&#x30FC;&#x30B8;&#x30AF;&#x30E9;&#x30B9;&#x306E;&#x4ED8;&#x4E0E;
	// function addPageBreak() {
	// 	&apos;use strict&apos;;
	//
	// 	// reset
	// 	$(&apos;#sentence_container &gt; .paragraph &gt; .row.page-break&apos;).removeClass(&apos;page-break&apos;);
	// 	$(&apos;#sentence_container &gt; .paragraph &gt; .row.page-last-row&apos;).removeClass(&apos;page-last-row&apos;);
	//
	// 	const pageNum = getRowLenOnPage();
	// 	const $rows = $(&apos;#sentence_container &gt; .paragraph &gt; .row&apos;);
	// 	for (let i = 1,$row; ($row = $rows.eq(pageNum*i-1))[0]; i++) {
	// 		$row.addClass(&apos;page-last-row&apos;);
	// 	}
	// 	$rows.last().addClass(&apos;page-last-row&apos;);
	// 	for (let i = 0,$row; ($row = $rows.eq(pageNum*i))[0]; i++) {
	// 		$row.addClass(&apos;page-break&apos;);
	// 	}
	// }
	//
	// // =====================================================================
	// // 	&#x9078;&#x629E;&#x64CD;&#x4F5C;(label:select)
	// // =====================================================================
	//
	// // &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306E;char&#x3092;&#x914D;&#x5217;&#x306B;&#x5165;&#x308C;&#x3066;&#x8FD4;&#x3059;
	// // bl: &#x5B9F;&#x884C;&#x5F8C;&#x9078;&#x629E;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;&#x306A;&#x3089;true
	// function findSelect$obj(bl) {
	// 	&apos;use strict&apos;;
	// 	const retObjArray = [];
	// 	const selection = getSelection();
	//
	// 	if (selection.rangeCount === 1) {
	// 		// &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x304C;&#x4E00;&#x7B87;&#x6240;&#x306E;&#x5834;&#x5408;
	// 		const selRange = selection.getRangeAt(0); // &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306E;Range
	//
	// 		const $chars = $(&apos;#sentence_container .row.display .char&apos;).not(&apos;.EOL&apos;);
	// 		const charRange = document.createRange();
	// 		for (let i = 0,$char; ($char = $chars.eq(i))[0] ; i++) {
	// 			// &#x305D;&#x306E;character&#x304C;&#x9078;&#x629E;&#x7BC4;&#x56F2;&#x5185;&#x306B;&#x3042;&#x308B;&#x5834;&#x5408;&#x306B;&#x914D;&#x5217;&#x306B;&#x5165;&#x308C;&#x3066;&#x3044;&#x308B;
	// 			// &#x73FE;&#x5728;&#x306E;&#x8981;&#x7D20;&#x3092;&#x56F2;&#x3080;&#x7BC4;&#x56F2;&#x3092;charRange&#x3068;&#x3057;&#x3066;&#x8A2D;&#x5B9A;(jquery&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304B;&#x3089;DOM&#x8981;&#x7D20;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x3001;&#x5F15;&#x6570;&#x306B;&#x6E21;&#x3057;&#x3066;&#x3044;&#x308B;)&#x3002;selectNodeContents&#x3092;selectNode&#x306B;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x3092;&#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x30CE;&#x30FC;&#x30C9;&#x3067;&#x306F;&#x306A;&#x304F;span&#x8981;&#x7D20;&#x306B;&#x3059;&#x308B;&#x3068;&#x3001;&#x9078;&#x629E;&#x4E2D;&#x6700;&#x521D;&#x3068;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x304C;&#x53CD;&#x5FDC;&#x3057;&#x306A;&#x3044;&#x3053;&#x3068;&#x304C;&#x3042;&#x308B;
	// 			charRange.selectNodeContents($char[0].childNodes.item(0));
	// 			// &#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x304C;&#x540C;&#x3058;&#x304B;select&#x306E;&#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x3088;&#x308A;&#x6587;&#x5B57;&#x306E;&#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x304C;&#x5F8C;&#x308D;&#x306B;&#x3042;&#x308A;&#x3001;
	// 			// &#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x304C;&#x540C;&#x3058;&#x304B;select&#x306E;&#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x3088;&#x308A;&#x6587;&#x5B57;&#x306E;&#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x304C;&#x524D;&#x306B;&#x3042;&#x308B;
	// 			if ((charRange.compareBoundaryPoints(Range.START_TO_START,selRange) &gt;= 0
	// 						&amp;&amp; charRange.compareBoundaryPoints(Range.END_TO_END,selRange) &lt;= 0)) {
	// 				retObjArray.push($char);
	// 			}
	// 		}
	//
	// 		selRange.detach();
	// 	}
	//
	// 	charRange.detach();
	// 	if (bl) selection.removeAllRanges(); // &#x9078;&#x629E;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
	//
	// 	return retObjArray;
	// }
	//
	// // &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306E;char&#x3092;&#x914D;&#x5217;&#x306B;&#x5165;&#x308C;&#x3066;&#x8FD4;&#x3059;
	// // bl: &#x5B9F;&#x884C;&#x5F8C;&#x9078;&#x629E;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;&#x306A;&#x3089;true
	// function findSelectElem(bl) {
	// 	&apos;use strict&apos;;
	// 	const retObjArray = [];
	// 	const selection = getSelection();
	//
	// 	if (selection.rangeCount === 1) {
	// 		// &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x304C;&#x4E00;&#x7B87;&#x6240;&#x306E;&#x5834;&#x5408;
	// 		const selRange = selection.getRangeAt(0); // &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306E;Range
	//
	// 		// &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x5185;&#x306B;&#x3042;&#x308B;character&#x3092;&#x914D;&#x5217;&#x306B;&#x5165;&#x308C;&#x308B;
	// 		const eChars = document.querySelectorAll(&apos;#sentence_container .row.display .char&apos;);
	// 		const charRange = document.createRange();
	// 		for (let i = 0,eChar; eChar = eChars[i] ; i++) {
	// 			if (eChar.classList.contains(&apos;EOL&apos;)) { continue; }
	// 			// &#x73FE;&#x5728;&#x306E;&#x8981;&#x7D20;&#x3092;&#x56F2;&#x3080;&#x7BC4;&#x56F2;&#x3092;charRange&#x3068;&#x3057;&#x3066;&#x8A2D;&#x5B9A;&#x3002;selectNodeContents&#x3092;selectNode&#x306B;&#x3059;&#x308B;&#x3001;&#x3042;&#x308B;&#x3044;&#x306F;&#x5F15;&#x6570;&#x3092;&#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x30CE;&#x30FC;&#x30C9;&#x3067;&#x306F;&#x306A;&#x304F;span&#x8981;&#x7D20;&#x306B;&#x3059;&#x308B;&#x3068;&#x3001;&#x9078;&#x629E;&#x4E2D;&#x6700;&#x521D;&#x3068;&#x6700;&#x7D42;&#x6587;&#x5B57;&#x304C;&#x53CD;&#x5FDC;&#x3057;&#x306A;&#x3044;&#x3053;&#x3068;&#x304C;&#x3042;&#x308B;
	// 			charRange.selectNodeContents(eChar.childNodes.item(0));
	// 			// &#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x304C;&#x540C;&#x3058;&#x304B;select&#x306E;&#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x3088;&#x308A;&#x6587;&#x5B57;&#x306E;&#x958B;&#x59CB;&#x4F4D;&#x7F6E;&#x304C;&#x5F8C;&#x308D;&#x306B;&#x3042;&#x308A;&#x3001;
	// 			// &#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x304C;&#x540C;&#x3058;&#x304B;select&#x306E;&#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x3088;&#x308A;&#x6587;&#x5B57;&#x306E;&#x7D42;&#x4E86;&#x4F4D;&#x7F6E;&#x304C;&#x524D;&#x306B;&#x3042;&#x308B;
	// 			if ((charRange.compareBoundaryPoints(Range.START_TO_START,selRange) &gt;= 0
	// 						&amp;&amp; charRange.compareBoundaryPoints(Range.END_TO_END,selRange) &lt;= 0)) {
	// 				retObjArray.push(eChar);
	// 			}
	// 		}
	//
	// 		selRange.detach();
	// 		charRange.detach();
	// 	}
	//
	// 	if (bl) selection.removeAllRanges(); // &#x9078;&#x629E;&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
	//
	// 	return retObjArray;
	// }
	//
	// // &#x9078;&#x629E;&#x4E2D;&#x306E;&#x6587;&#x5B57;&#x306B;&#x88C5;&#x98FE;&#x7528;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x4ED8;&#x4E0E;&#x3059;&#x308B;
	// // &#x540C;&#x3058;&#x7A2E;&#x985E;&#x306E;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x3059;&#x3067;&#x306B;&#x6301;&#x3063;&#x3066;&#x3044;&#x305F;&#x5834;&#x5408;&#x306F;&#x9664;&#x53BB;&#x3059;&#x308B;
	// function addDecolationClassOnSelect(strClass) {
	// 	&apos;use strict&apos;;
	// 	const eSelChars = findSelectElem(true);
	// 	const kind = (strClass.match(/(decolation-.+)-.+/))[1];
	// 	const regexp = new RegExp(kind +&apos;-\\S+&apos;);
	//
	// 	for (let eChar of eSelChars) {
	// 		const rmClass = eChar.className.match(regexp);
	// 		eChar.classList.add(strClass);
	// 		if (rmClass) { eChar.classList.remove(rmClass[0]); }
	// 	}
	//
	// }
	//
	// function removeClassOnSelect(kind) {
	// 	&apos;use strict&apos;;
	// 	const eSelChars = findSelectElem(true);
	// 	const regexp = new RegExp(kind +&apos;-\\S+&apos;);
	//
	// 	for (let eChar of eSelChars) {
	// 		const rmClass = eChar.className.match(regexp);
	// 		if (rmClass) { eChar.classList.remove(rmClass[0]); }
	// 	}
	// }
	//
	// // &#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x79FB;&#x52D5;&#x524D;&#x306B;&#x3001;selection&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x4F4D;&#x7F6E;&#x3092;&#x899A;&#x3048;&#x3055;&#x305B;&#x308B;
	// function readySelection() {
	// 	const eCursor = document.querySelector(&apos;.cursor&apos;);
	// 	const selection = getSelection();
	//
	// 	if (selection.rangeCount === 0) {
	// 		selection.selectAllChildren(eCursor);
	// 	}
	// }
	//
	// // &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x3092;&#x52D5;&#x304B;&#x3059;(&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x79FB;&#x52D5;&#x6642;)
	// function extendSelection(bShift) {
	// 	const eCursor = document.querySelector(&apos;.cursor&apos;);
	// 	const selection = getSelection();
	//
	// 	if (bShift) {
	// 		// &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x304C;&#x62BC;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x306E;&#x30AA;&#x30D5;&#x30BB;&#x30C3;&#x30C8;&#xFF10;&#x307E;&#x3067;selection&#x3092;&#x62E1;&#x5F35;
	// 		selection.extend(eCursor,0);
	// 	} else {
	// 		// &#x30B7;&#x30D5;&#x30C8;&#x30AD;&#x30FC;&#x7121;&#x3057;&#x3067;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x52D5;&#x3044;&#x305F;&#x306A;&#x3089;selection&#x3092;&#x89E3;&#x9664;&#x3059;&#x308B;
	// 		selection.removeAllRanges();
	// 	}
	// }
	//
	// // =====================================================================
	// // 		&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x64CD;&#x4F5C;(label:file)
	// // =====================================================================
	//
	// function comReadFile(fileId) {
	// 	&apos;use strict&apos;;
	// 	$(&apos;#sentence_container &gt; .paragraph&apos;).remove();
	//
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/ReadFile&apos;,
	// 		data : {
	// 			user_id: getUserId(),
	// 			file_id: fileId
	// 		},
	// 		context : {
	// 			id : fileId
	// 		},
	// 		dataType : &apos;json&apos;,
	// 	}).done(function (data) {
	// 			// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 			// &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x3092;&#x8868;&#x793A;
	// 			$(&apos;#file_title&apos;).val(data.filename).attr(&apos;data-file-id&apos;,this.id);
	// 			// &#x6587;&#x7AE0;&#x306E;html&#x66F8;&#x304D;&#x51FA;&#x3057;
	// 			printString(data.literaArray);
	// 			// &#x7981;&#x5247;&#x51E6;&#x7406;
	// 			checkKinsoku();
	// 			// &#x6700;&#x521D;&#x306E;&#xFF14;&#xFF10;&#x884C;&#x306E;&#x307F;&#x8868;&#x793A;&#x3059;&#x308B;
	// 			addDisplayRow(0,getDisplayRowLen());
	// 			gCursor.init();
	// 			resetDisplayChar();
	// 			$(&apos;#doc-info &gt; #saved&apos;).text(data.saved);
	//
	// 			addPageBreak();
	// 			printDocInfo();
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 			alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comReadFile&apos;);
	// 	});
	//
	// }
	//
	// function comReadJsonFile(fileId) {
	// 	&apos;use strict&apos;;
	// 	// console.log(&apos;comReadJsonFile(&quot;&apos;+ fileId +&apos;&quot;)&apos;);
	// 	// console.time(&apos;comReadJsonFile()&apos;);
	// 	const userId = getUserId();
	// 	userAlert(&apos;&#x8AAD;&#x8FBC;&#x4E2D;&apos;);
	// 	console.log(&apos;comReadJsonFile userId:&quot;&apos;+ userId);
	// 	$(&apos;#sentence_container&apos;).empty();
	// 	console.time(&apos;ReadJsonFile communication&apos;);
	//	
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/ReadJsonFile&apos;,
	// 		data : {
	// 			user_id: userId,
	// 			file_id: fileId
	// 		},
	// 		context : {
	// 			id : fileId
	// 		},
	// 		dataType : &apos;json&apos;
	// 	}).done(function (data) {
	// 		console.timeEnd(&apos;ReadJsonFile communication&apos;);
	// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 		// &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x3092;&#x8868;&#x793A;
	// 		$(&apos;#file_title&apos;).val(data.filename).attr(&apos;data-file-id&apos;,this.id);
	// 		// &#x6587;&#x7AE0;&#x306E;html&#x66F8;&#x304D;&#x51FA;&#x3057;
	// 		const text = data.data.text;
	// 		console.time(&apos;append string&apos;);
	// 		// appendParagraphFromObj(text);
	// 		window.sentence = new window.SentenceContainer(this.id,text);
	// 		console.timeEnd(&apos;append string&apos;);
	// 		console.log(window.sentence);
	// 		console.time(&apos;addDisplayRow&apos;);
	// 		addDisplayRow(0,getDisplayRowLen());
	// 		console.timeEnd(&apos;addDisplayRow&apos;);
	// 		console.time(&apos;cursor init&apos;);
	// 		gCursor.init();
	// 		console.timeEnd(&apos;cursor init&apos;);
	// 		// console.time(&apos;resetDisplayChar&apos;);
	// 		// resetDisplayChar();
	// 		// console.timeEnd(&apos;resetDisplayChar&apos;);
	// 		$(&apos;#doc-info &gt; #saved&apos;).text(data.saved);
	//	
	// 		addPageBreak();
	// 		printDocInfo();
	// 		console.timeEnd(&apos;comReadJsonFile()&apos;);
	// 		userAlert(&apos;&#x8AAD;&#x307F;&#x8FBC;&#x307F;&#x5B8C;&#x4E86;&apos;);
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comReadJsonFile&apos;);
	// 	});
	// }
	//
	// function comSaveFile() {
	// 	&apos;use strict&apos;;
	// 	const userId = getUserId();
	// 	const $fileTitle = $(&apos;#file_title&apos;);
	// 	const filename = $fileTitle.val();
	//
	// 	if (filename.length === 0) {
	// 		userAlert(&apos;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x3092;&#x5165;&#x529B;&#x3057;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;&apos;);
	// 		return;
	// 	}
	// 	if (filename.indexOf(&apos;&quot;&apos;) &gt; -1 || filename.indexOf(&apos;&lt;&apos;)&gt;-1 || filename.indexOf(&apos;&gt;&apos;)&gt;-1) {
	// 		userAlert(&apos;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x306B;&#x4F7F;&#x7528;&#x4E0D;&#x53EF;&#x80FD;&#x6587;&#x5B57;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;&apos;);
	// 		return;
	// 	}
	//
	// 	const fileId = $fileTitle.attr(&apos;data-file-id&apos;);
	//
	// 	if (fileId === &apos;-1&apos;) {
	// 		comSaveAs(filename);
	// 		return;
	// 	}
	//
	// 	// &#x6BB5;&#x843D;&#x3054;&#x3068;&#x306B;&#x914D;&#x5217;&#x306B;&#x683C;&#x7D0D;
	// 	const $paragraphs = $(&apos;#sentence_container &gt; .paragraph&apos;);
	// 	const contentsArray = [];
	// 	for (let i = 0,$paragraph; ($paragraph = $paragraphs.eq(i))[0]; i++) {
	// 		contentsArray.push($paragraph.text());
	// 	}
	// 	const contentsJson = JSON.stringify(contentsArray);
	// 	const nowDate_ms = Date.now() + &apos;&apos;;
	//
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/WriteFile&apos;,
	// 		data : {
	// 			user_id : userId,
	// 			file_id: fileId,
	// 			filename: filename,
	// 			json: contentsJson,
	// 			saved: nowDate_ms
	// 		},
	// 		context : {
	// 			userId : userId,
	// 			fileId: fileId
	// 		},
	// 		dataType : &apos;json&apos;,
	// 	}).done(function (data) {
	// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 		console.log(data.result);
	// 		$(&apos;#saved&apos;).text(data.strDate);
	// 		// comFileList(this.userId);
	// 		container.fileList().read();
	// 		console.log(&apos;&#x4FDD;&#x5B58;&#x3057;&#x307E;&#x3057;&#x305F;:fileId=&apos; + this.fileId);
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comSaveFile&apos;);
	// 	});
	// }
	//
	// function comSaveJsonFile() {
	// 	&apos;use strict&apos;;
	// 	container.saveFile();
	// 	return;
	// 	const userId = getUserId();
	// 	const $fileTitle = $(&apos;#file_title&apos;);
	// 	const filename = $fileTitle.val();
	//
	// 	if (filename.length === 0) {
	// 		userAlert(&apos;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x3092;&#x5165;&#x529B;&#x3057;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;&apos;);
	// 		return;
	// 	}
	// 	if (filename.indexOf(&apos;&quot;&apos;) &gt; -1 || filename.indexOf(&apos;&lt;&apos;)&gt;-1 || filename.indexOf(&apos;&gt;&apos;)&gt;-1) {
	// 		userAlert(&apos;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x306B;&#x4F7F;&#x7528;&#x4E0D;&#x53EF;&#x80FD;&#x6587;&#x5B57;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;&apos;);
	// 		return;
	// 	}
	//
	// 	userAlert(&apos;&#x4FDD;&#x5B58;&#x3057;&#x3066;&#x3044;&#x307E;&#x3059;&apos;);
	//
	// 	const fileId = $fileTitle.attr(&apos;data-file-id&apos;);
	// 	if (fileId === &apos;-1&apos;) {
	// 		comSaveAs(filename);
	// 		return;
	// 	}
	// 	const contentsJson = makeJsonDataForSave();
	// 	const nowDate_ms = Date.now() + &apos;&apos;;
	//
	// 	console.log(&apos;user_id:&apos;+ userId);
	// 	console.log(&apos;file_id:&apos;+ fileId);
	// 	console.log(&apos;filename:&apos;+ filename);
	// 	console.log(&apos;sendData:&apos;+ contentsJson);
	// 	console.log(&apos;saved:&apos;+ nowDate_ms);
	//
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/WriteJsonFile&apos;,
	// 		data : {
	// 			user_id : userId,
	// 			file_id: fileId,
	// 			filename: filename,
	// 			json: contentsJson,
	// 			saved: nowDate_ms
	// 		},
	// 		context : {
	// 			userId : userId,
	// 			fileId: fileId
	// 		},
	// 		dataType : &apos;json&apos;
	// 	}).done(function (data) {
	// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 		console.log(data.result);
	// 		// $(&apos;#saved&apos;).text(data.strDate);
	// 		// comFileList(this.userId);
	// 		container.fileList().read();
	// 		console.log(&apos;&#x4FDD;&#x5B58;&#x3057;&#x307E;&#x3057;&#x305F;:fileId=&apos; + this.fileId);
	// 		userAlert(&apos;&#x4FDD;&#x5B58;&#x3057;&#x307E;&#x3057;&#x305F;&apos;);
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comSaveJsonFile&apos;);
	// 	});
	// }
	//
	// function comFileList(userId) {
	// 	&apos;use strict&apos;;
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/FileListMaker&apos;,
	// 		data : {
	// 			user_id: userId
	// 		},
	// 		dataType : &apos;json&apos;,
	// 	}).done(function (data) {
	// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 		setFileListFromObject(data);
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos; in comFileList&apos;);
	// 	});
	// }
	//
	// function setFileListFromObject(data,opt_eParentUl) {
	// 	&apos;use strict&apos;;
	// 	/*
	// 	 * data&#x306E;&#x4E2D;&#x8EAB;&#x4F8B;
	// 	 * data = {
	// 	 * 	&quot;directoryname&quot;: &quot;root&quot;,
	// 	 * 	&quot;1&quot;:&quot;sample&quot;,
	// 	 * 	&quot;8&quot;:&quot;file&quot;,
	// 	 * 	&quot;6&quot;: {
	// 	 * 		&quot;directoryname&quot;: &quot;dirname&quot;,
	// 	 * 		&quot;4&quot;:&quot;indirfile&quot;,
	// 	 * 		&quot;9&quot;:&quot;file&quot;,
	// 	 * 		&quot;12&quot;: {
	// 	 * 			&quot;directoryname&quot;: &quot;seconddir&quot;,
	// 	 * 			&quot;17&quot;: &quot;file&quot;
	// 	 * 		}
	// 	 * 	}
	// 	 * }
	// 	 * fileId:filename
	// 	 */
	//
	// 	const eParentUl = opt_eParentUl || document.createDocumentFragment();
	// 	if (opt_eParentUl) {
	// 		empty(eParentUl);
	// 	}
	//
	// 	for (let fileId in data) {
	// 		const filename = data[fileId]; // filename&#x306F;&#x3001;&#x5BFE;&#x8C61;fileId&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x304B;&#x3001;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306A;&#x3089;&#x3070;&#x518D;&#x5E30;&#x7684;&#x306B;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304C;&#x5165;&#x3063;&#x3066;&#x3044;&#x308B;
	//
	// 		if (typeof filename === &apos;string&apos; &amp;&amp; fileId !==  &apos;directoryname&apos;) {
	// 			// file
	// 			eParentUl.appendChild(createFileElement(fileId,filename));
	// 		} else if (typeof filename === &apos;object&apos;) {
	// 			// dir
	// 			const dirId = fileId;
	// 			const innerData = filename;
	// 			const eDir = createDirectoryElement(dirId, innerData); // createDirectoryElement()&#x5185;&#x306B;&#x3042;&#x308B;createDirCollapseElement()&#x306E;&#x4E2D;&#x3067;&#x3055;&#x3089;&#x306B;setFileListFromObject()&#x3092;&#x4F7F;&#x7528;&#x3057;&#x3066;&#x3044;&#x308B;
	// 			eParentUl.appendChild(eDir);
	// 		}
	//
	// 	}
	//
	// 	// eParentUl == documentFlagment&#x306E;&#x6642;&#x3060;&#x3051;&#x3001;file_list&#x5185;&#x3092;&#x5165;&#x308C;&#x66FF;&#x3048;&#x308B;
	// 	if (!opt_eParentUl) {
	// 		const eFileList = document.getElementById(&apos;file_list&apos;);
	// 		empty(eFileList);
	// 		eFileList.appendChild(eParentUl);
	// 	}
	// }
	//
	// // &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x958B;&#x304F;&#x30E2;&#x30FC;&#x30C0;&#x30EB;&#x306B;&#x3042;&#x308B;&#x691C;&#x7D22;&#x30DC;&#x30C3;&#x30AF;&#x30B9;&#x306E;keyup&#x30A4;&#x30D9;&#x30F3;&#x30C8;
	// function keyupInSearchFileInput(e) {
	// 	&apos;use strict&apos;;
	// 	const keycode = getKeyCode(e);
	// 	const $searchFile = $(&apos;#search_file&apos;);
	// 	const searchWord = $searchFile.val();
	//
	// 	if (keycode == 13) {
	// 		// enter
	//
	// 		const $file = getFileObjectFromFileName(searchWord);
	// 		if ($file[0] &amp;&amp; $file.length === 1) {
	// 			comReadJsonFile($file.attr(&apos;data-file-id&apos;));
	// 		}
	// 		$(&apos;#file_list_modal&apos;).modal(&apos;hide&apos;);
	// 		document.addEventListener(&apos;keydown&apos;,keydownOnDoc,false);
	// 		// comFileList(getUserId());
	// 		container.fileList().read();
	//
	// 	} else if (searchWord.length === 0) {
	// 		// comFileList(getUserId());
	// 		container.fileList().read();
	// 	} else {
	// 		comSearchFile(searchWord);
	// 	}
	//
	// }
	//
	// // searchWord&#x3092;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x306B;&#x542B;&#x3080;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x307F;&#x3092;modal&#x306B;&#x8868;&#x793A;&#x3059;&#x308B;
	// function comSearchFile(searchWord) {
	// 	&apos;use strict&apos;;
	// 	const userId = getUserId();
	//
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/FileListMaker&apos;,
	// 		data : {
	// 			user_id: userId
	// 		},
	// 		context: {
	// 			userId: userId,
	// 			search_word : searchWord
	// 		},
	// 		dataType : &apos;json&apos;,
	// 	}).done(function (data) {
	// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 		setFileListFromObject(data); // filterFileNameMatch&#x306F;&#x73FE;&#x5728;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x30EA;&#x30B9;&#x30C8;&#x304B;&#x3089;&#x63A2;&#x3059;&#x305F;&#x3081;&#x3001;&#x5148;&#x306B;&#x5168;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x30EA;&#x30B9;&#x30C8;&#x306B;&#x5165;&#x308C;&#x3066;&#x304A;&#x304F;&#x5FC5;&#x8981;&#x304C;&#x3042;&#x308B;
	// 		const $matchFilesArray = filterFileNameMatch(this.search_word);
	// 		setFileListFromArray($matchFilesArray);
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos; in comSearchFile&apos;);
	// 	});
	// }
	//
	// function setFileListFromArray($array) {
	// 	&apos;use strict&apos;;
	// 	const $fileList = $(&apos;#file_list&apos;);
	//
	// 	$fileList.empty();
	//
	// 	if ($array.length &gt; 0) {
	//
	// 		for (let $obj of $array) {
	// 			if ($obj.attr(&apos;data-type&apos;) === &apos;file&apos;) {
	// 				const fileId = $obj.attr(&apos;data-file-id&apos;);
	// 				const filename = $obj.attr(&apos;data-file-name&apos;);
	// 				const $file = $(createFileElement(fileId, filename));
	// 				$fileList.append($file);
	// 			} else {
	// 				const directoryId = $obj.attr(&apos;data-directory-id&apos;);
	// 				const directoryname = $obj.attr(&apos;data-directory-name&apos;);
	// 				const $directory = $(&apos;&lt;a&gt;&apos;)
	// 					.addClass(&apos;directory&apos;)
	// 					.attr(&apos;data-type&apos;,&apos;directory&apos;)
	// 					.attr(&apos;data-directory-id&apos;,directoryId)
	// 					.attr(&apos;data-directory-name&apos;,directoryname)
	// 					.html(&apos;&lt;span class=&quot;glyphicon glyphicon-folder-close&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&apos;+ directoryname); // icon
	// 				$fileList.append($(&apos;&lt;li&gt;&apos;).append($directory));
	// 			}
	// 		}
	//
	// 	} else {
	// 		$fileList.append($(&apos;&lt;li&gt;&apos;).text(&apos;&#x8A72;&#x5F53;&#x3059;&#x308B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306F;&#x898B;&#x3064;&#x304B;&#x308A;&#x307E;&#x305B;&#x3093;&#x3067;&#x3057;&#x305F;&#x3002;&apos;));
	// 	}
	//
	// }
	//
	// // &#x958B;&#x304F;&#x30DC;&#x30BF;&#x30F3;&#x3092;&#x62BC;&#x3057;&#x305F;&#x6642;
	// function readyFileModal() {
	// 	&apos;use strict&apos;;
	// 	// comFileList(getUserId());
	// 	container.fileList().read();
	// 	$(&apos;#search_file&apos;).val(&apos;&apos;).focus();
	// }
	//
	// // &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x691C;&#x7D22;
	// function filterFileNameMatch(str) {
	// 	&apos;use strict&apos;;
	// 	const regexp = new RegExp(&apos;^&apos;+ str +&apos;.*&apos;);
	// 	const $array = []; // &#x30DE;&#x30C3;&#x30C1;&#x3057;&#x305F;jquery&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x5165;&#x308C;&#x308B;&#x914D;&#x5217;
	//
	// 	const $files = $(&apos;.file&apos;);
	// 	for (let i = 0,$file; ($file = $files.eq(i))[0]; i++) {
	// 		const filename = $file.attr(&apos;data-file-name&apos;);
	// 		console.log(filename);
	// 		if (regexp.test(filename)) {
	// 			$array.push($file);
	// 		}
	// 	}
	// 	const $directories = $(&apos;.directory&apos;);
	// 	for (let i = 0,$directory; ($directory = $directories.eq(i))[0]; i++) {
	// 		const directoryname = $directory.attr(&apos;data-directory-name&apos;);
	// 		if (regexp.test(directoryname)) {
	// 			$array.push($directory);
	// 		}
	// 	}
	//
	// 	return $array;
	// }
	//
	// function defaultNewFile() {
	// 	&apos;use strict&apos;;
	// 	newFile(&apos;newfile&apos;);
	// }
	//
	// function newFile(filename) {
	// 	&apos;use strict&apos;;
	// 	$(&apos;#sentence_container&apos;).empty();
	//
	// 	// appendParagraph(&apos;&apos;);
	// 	container.newFile(filename);
	// 	console.log(window.container);
	// 	// $(&apos;.row&apos;).addClass(&apos;display&apos;).children(&apos;.char&apos;).first().addClass(&apos;cursor&apos;);
	// 	$(&apos;#file_title&apos;).val(filename).attr(&apos;data-file-id&apos;,&apos;-1&apos;);
	// 	// addPageBreak();
	// 	gCursor.addCursorRow();
	// 	printDocInfo();
	// }
	//
	// // &#x540D;&#x524D;&#x3092;&#x3064;&#x3051;&#x3066;&#x4FDD;&#x5B58;
	// function comSaveAs(filename) {
	// 	&apos;use strict&apos;;
	//
	// 	if (filename.indexOf(&apos;&quot;&apos;) &gt; -1 || filename.indexOf(&apos;&lt;&apos;)&gt;-1 || filename.indexOf(&apos;&gt;&apos;)&gt;-1) {
	// 		userAlert(&apos;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x540D;&#x306B;&#x4F7F;&#x7528;&#x4E0D;&#x53EF;&#x80FD;&#x6587;&#x5B57;&#x304C;&#x542B;&#x307E;&#x308C;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;&apos;);
	// 		return;
	// 	}
	//
	// 	userAlert(&apos;&#x4FDD;&#x5B58;&#x3057;&#x3066;&#x3044;&#x307E;&#x3059;&apos;);
	//
	// 	const userId = getUserId();
	// 	const nowDate_ms = Date.now() + &apos;&apos;;
	// 	console.log(&apos;userId:&apos;+ userId);
	// 	console.log(&apos;nowDate_ms:&apos;+ nowDate_ms);
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/FileMaker&apos;,
	// 		data : {
	// 			filename: filename,
	// 			user_id: userId,
	// 			saved: nowDate_ms
	// 		},
	// 		context : {
	// 			userId: userId
	// 		},
	// 		dataType : &apos;json&apos;
	// 	}).done(function (data) {
	// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
	// 		$(&apos;#file_title&apos;).val(data.filename).attr(&apos;data-file-id&apos;,data.newFileId);
	// 		comSaveJsonFile();
	// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comSaveAs&apos;);
	// 	});
	// }
	//
	// function defaultDeleteFile() {
	// 	&apos;use strict&apos;;
	// 	const fileId = $(&apos;#file_title&apos;).attr(&apos;data-file-id&apos;);
	// 	if (fileId === &apos;-1&apos;) {
	// 		userAlert(&apos;&#x4FDD;&#x5B58;&#x3057;&#x3066;&#x3044;&#x306A;&#x3044;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3067;&#x3059;&#x3002;&apos;);
	// 		return;
	// 	}
	// 	comDeleteFile(fileId);
	// }
	//
	// function comDeleteFile(fileId) {
	// 	&apos;use strict&apos;;
	// 	const userId = getUserId();
	// 	if (!window.confirm(&apos;&#x672C;&#x5F53;&#x306B;&#x524A;&#x9664;&#x3057;&#x307E;&#x3059;&#x304B;:&apos;+ getFileNameFromFileId(fileId) + &apos;(&apos;+ fileId +&apos;)&apos;)) { return; }
	//
	// 	$.ajax({
	// 		type : &apos;POST&apos;,
	// 		url : &apos;/tategaki/DeleteFile&apos;,
	// 		data : {
	// 			user_id: userId,
	// 			file_id : fileId
	// 		},
	// 		context : {
	// 			fileId : fileId
	// 		},
	// 		dataType : &apos;json&apos;
	// 	}).done(function (data) {
	// 		const successRecord = data.successRecord; // &#x51E6;&#x7406;&#x884C;&#x6570;&#x306E;&#x6587;&#x5B57;&#x5217;
	// 		const result = data.result; // true or false &#x306E;&#x6587;&#x5B57;&#x5217;
	// 		if (successRecord === &apos;1&apos; &amp;&amp; result) {
	// 			// &#x5225;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306B;&#x79FB;&#x52D5;
	// 			const $files = $(&apos;#file_list .file&apos;);
	// 			for (let i = 0,$file; ($file = $files.eq(i))[0]; i++) {
	// 				if ($file.attr(&apos;data-file-id&apos;) != this.fileId) {
	// 					comReadJsonFile($file.attr(&apos;data-file-id&apos;));
	// 					break;
	// 				}
	// 			}
	// 			// comFileList(getUserId());
	// 			container.fileList().read();
	// 		} else {
	// 			alert(&apos;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x524A;&#x9664;&#x30A8;&#x30E9;&#x30FC;&#x3067;&#x3059;(&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x756A;&#x53F7;&#xFF1A;&apos;+ this.fileId + &apos;)&apos;);
	// 		}
	// 		}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
	// 				alert(&apos;Error:&apos; + textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comDeleteFile &apos;);
	// 			});
	// }
	//
	// function printDocInfo() {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;printDocInfo()&apos;);
	// 	$(&apos;#doc-info &gt; #str-num&apos;).text(getCurrentStringPosOnRow());
	// 	$(&apos;#doc-info &gt; #str-len&apos;).text(getStringLenOfCursorRow());
	// 	$(&apos;#doc-info &gt; #row-num&apos;).text(getCurrentRowOnPage());
	// 	$(&apos;#doc-info &gt; #row-len&apos;).text(getRowLenOnCursorPage());
	// 	$(&apos;#doc-info &gt; #page-num&apos;).text(getCurrentPagePos());
	// 	$(&apos;#doc-info &gt; #page-len&apos;).text(getPageLen());
	// }
	//
	// function setFileTitle(filename) {
	// 	&apos;use strict&apos;;
	// 	$(&apos;#file_title&apos;).val(filename);
	// }
	//
	// function comOpenNextFile() {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;comOpenNextFile()&apos;);
	// 	const $currentFileLi = $(&apos;#file_list &gt; li&apos;).has(&apos;.file[data-file-id=&quot;&apos;+ $(&apos;#file_title&apos;).attr(&apos;data-file-id&apos;) +&apos;&quot;]&apos;);
	//
	// 	let $nextFile;
	// 	if ($currentFileLi[0]) {
	// 		$nextFile = $currentFileLi.nextAll(&apos;li&apos;).first().children(&apos;.file&apos;);
	// 	} else {
	// 		$nextFile = $(&apos;#file_list .file&apos;).first();
	// 	}
	//
	// 	if ($nextFile[0]) comReadJsonFile($nextFile.attr(&apos;data-file-id&apos;));
	// }
	//
	// function comOpenPrevFile() {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;comOpenPrevFile()&apos;);
	// 	const $currentFileLi = $(&apos;#file_list &gt; li&apos;).has(&apos;.file[data-file-id=&quot;&apos;+ $(&apos;#file_title&apos;).attr(&apos;data-file-id&apos;) +&apos;&quot;]&apos;);
	// 	const $nextFile = $currentFileLi.prevAll(&apos;li&apos;).first().children(&apos;.file&apos;);
	// 	if ($nextFile[0]) comReadJsonFile($nextFile.attr(&apos;data-file-id&apos;));
	// }
	//
	// function comOpenFile(filename) {
	// 	&apos;use strict&apos;;
	// 	console.log(&apos;comOpenFile(&apos;+ filename +&apos;)&apos;);
	// 			const $file = getFileObjectFromFileName(filename);
	//
	// 			if (!$file[0]) { return; }
	//
	// 			comReadJsonFile($file.attr(&apos;data-file-id&apos;));
	//
	// 			}
				//
				// function getFileObjectFromFileName(filename) {
				// 	&apos;use strict&apos;;
				// 	// &#x540C;&#x4E00;&#x540D;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x8907;&#x6570;&#x5B58;&#x5728;&#x3059;&#x308B;&#x53EF;&#x80FD;&#x6027;&#x3092;&#x5FD8;&#x308C;&#x305A;&#x306B;
				// 	const $file = $(&apos;#file_list .file[data-file-name=&quot;&apos;+ filename +&apos;&quot;]&apos;);
				// 	return $file;
				// }
				//
				// function getFileNameFromFileId(fileId) {
				// 	&apos;use strict&apos;;
				// 	return $(&apos;#file_list .file[data-file-id=&quot;&apos;+ fileId +&apos;&quot;]&apos;).attr(&apos;data-file-name&apos;);
				// }
				//
				// function comDeleteFileFromFileName(filename) {
				// 	&apos;use strict&apos;;
				// 	console.log(&apos;comDeleteFileFromFileName()&apos;);
				// 	const $file = getFileObjectFromFileName(filename);
				// 	if (!$file[0]) { return; }
				//
				// 	let fileId;
				// 	if ($file.size() === 1) {
				// 		fileId = $file.attr(&apos;data-file-id&apos;);
				// 		comDeleteFile(fileId);
				// 	} else if ($file.size() &gt; 1) {
				// 		// &#x8A72;&#x5F53;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x8907;&#x6570;
				//
				// 		if (window.confirm(&apos;&#x540C;&#x4E00;&#x540D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x8907;&#x6570;&#x5B58;&#x5728;&#x3057;&#x307E;&#x3059;&#x3002;\n&#x3059;&#x3079;&#x3066;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x524A;&#x9664;&#x3057;&#x307E;&#x3059;&#x304B;&#x3002;\n&#x3053;&#x306E;&#x3046;&#x3061;&#x306E;&#x3069;&#x308C;&#x304B;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x524A;&#x9664;&#x3059;&#x308B;&#x5834;&#x5408;&#x306F;&#x30AD;&#x30E3;&#x30F3;&#x30BB;&#x30EB;&#x3057;&#x3001;&#x500B;&#x5225;&#x306B;&#x524A;&#x9664;&#x3057;&#x3066;&#x304F;&#x3060;&#x3055;&#x3044;&#x3002;&apos;)) {
				// 			$file.each(function () {
				// 				fileId = $(this).attr(&apos;data-file-id&apos;);
				// 				comDeleteFile(fileId);
				// 			});
				//
				// 		} else {
				// 			console.log(&apos;[&#x8907;&#x6570;&#x30D5;&#x30A1;&#x30A4;&#x30EB;]&#x524A;&#x9664;&#x3067;&#x304D;&#x307E;&#x305B;&#x3093;&#x3067;&#x3057;&#x305F;&#x3002;:&apos; + filename);
				// 		}
				//
				// 	}
				// }
				//
				// function comMoveFile(filename,newParentDirname) {
				// 	&apos;use strict&apos;;
				// 	const userId = getUserId();
				// 	// &#x30B3;&#x30DE;&#x30F3;&#x30C9;&#x304B;&#x3089;&#x306E;&#x5B9F;&#x884C;&#x306E;&#x5834;&#x5408;&#x3001;&#x30D5;&#x30A3;&#x30EB;&#x30BF;&#x30FC;&#x304C;&#x304B;&#x304B;&#x3063;&#x3066;file-list&#x5185;&#x304C;&#x4E00;&#x3064;&#x3060;&#x3051;&#x306B;&#x306A;&#x3063;&#x3066;&#x3057;&#x307E;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;
				// 	// &#x3044;&#x3063;&#x305F;&#x3093;&#x5168;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3092;&#x53D6;&#x5F97;&#x3057;&#x3066;&#x304B;&#x3089;&#x3067;&#x306A;&#x3044;&#x3068;$file&#x3068;$newParentDir&#x304C;&#x898B;&#x3064;&#x304B;&#x3089;&#x306A;&#x3044;
				// 	$.ajax({
				// 		type : &apos;POST&apos;,
				// 		url : &apos;/tategaki/FileListMaker&apos;,
				// 		data : {
				// 			user_id: userId
				// 		},
				// 		dataType : &apos;json&apos;
				// 	}).done(function (data) {
				// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
				// 		setFileListFromObject(data);
				// 		const $file = $(&apos;.file[data-file-name=&quot;&apos;+ filename +&apos;&quot;],.directory[data-directory-name=&quot;&apos;+ filename +&apos;&quot;]&apos;);
				// 		const $newParentDir = $(&apos;.directory[data-directory-name=&quot;&apos;+ newParentDirname +&apos;&quot;]&apos;);
				// 		let fileId;
				// 		let newParentDirId;
				// 		if ($file[0] &amp;&amp; $newParentDir[0]) {
				// 			fileId = $file.attr(&apos;data-type&apos;)===&apos;file&apos; ? $file.attr(&apos;data-file-id&apos;) : $file.attr(&apos;data-directory-id&apos;);
				// 			newParentDirId = $newParentDir.attr(&apos;data-directory-id&apos;);
				// 			comMvFileToDirectory(fileId,newParentDirId);
				// 		}
				// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
				// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos; in comFileList&apos;);
				// 	});
				// }
				//
				// function comMvFileToDirectory(fileId,newParentDirId) {
				// 	&apos;use strict&apos;;
				// 	// &#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x3092;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306B;&#x5165;&#x308C;&#x308B;&#x306E;&#x3082;&#x53EF;
				// 	console.log(&apos;comMvFileToDirectory:file[&apos;+ fileId +&apos;],newParentDir[&apos;+ newParentDirId +&apos;]&apos;);
				// 	const userId = getUserId();
				//
				// 	$.ajax({
				// 		type : &apos;POST&apos;,
				// 		url : &apos;/tategaki/MoveFile&apos;,
				// 		data : {
				// 			user_id: userId,
				// 			file_id: fileId,
				// 			directory_id: newParentDirId
				// 		},
				// 		dataType : &apos;json&apos;,
				// 		context: {
				// 			userId: userId
				// 		}
				// 	}).done(function (json) {
				// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
				// 		// comFileList(this.userId);
				// 		container.fileList().read();
				// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
				// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comMvFileToDirectory&apos;);
				// 	});
				// }
				//
				// function comMakeDirectory(directoryname) {
				// 	&apos;use strict&apos;;
				// 	console.log(&apos;make directory:&apos;+ directoryname);
				// 	const userId = getUserId();
				// 	const nowDate_ms = Date.now() + &apos;&apos;;
				// 	console.log(&apos;user-id:&apos;+ userId);
				// 	console.log(&apos;nowDate_ms:&apos;+ nowDate_ms);
				//
				// 	$.ajax({
				// 		type : &apos;POST&apos;,
				// 		url : &apos;/tategaki/DirectoryMaker&apos;,
				// 		data : {
				// 			user_id: userId,
				// 			directoryname: directoryname,
				// 			saved: nowDate_ms
				// 		},
				// 		dataType : &apos;json&apos;,
				// 		context: {
				// 			userId: userId
				// 		}
				// 	}).done(function (json) {
				// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
				// 		// comFileList(this.userId);
				// 		container.fileList().read();
				// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
				// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comMakeDirectory&apos;);
				// 	});
				// }
				//
				// function comDeleteDirectory(directoryId,option) {
				// 	&apos;use strict&apos;;
				// 	// &#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x5185;&#x306B;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x304C;&#x3042;&#x308B;&#x3068;&#x304D;&#x3001;&#x5F37;&#x5236;&#x7684;&#x306B;&#x4E2D;&#x306E;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x3054;&#x3068;&#x524A;&#x9664;&#x3059;&#x308B;&#x3068;&#x304D;&#x306E;&#x307F;option&#x306F;true
				// 	const userId = getUserId();
				//
				// 	$.ajax({
				// 		type : &apos;POST&apos;,
				// 		url : &apos;/tategaki/DeleteDirectory&apos;,
				// 		data : {
				// 			directory_id: directoryId,
				// 			option: option
				// 		},
				// 		dataType : &apos;json&apos;,
				// 		context: {
				// 			userId: userId
				// 		}
				// 	}).done(function (json) {
				// 		// &#x8868;&#x793A;&#x30C7;&#x30FC;&#x30BF;&#x3092;&#x53D7;&#x3051;&#x53D6;&#x3063;&#x3066;&#x304B;&#x3089;&#x306E;&#x51E6;&#x7406;
				// 		// comFileList(this.userId);
				// 		container.fileList().read();
				// 		if (json.result === &apos;notEmpty&apos;) {
				// 			userAlert(&apos;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x304C;&#x7A7A;&#x3067;&#x306F;&#x306A;&#x3044;&#x306E;&#x3067;&#x524A;&#x9664;&#x3067;&#x304D;&#x307E;&#x305B;&#x3093;&#x3067;&#x3057;&#x305F;&#x3002;&apos;);
				// 		}
				// 	}).fail(function (XMLHttpRequest, textStatus, errorThrown) {
				// 		alert(&apos;Error:&apos;+ textStatus + &apos;:\n&apos; + errorThrown + &apos;:status=&apos; + XMLHttpRequest.status + &apos;in comDeleteDirectory&apos;);
				// 	});
				// }
				//
				// function comDeleteDirectoryFromName(directoryname,option) {
				// 	&apos;use strict&apos;;
				// 	const $dir = $(&apos;.directory[data-directory-name=&quot;&apos;+ directoryname +&apos;&quot;]&apos;);
				// 	if (!$dir[0]) { return; }
				// 	let dirId;
				//
				// 	if ($dir.size() === 1) {
				// 		dirId = $dir.attr(&apos;data-directory-id&apos;);
				// 		comDeleteDirectory(dirId,option);
				// 	} else if ($dir.size() &gt; 1) {
				//
				// 		if (window.confirm(&apos;&#x540C;&#x4E00;&#x540D;&#x306E;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x304C;&#x8907;&#x6570;&#x5B58;&#x5728;&#x3057;&#x307E;&#x3059;&#x3002;\n&#x3059;&#x3079;&#x3066;&#x306E;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x3092;&#x524A;&#x9664;&#x3057;&#x307E;&#x3059;&#x304B;&#x3002;&apos;)) {
				// 			$dir.each(function () {
				// 				dirId = $(this).attr(&apos;data-directory-id&apos;);
				// 				comDeleteFile(dirId,option);
				// 			});
				// 		} else {
				// 			console.log(&apos;[&#x8907;&#x6570;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;]&#x524A;&#x9664;&#x3067;&#x304D;&#x307E;&#x305B;&#x3093;&#x3067;&#x3057;&#x305F;&#x3002;:&apos; + directoryname);
				// 		}
				//
				// 	}
				// }
				//
				// function getCurrentFileId() {
				// 	&apos;use strict&apos;;
				// 	const fileId = $(&apos;#file_title&apos;).attr(&apos;data-file-id&apos;);
				// 	return fileId;
				// }
				//
				// // ====================================================
				// // 	&#x30E6;&#x30FC;&#x30C6;&#x30A3;&#x30EA;&#x30C6;&#x30A3;(label:utility)
				// // ====================================================
				// $.fn.extend( {
				// 	nextObj:function(selector,bl) {
				// 		&apos;use strict&apos;;
				// 		// selector&#x306B;&#x5408;&#x81F4;&#x3059;&#x308B;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x7FA4;&#x306E;&#x4E2D;&#x3067;&#x3001;$obj&#x306E;&#x6B21;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x8FD4;&#x3059;
				// 		// bl: true&#x306A;&#x3089;&#x3001;&#x6700;&#x5F8C;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x304B;&#x3089;nextObj&#x3092;&#x3059;&#x308B;&#x3068;&#x6700;&#x521D;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x8FD4;&#x3059;
				// 		const $objs = $(selector);
				// 		const objLen = $objs.length;
				// 		const currentIndex = $objs.index(this);
				//
				// 		if (currentIndex === objLen -1) {
				// 			if (bl) {
				// 				return $objs.first();
				// 			} else {
				// 				return $();
				// 			}
				// 		}
				//
				// 		return $objs.eq(currentIndex + 1);
				// 	},
				// 	prevObj:function (selector,bl) {
				// 		&apos;use strict&apos;;
				// 		const $objs = $(selector);
				// 		const currentIndex = $objs.index(this);
				// 		if (currentIndex === 0) {
				// 			if (bl) {
				// 				return $objs.last();
				// 			} else {
				// 				return $();
				// 			}
				// 		} else {
				// 			return $objs.eq(currentIndex -1);
				// 		}
				// 	},
				// 	addId:function (id) {
				// 		&apos;use strict&apos;;
				// 		$(&apos;#&apos;+id).removeAttr(&apos;id&apos;);
				// 		this.attr(&apos;id&apos;,id);
				// 		return this;
				// 	},
				// 	// DOM&#x8981;&#x7D20;&#x306E;&#x6587;&#x5B57;&#x5217;&#x8868;&#x73FE;&#x3092;&#x8FD4;&#x3059;
				// 	toString:function () {
				// 		&apos;use strict&apos;;
				// 		const $tmp = $(&apos;&lt;div&gt;&apos;);
				// 		return $tmp.append(this.clone()).html();
				// 	},
				// 	// &#xFF12;&#x3064;&#x306E;&#x8981;&#x7D20;&#x306E;&#x4E2D;&#x5FC3;&#x70B9;&#x540C;&#x58EB;&#x306E;&#x8DDD;&#x96E2;&#x3092;&#x6C42;&#x3081;&#x308B;
				// 	computeDistanceBetweenObj:function($other) {
				// 		&apos;use strict&apos;;
				// 		const tCenterPos = this.computeCenterPoint();
				// 		const oCenterPos = $other.computeCenterPoint();
				// 		return jQuery.computeDistanceP2P(tCenterPos.x,tCenterPos.y,oCenterPos.x,oCenterPos.y);
				// 	},
				// 	// &#x3042;&#x308B;&#x70B9;&#x3068;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x4E2D;&#x5FC3;&#x70B9;&#x306E;&#x8DDD;&#x96E2;&#x3092;&#x6C42;&#x3081;&#x308B;
				// 	computeDistanceP2O:function(po) {
				// 		&apos;use strict&apos;;
				// 		// ex: po = {x:10,y:10}
				// 		const objPos = this.computeCenterPoint();
				// 		return jQuery.computeDistanceP2P(po.x,po.y,objPos.x,objPos.y);
				// 	},
				// 	// &#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x306E;&#x4E2D;&#x5FC3;&#x70B9;&#x306E;&#x5EA7;&#x6A19;&#x3092;&#x6C42;&#x3081;&#x308B;
				// 	computeCenterPoint:function() {
				// 		&apos;use strict&apos;;
				// 		const objPos = this.getPosObj();
				// 		const objWidth = parseInt(this.css(&apos;width&apos;));
				// 		const objHeight = parseInt(this.css(&apos;height&apos;));
				// 		return {
				// 			x: objPos.x + objWidth/2,
				// 			y: objPos.y + objHeight/2
				// 		}
				// 	},
				// 	// window&#x4E0A;&#x306E;&#x7D76;&#x5BFE;&#x5EA7;&#x6A19;
				// 	getPosObj:function() {
				// 		&apos;use strict&apos;;
				// 		const offset = this.offset();
				// 		const x = offset.left;
				// 		const y = offset.top;
				// 		return {
				// 			&apos;x&apos; : x,
				// 			&apos;y&apos; : y
				// 		}
				// 	},
				// 	// &#x6B63;&#x898F;&#x8868;&#x73FE;&#x306B;&#x30DE;&#x30C3;&#x30C1;&#x3057;&#x305F;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x53D6;&#x308A;&#x9664;&#x304F;
				// 	// &#x8907;&#x6570;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x5916;&#x3059;&#x5834;&#x5408;&#x306B;&#x306F;g&#x30AA;&#x30D7;&#x30B7;&#x30E7;&#x30F3;
				// 	removeClassByRegExp:function (regexp) {
				// 		&apos;use strict&apos;;
				// 		const strClass = this.attr(&apos;class&apos;) || &apos;&apos;; // class&#x304C;&#x4E00;&#x3064;&#x3082;&#x306A;&#x3044;&#x5834;&#x5408;&#x3001;attr()&#x306F;undefined&#x3092;&#x8FD4;&#x3057;&#x3066;&#x304F;&#x308B;&#x305F;&#x3081;&#x3001;match()&#x304C;&#x4F7F;&#x3048;&#x306A;&#x3044;
				// 		const classArr = strClass.match(regexp) || []; // &#x6B63;&#x898F;&#x8868;&#x73FE;&#x306B;&#x30DE;&#x30C3;&#x30C1;&#x3057;&#x306A;&#x3044;&#x5834;&#x5408;&#x3001;null&#x304C;&#x8FD4;&#x3063;&#x3066;&#x304F;&#x308B;
				// 		for (let className of classArr) {
				// 			this.removeClass(className);
				// 		}
				// 		return this;
				// 	},
				// 	hasClassByRegExp:function(regexp) {
				// 		&apos;use strict&apos;;
				// 		const strClass = this.attr(&apos;class&apos;) || &apos;&apos;;
				// 		return regexp.test(strClass);
				// 	},
				// 	// &#x6B63;&#x898F;&#x8868;&#x73FE;&#x306B;&#x5408;&#x3046;&#x30AF;&#x30E9;&#x30B9;&#x3092;&#x6587;&#x5B57;&#x5217;&#x3067;&#x8FD4;&#x3059;
				// 	getOneClassByRegExp:function(regexp) {
				// 		&apos;use strict&apos;;
				// 		const strClass = this.attr(&apos;class&apos;) || &apos;&apos;; // class&#x304C;&#x4E00;&#x3064;&#x3082;&#x306A;&#x3044;&#x5834;&#x5408;&#x3001;attr()&#x306F;undefined&#x3092;&#x8FD4;&#x3057;&#x3066;&#x304F;&#x308B;&#x305F;&#x3081;&#x3001;match()&#x304C;&#x4F7F;&#x3048;&#x306A;&#x3044;
				// 		return regexp.test(strClass) ? strClass.match(regexp)[0] : null;
				// 	},
				// 	addCursor: function(opt_bl) {
				// 		&apos;use strict&apos;;
				// 		// opt_bl: true&#x306A;&#x3089;&#x3001;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x753B;&#x9762;&#x4E2D;&#x592E;&#x306B;&#x914D;&#x7F6E;&#x3059;&#x308B;(&#x4E8C;&#x884C;&#x4EE5;&#x4E0A;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x884C;&#x304C;&#x306F;&#x307F;&#x51FA;&#x3057;&#x305F;&#x5834;&#x5408;)
				// 		console.log(&apos;addCursor&apos;);
				// 		if (!this.hasClass(&apos;char&apos;)) return this;
				//
				// 		const $prevCursor = $(&apos;.cursor&apos;);
				// 		const $prevChar = this.prev(&apos;.char&apos;);
				//
				// 		$prevCursor.removeClass(&apos;cursor&apos;);
				// 		console.log(&apos;after prevcursor add class&apos;);
				// 		this.addClass(&apos;cursor&apos;);
				// 		gCursor.addCursorRow();
				//
				// 		// font&#x304C;&#x4ED8;&#x3044;&#x3066;&#x3044;&#x308B;&#x6587;&#x5B57;&#x306E;&#x6B21;&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x304C;&#x6765;&#x305F;&#x5834;&#x5408;&#x3001;&#x305D;&#x306E;font&#x3092;&#x30AA;&#x30F3;&#x306B;&#x3059;&#x308B;
				// 		if ($prevChar.hasClass(&apos;decolation-font-bold&apos;)) {
				// 			document.getElementById(&apos;btn-bold&apos;).classList.add(&apos;active&apos;);
				// 		} else {
				// 			document.getElementById(&apos;btn-bold&apos;).classList.remove(&apos;active&apos;);
				// 		}
				// 		if ($prevChar.hasClass(&apos;decolation-font-italic&apos;)) {
				// 			document.getElementById(&apos;btn-italic&apos;).classList.add(&apos;active&apos;);
				// 		} else {
				// 			document.getElementById(&apos;btn-italic&apos;).classList.remove(&apos;active&apos;);
				// 		}
				//
				// 		// changeDisplayRow(opt_bl);
				// 		// changeDisplayChar();
				// 		// printDocInfo();
				// 		return this;
				// 	}
				// });
				//
				// $.extend({
				// 	// &#xFF12;&#x70B9;&#x9593;&#x306E;&#x8DDD;&#x96E2;&#x3092;&#x6C42;&#x3081;&#x308B;
				// 	computeDistanceP2P:function(x1,y1,x2,y2) {
				// 		&apos;use strict&apos;;
				// 		// &#xFF12;&#x4E57;&#x3092;&#x4F7F;&#x3063;&#x3066;&#x3044;&#x308B;&#x306E;&#x3067;&#x3001;&#x623B;&#x308A;&#x5024;&#x306F;&#x5FC5;&#x305A;&#x6B63;&#x306E;&#x6570;&#x306B;&#x306A;&#x308B;
				// 		// &#x221A;{(b.x - a.x)^2+ (b.y - a.y)^2}
				// 		return Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));
				// 	}
				// });
				//
				// // selector&#x306B;&#x5408;&#x81F4;&#x3059;&#x308B;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x7FA4;&#x306E;&#x4E2D;&#x3067;&#x3001;$obj&#x306E;&#x6B21;&#x306E;&#x30AA;&#x30D6;&#x30B8;&#x30A7;&#x30AF;&#x30C8;&#x3092;&#x8FD4;&#x3059;
				// function nextObj(selector,$obj) {
				// 	&apos;use strict&apos;;
				// 	const $objs = $(selector);
				// 	const currentIndex = $objs.index($obj);
				// 	return $objs.eq(currentIndex + 1);
				// }
				//
				// function prevObj(selector,$obj) {
				// 	&apos;use strict&apos;;
				// 	const $objs = $(selector);
				// 	const currentIndex = $objs.index($obj);
				// 	const newObj = $objs.eq(currentIndex - 1);
				//
				// 	if (newObj[0] === $objs.last()[0]) {
				// 		// eq()&#x306B;&#x8CA0;&#x306E;&#x5F15;&#x6570;&#x3092;&#x6E21;&#x3059;&#x3068;&#x3001;&#x6700;&#x5F8C;&#x306E;&#x8981;&#x7D20;&#x306B;&#x623B;&#x3063;&#x3066;&#x3057;&#x307E;&#x3046;&#x306E;&#x3092;&#x9632;&#x6B62;
				// 		return $();
				// 	} else {
				// 		return newObj;
				// 	}
				// }
				//
				// function hasClass(elem,classRegExp) {
				// 	&apos;use strict&apos;;
				// 	if (classRegExp.test(elem.className)) {
				// 		return true;
				// 	}
				// 	return false;
				// }
				//
				// // baseArray&#x3092;cnt&#x500B;&#x305A;&#x3064;&#x306E;&#x914D;&#x5217;&#x306B;&#x5206;&#x5272;&#x3059;&#x308B;
				// function splitArray(baseArray,cnt) {
				// 	&apos;use strict&apos;;
				// 	const b = baseArray.length;
				// 	const newArray = [];
				//
				// 	for (let i = 0,j,p; i &lt; Math.ceil(b/cnt); i++) {
				// 		j = i*cnt;
				// 		p = baseArray.slice(j,j+cnt);
				// 		newArray.push(p);
				// 	}
				// 	return newArray;
				// }
				//
				// // &#x8981;&#x7D20;&#x5185;&#x3092;&#x7A7A;&#x306B;&#x3059;&#x308B;
				// function empty(elem) {
				// 	&apos;use strict&apos;;
				// 	while (elem.childNodes.length &gt; 0) {
				// 		elem.removeChild(elem.firstChild);
				// 	}
				// }
				//
				// // &#x30CE;&#x30FC;&#x30C9;&#x30EA;&#x30B9;&#x30C8;elements&#x306E;&#x3046;&#x3061;&#x3001;target&#x306E;&#x30A4;&#x30F3;&#x30C7;&#x30C3;&#x30AF;&#x30B9;&#x3092;&#x8FD4;&#x3059;
				// function index(target,elements) {
				// 	&apos;use strict&apos;;
				// 	for (let i = 0,elem; elem = elements[i];i++) {
				// 		if (elem == target)
				// 			return i;
				// 	}
				//
				// 	return -1;
				// }
				//
				// function getUserId() {
				// 	&apos;use strict&apos;;
				// 	const userId = $(&apos;#site_title&apos;).attr(&apos;data-user-id&apos;);
				// 	return userId;
				// }
				//
				// // ====================================================
				// // 	initialize(label:init)
				// // ====================================================
				//
				// setCursorLine();
				// defaultNewFile();
				// comFileList(globalUserId);
				// container.fileList().read();
				// Event
				// document.addEventListener(&apos;keydown&apos;,keydownOnDoc ,false);
				// addFocusEvent(&apos;file_title&apos;);
				// $(&apos;body&apos;).on(&apos;keyup&apos;,&apos;#search_file&apos;,keyupInSearchFileInput);
				// $(&apos;body&apos;).on(&apos;click&apos;,&apos;#file_list .file&apos;,function (e) {
				// 	&apos;use strict&apos;;
				// 	const fileId = $(this).attr(&apos;data-file-id&apos;);
				// 	// comReadJsonFile(fileId);
				// 	container.readFile({
				// 		user_id: getUserId(),
				// 		file_id: fileId
				// 	});
					// $(&apos;#file_list_modal&apos;).modal(&apos;hide&apos;);
				// });
				// $(&apos;body&apos;).on(&apos;click&apos;,&apos;.paragraph &gt; .row&apos;,moveCursorToClickPos);
				// $(&apos;body&apos;).on(&apos;mousewheel&apos;,&apos;#sentence_container&apos;,wheelEvent);
				// document.getElementById(&apos;menu_new&apos;).addEventListener(&apos;click&apos;,function (e) { defaultNewFile(); },false);
				// document.getElementById(&apos;menu_save&apos;).addEventListener(&apos;click&apos;,function (e) { comSaveJsonFile(); },false);
				// document.getElementById(&apos;menu_delete&apos;).addEventListener(&apos;click&apos;,function (e) { defaultDeleteFile(); },false);
				// document.getElementById(&apos;modal_fileopen_link&apos;).addEventListener(&apos;click&apos;,function (e) { readyFileModal(); },false);
				// document.getElementById(&apos;test&apos;).addEventListener(&apos;click&apos;,function (e) {
				// 	&apos;use strict&apos;;
				// 	// addDisplayRow(0,getDisplayRowLen());
				// 	// gCursor.init();
				// 	// addPageBreak();
				// 	// printDocInfo(); // page-break&#x306A;&#x3069;&#x304C;&#x306A;&#x3051;&#x308C;&#x3070;&#x30D5;&#x30EA;&#x30FC;&#x30BA;&#x3059;&#x308B;(&#x8A08;&#x7B97;&#x306B;&#x7121;&#x9650;&#x30EB;&#x30FC;&#x30D7;&#xFF1F;)
				// },false);
				// $(window).resize(function () {
				// 	&apos;use strict&apos;;
				// 	// resetDisplayChar();
				// });
				// $(&apos;#file_list_modal&apos;).on(&apos;shown.bs.modal&apos;,function (e) {
				// 	&apos;use strict&apos;;
				// 	// modal&#x304C;&#x5B8C;&#x5168;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x304B;&#x3089;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;
				// 	$(&apos;#search_file&apos;).focus();
				// });
				// $(&apos;div.modal&apos;).on(&apos;shown.bs.modal&apos;,function (e) {
				// 	&apos;use strict&apos;;
				// 	// modal&#x304C;&#x5B8C;&#x5168;&#x306B;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x304B;&#x3089;&#x306E;&#x30A4;&#x30D9;&#x30F3;&#x30C8;
				// 	// document.removeEventListener(&apos;keydown&apos;,keydownOnDoc,false);
				// 	// container.removeKeydownEventListener();
				// });
				// $(&apos;div.modal&apos;).on(&apos;hidden.bs.modal&apos;,function (e) {
				// 	&apos;use strict&apos;;
				// 	if ($(&apos;#command&apos;).hasClass(&apos;active&apos;)) { return; }
				// 	// document.addEventListener(&apos;keydown&apos;,keydownOnDoc,false);
				// 	// container.addKeydownEventListener();
				// });
				// function addFocusEvent(id) {
				// 	&apos;use strict&apos;;
				// 	document.getElementById(id).addEventListener(&apos;focus&apos;,function (e) {
				// 		document.removeEventListener(&apos;keydown&apos;,keydownOnDoc,false);
				// 	},false);
				// 	document.getElementById(id).addEventListener(&apos;blur&apos;,function (e) {
				// 		document.addEventListener(&apos;keydown&apos;,keydownOnDoc,false);
				// 	});
				// 	document.getElementById(id).addEventListener(&apos;keyup&apos;,function (e) {
				// 		&apos;use strict&apos;;
				// 		const keycode = getKeyCode(e);
				// 		if (keycode === 13) {
				// 			// enter
				// 		}
				// 	});
				// }
				// // palette
				// // color
				// document.getElementById(&apos;color_btn&apos;).addEventListener(&apos;click&apos;,function (e) {
				// 	&apos;use strict&apos;;
				// 	// &#x6587;&#x5B57;&#x8272;&#x30DC;&#x30BF;&#x30F3;&#x3092;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3059;&#x308B;&#x3068;&#x9078;&#x629E;&#x3057;&#x3066;&#x3044;&#x308B;&#x6587;&#x5B57;&#x306E;&#x8272;&#x304C;&#x5909;&#x308F;&#x308B;
				// 	const eBtn = document.getElementById(&apos;color_btn&apos;);
				// 	const colors = eBtn.className.match(/select-(\S+)/);
				// 	let color;
				//
				// 	if (colors == null) {
				// 		color = &apos;black&apos;;
				// 	} else {
				// 		color = colors[1];
				// 	}
				//
				// 	setColorOnSelect(color);
				// },false);
				//
				// setSelectColorClickEvent(&apos;black&apos;);
				// setSelectColorClickEvent(&apos;red&apos;);
				// setSelectColorClickEvent(&apos;blue&apos;);
				// function setSelectColorClickEvent(color) {
				// 	// &#x6587;&#x5B57;&#x8272;(&#x30C9;&#x30ED;&#x30C3;&#x30D7;&#x30C0;&#x30A6;&#x30F3;&#x306E;&#x65B9;)&#x3092;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3059;&#x308B;&#x3068;&#x30DC;&#x30BF;&#x30F3;&#x306E;&#x8272;&#x304C;&#x5909;&#x308F;&#x308B;&#x30A4;&#x30D9;&#x30F3;&#x30C8;&#x3092;&#x4ED8;&#x52A0;&#x3059;&#x308B;
				// 	document.getElementById(&apos;select_color_&apos;+color).addEventListener(&apos;click&apos;,function (e) {
				// 		const elSel = document.getElementById(&apos;color_btn&apos;);
				// 		$(elSel).removeClassByRegExp(/select-\S+/);
				// 		setColorOnSelect(color);
				// 		if (color === &apos;black&apos;) return;
				// 		elSel.classList.add(&apos;select-&apos;+color);
				// 	},false);
				// }
				//
				// // bold italic
				// document.getElementById(&apos;btn-bold&apos;).addEventListener(&apos;click&apos;,function(e) {
				// 	&apos;use strict&apos;;
				// 	const eBtn = document.getElementById(&apos;btn-bold&apos;);
				// 	const eSelChars = findSelectElem(true);
				//
				// 	eBtn.classList.toggle(&apos;active&apos;);
				// 	if (/active/.test(eBtn.className)) {
				// 		// &#x30DC;&#x30BF;&#x30F3;&#x3092;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3057;&#x305F;&#x7D50;&#x679C;&#x3001;active&#x306B;&#x306A;&#x3063;&#x305F;
				// 		for (let eChar of eSelChars) {
				// 			eChar.classList.add(&apos;decolation-font-bold&apos;);
				// 		}
				// 	} else {
				// 		// &#x30DC;&#x30BF;&#x30F3;&#x3092;&#x30AF;&#x30EA;&#x30C3;&#x30AF;&#x3057;&#x305F;&#x7D50;&#x679C;&#x3001;&#x89E3;&#x9664;&#x3055;&#x308C;&#x305F;
				// 		for (let eChar of eSelChars) {
				// 			eChar.classList.remove(&apos;decolation-font-bold&apos;);
				// 		}
				// 	}
				// },false);
				// document.getElementById(&apos;btn-italic&apos;).addEventListener(&apos;click&apos;,function(e) {
				// 	&apos;use strict&apos;;
				// 	const eBtn = document.getElementById(&apos;btn-italic&apos;);
				// 	const eSelChars = findSelectElem(true);
				//
				// 	eBtn.classList.toggle(&apos;active&apos;);
				// 	if (/active/.test(eBtn.className)) {
				// 		for (let eChar of eSelChars) {
				// 			eChar.classList.add(&apos;decolation-font-italic&apos;);
				// 		}
				// 	} else {
				// 		for (let eChar of eSelChars) {
				// 			eChar[i].classList.remove(&apos;decolation-font-italic&apos;);
				// 		}
				// 	}
				// },false);
				// // selection
				// // &#x9078;&#x629E;&#x7BC4;&#x56F2;&#x306B;&#x6587;&#x5B57;&#x88C5;&#x98FE;&#x304C;&#x65BD;&#x3055;&#x308C;&#x3066;&#x3044;&#x308C;&#x3070;&#x30A2;&#x30AF;&#x30C6;&#x30A3;&#x30D6;&#x306B;
				// document.getElementById(&apos;sentence_container&apos;).addEventListener(&apos;mouseup&apos;,function(e) {
				// 	&apos;use strict&apos;;
				// 	const eSelChars = findSelectElem();
				// 	let bBold = false;
				// 	let bItalic = false;
				//
				// 	for (let eChar of eSelChars) {
				// 		if (eChar.classList.contains(&apos;decolation-font-bold&apos;)) { bBold = true; }
				// 		if (eChar.classList.contains(&apos;decolation-font-italic&apos;)) { bItalic = true; }
				// 	}
				// 	if (bBold) {
				// 		document.getElementById(&apos;btn-bold&apos;).classList.add(&apos;active&apos;);
				// 	} else {
				// 		document.getElementById(&apos;btn-bold&apos;).classList.remove(&apos;active&apos;);
				// 	}
				// 	if (bItalic) {
				// 		document.getElementById(&apos;btn-italic&apos;).classList.add(&apos;active&apos;);
				// 	} else {
				// 		document.getElementById(&apos;btn-italic&apos;).classList.remove(&apos;active&apos;);
				// 	}
				//
				// 	// &#x9078;&#x629E;&#x3057;&#x305F;&#x6700;&#x5F8C;&#x306E;char&#x306B;&#x30AB;&#x30FC;&#x30BD;&#x30EB;&#x3092;&#x5F53;&#x3066;&#x308B;
				// 	if (eSelChars.length &gt; 0) {
				// 		$(eSelChars[eSelChars.length -1]).nextObj(&apos;#sentence_container .char&apos;).addCursor();
				// 	}
				// },false);
				// // align
				// setTextAlignClickEvent(&apos;left&apos;);
				// setTextAlignClickEvent(&apos;center&apos;);
				// setTextAlignClickEvent(&apos;right&apos;);
				// function setTextAlignClickEvent(align) {
				// 	&apos;use strict&apos;;
				// 	document.getElementById(&apos;text-btn-&apos;+ align).addEventListener(&apos;click&apos;,function(e) {
				// 		setAlignCursorParagraph(align);
				// 	},false);
				// }
});

</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.8)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
